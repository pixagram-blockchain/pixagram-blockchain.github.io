/*! For license information please see chunk_11.min.js.LICENSE.txt */
"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([[11,12],{862:(e,t,n)=>{n(307)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},937:(e,t,n)=>{n.d(t,{A:()=>b});var r=n(417),o=n(416),a=n(414),i=n(418),s=n(419),l=n(420),c=n(422),u=n(421),d=n(423),p=n(424),f=n(265),m=n(425),h=n(215),v=n(381),y=n(260),g=(0,r.h)((0,o.A)(a.Ay,i.Ay,s.Ay,l.Ay,c.Ay,u.Ay,d.A,p.Ay,f.A,m.Ay));const b=(_=(0,v.A)("div"),function(e,t){return _(e,(0,h.A)({defaultTheme:y.A},t))})(g,{name:"MuiBox"});var _},952:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(215),o=n(237),a=n(228),i=n(382),s=n(657),l=n(235),c=n(935),u=a.forwardRef((function(e,t){var n=e.children,l=e.classes,u=e.className,d=e.component,p=void 0===d?"div":d,f=e.disablePointerEvents,m=void 0!==f&&f,h=e.disableTypography,v=void 0!==h&&h,y=e.position,g=e.variant,b=(0,o.A)(e,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),_=(0,c.t)()||{},w=g;return g&&_.variant,_&&!w&&(w=_.variant),a.createElement(c.A.Provider,{value:null},a.createElement(p,(0,r.A)({className:(0,i.default)(l.root,u,"end"===y?l.positionEnd:l.positionStart,m&&l.disablePointerEvents,_.hiddenLabel&&l.hiddenLabel,"filled"===w&&l.filled,"dense"===_.margin&&l.marginDense),ref:t},b),"string"!=typeof n||v?n:a.createElement(s.A,{color:"textSecondary"},n)))}));const d=(0,l.A)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(u)},1557:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.A=i},1558:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");t.A=i},1575:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined");t.A=i},1577:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M9 16.17L5.53 12.7a.9959.9959 0 00-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 00-1.41 0L9 16.17z"}),"CheckRounded");t.A=i},1580:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(228);const o=(0,n(462).A)(r.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},1589:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"}),"ErrorRounded");t.A=i},1647:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(237),o=n(215),a=n(228),i=n(382),s=n(264),l=n(235),c=n(456),u=n(439),d=a.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,d=e.disabled,p=void 0!==d&&d,f=e.disableFocusRipple,m=void 0!==f&&f,h=e.onChange,v=e.onClick,y=e.selected,g=e.size,b=void 0===g?"medium":g,_=e.value,w=(0,r.A)(e,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]);return a.createElement(c.A,(0,o.A)({className:(0,i.default)(s.root,l,p&&s.disabled,y&&s.selected,"medium"!==b&&s["size".concat((0,u.A)(b))]),disabled:p,focusRipple:!m,ref:t,onClick:function(e){v&&(v(e,_),e.isDefaultPrevented())||h&&h(e,_)},onChange:h,value:_,"aria-pressed":y},w),a.createElement("span",{className:s.label},n))}));const p=(0,l.A)((function(e){return{root:(0,o.A)({},e.typography.button,{boxSizing:"border-box",borderRadius:e.shape.borderRadius,padding:11,border:"1px solid ".concat((0,s.X4)(e.palette.action.active,.12)),color:(0,s.X4)(e.palette.action.active,.38),"&$selected":{color:e.palette.action.active,backgroundColor:(0,s.X4)(e.palette.action.active,.12),"&:hover":{backgroundColor:(0,s.X4)(e.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:(0,s.X4)(e.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:(0,s.X4)(e.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:e.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:e.typography.pxToRem(15)}}}),{name:"MuiToggleButton"})(d)},1648:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(215),o=n(237),a=n(228),i=(n(395),n(382));function s(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.indexOf(e)>=0:e===t)}var l=n(235),c=n(439),u=a.forwardRef((function(e,t){var n=e.children,l=e.classes,u=e.className,d=e.exclusive,p=void 0!==d&&d,f=e.onChange,m=e.orientation,h=void 0===m?"horizontal":m,v=e.size,y=void 0===v?"medium":v,g=e.value,b=(0,o.A)(e,["children","classes","className","exclusive","onChange","orientation","size","value"]),_=function(e,t){if(f){var n,r=g&&g.indexOf(t);g&&r>=0?(n=g.slice()).splice(r,1):n=g?g.concat(t):[t],f(e,n)}},w=function(e,t){f&&f(e,g===t?null:t)};return a.createElement("div",(0,r.A)({role:"group",className:(0,i.default)(l.root,u,"vertical"===h&&l.vertical),ref:t},b),a.Children.map(n,(function(e){return a.isValidElement(e)?a.cloneElement(e,{className:(0,i.default)(l.grouped,l["grouped".concat((0,c.A)(h))],e.props.className),onChange:p?w:_,selected:void 0===e.props.selected?s(e.props.value,g):e.props.selected,size:e.props.size||y}):null})))}));const d=(0,l.A)((function(e){return{root:{display:"inline-flex",borderRadius:e.shape.borderRadius},vertical:{flexDirection:"column"},grouped:{},groupedHorizontal:{"&:not(:first-child)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-child)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}}),{name:"MuiToggleButtonGroup"})(u)},1649:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M22 19h-6v-4h-2.68c-1.14 2.42-3.6 4-6.32 4-3.86 0-7-3.14-7-7s3.14-7 7-7c2.72 0 5.17 1.58 6.32 4H24v6h-2v4zm-4-2h2v-4h2v-2H11.94l-.23-.67C11.01 8.34 9.11 7 7 7c-2.76 0-5 2.24-5 5s2.24 5 5 5c2.11 0 4.01-1.34 4.71-3.33l.23-.67H18v4zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"}),"VpnKeyOutlined");t.A=i},1653:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M3 5v4h2V5h4V3H5c-1.1 0-2 .9-2 2zm2 10H3v4c0 1.1.9 2 2 2h4v-2H5v-4zm14 4h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zm0-16h-4v2h4v4h2V5c0-1.1-.9-2-2-2z"}),"CropFree");t.A=i},1654:(e,t,n)=>{n.d(t,{default:()=>q}),n(2),n(98),n(99),n(101),n(106),n(118),n(119),n(216),n(130),n(134),n(135),n(137),n(145),n(147),n(152),n(154),n(155),n(157),n(186),n(192),n(193),n(199),n(201),n(203),n(223),n(213),n(371);var r=n(228),o=n(376),a=n(652),i=n(653),s=n(654),l=n(655),c=n(657),u=n(455),d=n(937),p=n(949),f=n(667),m=n(938),h=n(946),v=n(449),y=n(659),g=n(465),b=n(1655),_=n(1656),w=n(1657);let k;function A(e,t){return function(e,t){return S+=t,S>=C&&(x=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),x.decode(),S=t),x.decode((null!==E&&0!==E.byteLength||(E=new Uint8Array(k.memory.buffer)),E).subarray(e,e+t))}(e>>>=0,t)}n(100),n(103),n(116),n(278),n(287),n(288),n(132),n(138),n(153),n(195),n(862),n(318),n(320),n(321),n(322),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(333),n(335),n(337),n(338),n(339),n(340),n(341),n(342),n(347),n(348),n(349),n(208),n(369),n(210);let E=null,x=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});x.decode();const C=2146435072;let S=0;const T="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>k.__wbg_cameraprocessor_free(e>>>0,1)));class R{static __wrap(e){e>>>=0;const t=Object.create(R.prototype);return t.__wbg_ptr=e,T.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,T.unregister(this),e}free(){const e=this.__destroy_into_raw();k.__wbg_cameraprocessor_free(e,0)}static new(e,t){const n=k.cameraprocessor_new(e,t);return R.__wrap(n)}resize(e,t){k.cameraprocessor_resize(this.__wbg_ptr,e,t)}get_buffer_ptr(){return k.cameraprocessor_get_buffer_ptr(this.__wbg_ptr)>>>0}scan_stream(){let e,t;try{const n=k.cameraprocessor_scan_stream(this.__wbg_ptr);return e=n[0],t=n[1],A(n[0],n[1])}finally{k.__wbindgen_free(e,t,1)}}}Symbol.dispose&&(R.prototype[Symbol.dispose]=R.prototype.free);const M=new Set(["basic","cors","default"]),z=async function e(t){if(void 0!==k)return k;void 0!==t&&Object.getPrototypeOf(t)===Object.prototype&&({module_or_path:t}=t),void 0===t&&(t=new URL(n(1658),n.b));const r=function(){const e={wbg:{}};return e.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e=function(e,t){throw new Error(A(e,t))},e.wbg.__wbindgen_init_externref_table=function(){const e=k.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e}();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:o,module:a}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if(!e.ok||!M.has(e.type)||"application/wasm"===e.headers.get("Content-Type"))throw t}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await t,r);return function(t,n){return k=t.exports,e.__wbindgen_wasm_module=n,E=null,k.__wbindgen_start(),k}(o,a)};function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function P(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return I(c,"_invoke",function(n,r,o){var a,s,l,c=0,u=o||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!o&&t<u.length;t++){var o,a=u[t],f=p.p,m=a[2];n>3?(o=m===r)&&(l=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=n<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,s=0))}if(o||n>1)return i;throw d=!0,r}return function(o,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,a){if(s||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){a=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,o,a),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(I(t={},r,(function(){return this})),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,I(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,I(d,"constructor",c),I(c,"constructor",l),l.displayName="GeneratorFunction",I(c,o,"GeneratorFunction"),I(d),I(d,o,"Generator"),I(d,r,(function(){return this})),I(d,"toString",(function(){return"[object Generator]"})),(P=function(){return{w:a,m:p}})()}function I(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}I=function(e,t,n,r){function a(t,n){I(e,t,(function(e){return this._invoke(t,n,e)}))}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},I(e,t,n,r)}function N(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){N(a,r,o,i,s,"next",e)}function s(e){N(a,r,o,i,s,"throw",e)}i(void 0)}))}}function j(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var K=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.displayCanvas=document.getElementById(t),this.displayCtx=this.displayCanvas.getContext("2d",{alpha:!1}),this.analysisCanvas=document.createElement("canvas"),this.analysisCtx=this.analysisCanvas.getContext("2d",{willReadFrequently:!0}),this.video=document.createElement("video"),this.video.setAttribute("playsinline","true"),this.video.setAttribute("webkit-playsinline","true"),this.video.setAttribute("muted","true"),this.video.autoplay=!0,this.processor=null,this.memory=null,this.stream=null,this.isRunning=!1,this.lastScanTime=0,this.scanInterval=420,this.lastResult=null,this.lastResultTime=0,this.onResult=null},t=[{key:"init",value:(a=L(P().m((function e(){var t;return P().w((function(e){for(;;)switch(e.n){case 0:if(this.processor){e.n=2;break}return e.n=1,z();case 1:t=e.v,this.memory=t.memory,this.processor=R.new(1440,1440);case 2:return e.a(2)}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"start",value:(o=L(P().m((function e(){var t,n,r,o=this,a=arguments;return P().w((function(e){for(;;)switch(e.p=e.n){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,this.isRunning&&this.stop(),n={audio:!1,video:{deviceId:t?{exact:t}:void 0,facingMode:t?void 0:"environment",width:{ideal:1440},height:{ideal:1440}}},e.p=1,e.n=2,navigator.mediaDevices.getUserMedia(n);case 2:return this.stream=e.v,this.video.srcObject=this.stream,this.applyFocusMode(),e.n=3,new Promise((function(e){o.video.readyState>=1?e():o.video.onloadedmetadata=function(){return e()}}));case 3:return e.n=4,this.video.play();case 4:return this.setupResolution(),this.isRunning=!0,this.loop(),e.a(2,!0);case 5:if(e.p=5,r=e.v,t){e.n=6;break}return e.a(2,this.startBasic());case 6:throw r;case 7:return e.a(2)}}),e,this,[[1,5]])}))),function(){return o.apply(this,arguments)})},{key:"startBasic",value:(r=L(P().m((function e(){return P().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});case 1:return this.stream=e.v,this.video.srcObject=this.stream,e.n=2,this.video.play();case 2:this.setupResolution(),this.isRunning=!0,this.loop(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}}),e,this,[[0,3]])}))),function(){return r.apply(this,arguments)})},{key:"setupResolution",value:function(){var e=this.video.videoWidth,t=this.video.videoHeight;if(0!==e&&0!==t){var n=Math.min(1,1080/e);this.displayCanvas.width=e*n|0,this.displayCanvas.height=t*n|0;var r=Math.min(1,1440/e);this.analysisCanvas.width=e*r|0,this.analysisCanvas.height=t*r|0,this.processor.resize(this.analysisCanvas.width,this.analysisCanvas.height)}}},{key:"applyFocusMode",value:(n=L(P().m((function e(){var t,n;return P().w((function(e){for(;;)switch(e.p=e.n){case 0:if(this.stream){e.n=1;break}return e.a(2);case 1:if(t=this.stream.getVideoTracks()[0],!(n=t.getCapabilities()).focusMode||!n.focusMode.includes("continuous")){e.n=5;break}return e.p=2,e.n=3,t.applyConstraints({advanced:[{focusMode:"continuous"}]});case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}}),e,this,[[2,4]])}))),function(){return n.apply(this,arguments)})},{key:"stop",value:function(){this.isRunning=!1,this.stream&&(this.stream.getTracks().forEach((function(e){return e.stop()})),this.stream=null),this.video.pause(),this.video.srcObject=null}},{key:"toggleFlashlight",value:function(e){this.stream&&this.stream.getVideoTracks()[0].applyConstraints({advanced:[{torch:e}]}).catch((function(){}))}},{key:"loop",value:function(){var e=this;if(this.isRunning&&(requestAnimationFrame((function(){return e.loop()})),0!==this.video.videoWidth)){this.displayCtx.drawImage(this.video,0,0,this.displayCanvas.width,this.displayCanvas.height),this.lastResult&&performance.now()-this.lastResultTime<500&&this.drawBounds(this.lastResult);var t=performance.now();t-this.lastScanTime>this.scanInterval&&(this.lastScanTime=t,this.scanFrame())}}},{key:"scanFrame",value:function(){var e=this.analysisCanvas.width,t=this.analysisCanvas.height;this.analysisCtx.drawImage(this.video,0,0,e,t);var n=this.analysisCtx.getImageData(0,0,e,t),r=this.processor.get_buffer_ptr();new Uint8Array(this.memory.buffer,r,e*t*4).set(n.data);var o=this.processor.scan_stream(),a=JSON.parse(o);if(a.found){var i=this.displayCanvas.width/this.analysisCanvas.width,s=this.displayCanvas.height/this.analysisCanvas.height,l=a.corners.map((function(e){return{x:e.x*i,y:e.y*s}}));this.lastResult=l,this.lastResultTime=performance.now(),this.onResult&&a.content&&this.onResult(a.content)}}},{key:"drawBounds",value:function(e){if(e&&!(e.length<4)){this.displayCtx.strokeStyle="#FFFFFF",this.displayCtx.lineWidth=5,this.displayCtx.lineJoin="round",this.displayCtx.beginPath(),this.displayCtx.moveTo(e[0].x,e[0].y);for(var t=1;t<e.length;t++)this.displayCtx.lineTo(e[t].x,e[t].y);this.displayCtx.closePath(),this.displayCtx.stroke()}}}],t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o,a}();function V(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return F(c,"_invoke",function(n,r,o){var a,s,l,c=0,u=o||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!o&&t<u.length;t++){var o,a=u[t],f=p.p,m=a[2];n>3?(o=m===r)&&(l=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=n<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,s=0))}if(o||n>1)return i;throw d=!0,r}return function(o,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,a){if(s||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){a=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,o,a),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(F(t={},r,(function(){return this})),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,F(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,F(d,"constructor",c),F(c,"constructor",l),l.displayName="GeneratorFunction",F(c,o,"GeneratorFunction"),F(d),F(d,o,"Generator"),F(d,r,(function(){return this})),F(d,"toString",(function(){return"[object Generator]"})),(V=function(){return{w:a,m:p}})()}function F(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}F=function(e,t,n,r){function a(t,n){F(e,t,(function(e){return this._invoke(t,n,e)}))}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},F(e,t,n,r)}function W(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){W(a,r,o,i,s,"next",e)}function s(e){W(a,r,o,i,s,"throw",e)}i(void 0)}))}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G=(0,r.memo)((function(e){var t=e.classes,n=e.onCanvasReady,o=e.isLoading;return r.createElement("div",{className:t.canvasContainer},o&&r.createElement(v.A,{in:!0,timeout:500},r.createElement(y.A,{style:{color:"#fff",position:"absolute",zIndex:20}})),r.createElement("canvas",{id:"qr-scanner-canvas",className:t.canvas,ref:n}),!o&&r.createElement("div",{className:t.scannerLine}))}),(function(e,t){return e.isLoading===t.isLoading}));const q=(0,o.default)((function(e){return{dialog:{"& .MuiDialogContent-root":{padding:"8px 24px 0px 24px"}},canvasContainer:{width:"100%",backgroundColor:"#000",borderRadius:"21px",overflow:"hidden",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #333"},canvas:{maxWidth:"100%",maxHeight:"100%",display:"block"},scannerLine:{position:"absolute",width:"100%",height:"100%",background:"radial-gradient(ellipse at center in hsl, transparent, transparent, transparent, black)",zIndex:10},controlsRow:{marginTop:e.spacing(2),marginBottom:e.spacing(1),display:"flex",justifyContent:"space-between",alignItems:"center",gap:e.spacing(2)},selectDropdown:{"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:"rgba(255,255,255,0.05)",color:"#fff","&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#666"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#fff"}},"& .MuiSelect-icon":{color:"#999"},"& .MuiInputLabel-root":{color:"#999"},"& .MuiInputLabel-root.Mui-focused":{color:"#fff"}},flashBtn:{backgroundColor:"rgba(255,255,255,0.05)",color:"#fff",padding:"12px","&:hover":{backgroundColor:"rgba(255,255,255,0.15)"}}}}))((function(e){var t=e.classes,n=e.open,o=e.onClose,v=e.onScanResult,y=D((0,r.useState)(null),2),k=y[0],A=y[1],E=D((0,r.useState)([]),2),x=E[0],C=E[1],S=D((0,r.useState)(""),2),T=S[0],R=S[1],M=D((0,r.useState)(!1),2),z=M[0],O=M[1],P=D((0,r.useState)(!0),2),I=P[0],N=P[1],L=D((0,r.useState)(!1),2),j=L[0],F=L[1],W=(0,r.useRef)(null),H=(0,r.useRef)(!0);(0,r.useEffect)((function(){H.current=!0;var e=null,t=function(){var t=B(V().m((function t(){var r,o,a,i,s;return V().w((function(t){for(;;)switch(t.p=t.n){case 0:if(!n||!W.current||k){t.n=6;break}return t.p=1,N(!0),F(!1),r=new K("qr-scanner-canvas"),t.n=2,r.init();case 2:return r.onResult=function(e){navigator.vibrate&&navigator.vibrate(200),v(e),q()},t.n=3,r.start();case 3:return t.n=4,navigator.mediaDevices.enumerateDevices();case 4:o=t.v,a=o.filter((function(e){return"videoinput"===e.kind})),H.current&&(C(a),i="",(s=r.stream.getVideoTracks()).length>0&&(i=s[0].getSettings().deviceId),i?R(i):a.length>0&&R(a[a.length-1].deviceId),e=r,A(r),N(!1)),t.n=6;break;case 5:t.p=5,t.v,H.current&&(F(!0),N(!1));case 6:return t.a(2)}}),t,null,[[1,5]])})));return function(){return t.apply(this,arguments)}}(),r=setTimeout(t,200);return function(){H.current=!1,clearTimeout(r),e&&e.stop()}}),[n]);var q=function(){k&&(k.stop(),A(null)),O(!1),N(!0),o()},U=function(){var e=B(V().m((function e(t){var n;return V().w((function(e){for(;;)switch(e.n){case 0:if(n=t.target.value,R(n),!k){e.n=2;break}return N(!0),e.n=1,k.start(n);case 1:O(!1),N(!1);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=B(V().m((function e(){var t;return V().w((function(e){for(;;)switch(e.n){case 0:if(!k){e.n=2;break}return t=!z,e.n=1,k.toggleFlashlight(t);case 1:O(t);case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();return r.createElement(a.A,{className:t.dialog,open:n,maxWidth:!1,onClose:q,PaperProps:{style:{width:"min(calc(100% - 32px), 800px)",maxWidth:"none",backgroundColor:"#171717",borderRadius:"21px",color:"#fff"}}},r.createElement(s.A,{style:{position:"relative",overflow:"hidden"}},r.createElement(u.A,{onClick:q,style:{position:"absolute",right:8,top:8,color:"#999",zIndex:100,backgroundColor:"rgba(0,0,0,0.3)"}},r.createElement(g.A,null)),r.createElement(c.A,{style:{marginTop:8,marginBottom:16},component:"h2",variant:"h6"},"Scan QR Code"),j?r.createElement(d.A,{className:t.canvasContainer,style:{flexDirection:"column",gap:16,border:"2px dashed #555"}},r.createElement(w.A,{style:{fontSize:48,color:"#fff"}}),r.createElement(c.A,{variant:"h6"},"Camera Blocked"),r.createElement(c.A,{variant:"body2",style:{color:"#999",padding:"0 24px",textAlign:"center"}},"Please check browser permissions.")):r.createElement(G,{classes:t,isLoading:I,onCanvasReady:function(e){return W.current=e}}),r.createElement(d.A,{className:t.controlsRow},r.createElement(m.A,{variant:"outlined",className:t.selectDropdown,size:"small",style:{flexGrow:1}},r.createElement(h.A,null,"Camera"),r.createElement(p.A,{value:T,onChange:U,label:"Camera",disabled:0===x.length,MenuProps:{PaperProps:{style:{backgroundColor:"#222",color:"#fff"}}}},x.map((function(e,t){return r.createElement(f.A,{key:e.deviceId||t,value:e.deviceId},e.label||"Camera ".concat(t+1))})))),r.createElement(u.A,{className:t.flashBtn,onClick:$,disabled:I||j},z?r.createElement(b.A,{style:{color:"#fff"}}):r.createElement(_.A,{style:{color:"#999"}})))),r.createElement(i.A,{style:{backgroundColor:"#101010",padding:"16px 24px",justifyContent:"space-between"}},r.createElement(d.A,{display:"flex",alignItems:"center",style:{color:"#555"}},r.createElement(w.A,{style:{marginRight:8,fontSize:18}}),r.createElement(c.A,{variant:"caption"},"WASM Powered")),r.createElement(l.A,{onClick:q,style:{color:"#fff",borderRadius:"32px",padding:"8px 24px"}},"Cancel")))}))},1655:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M7 2v11h3v9l7-12h-4l4-8z"}),"FlashOn");t.A=i},1656:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M3.27 3L2 4.27l5 5V13h3v9l3.58-6.14L17.73 20 19 18.73 3.27 3zM17 10h-4l4-8H7v2.18l8.46 8.46L17 10z"}),"FlashOff");t.A=i},1657:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"}),"Videocam");t.A=i},1658:(e,t,n)=>{e.exports=n.p+"aa5f4b6d1579c7368f08.wasm"},1659:(e,t,n)=>{n.d(t,{default:()=>de}),n(2),n(98),n(99),n(100),n(273),n(119),n(132),n(135),n(138),n(145),n(147),n(152),n(154),n(155),n(157),n(298),n(186),n(192),n(199),n(213),n(371);var r=n(228),o=n(376),a=n(652),i=n(653),s=n(654),l=n(656),c=n(655),u=n(657),d=n(938),p=n(946),f=n(952),m=n(945),h=n(455),v=n(937),y=n(659),g=n(450),b=n(448),_=n(445),w=n(237),k=n(215),A=n(382),E=n(264),x=n(235),C=n(442),S=n(462);const T=(0,S.A)(r.createElement("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),R=(0,S.A)(r.createElement("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),M=(0,S.A)(r.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),z=(0,S.A)(r.createElement("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");var O=n(1580),P=n(439),I={success:r.createElement(T,{fontSize:"inherit"}),warning:r.createElement(R,{fontSize:"inherit"}),error:r.createElement(M,{fontSize:"inherit"}),info:r.createElement(z,{fontSize:"inherit"})},N=r.createElement(O.A,{fontSize:"small"}),L=r.forwardRef((function(e,t){var n=e.action,o=e.children,a=e.classes,i=e.className,s=e.closeText,l=void 0===s?"Close":s,c=e.color,u=e.icon,d=e.iconMapping,p=void 0===d?I:d,f=e.onClose,m=e.role,v=void 0===m?"alert":m,y=e.severity,g=void 0===y?"success":y,b=e.variant,_=void 0===b?"standard":b,E=(0,w.A)(e,["action","children","classes","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"]);return r.createElement(C.A,(0,k.A)({role:v,square:!0,elevation:0,className:(0,A.default)(a.root,a["".concat(_).concat((0,P.A)(c||g))],i),ref:t},E),!1!==u?r.createElement("div",{className:a.icon},u||p[g]||I[g]):null,r.createElement("div",{className:a.message},o),null!=n?r.createElement("div",{className:a.action},n):null,null==n&&f?r.createElement("div",{className:a.action},r.createElement(h.A,{size:"small","aria-label":l,title:l,color:"inherit",onClick:f},N)):null)}));const j=(0,x.A)((function(e){var t="light"===e.palette.type?E.e$:E.a,n="light"===e.palette.type?E.a:E.e$;return{root:(0,k.A)({},e.typography.body2,{borderRadius:e.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"}),standardSuccess:{color:t(e.palette.success.main,.6),backgroundColor:n(e.palette.success.main,.9),"& $icon":{color:e.palette.success.main}},standardInfo:{color:t(e.palette.info.main,.6),backgroundColor:n(e.palette.info.main,.9),"& $icon":{color:e.palette.info.main}},standardWarning:{color:t(e.palette.warning.main,.6),backgroundColor:n(e.palette.warning.main,.9),"& $icon":{color:e.palette.warning.main}},standardError:{color:t(e.palette.error.main,.6),backgroundColor:n(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},outlinedSuccess:{color:t(e.palette.success.main,.6),border:"1px solid ".concat(e.palette.success.main),"& $icon":{color:e.palette.success.main}},outlinedInfo:{color:t(e.palette.info.main,.6),border:"1px solid ".concat(e.palette.info.main),"& $icon":{color:e.palette.info.main}},outlinedWarning:{color:t(e.palette.warning.main,.6),border:"1px solid ".concat(e.palette.warning.main),"& $icon":{color:e.palette.warning.main}},outlinedError:{color:t(e.palette.error.main,.6),border:"1px solid ".concat(e.palette.error.main),"& $icon":{color:e.palette.error.main}},filledSuccess:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.success.main},filledInfo:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.info.main},filledWarning:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.warning.main},filledError:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.error.main},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiAlert"})(L);var K=n(1647),V=n(1648),F=n(1557),W=n(1558),B=n(1575),D=n(1660),H=n(1649),G=n(1589),q=n(1577),U=n(1653),$=n(1661),Q=n(1654);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function J(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Z(c,"_invoke",function(n,r,o){var a,s,l,c=0,u=o||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,s=0,l=e,p.n=n,i}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!o&&t<u.length;t++){var o,a=u[t],f=p.p,m=a[2];n>3?(o=m===r)&&(l=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=n<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,s=0))}if(o||n>1)return i;throw d=!0,r}return function(o,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,a){if(s||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==i)break}catch(t){a=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,o,a),!0),c}var i={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Z(t={},r,(function(){return this})),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Z(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,Z(d,"constructor",c),Z(c,"constructor",l),l.displayName="GeneratorFunction",Z(c,o,"GeneratorFunction"),Z(d),Z(d,o,"Generator"),Z(d,r,(function(){return this})),Z(d,"toString",(function(){return"[object Generator]"})),(J=function(){return{w:a,m:p}})()}function Z(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Z=function(e,t,n,r){function a(t,n){Z(e,t,(function(e){return this._invoke(t,n,e)}))}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Z(e,t,n,r)}function Y(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Y(a,r,o,i,s,"next",e)}function s(e){Y(a,r,o,i,s,"throw",e)}i(void 0)}))}}function te(e,t,n){return t=re(t),function(e,t){if(t&&("object"==X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ne()?Reflect.construct(t,n||[],re(e).constructor):t.apply(e,n))}function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ne=function(){return!!e})()}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function ae(e,t,n){return(t=ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){var t=function(e){if("object"!=X(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==X(t)?t:t+""}var se={posting:{label:"Posting Key",description:"For voting, commenting, and posting",placeholder:"Enter your posting private key (WIF)",color:"#d0d0d0"},active:{label:"Active Key",description:"For transfers and wallet operations",placeholder:"Enter your active private key (WIF)",color:"#c8c8c8"},owner:{label:"Owner Key",description:"For account recovery and authority changes",placeholder:"Enter your owner private key (WIF)",color:"#b8b8b8"},memo:{label:"Memo Key",description:"For encrypted messages",placeholder:"Enter your memo private key (WIF)",color:"#c0c0c0"}},le=(0,r.memo)((function(e){var t=e.classes,n=e.pin,o=e.showPin,a=e.pinError,i=e.attemptsRemaining,s=e.onPinChange,l=e.onToggleShowPin,c=e.onMouseDownPassword,v=(0,r.useMemo)((function(){return r.createElement(f.A,{position:"end",className:t.inputEndAdornment},r.createElement(g.Ay,{title:o?"Hide PIN":"Show PIN"},r.createElement(h.A,{edge:"end","aria-label":"toggle PIN visibility",onClick:l,onMouseDown:c},o?r.createElement(F.A,null):r.createElement(W.A,null))))}),[t,o,l,c]);return r.createElement("div",null,r.createElement(u.A,{style:{fontSize:14,color:"#9b9b9b",marginBottom:16}},"Enter your PIN to unlock the requested key."),r.createElement(d.A,{fullWidth:!0,variant:"outlined"},r.createElement(p.A,{htmlFor:"unlock-pin"},"PIN"),r.createElement(m.A,{id:"unlock-pin",type:o?"text":"password",value:n,onChange:s,endAdornment:v,labelWidth:32,autoFocus:!0,error:!!a})),a&&r.createElement(u.A,{style:{fontSize:13,color:"#ff9090",marginTop:8,textAlign:"right"}},a),null!==i&&i<5&&r.createElement("div",{className:t.attemptsWarning},r.createElement(G.A,{style:{fontSize:18}}),r.createElement("span",null,i," attempt",1!==i?"s":""," remaining before lockout")))})),ce=(0,r.memo)((function(e){var t=e.classes,n=e.keyType,o=e.keyValue,a=e.showKey,i=e.keyValid,s=e.pendingValidation,l=e.keyError,c=e.onKeyChange,v=e.onToggleShowKey,b=e.onMouseDownPassword,_=e.onOpenQRScanner,w=se[n]||se.posting,k=(0,r.useMemo)((function(){return r.createElement(f.A,{position:"end",className:t.inputEndAdornment},s?r.createElement(y.A,{size:20,color:"secondary"}):o.length>0?r.createElement(g.Ay,{title:i?"Key format is valid":"Invalid key format"},r.createElement(h.A,{edge:"end",disabled:!0,className:t.buttonNotDisabled},i?r.createElement(q.A,{style:{color:"#90EE90"}}):r.createElement(G.A,{style:{color:"#ff9090"}}))):null,r.createElement(g.Ay,{title:"Scan QR Code"},r.createElement(h.A,{edge:"end",className:t.qrScanButton,onClick:_},r.createElement(U.A,null))),r.createElement(g.Ay,{title:a?"Hide key":"Show key"},r.createElement(h.A,{edge:"end","aria-label":"toggle key visibility",onClick:v,onMouseDown:b},a?r.createElement(F.A,null):r.createElement(W.A,null))))}),[t,s,o,i,a,v,b,_]),A=10*w.label.length;return r.createElement("div",null,r.createElement(u.A,{style:{fontSize:14,color:"#9b9b9b",marginBottom:16}},"Please enter your ",r.createElement("strong",{style:{color:"#fff"}},w.label)," to continue."),r.createElement(d.A,{fullWidth:!0,variant:"outlined"},r.createElement(p.A,{htmlFor:"add-key-input"},w.label),r.createElement(m.A,{id:"add-key-input",type:a?"text":"password",value:o,onChange:c,endAdornment:k,labelWidth:A,placeholder:w.placeholder,autoFocus:!0,error:!!l})),r.createElement(u.A,{style:{fontSize:12,color:"#7b7b7b",marginTop:8,textAlign:"right"}},w.description),l&&r.createElement(u.A,{style:{fontSize:13,color:"#ff9090",marginTop:8,textAlign:"right"}},l),r.createElement(j,{severity:"info",style:{marginTop:16}},"This key will be stored in your current session only and will not persist after logout."))})),ue=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ae(n=te(this,t,[e]),"_determineMode",ee(J().m((function e(){var t,r,o,a,i,s=arguments;return J().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:n.props,r=t.mode,o=t.keyMissing,a=t.api,!r){e.n=1;break}return n.setState({_mode:r}),e.a(2);case 1:if(!o){e.n=2;break}return n.setState({_mode:"addKey"}),e.a(2);case 2:if(!a||!a.isPinEnabled){e.n=7;break}return e.p=3,e.n=4,a.isPinEnabled();case 4:i=e.v,n.setState({_mode:i?"pin":"addKey"}),e.n=6;break;case 5:e.p=5,e.v,n.setState({_mode:"addKey"});case 6:e.n=8;break;case 7:n.setState({_mode:"pin"});case 8:return e.a(2)}}),e,null,[[3,5]])})))),ae(n,"_resetState",(function(){n.setState({_pin:"",_show_pin:!1,_pin_error:null,_key_value:"",_show_key:!1,_key_valid:!1,_pending_validation:!1,_key_error:null,_status:null,_status_message:null,_backdrop_opened:!1})})),ae(n,"_getAuth",(function(){var e=n.props.api;return e&&e.auth||null})),ae(n,"_handleModeChange",(function(e,t){null!==t&&n.setState({_mode:t,_status:null,_status_message:null,_pin_error:null,_key_error:null})})),ae(n,"_handlePinChange",(function(e){n.setState({_pin:e.target.value,_pin_error:null})})),ae(n,"_handleToggleShowPin",(function(){n.setState({_show_pin:!n.state._show_pin})})),ae(n,"_handleKeyChange",(function(e){var t=e.target.value;n.setState({_key_value:t,_pending_validation:!0,_key_valid:!1,_key_error:null}),n._keyValidationTimer&&clearTimeout(n._keyValidationTimer),t.length<8?n.setState({_pending_validation:!1,_key_valid:!1}):n._keyValidationTimer=setTimeout((function(){n._validateKey(t)}),300)})),ae(n,"_validateKey",(function(e){var t=n._getAuth(),r=!1;if(t&&t.isWif)try{r=t.isWif(e)}catch(e){r=!1}else r=/^5[HJK][1-9A-HJ-NP-Za-km-z]{49,51}$/.test(e);n.setState({_pending_validation:!1,_key_valid:r})})),ae(n,"_handleToggleShowKey",(function(){n.setState({_show_key:!n.state._show_key})})),ae(n,"_handleOpenQRScanner",(function(){n.setState({_qr_scanner_open:!0})})),ae(n,"_handleCloseQRScanner",(function(){n.setState({_qr_scanner_open:!1})})),ae(n,"_handleQRScanResult",(function(e){n.setState({_key_value:e,_qr_scanner_open:!1},(function(){n._validateKey(e)}))})),ae(n,"_handleMouseDownPassword",(function(e){e.preventDefault()})),ae(n,"_canSubmit",(function(){var e=n.state,t=e._mode,r=e._pin,o=e._key_valid;return"pending"!==e._status&&("pin"===t?r.length>=6:o)})),ae(n,"_handleSubmit",ee(J().m((function e(){var t,r,o,a,i,s,l,c,u,d,p,f,m,h,v;return J().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t=n.props,r=t.api,o=t.username,a=t.requiredKeyType,i=t.onUnlock,s=t.onKeyAdded,l=t.onClose,c=n.state,u=c._mode,d=c._pin,p=c._key_value,r){e.n=1;break}return n.setState({_status:"error",_status_message:"API not available"}),e.a(2);case 1:if(n.setState({_status:"pending",_status_message:"pin"===u?"Verifying PIN...":"Validating key...",_backdrop_opened:!0}),e.p=2,"pin"!==u){e.n=5;break}return e.n=3,r.unlockWithPin(d,{keyType:a,account:o});case 3:if((f=e.v).success){e.n=4;break}return n.setState({_status:"error",_pin_error:f.error||"Invalid PIN",_status_message:null,_backdrop_opened:!1,_attempts_remaining:f.attemptsRemaining||null}),e.a(2);case 4:n.setState({_status:"success",_status_message:"Key unlocked!",_backdrop_opened:!1}),i&&i({keyType:a,username:o}),setTimeout((function(){l&&l()}),800),e.n=10;break;case 5:if(!r.validateCredentials){e.n=7;break}return e.n=6,r.validateCredentials(o,p,a);case 6:if((m=e.v).valid){e.n=7;break}return n.setState({_status:"error",_key_error:m.error||"Key does not match account",_status_message:null,_backdrop_opened:!1}),e.a(2);case 7:if(!r.keyManager||!r.keyManager.sessionKeys){e.n=8;break}r.keyManager.sessionKeys.set("".concat(o,"_").concat(a),p),e.n=9;break;case 8:if(!r.keyManager||!r.keyManager.addIndividualKey){e.n=9;break}return e.n=9,r.keyManager.addIndividualKey(o,a,p,{storeInVault:!1});case 9:n.setState({_status:"success",_status_message:"Key added successfully!",_backdrop_opened:!1}),s&&s({keyType:a,username:o,key:p}),setTimeout((function(){l&&l()}),800);case 10:e.n=12;break;case 11:e.p=11,v=e.v,h=v.message||"Operation failed","INVALID_PIN"===v.code?h="Invalid PIN":"VAULT_LOCKED"===v.code?h="Vault is locked. Please log in again.":"KEY_NOT_FOUND"===v.code?h="Key not found in vault":"VALIDATION_FAILED"===v.code&&(h="Key does not match account"),n.setState(ae({_status:"error",_status_message:null,_backdrop_opened:!1},"pin"===u?"_pin_error":"_key_error",h));case 12:return e.a(2)}}),e,null,[[2,11]])})))),ae(n,"_getSubmitButtonText",(function(){var e=n.state,t=e._mode,r=e._status;return"pending"===r?"PROCESSING...":"success"===r?"DONE":"pin"===t?"UNLOCK":"ADD KEY"})),n._keyValidationTimer=null,n.state={_mode:e.mode||(e.keyMissing?"addKey":"pin"),_pin:"",_show_pin:!1,_pin_error:null,_attempts_remaining:null,_key_value:"",_show_key:!1,_key_valid:!1,_pending_validation:!1,_key_error:null,_status:null,_status_message:null,_backdrop_opened:!1,_qr_scanner_open:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.props.open&&(this._resetState(),this._determineMode())}},{key:"componentWillReceiveProps",value:function(e){e.open&&!this.props.open&&(this._resetState(),this._determineMode(e))}},{key:"componentWillUnmount",value:function(){this._keyValidationTimer&&clearTimeout(this._keyValidationTimer)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,o=e.onClose,d=e.requiredKeyType,p=e.actionDescription,f=e.username,m=e.keyMissing,h=e.allowModeSwitch,g=this.state,w=g._mode,k=g._pin,A=g._show_pin,E=g._pin_error,x=g._attempts_remaining,C=g._key_value,S=g._show_key,T=g._key_valid,R=g._pending_validation,M=g._key_error,z=g._status,O=g._status_message,P=g._backdrop_opened,I=g._qr_scanner_open,N=se[d]||se.posting,L=h&&!m,j=!(!f&&!p);return r.createElement(r.Fragment,null,r.createElement(a.A,{className:t.dialog,open:n,onClose:"pending"===z?void 0:o,maxWidth:"sm",fullWidth:!0},r.createElement(l.A,{disableTypography:!0},r.createElement("div",{className:t.dialogTitle},"pin"===w?r.createElement(B.A,null):r.createElement(H.A,null),r.createElement(u.A,{variant:"h5",component:"h2"},"pin"===w?"Unlock Key":"Add Key"))),r.createElement(s.A,null,j&&r.createElement("div",{className:t.actionContext},p&&r.createElement(r.Fragment,null,r.createElement("div",{className:t.actionLabel},"Action Required"),r.createElement("div",{className:t.actionValue},p)),r.createElement("div",{className:t.keyTypeChip},r.createElement(H.A,null),N.label),f&&r.createElement(u.A,{style:{fontSize:13,color:"#7b7b7b",marginTop:8}},"Account: @",f)),L&&r.createElement(V.A,{value:w,exclusive:!0,onChange:this._handleModeChange,className:t.modeToggleGroup},r.createElement(K.A,{value:"pin"},r.createElement(D.A,{style:{marginRight:8,fontSize:18}}),"Unlock with PIN"),r.createElement(K.A,{value:"addKey"},r.createElement($.A,{style:{marginRight:8,fontSize:18}}),"Enter Key")),"pin"===w&&r.createElement(le,{classes:t,pin:k,showPin:A,pinError:E,attemptsRemaining:x,onPinChange:this._handlePinChange,onToggleShowPin:this._handleToggleShowPin,onMouseDownPassword:this._handleMouseDownPassword}),"addKey"===w&&r.createElement(ce,{classes:t,keyType:d,keyValue:C,showKey:S,keyValid:T,pendingValidation:R,keyError:M,onKeyChange:this._handleKeyChange,onToggleShowKey:this._handleToggleShowKey,onMouseDownPassword:this._handleMouseDownPassword,onOpenQRScanner:this._handleOpenQRScanner}),z&&O&&r.createElement("div",{className:"".concat(t.statusIndicator," ").concat(z)},"pending"===z&&r.createElement(y.A,{size:20,color:"inherit"}),"success"===z&&r.createElement(q.A,null),"error"===z&&r.createElement(G.A,null),r.createElement(u.A,{variant:"body2"},O))),r.createElement(i.A,{style:{padding:"16px 24px"}},r.createElement(c.A,{variant:"text",color:"primary",onClick:o,disabled:"pending"===z},"CANCEL"),r.createElement(c.A,{className:t.whiteButton,variant:"contained",color:"primary",onClick:this._handleSubmit,disabled:!this._canSubmit()},this._getSubmitButtonText()))),r.createElement(_.A,null,r.createElement(b.A,{className:t.backdrop,open:P},r.createElement(v.A,{display:"flex",flexDirection:"column",alignItems:"center",gap:2},r.createElement(y.A,{color:"inherit"}),O&&r.createElement(u.A,{variant:"body2"},O)))),r.createElement(Q.default,{open:I,onClose:this._handleCloseQRScanner,onScanResult:this._handleQRScanResult}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.PureComponent);ue.defaultProps={open:!1,onClose:function(){},onUnlock:function(){},onKeyAdded:function(){},api:null,username:"",requiredKeyType:"posting",actionDescription:"",keyMissing:!1,allowModeSwitch:!0,mode:null};const de=(0,o.default)((function(e){return{backdrop:{zIndex:"1301",color:"#fff"},dialog:{"& .MuiDialog-paper":{backgroundColor:"#000",color:"#fff",borderRadius:"21px",minWidth:"360px",maxWidth:"480px"}},dialogTitle:{display:"flex",alignItems:"center",gap:"12px",paddingBottom:"8px","& .MuiSvgIcon-root":{fontSize:"28px",color:"#b0b0b0"}},whiteButton:{"&.MuiButton-contained":{backgroundColor:"#d0d0d0",color:"#151515",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},"&.MuiButton-contained:hover":{backgroundColor:"#ffffff",color:"#000000"}},modeToggleGroup:{marginBottom:"20px",width:"100%",display:"flex","& .MuiToggleButtonGroup-grouped":{border:"1px solid #4a4a4a",padding:"8px 16px",flex:1,textTransform:"none",fontSize:"13px",fontWeight:500,color:"#b0b0b0",backgroundColor:"#171717",transition:"color 125ms cubic-bezier(0.4, 0, 0.2, 1) 25ms, background-color 175ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:not(:first-child)":{borderLeft:"1px solid #4a4a4a",marginLeft:"-1px"},"&:first-child":{borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px"},"&:last-child":{borderTopRightRadius:"16px",borderBottomRightRadius:"16px"},"&:hover":{backgroundColor:"#222",color:"#fff",zIndex:1},"&.Mui-selected":{backgroundColor:"#fff",color:"#222",borderColor:"#fff",zIndex:2,"&:hover":{color:"#000"}},"&.Mui-disabled":{opacity:.4,color:"#666"}}},inputEndAdornment:{"& .MuiIconButton-root.Mui-disabled":{color:"#7b7b7b"},"& .MuiCircularProgress-colorSecondary":{color:"#7b7b7b",marginLeft:"8px"}},buttonNotDisabled:{"&.MuiButtonBase-root.Mui-disabled":{cursor:"help",pointerEvents:"all"}},qrScanButton:{padding:"8px",color:"#9b9b9b","&:hover":{color:"#ffffff",backgroundColor:"rgba(255, 255, 255, 0.1)"}},actionContext:{display:"block",backgroundColor:"#171717",borderRadius:"21px",padding:"16px",marginBottom:"20px"},actionLabel:{color:"#7b7b7b",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},actionValue:{color:"#ffffff",fontSize:"15px",fontWeight:500},keyTypeChip:{display:"inline-flex",alignItems:"center",gap:"6px",backgroundColor:"#3a3a3a",color:"#e0e0e0",padding:"6px 12px",borderRadius:"16px",fontSize:"13px",fontWeight:500,marginTop:"8px","& .MuiSvgIcon-root":{fontSize:"16px"}},statusIndicator:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",borderRadius:"8px",marginTop:"16px","&.pending":{backgroundColor:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(150, 150, 150, 0.3)",color:"#b0b0b0"},"&.success":{backgroundColor:"rgba(144, 238, 144, 0.1)",border:"1px solid rgba(144, 238, 144, 0.3)",color:"#90EE90"},"&.error":{backgroundColor:"rgba(255, 100, 100, 0.1)",border:"1px solid rgba(255, 100, 100, 0.3)",color:"#ff9090"}},attemptsWarning:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",borderRadius:"6px",marginTop:"12px",backgroundColor:"rgba(255, 180, 100, 0.1)",border:"1px solid rgba(255, 180, 100, 0.3)",color:"#ffb464",fontSize:"13px"}}}))(ue)},1660:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOpenOutlined");t.A=i},1661:(e,t,n)=>{var r=n(377),o=n(459);t.A=void 0;var a=o(n(228)),i=(0,r(n(460)).default)(a.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutline");t.A=i}}]);