/*! For license information please see chunk_20.min.js.LICENSE.txt */
"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([[20],{944:(e,t,n)=>{var r=n(377),a=n(459);t.A=void 0;var i=a(n(228)),o=(0,r(n(460)).default)(i.createElement(i.Fragment,null,i.createElement("circle",{cx:"12",cy:"12",r:"3"}),i.createElement("path",{d:"M20 4h-3.17l-1.24-1.35c-.37-.41-.91-.65-1.47-.65H9.88c-.56 0-1.1.24-1.48.65L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 13c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"PhotoCameraRounded");t.A=o},945:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(237),a=n(215),i=n(228),o=n(382),s=n(235),l=n(456),c=n(439),u=i.forwardRef((function(e,t){var n=e.children,s=e.classes,u=e.className,d=e.color,p=void 0===d?"default":d,f=e.component,m=void 0===f?"button":f,h=e.disabled,g=void 0!==h&&h,v=e.disableFocusRipple,b=void 0!==v&&v,y=e.focusVisibleClassName,E=e.size,w=void 0===E?"large":E,_=e.variant,A=void 0===_?"circular":_,C=(0,r.A)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return i.createElement(l.A,(0,a.A)({className:(0,o.default)(s.root,u,"large"!==w&&s["size".concat((0,c.A)(w))],g&&s.disabled,"extended"===A&&s.extended,{primary:s.primary,secondary:s.secondary,inherit:s.colorInherit}[p]),component:m,disabled:g,focusRipple:!b,focusVisibleClassName:(0,o.default)(s.focusVisible,y),ref:t},C),i.createElement("span",{className:s.label},n))}));const d=(0,s.A)((function(e){return{root:(0,a.A)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(u)},946:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>Pe}),n(2),n(98),n(99),n(100),n(273),n(101),n(103),n(106),n(116),n(118),n(119),n(475),n(216),n(130),n(275),n(131),n(132),n(134),n(135),n(137),n(138),n(484),n(145),n(146),n(147),n(150),n(151),n(152),n(153),n(154),n(155),n(882),n(157),n(186),n(192),n(193),n(688),n(195),n(199),n(300),n(305),n(221),n(201),n(203),n(208),n(223),n(690),n(693),n(694),n(702),n(703),n(704),n(705),n(707),n(709),n(711),n(713),n(714),n(715),n(716),n(717),n(719),n(210),n(213),n(371),n(883),n(889),n(890);var a=n(228),i=n(376),o=n(947),s=n(660),l=n(661),c=n(662),u=n(659),d=n(664),p=n(950),f=n(955),m=n(666),h=n(956),g=n(957),v=n(959),b=n(961),y=n(968),E=n(969),w=n(970),_=n(471),A=n(971),C=n(972),x=n(973),S=n(938),T=n(974),k=n(375),N=n(979),O=n(449),I=n(986),P=n(995),L=n(671),R=n(997),D=n(998),z=n(442),M=n(455),F=n(999),j=n(1e3),$=n(932),B=n(933),W=n(1001),G=e([T]),U=G.then?(await G)():G;function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function de(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return pe(c,"_invoke",function(n,r,a){var i,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,l=e,p.n=n,o}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,i=u[t],f=p.p,m=i[2];n>3?(a=m===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,p.v=r,p.n=i[1]):f<m&&(a=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,p.n=m,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==o)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,i),!0),c}var o={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(pe(t={},r,(function(){return this})),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,pe(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,pe(d,"constructor",c),pe(c,"constructor",l),l.displayName="GeneratorFunction",pe(c,a,"GeneratorFunction"),pe(d),pe(d,a,"Generator"),pe(d,r,(function(){return this})),pe(d,"toString",(function(){return"[object Generator]"})),(de=function(){return{w:i,m:p}})()}function pe(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}pe=function(e,t,n,r){function i(t,n){pe(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},pe(e,t,n,r)}function fe(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){fe(i,r,a,o,s,"next",e)}function s(e){fe(i,r,a,o,s,"throw",e)}o(void 0)}))}}function he(e,t){return be(e)||ve(e,t)||Ne(e,t)||ge()}function ge(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ve(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}function be(e){if(Array.isArray(e))return e}function ye(e){return _e(e)||we(e)||Ne(e)||Ee()}function Ee(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function we(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _e(e){if(Array.isArray(e))return Oe(e)}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return(t=Se(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){var t=Te(e,"string");return"symbol"==ue(t)?t:t+""}function Te(e,t){if("object"!=ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ke(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ne(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Ne(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}T=U[0];var q={TITLE_MAX_LENGTH:32,DESCRIPTION_MAX_LENGTH:1024,TAGS_MIN_COUNT:1,TAGS_MAX_COUNT:5,TAG_MIN_LENGTH:3,TAG_PATTERN:/^[a-z][a-z0-9\-]*$/,TAG_INVALID_CHARS:/[^a-z0-9\-]/g,TAG_STARTS_WITH_NUMBER_OR_MINUS:/^[0-9\-]/,TAG_CONTAINS_DOT:/\./},V=function(e){return e&&e.trim()?e.length>q.TITLE_MAX_LENGTH?{valid:!1,error:"Title must be ".concat(q.TITLE_MAX_LENGTH," characters or less (currently ").concat(e.length,")")}:{valid:!0,error:null}:{valid:!1,error:"Title is required"}},H=function(e){return e&&e.trim()?e.length>q.DESCRIPTION_MAX_LENGTH?{valid:!1,error:"Description must be ".concat(q.DESCRIPTION_MAX_LENGTH," characters or less (currently ").concat(e.length,")")}:{valid:!0,error:null}:{valid:!1,error:"Description is required"}},X=function(e){return!e||e.length<q.TAG_MIN_LENGTH?{valid:!1,error:"Tag must be at least ".concat(q.TAG_MIN_LENGTH," characters")}:q.TAG_STARTS_WITH_NUMBER_OR_MINUS.test(e)?{valid:!1,error:"Tag cannot begin with a number or minus sign"}:q.TAG_CONTAINS_DOT.test(e)?{valid:!1,error:"Tag cannot contain dots"}:q.TAG_PATTERN.test(e)?{valid:!0,error:null}:{valid:!1,error:"Tag can only contain lowercase letters, numbers, and hyphens"}},K=function(e){if(!e||e.length<q.TAGS_MIN_COUNT)return{valid:!1,error:"At least ".concat(q.TAGS_MIN_COUNT," tag is required")};if(e.length>q.TAGS_MAX_COUNT)return{valid:!1,error:"Maximum ".concat(q.TAGS_MAX_COUNT," tags allowed")};var t,n=ke(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=X(r);if(!a.valid)return{valid:!1,error:'Tag "'.concat(r,'": ').concat(a.error)}}}catch(e){n.e(e)}finally{n.f()}return{valid:!0,error:null}},Z=function(e,t,n){var r={},a=V(e);a.valid||(r.title=a.error);var i=H(t);i.valid||(r.description=i.error);var o=K(n);return o.valid||(r.tags=o.error),{valid:0===Object.keys(r).length,errors:r}},Y=function(e){var t=Date.now(),n=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,50);return"".concat(n,"-").concat(t)},J=function(e){if(e&&"string"==typeof e&&e.startsWith("blob:"))try{URL.revokeObjectURL(e)}catch(e){}},Q=function(e){return.05+e/100*.45},ee=function(e){for(var t,n,r,a,i,o,s=(null==e||null===(t=e.target)||void 0===t?void 0:t.files)||(null==e||null===(n=e.srcElement)||void 0===n?void 0:n.files)||(null==e||null===(r=e.currentTarget)||void 0===r?void 0:r.files)||(null==e||null===(a=e.path)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.files)||(null==e||null===(o=e.dataTransfer)||void 0===o?void 0:o.files)||[],l=0;l<s.length;l++){var c,u;if(null!==(c=s[l])&&void 0!==c&&null!==(u=c.type)&&void 0!==u&&u.startsWith("image/"))return s[l]}return s[0]||null},te={tabValue:0,currentStep:0,title:"",description:"",tags:[],nsfw:!1,validationErrors:{},touched:{title:!1,description:!1,tags:!1},preferredSize:"L",aspectRatio:"1:1",transformationPercent:50,fidelityPercent:50,preview:null,previewCache:{},quantizedData:null,base64:"",processorData:null,availableSizes:[],dropzoneActive:!1,message:"We don't store uploaded images",inputFileUrl:"",inputFile:null,showingOriginal:!1,preloading:!1,preloadProgress:0,isGenerating:!1,isImageOptimal:!1,canvasKey:0,isPublishing:!1,closeConfirmOpen:!1,useAiOpen:!1,quantizeDialogOpen:!1,licenseCustomizationOpen:!1,publishConfirmOpen:!1,quantizeDownscale:4,quantizeColors:64,licenseBase:null,licenseCustomization:null,processName:"Click to upload",processStart:0,processFinish:0},ne={SET_FIELD:"SET_FIELD",SET_MULTIPLE:"SET_MULTIPLE",RESET:"RESET",RESET_UPLOAD:"RESET_UPLOAD",SET_PREVIEW_DATA:"SET_PREVIEW_DATA",CACHE_PREVIEW:"CACHE_PREVIEW",SET_PROCESS:"SET_PROCESS",INCREMENT_CANVAS_KEY:"INCREMENT_CANVAS_KEY",SET_VALIDATION_ERROR:"SET_VALIDATION_ERROR",CLEAR_VALIDATION_ERROR:"CLEAR_VALIDATION_ERROR",SET_TOUCHED:"SET_TOUCHED",VALIDATE_ALL:"VALIDATE_ALL"},re=function(e,t){switch(t.type){case ne.SET_FIELD:return Ce(Ce({},e),{},xe({},t.field,t.value));case ne.SET_MULTIPLE:return Ce(Ce({},e),t.payload);case ne.RESET:return Ce(Ce({},te),{},{licenseBase:t.licenseBase,licenseCustomization:t.defaultCustomization});case ne.RESET_UPLOAD:return Ce(Ce({},e),{},{currentStep:0,preview:null,previewCache:{},quantizedData:null,base64:"",processorData:null,availableSizes:[],inputFileUrl:"",inputFile:null,showingOriginal:!1,preloading:!1,preloadProgress:0,isGenerating:!1,isImageOptimal:!1,canvasKey:0,quantizeDialogOpen:!1,quantizeDownscale:4,quantizeColors:64,message:"We don't store uploaded images",processName:"Click to upload",processStart:0,processFinish:0});case ne.SET_PREVIEW_DATA:return Ce(Ce({},e),{},{preview:t.preview,previewCache:xe({},t.sizeName,t.preview),processorData:t.processorData,availableSizes:t.availableSizes,title:t.title||e.title,currentStep:1,processName:"Click to upload",processStart:0,processFinish:0,isGenerating:!1,canvasKey:e.canvasKey+1});case ne.CACHE_PREVIEW:return Ce(Ce({},e),{},{previewCache:Ce(Ce({},e.previewCache),{},xe({},t.sizeName,t.preview)),preview:t.setAsCurrent?t.preview:e.preview,canvasKey:t.setAsCurrent?e.canvasKey+1:e.canvasKey});case ne.SET_PROCESS:return Ce(Ce({},e),{},{processName:t.name,processStart:t.start,processFinish:t.finish});case ne.INCREMENT_CANVAS_KEY:return Ce(Ce({},e),{},{canvasKey:e.canvasKey+1});case ne.SET_VALIDATION_ERROR:return Ce(Ce({},e),{},{validationErrors:Ce(Ce({},e.validationErrors),{},xe({},t.field,t.error))});case ne.CLEAR_VALIDATION_ERROR:var n=Ce({},e.validationErrors);return delete n[t.field],Ce(Ce({},e),{},{validationErrors:n});case ne.SET_TOUCHED:return Ce(Ce({},e),{},{touched:Ce(Ce({},e.touched),{},xe({},t.field,!0))});case ne.VALIDATE_ALL:return Ce(Ce({},e),{},{validationErrors:t.errors,touched:{title:!0,description:!0,tags:!0}});default:return e}},ae=(0,a.memo)((function(e){var t=e.classes,n=e.dropzoneActive,r=e.inputFileUrl,i=e.loading,o=e.processName,s=e.loadingPercent,l=e.message,u=e.onFileUpload,h=e.dropRef,g=(0,a.useRef)(null),v=(0,a.useCallback)((function(){var e;null===(e=g.current)||void 0===e||e.click()}),[]);return a.createElement("div",{ref:h},a.createElement("div",{style:{borderRadius:"21px"},className:n?t.dropZoneActive:t.dropZone},r&&a.createElement(O.A,{in:!0,timeout:300},a.createElement("img",{src:r,className:t.inputImage+" pixelated",alt:"Input Image"})),a.createElement(p.A,{inputRef:g,onChange:u,inputProps:{accept:"image/*"},style:{display:"none",position:"absolute"},id:"button-file-dialog-secondary",type:"file"}),a.createElement(O.A,{in:!0,timeout:600},a.createElement("div",{style:{pointerEvents:i||"Click to upload"!==o?"none":"auto",transform:"translate(-50%, -50%)",top:"50%",left:"50%",position:"absolute",display:"inline",zIndex:10}},a.createElement(O.A,{in:!0,timeout:600},a.createElement(c.A,{disabled:i||"Click to upload"!==o,onClick:v},a.createElement("span",{style:{fontWeight:"bold",fontSize:"24px",verticalAlign:"super",color:"#999",marginRight:"16px"}},o||"Upload Image"),i||"Click to upload"!==o?a.createElement(f.A,{position:"relative",display:"inline-flex"},a.createElement(m.A,{variant:i?"determinate":"indeterminate",style:{color:"#ffffff"},value:Math.round(100*s)}),a.createElement(f.A,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},a.createElement(d.A,{variant:"caption",component:"div",color:"textSecondary"},i?"".concat(Math.round(Math.min(100*s,100)),"%"):"wait"))):a.createElement(W.A,{style:{display:"inline",fontSize:48,color:"#666"}}))),a.createElement(O.A,{in:!0,timeout:900},a.createElement("p",{style:{textAlign:"center",color:"#a7a7a7"}},l))))))}),(function(e,t){return e.dropzoneActive===t.dropzoneActive&&e.inputFileUrl===t.inputFileUrl&&e.loading===t.loading&&e.processName===t.processName&&e.loadingPercent===t.loadingPercent&&e.message===t.message})),ie=(0,a.memo)((function(e){var t=e.classes,n=e.aspectRatio,r=e.onAspectRatioChange,i=e.disabled,o=(0,a.useCallback)((function(e){return function(){r(e)}}),[r]);return a.createElement(O.A,{in:!0,timeout:600},a.createElement(f.A,{className:t.aspectRatioContainer},a.createElement(j.A,{container:!0,spacing:2},a.createElement(j.A,{item:!0,xs:4},a.createElement("div",{className:t.aspectRatioColumn},a.createElement(d.A,{className:t.aspectRatioLabel},"Squared"),a.createElement(F.A,{className:t.aspectRatioButtonGroup,variant:"1:1"===n?"contained":"outlined",fullWidth:!0,disabled:i},a.createElement(c.A,{variant:"1:1"===n?"contained":"outlined",onClick:o("1:1")},"1:1")))),a.createElement(j.A,{item:!0,xs:4},a.createElement("div",{className:t.aspectRatioColumn},a.createElement(d.A,{className:t.aspectRatioLabel},"Landscape"),a.createElement(F.A,{className:t.aspectRatioButtonGroup,variant:"outlined",fullWidth:!0,disabled:i},a.createElement(c.A,{variant:"4:3"===n?"contained":"outlined",onClick:o("4:3")},"4:3"),a.createElement(c.A,{variant:"16:9"===n?"contained":"outlined",onClick:o("16:9")},"16:9")))),a.createElement(j.A,{item:!0,xs:4},a.createElement("div",{className:t.aspectRatioColumn},a.createElement(d.A,{className:t.aspectRatioLabel},"Portrait"),a.createElement(F.A,{className:t.aspectRatioButtonGroup,variant:"outlined",fullWidth:!0,disabled:i},a.createElement(c.A,{variant:"3:4"===n?"contained":"outlined",onClick:o("3:4")},"3:4"),a.createElement(c.A,{variant:"9:16"===n?"contained":"outlined",onClick:o("9:16")},"9:16")))))))}),(function(e,t){return e.aspectRatio===t.aspectRatio&&e.disabled===t.disabled})),oe=(0,a.memo)((function(e){var t=e.classes,n=e.showFidelity,r=e.transformationPercent,i=e.fidelityPercent,o=e.onTransformationChange,s=e.onFidelityChange,l=e.disabled,c=(0,a.useCallback)((function(e,t){o(t)}),[o]),u=(0,a.useCallback)((function(e,t){s(t)}),[s]);return a.createElement(O.A,{in:!0,timeout:900},a.createElement(f.A,{className:t.sliderContainer,sx:Ce({display:"flex",flexDirection:"column",gap:"24px"},n&&{"@media (min-width: 864px)":{flexDirection:"row",gap:"32px"}})},a.createElement(f.A,{sx:{flex:1}},a.createElement(d.A,{className:t.sliderLabel},"Details: ",r,"%"),a.createElement(y.A,{value:r,onChange:c,min:0,max:100,step:10,valueLabelDisplay:"auto",valueLabelFormat:function(e){return"".concat(e,"%")},disabled:l})),n&&a.createElement(f.A,{sx:{flex:1}},a.createElement(d.A,{className:t.sliderLabel},"Fidelity: ",i,"%"),a.createElement(y.A,{value:i,onChange:u,min:0,max:100,step:2,valueLabelDisplay:"auto",valueLabelFormat:function(e){return"".concat(e,"%")},disabled:l}))))}),(function(e,t){return e.showFidelity===t.showFidelity&&e.transformationPercent===t.transformationPercent&&e.fidelityPercent===t.fidelityPercent&&e.disabled===t.disabled})),se=(0,a.memo)((function(e){var t=e.classes,n=e.preview,r=e.quantizedData,i=e.preferredSize,s=e.availableSizes,l=e.preloading,u=e.preloadProgress,d=e.showingOriginal,p=e.hasProcessorData,f=e.originalImageData,b=e.onSizeChange,y=e.onToggleComparison,E=e.onApplyQuantize,w=e.onCancelQuantize,_=e.onDownload,C=e.onOpenEditor,x=e.canvasRef,S=e.originalCanvasRef,T=e.base64Kb,k=r||n;return a.createElement("div",{style:{position:"relative"}},a.createElement(h.A,{component:"fieldset",style:{padding:"8px 16px 32px 16px",margin:"0px 0px -16px 0px",borderRadius:"21px 21px 0px 0px",background:"#101010",width:"100%",top:"0px",display:"flow",zIndex:0}},r?a.createElement(O.A,{in:!0,timeout:600},a.createElement("div",{className:t.quantizedMessage},a.createElement("span",{style:{lineHeight:"32px"}},"Quantization applied"),a.createElement(c.A,{variant:"text",onClick:w},"CANCEL"))):1===s.length?a.createElement(O.A,{in:!0,timeout:600},a.createElement("p",{style:{lineHeight:"32px"}},"Your artwork is already optimized for pixel art")):a.createElement(o.A,{row:!0,defaultValue:"top","aria-label":"size",name:"SIZE",color:"primary",value:i,onChange:b},s.map((function(e,t){return a.createElement(O.A,{key:e,in:!0,timeout:200*(t+1)},a.createElement(g.A,{value:e,control:a.createElement(v.A,null),label:e}))})))),a.createElement("div",{className:t.comparisonContainer+" pixelated",style:{width:"100%",marginBottom:16}},p&&f&&a.createElement("canvas",{className:t.comparisonCanvas,ref:S,width:f.width,height:f.height,style:{borderRadius:"21px",width:"100%",opacity:k?1:0,position:d?"relative":"absolute",pointerEvents:d?"auto":"none",top:0,left:0}}),k&&a.createElement("canvas",{className:t.comparisonCanvas,ref:x,width:k.width,height:k.height,style:{borderRadius:"21px",width:"100%",opacity:d?0:1,position:d?"absolute":"relative",pointerEvents:d?"none":"auto",top:d?0:"auto",left:d?0:"auto"}}),l&&a.createElement("div",{className:t.loadingIndicator},a.createElement(m.A,{size:12,style:{color:"#fff"}}),a.createElement("span",null,"Preloading ",Math.round(u),"%")),p&&a.createElement(M.A,{className:t.comparisonButton,onClick:y,size:"small"},a.createElement(A.A,null))),a.createElement("div",{style:{padding:"64px 8px 16px 8px",textAlign:"right",position:"absolute",borderRadius:"0px 0px 21px 21px",background:"linear-gradient(0deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",bottom:"0px",zIndex:10}},a.createElement(O.A,{in:!0,timeout:600},a.createElement(c.A,{variant:"text",style:{color:"#ffffff88"},onClick:E},r?"ADJUST":"QUANTIZE")),a.createElement(O.A,{in:!0,timeout:800},a.createElement(c.A,{variant:"text",style:{color:"#ffffff88"},onClick:_},"DOWNLOAD (",T.toFixed(2)," kB)")),a.createElement(O.A,{in:!0,timeout:1e3},a.createElement(c.A,{variant:"text",style:{color:"#ffffff88"},onClick:C},"OPEN EDITOR"))))}),(function(e,t){return e.preview===t.preview&&e.quantizedData===t.quantizedData&&e.preferredSize===t.preferredSize&&e.preloading===t.preloading&&e.preloadProgress===t.preloadProgress&&e.showingOriginal===t.showingOriginal&&e.base64Kb===t.base64Kb&&e.availableSizes===t.availableSizes&&e.hasProcessorData===t.hasProcessorData})),le=(0,a.memo)((function(e){var t,n=e.classes,r=e.licenseCustomization,i=e.onOpenLicense,o=null==r?void 0:r.isCustomized,s=(0,a.useMemo)((function(){return null!=r&&r.rightsConfiguration?{holderRights:Object.values(r.rightsConfiguration.holderRights||{}).filter((function(e){return!0===e})).length,visitorRights:Object.values(r.rightsConfiguration.visitorRights||{}).filter((function(e){return!0===e})).length,royalty:r.royaltyPercentage||0}:{holderRights:0,visitorRights:0,royalty:0}}),[r]);return a.createElement("div",{className:n.licenseSection},a.createElement(z.A,{className:n.licensePaper},a.createElement("div",{className:n.licenseHeader},a.createElement(d.A,{className:n.licenseTitle},a.createElement(R.A,null),"NFT License"),o&&a.createElement(L.A,{icon:a.createElement(D.A,null),label:"Configured",size:"small",className:n.configuredChip})),a.createElement(d.A,{variant:"body2",style:{color:"#bbb",marginBottom:16}},"Configure usage rights and terms for your NFT artwork"),r&&a.createElement("div",{className:n.licenseSummary},a.createElement("div",{className:n.licenseStat},a.createElement("span",{className:n.licenseStatLabel},"Holder Rights:"),a.createElement("span",{className:n.licenseStatValue},s.holderRights," granted")),a.createElement("div",{className:n.licenseStat},a.createElement("span",{className:n.licenseStatLabel},"Visitor Rights:"),a.createElement("span",{className:n.licenseStatValue},s.visitorRights," granted")),a.createElement("div",{className:n.licenseStat},a.createElement("span",{className:n.licenseStatLabel},"Royalty:"),a.createElement("span",{className:n.licenseStatValue},s.royalty,"%")),a.createElement("div",{className:n.licenseStat},a.createElement("span",{className:n.licenseStatLabel},"Jurisdiction:"),a.createElement("span",{className:n.licenseStatValue},(null===(t=r.governingLaw)||void 0===t?void 0:t.jurisdiction)||"Not set"))),a.createElement(c.A,{variant:"contained",color:"primary",fullWidth:!0,style:{marginTop:8},onClick:i},o?"Edit License":"Configure License")))}),(function(e,t){return e.licenseCustomization===t.licenseCustomization})),ce=(0,a.memo)((function(e){var t=e.classes,n=e.title,r=e.description,i=e.tags,o=e.base64,s=e.nsfw,l=e.licenseCustomization,c=e.validationErrors,u=e.touched,p=e.onTitleChange,m=e.onDescriptionChange,h=e.onTagsChange,v=e.onNsfwChange,y=e.onOpenLicense,w=e.onFieldBlur,_=n.length,A=r.length,C=function(){return A>q.DESCRIPTION_MAX_LENGTH?t.charCounterError:A>.8*q.DESCRIPTION_MAX_LENGTH?t.charCounterWarning:t.charCounter};return a.createElement(O.A,{in:!0,timeout:300},a.createElement("div",null,a.createElement(b.A,{style:{marginTop:8},value:n,fullWidth:!0,label:"Title",variant:"outlined",onChange:p,onBlur:function(){return w("title")},error:u.title&&!!c.title,className:u.title&&c.title?t.errorField:"",inputProps:{maxLength:q.TITLE_MAX_LENGTH+10}}),a.createElement(f.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},u.title&&c.title?a.createElement(d.A,{className:t.errorText},c.title):a.createElement("span",null),a.createElement(d.A,{className:_>q.TITLE_MAX_LENGTH?t.charCounterError:_>.8*q.TITLE_MAX_LENGTH?t.charCounterWarning:t.charCounter},_,"/",q.TITLE_MAX_LENGTH)),a.createElement(b.A,{style:{marginTop:16},label:"Content",multiline:!0,rows:1,defaultValue:o,variant:"filled",disabled:!0,fullWidth:!0}),a.createElement(f.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},a.createElement(d.A,{className:t.errorText},"Encoded Image"),a.createElement(d.A,{className:C()},o?"".concat((o.length/1e3*3/4).toFixed(2)," kB"):"")),a.createElement(b.A,{style:{marginTop:16},label:"Description",multiline:!0,minRows:6,value:r,onChange:m,onBlur:function(){return w("description")},variant:"outlined",fullWidth:!0,error:u.description&&!!c.description,className:u.description&&c.description?t.errorField:"",inputProps:{maxLength:q.DESCRIPTION_MAX_LENGTH+100}}),a.createElement(f.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},u.description&&c.description?a.createElement(d.A,{className:t.errorText},c.description):a.createElement("span",null),a.createElement(d.A,{className:C()},A,"/",q.DESCRIPTION_MAX_LENGTH)),a.createElement(f.A,{style:{marginTop:16,marginBottom:8}},a.createElement(N.A,{fullWidth:!0,variant:"outlined",label:"Tags",placeholder:"Add tag and press Enter",value:i,onAdd:function(e){var t=e.toLowerCase().trim();t&&!i.includes(t)&&h([].concat(ye(i),[t]))},onDelete:function(e,t){var n=ye(i);n.splice(t,1),h(n)},onBlur:function(){return w("tags")},error:u.tags&&!!c.tags,className:u.tags&&c.tags?t.errorField:""}),a.createElement(f.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mt:.5},u.tags&&c.tags?a.createElement(d.A,{className:t.errorText},c.tags):a.createElement(d.A,{className:t.charCounter,style:{color:"#666"}},"Tags: lowercase, no dots, min 3 chars, cannot start with number or hyphen"),a.createElement(d.A,{className:i.length>q.TAGS_MAX_COUNT?t.charCounterError:t.charCounter},i.length,"/",q.TAGS_MAX_COUNT))),a.createElement(f.A,{className:t.nsfwSwitch},a.createElement(g.A,{control:a.createElement(E.A,{checked:s,onChange:v,color:"primary"}),label:"Not Safe For Watching"}),a.createElement(d.A,{variant:"caption",style:{color:"#888",display:"block",marginLeft:48}},"Enable this if your content contains mature or sensitive material")),a.createElement(le,{classes:t,licenseCustomization:l,onOpenLicense:y})))}),(function(e,t){return e.title===t.title&&e.description===t.description&&e.tags===t.tags&&e.base64===t.base64&&e.nsfw===t.nsfw&&e.licenseCustomization===t.licenseCustomization&&e.validationErrors===t.validationErrors&&e.touched===t.touched}));function Ie(e){var t=e.classes,r=e.open,i=e.onClose,o=e.api,p=he((0,a.useReducer)(re,te),2),h=p[0],g=p[1],v=(0,a.useRef)(null),E=(0,a.useRef)(null),A=(0,a.useRef)(null),N=(0,a.useRef)(null),L=(0,a.useRef)(null),R=(0,a.useRef)(null),D=(0,a.useRef)(!0),F=(0,a.useRef)(null),j=he((0,a.useState)(0),2),W=(j[0],j[1]),G=h.tabValue,U=h.currentStep,q=h.title,X=h.description,le=h.tags,ue=h.nsfw,pe=h.preferredSize,fe=h.aspectRatio,ge=h.transformationPercent,ve=h.fidelityPercent,be=h.preview,ye=h.previewCache,Ee=h.quantizedData,we=h.base64,_e=h.processorData,Ae=h.availableSizes,Ce=h.dropzoneActive,xe=h.message,Se=h.inputFileUrl,Te=h.inputFile,ke=h.showingOriginal,Ne=h.preloading,Oe=h.preloadProgress,Ie=h.isGenerating,Pe=h.canvasKey,Le=h.closeConfirmOpen,Re=h.useAiOpen,De=h.quantizeDialogOpen,ze=h.licenseCustomizationOpen,Me=h.publishConfirmOpen,Fe=h.quantizeDownscale,je=h.quantizeColors,$e=h.licenseBase,Be=h.licenseCustomization,We=h.processName,Ge=h.processStart,Ue=h.processFinish,qe=h.validationErrors,Ve=h.touched,He=h.isPublishing,Xe=Date.now(),Ke=Ue-Ge,Ze=Xe-Ge,Ye=Ke>0?Math.min(Ze/Ke,1):0,Je=Ke>Ze&&Ke>0,Qe=((we||"").length||0)/1e3*3/4,et=(0,a.useMemo)((function(){return Z(q,X,le).valid&&we}),[q,X,le,we]);(0,a.useEffect)((function(){var e,t;return D.current=!0,e=P.V1,t=(0,P.b0)(e),g({type:ne.SET_MULTIPLE,payload:{licenseBase:e,licenseCustomization:t}}),function(){D.current=!1}}),[]),(0,a.useEffect)((function(){return function(){J(Se),R.current&&clearTimeout(R.current),L.current&&clearTimeout(L.current)}}),[]),(0,a.useEffect)((function(){F.current&&F.current!==Se&&J(F.current),F.current=Se}),[Se]),(0,a.useEffect)((function(){if(Je&&Ge>0&&Ue>0){var e=setInterval((function(){D.current&&W((function(e){return e+1}))}),100);return function(){return clearInterval(e)}}}),[Je,Ge,Ue]),(0,a.useEffect)((function(){var e=N.current;if(e){var t=function(e){e.preventDefault(),e.stopPropagation(),g({type:ne.SET_FIELD,field:"dropzoneActive",value:!0})},n=function(e){e.preventDefault(),e.stopPropagation()},r=function(e){e.preventDefault(),e.stopPropagation(),g({type:ne.SET_FIELD,field:"dropzoneActive",value:!1})},a=function(e){e.preventDefault(),e.stopPropagation(),g({type:ne.SET_FIELD,field:"dropzoneActive",value:!1})};return e.addEventListener("dragenter",t),e.addEventListener("dragover",n),e.addEventListener("dragleave",r),e.addEventListener("dragend",a),function(){e.removeEventListener("dragenter",t),e.removeEventListener("dragover",n),e.removeEventListener("dragleave",r),e.removeEventListener("dragend",a)}}}),[]),(0,a.useEffect)((function(){var e=N.current;if(e){var t=function(){var e=me(de().m((function e(t){var n;return de().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),t.stopPropagation(),g({type:ne.SET_FIELD,field:"dropzoneActive",value:!1}),!(n=ee(t))){e.n=1;break}return e.n=1,tt(n);case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.addEventListener("drop",t),function(){e.removeEventListener("drop",t)}}}),[fe,ge,ve]),(0,a.useEffect)((function(){if(v.current){var e=Ee||be;if(e&&e.width){var t=v.current,r=t.getContext("2d");t.width=e.width,t.height=e.height,r.putImageData(e,0,0),(0,k.A)((function(){return Promise.all([n.e(46),n.e(47)]).then(n.bind(n,2054))})).then((function(t){var n=t.encodeIMG;D.current&&n(e,"WEBP",!0).then((function(e){D.current&&g({type:ne.SET_FIELD,field:"base64",value:e})}))}))}}}),[be,Ee,Pe]),(0,a.useEffect)((function(){if(E.current&&null!=_e&&_e.originalImageData){var e=_e.originalImageData,t=E.current;t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0)}}),[_e]),(0,a.useEffect)((function(){A.current&&_e&&De&&(L.current&&clearTimeout(L.current),L.current=setTimeout((function(){if(D.current)try{var e=(0,T.ZL)({width:_e.canvasWidth,height:_e.canvasHeight},_e.cachedBuffer,Fe,je),t=A.current;if(e&&null!=t&&t.getContext){t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0)}}catch(e){}}),300))}),[Fe,je,_e,De]);var tt=(0,a.useCallback)(function(){var e=me(de().m((function e(t){var n,r;return de().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,T.Ei)(t,512,512,160);case 2:(n=e.v)instanceof ImageData?(g({type:ne.SET_PREVIEW_DATA,preview:n,sizeName:"default",processorData:null,availableSizes:["default"]}),g({type:ne.SET_FIELD,field:"message",value:"The image appears to be already optimized!"})):(J(Se),r=URL.createObjectURL(t),g({type:ne.SET_MULTIPLE,payload:{inputFileUrl:r,inputFile:t,useAiOpen:!0}})),e.n=4;break;case 3:e.p=3,e.v,g({type:ne.SET_FIELD,field:"message",value:"Error processing image. Please try again."});case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),[Se]),nt=(0,a.useCallback)(function(){var e=me(de().m((function e(t){var n;return de().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),t.stopPropagation(),!(n=ee(t))){e.n=1;break}return e.n=1,tt(n);case 1:t.target&&(t.target.value="");case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),[tt]),rt=(0,a.useCallback)(function(){var e=me(de().m((function e(t){var n,r,a,i,o;return de().w((function(e){for(;;)switch(e.p=e.n){case 0:if(D.current){e.n=1;break}return e.a(2);case 1:return e.p=1,g({type:ne.SET_FIELD,field:"isGenerating",value:!0}),s=ge,n=Math.round(5+s/100*10),r=Q(ve),e.n=2,(0,T.zF)({description:X.length?X:void 0,file:Te||void 0},1024,1024,void 0,(function(e){D.current&&g({type:ne.SET_FIELD,field:"message",value:e})}),(function(e,t,n){D.current&&g({type:ne.SET_PROCESS,name:e,start:t,finish:n})}),t,fe,n,r);case 2:if(a=e.v,D.current){e.n=3;break}return e.a(2);case 3:i=null;try{i=a.generatePreview(pe)}catch(e){(null===(o=a.availableSizes)||void 0===o?void 0:o.length)>0&&(i=a.generatePreview(a.availableSizes[0]))}i&&(g({type:ne.SET_PREVIEW_DATA,preview:i,sizeName:pe,processorData:a,availableSizes:a.availableSizes||[],title:a.prompt||""}),at(a,a.availableSizes,pe)),e.n=5;break;case 4:e.p=4,e.v,D.current&&g({type:ne.SET_MULTIPLE,payload:{isGenerating:!1,message:"Error processing image. Please try again."}});case 5:return e.a(2)}var s}),e,null,[[1,4]])})));return function(t){return e.apply(this,arguments)}}(),[X,Te,pe,fe,ge,ve]),at=(0,a.useCallback)((function(e,t,n){e&&!Ne&&(R.current&&clearTimeout(R.current),R.current=setTimeout(me(de().m((function r(){var a,i,o;return de().w((function(r){for(;;)switch(r.p=r.n){case 0:if(D.current){r.n=1;break}return r.a(2);case 1:g({type:ne.SET_FIELD,field:"preloading",value:!0}),a=0;case 2:if(!(a<t.length)){r.n=7;break}if((i=t[a])!==n){r.n=3;break}return r.a(3,6);case 3:return r.p=3,o=e.generatePreview(i),D.current&&(g({type:ne.CACHE_PREVIEW,sizeName:i,preview:o,setAsCurrent:!1}),g({type:ne.SET_FIELD,field:"preloadProgress",value:(a+1)/t.length*100})),r.n=4,new Promise((function(e){return setTimeout(e,50)}));case 4:r.n=6;break;case 5:r.p=5,r.v;case 6:a++,r.n=2;break;case 7:D.current&&g({type:ne.SET_MULTIPLE,payload:{preloading:!1,preloadProgress:100}});case 8:return r.a(2)}}),r,null,[[3,5]])}))),500))}),[Ne]),it=(0,a.useCallback)((function(){J(Se),R.current&&clearTimeout(R.current),L.current&&clearTimeout(L.current);var e=$e?(0,P.b0)($e):null;g({type:ne.RESET,licenseBase:$e,defaultCustomization:e})}),[Se,$e]),ot=(0,a.useCallback)((function(){J(Se),R.current&&clearTimeout(R.current),L.current&&clearTimeout(L.current),g({type:ne.RESET_UPLOAD})}),[Se]),st=(0,a.useCallback)((function(e){g({type:ne.SET_FIELD,field:"useAiOpen",value:!1}),rt(e)}),[rt]),lt=(0,a.useCallback)((function(e){var t=e.target.value;if(g({type:ne.SET_FIELD,field:"preferredSize",value:t}),ye[t])g({type:ne.CACHE_PREVIEW,sizeName:t,preview:ye[t],setAsCurrent:!0});else if(null!=_e&&_e.generatePreview)try{var n=_e.generatePreview(t);g({type:ne.CACHE_PREVIEW,sizeName:t,preview:n,setAsCurrent:!0})}catch(e){}}),[ye,_e]),ct=(0,a.useCallback)((function(e){var t=e.target.value;if(g({type:ne.SET_FIELD,field:"title",value:t}),Ve.title){var n=V(t);n.valid?g({type:ne.CLEAR_VALIDATION_ERROR,field:"title"}):g({type:ne.SET_VALIDATION_ERROR,field:"title",error:n.error})}}),[Ve.title]),ut=(0,a.useCallback)((function(e){var t=e.target.value;if(g({type:ne.SET_FIELD,field:"description",value:t}),Ve.description){var n=H(t);n.valid?g({type:ne.CLEAR_VALIDATION_ERROR,field:"description"}):g({type:ne.SET_VALIDATION_ERROR,field:"description",error:n.error})}}),[Ve.description]),dt=(0,a.useCallback)((function(e){if(g({type:ne.SET_FIELD,field:"tags",value:e}),Ve.tags){var t=K(e);t.valid?g({type:ne.CLEAR_VALIDATION_ERROR,field:"tags"}):g({type:ne.SET_VALIDATION_ERROR,field:"tags",error:t.error})}}),[Ve.tags]),pt=(0,a.useCallback)((function(e){g({type:ne.SET_FIELD,field:"nsfw",value:e.target.checked})}),[]),ft=(0,a.useCallback)((function(e){var t;switch(g({type:ne.SET_TOUCHED,field:e}),e){case"title":t=V(q);break;case"description":t=H(X);break;case"tags":t=K(le);break;default:return}t.valid?g({type:ne.CLEAR_VALIDATION_ERROR,field:e}):g({type:ne.SET_VALIDATION_ERROR,field:e,error:t.error})}),[q,X,le]),mt=(0,a.useCallback)((function(e,t){g({type:ne.SET_FIELD,field:"tabValue",value:t})}),[]),ht=(0,a.useCallback)((function(e){g({type:ne.SET_FIELD,field:"aspectRatio",value:e})}),[]),gt=(0,a.useCallback)((function(e){g({type:ne.SET_FIELD,field:"transformationPercent",value:e})}),[]),vt=(0,a.useCallback)((function(e){g({type:ne.SET_FIELD,field:"fidelityPercent",value:e})}),[]),bt=(0,a.useCallback)((function(){g({type:ne.SET_FIELD,field:"showingOriginal",value:!ke})}),[ke]),yt=(0,a.useCallback)((function(){var e=Ee||be;e&&(0,k.A)((function(){return Promise.all([n.e(46),n.e(47)]).then(n.bind(n,2054))})).then((function(t){(0,t.encodeIMG)(e,"PNG",!0).then((function(e){var t=document.createElement("a");t.download="Pixagram.png",t.href=e,t.click(),t.remove()}))}))}),[Ee,be]),Et=(0,a.useCallback)((function(e){window.open(e,"_blank")}),[]),wt=(0,a.useCallback)((function(){0===U?arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(it(),i()):g({type:ne.SET_FIELD,field:"closeConfirmOpen",value:!0}):1===U?ot():g({type:ne.SET_FIELD,field:"currentStep",value:U-1})}),[U,it,ot,i]),_t=(0,a.useCallback)((function(){var e=Z(q,X,le);e.valid?g({type:ne.SET_FIELD,field:"publishConfirmOpen",value:!0}):g({type:ne.VALIDATE_ALL,errors:e.errors})}),[q,X,le]),At=(0,a.useCallback)(me(de().m((function e(){var t,n,r,a,s,l,c;return de().w((function(e){for(;;)switch(e.p=e.n){case 0:if(g({type:ne.SET_FIELD,field:"publishConfirmOpen",value:!1}),g({type:ne.SET_FIELD,field:"isPublishing",value:!0}),e.p=1,o&&o.broadcast){e.n=2;break}throw new Error("API not available");case 2:return n=Y(q),r=le[0],a={app:"pixagram/3.0.2",format:"markdown",tags:le,image:[],description:X,nsfw:ue,license:Be?{type:"PIXA_LICENSE",version:Be.version||"1.0",rightsConfiguration:Be.rightsConfiguration,royaltyPercentage:Be.royaltyPercentage,governingLaw:Be.governingLaw,isCustomized:Be.isCustomized}:null},e.n=3,null===(t=o.sessionManager)||void 0===t?void 0:t.getActiveAccount();case 3:if(s=e.v){e.n=4;break}throw new Error("No active account. Please log in first.");case 4:return l=we,e.n=5,o.broadcast.comment({parentAuthor:"",parentPermlink:r,author:s,permlink:n,title:q,body:l,jsonMetadata:a});case 5:g({type:ne.SET_FIELD,field:"isPublishing",value:!1}),_.trigger_snackbar("Post published successfully!"),setTimeout((function(){it(),i()}),1500),e.n=7;break;case 6:e.p=6,c=e.v,g({type:ne.SET_FIELD,field:"isPublishing",value:!1}),_.trigger_snackbar(c.message||"Failed to publish post. Please try again.");case 7:return e.a(2)}}),e,null,[[1,6]])}))),[o,q,X,le,ue,we,Be,it,i]),Ct=(0,a.useCallback)((function(){if(0===U&&1===G){if(!X.trim())return;g({type:ne.SET_FIELD,field:"isGenerating",value:!0}),rt(!0)}else 2===U?_t():g({type:ne.SET_FIELD,field:"currentStep",value:U+1})}),[U,G,X,rt,_t]),xt=(0,a.useCallback)((function(){if(_e)try{var e=(0,T.ZL)({width:_e.canvasWidth,height:_e.canvasHeight},_e.cachedBuffer,Fe,je);g({type:ne.SET_MULTIPLE,payload:{quantizedData:e,quantizeDialogOpen:!De}}),g({type:ne.INCREMENT_CANVAS_KEY})}catch(e){}}),[_e,Fe,je,De]),St=(0,a.useCallback)((function(){if(_e)try{var e=(0,T.ZL)({width:_e.canvasWidth,height:_e.canvasHeight},_e.cachedBuffer,Fe,je);g({type:ne.SET_MULTIPLE,payload:{quantizedData:e,quantizeDialogOpen:!1}}),g({type:ne.INCREMENT_CANVAS_KEY})}catch(e){}}),[_e,Fe,je]),Tt=(0,a.useCallback)((function(){g({type:ne.SET_MULTIPLE,payload:{quantizedData:null,quantizeDialogOpen:!1,quantizeDownscale:4,quantizeColors:64}}),ye[pe]&&g({type:ne.CACHE_PREVIEW,sizeName:pe,preview:ye[pe],setAsCurrent:!0})}),[pe,ye]),kt=(0,a.useCallback)((function(){g({type:ne.SET_FIELD,field:"licenseCustomizationOpen",value:!0})}),[]),Nt=(0,a.useCallback)((function(){g({type:ne.SET_FIELD,field:"licenseCustomizationOpen",value:!1})}),[]),Ot=(0,a.useCallback)((function(e){g({type:ne.SET_MULTIPLE,payload:{licenseCustomization:e,licenseCustomizationOpen:!1}})}),[]),It=(0,a.useCallback)((function(e,t){g({type:ne.SET_FIELD,field:"quantizeDownscale",value:t})}),[]),Pt=(0,a.useCallback)((function(e,t){g({type:ne.SET_FIELD,field:"quantizeColors",value:t})}),[]),Lt=(0,a.useCallback)((function(){g({type:ne.SET_FIELD,field:"closeConfirmOpen",value:!1})}),[]),Rt=(0,a.useCallback)((function(){g({type:ne.SET_FIELD,field:"closeConfirmOpen",value:!1}),it(),i()}),[it,i]),Dt=(0,a.useCallback)((function(){g({type:ne.SET_FIELD,field:"publishConfirmOpen",value:!1})}),[]),zt=null;switch(U){case 0:zt=a.createElement(a.Fragment,null,a.createElement(B.A,{className:t.cardTabs,value:G,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:mt,disabled:Ie},a.createElement($.A,{icon:a.createElement(x.A,null)}),a.createElement($.A,{icon:a.createElement(S.A,null)})),1===G?a.createElement("div",{style:{width:"100%"}},a.createElement(ie,{classes:t,aspectRatio:fe,onAspectRatioChange:ht,disabled:Ie}),a.createElement(O.A,{in:!0,timeout:900},a.createElement(b.A,{className:t.descriptionField,label:"Description",multiline:!0,minRows:16,value:X,onChange:ut,variant:"outlined",fullWidth:!0,disabled:Ie,InputProps:{endAdornment:a.createElement(w.A,{position:"end",style:{alignSelf:"flex-end",marginBottom:"8px",marginRight:"16px"}},a.createElement(M.A,{className:t.sendButton,onClick:Ct,disabled:!X.trim()||Ie,edge:"end"},Ie?a.createElement(m.A,{size:24,style:{color:"#fff"}}):a.createElement(C.A,null)))}})),a.createElement(oe,{classes:t,showFidelity:!1,transformationPercent:ge,fidelityPercent:ve,onTransformationChange:gt,onFidelityChange:vt,disabled:Ie})):a.createElement(a.Fragment,null,a.createElement(b.A,{className:t.descriptionField,label:"Description (Optional)",multiline:!0,minRows:1,value:X,onChange:ut,variant:"outlined",fullWidth:!0,style:{marginBottom:"16px"}}),a.createElement(ae,{classes:t,dropzoneActive:Ce,inputFileUrl:Se,loading:Je,processName:We,loadingPercent:Ye,message:xe,onFileUpload:nt,dropRef:N}),a.createElement(oe,{classes:t,showFidelity:!0,transformationPercent:ge,fidelityPercent:ve,onTransformationChange:gt,onFidelityChange:vt,disabled:Je})));break;case 1:zt=a.createElement(se,{classes:t,preview:be,quantizedData:Ee,preferredSize:pe,availableSizes:Ae,preloading:Ne,preloadProgress:Oe,showingOriginal:ke,hasProcessorData:!!_e,originalImageData:null==_e?void 0:_e.originalImageData,onSizeChange:lt,onToggleComparison:bt,onApplyQuantize:xt,onCancelQuantize:Tt,onDownload:yt,onOpenEditor:function(){return Et("https://pixa.pics/")},canvasRef:v,originalCanvasRef:E,base64Kb:Qe});break;case 2:zt=a.createElement(ce,{classes:t,title:q,description:X,tags:le,base64:we,nsfw:ue,licenseCustomization:Be,validationErrors:qe,touched:Ve,onTitleChange:ct,onDescriptionChange:ut,onTagsChange:dt,onNsfwChange:pt,onOpenLicense:kt,onFieldBlur:ft})}return a.createElement(a.Fragment,null,a.createElement(u.A,{className:t.dialog,open:r,maxWidth:!1,fullWidth:!1,disablePortal:!1,onClose:function(){return g({type:ne.SET_FIELD,field:"closeConfirmOpen",value:!0})},keepMounted:!1},a.createElement(l.A,{style:{position:"relative"}},zt),a.createElement(s.A,{style:{backgroundColor:"#171717",borderRadius:"32px",textAlign:"right",justifyContent:"space-between",alignItems:"center",padding:"16px 24px"}},a.createElement(f.A,{style:{textAlign:"left"}},a.createElement(d.A,{variant:"body2",style:{textTransform:"uppercase",marginBottom:"8px",fontWeight:600,marginTop:0,fontSize:"1rem",color:"#ccc",lineHeight:1}},["Create","Adjust","Post"][U]," (",U+1,"/",3,")"),a.createElement(d.A,{variant:"caption",style:{color:"#999",display:"block",fontSize:"0.875rem",lineHeight:1.125}},"Wizard of Creation")),a.createElement(f.A,null,U>0?a.createElement(c.A,{variant:"text",color:"primary",onClick:function(){return wt()},disabled:He},"Back"):a.createElement(c.A,{variant:"text",color:"primary",onClick:function(){return wt()},disabled:He},"Close"),a.createElement(c.A,{size:"large",style:{borderRadius:"32px"},variant:"contained",color:"primary",disabled:He||(0===U&&1===G?!X.trim()||Ie:0===U||2===U&&!et),onClick:Ct},He?a.createElement(m.A,{size:24,style:{color:"#fff"}}):2===U?"Publish":0===U&&1===G?"Generate":"Next")))),a.createElement(u.A,{PaperProps:{classes:{root:t.whiteDialog}},open:Le,maxWidth:"xs",disablePortal:!1,onClose:Lt,keepMounted:!1},a.createElement(l.A,null,a.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Are you sure?"),a.createElement(d.A,{variant:"body2",color:"textPrimary",component:"p"},"Your current artwork will be lost.")),a.createElement(s.A,{style:{textAlign:"right"}},a.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:Lt},"Cancel"),a.createElement(c.A,{variant:"contained",color:"primary",onClick:Rt},"Close"))),a.createElement(u.A,{PaperProps:{classes:{root:t.whiteDialog}},open:Me,maxWidth:"md",fullWidth:!0,disablePortal:!1,onClose:Dt,keepMounted:!1},a.createElement(l.A,{className:t.publishConfirmContent},a.createElement(d.A,{style:{marginTop:8,marginBottom:24,color:"#000"},component:"h2",variant:"h6"},"Confirm Publication"),a.createElement(d.A,{variant:"body2",style:{color:"#555",marginBottom:16}},"Please review your post details before publishing:"),a.createElement(z.A,{style:{padding:16,backgroundColor:"#f5f5f5",borderRadius:21,boxShadow:"none"}},a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"Title:"),a.createElement("span",{className:t.publishSummaryValue},q)),a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"Description:"),a.createElement("span",{className:t.publishSummaryValue},X.length>100?"".concat(X.substring(0,100),"..."):X)),a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"Tags:"),a.createElement("span",{className:t.publishSummaryValue},le.join(", "))),a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"NSFW:"),a.createElement("span",{className:t.publishSummaryValue},ue?"Yes":"No")),a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"Content Size:"),a.createElement("span",{className:t.publishSummaryValue},Qe.toFixed(2)," kB")),a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"License:"),a.createElement("span",{className:t.publishSummaryValue},null!=Be&&Be.isCustomized?"Custom PIXA License":"Default PIXA License"))),a.createElement(d.A,{variant:"body2",style:{color:"#666",marginTop:16}},"This action cannot be undone. Your post will be published to the blockchain.")),a.createElement(s.A,{style:{textAlign:"right",padding:16}},a.createElement(c.A,{variant:"text",color:"primary",onClick:Dt},"Cancel"),a.createElement(c.A,{variant:"contained",color:"primary",onClick:At},"Confirm & Publish"))),a.createElement(u.A,{PaperProps:{classes:{root:t.whiteDialog}},open:Re,maxWidth:"xs",disablePortal:!1,onClose:function(){return st(!1)},keepMounted:!1},a.createElement(l.A,null,a.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Transform your picture with AI?"),a.createElement(d.A,{variant:"body2",color:"textPrimary",component:"p"},"The conversion process that involves a style transfer into pixel-art is fast.",a.createElement("br",null),"While being free and anonymous, it only takes around 20 seconds.")),a.createElement(s.A,{style:{textAlign:"right"}},a.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:function(){return st(!1)}},"NO"),a.createElement(c.A,{variant:"contained",color:"primary",onClick:function(){return st(!0)}},"YES"))),a.createElement(u.A,{PaperProps:{classes:{root:t.whiteDialog}},open:De,maxWidth:"md",fullWidth:!0,disablePortal:!1,onClose:Tt,keepMounted:!1},a.createElement(l.A,null,a.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Quantization Settings"),a.createElement("div",{style:{backgroundColor:"#efefef",marginBottom:-32,padding:"24px 24px 48px 24px",borderRadius:"21px"}},a.createElement(f.A,null,a.createElement(d.A,{gutterBottom:!0},"Downscale Ratio"),a.createElement(y.A,{value:Fe,onChange:It,min:2,max:32,step:1,marks:[{value:2,label:"2x"},{value:4,label:"4x"},{value:8,label:"8x"},{value:16,label:"16x"},{value:32,label:"32x"}],valueLabelDisplay:"auto"})),a.createElement(f.A,null,a.createElement(d.A,{gutterBottom:!0},"Number of Colors"),a.createElement(y.A,{value:je,onChange:Pt,min:2,max:256,step:1,marks:[{value:2,label:"2"},{value:16,label:"16"},{value:32,label:"32"},{value:64,label:"64"},{value:128,label:"128"},{value:256,label:"256"}],valueLabelDisplay:"auto"}))),a.createElement(f.A,null,a.createElement("div",{className:"pixelated",style:{width:"100%",textAlign:"center"}},a.createElement("canvas",{style:{borderRadius:"21px",width:"100%"},ref:A})))),a.createElement(s.A,{style:{textAlign:"right"}},a.createElement(c.A,{variant:"text",color:"primary",onClick:Tt},"Cancel"),a.createElement(c.A,{variant:"contained",color:"primary",onClick:St},"Apply"))),$e&&a.createElement(I.A,{open:ze,onClose:Nt,onSave:Ot,licenseBase:$e,initialCustomization:Be}))}const Pe=(0,i.default)((function(e){return{dialog:{"& .MuiDialogContent-root":{padding:"24px 24px 0px 24px"},"& div.MuiPaper-rounded.MuiDialog-paper":{width:"min(calc(100% - 64px), 800px)",maxWidth:"none","@media (max-width: 864px)":{width:"100%",maxWidth:"none",margin:"none"}}},dropZone:{width:"100%",height:"100%",minHeight:"384px",maxHeight:"70vh",border:"2px dashed #555",textAlign:"center",verticalAlign:"middle",backgroundColor:"transparent",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 225ms",position:"relative",overflow:"hidden"},dropZoneActive:{width:"100%",height:"100%",minHeight:"384px",maxHeight:"70vh",border:"2px solid #555",textAlign:"center",verticalAlign:"middle",backgroundColor:"rgba(255, 255, 255, 0.07)",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 25ms",position:"relative",overflow:"hidden"},whiteDialog:{backgroundColor:"#fff !important",color:"#000 !important",boxShadow:"0px 11px 15px -7px rgb(255 255 255 / 20%), 0px 24px 38px 3px rgb(255 255 255 / 14%), 0px 9px 46px 8px rgb(255 255 255 / 12%) !important","& .MuiButton-textPrimary":{color:"#222 !important","&:hover":{color:"#000 !important"}},"& .MuiButton-containedPrimary":{color:"#fff !important",backgroundColor:"#000 !important","&:hover":{color:"#ddd !important",backgroundColor:"#222 !important"}},"& .MuiRadio-colorPrimary.Mui-checked, & .MuiCheckbox-colorPrimary.Mui-checked, & .MuiRadio-colorSecondary.Mui-checked":{color:"#000 !important"},"& .MuiRadio-root, & .MuiFormLabel-root.Mui-focused, .MuiTypography-root":{color:"#000 !important"},"& .MuiSlider-root":{color:"#000 !important"},"& span.MuiSlider-valueLabel > span > span":{color:"#fff !important"},"& .MuiSlider-markLabelActive":{color:"#000"},"& .MuiSlider-markLabel":{color:"rgb(0 0 0 / 70%)"}},inputImage:{margin:"0px",borderRadius:"12px",width:"100%",height:"100%",objectFit:"contain",maxHeight:"70vh",filter:"grayscale(1) contrast(.8) brightness(0.55) opacity(0.65) blur(8px)",transition:"filter 400ms cubic-bezier(0.4, 0, 0.2, 1) 25ms !important",animationName:"$opacity-create",animationTimingFunction:"ease-in-out",animationDuration:"2400ms",animationFillMode:"both",animationDelay:"1200ms",animationDirection:"alternate",animationIterationCount:"infinite","@global":{"@keyframes opacity-create":{"0%":{opacity:"0.666"},"100%":{opacity:"1.000"}}},"&:hover":{filter:"grayscale(0.15) contrast(.8) brightness(0.6) opacity(0.7) blur(0px)"}},licenseSection:{marginBottom:16},licensePaper:{padding:e.spacing(2),backgroundColor:"#191919",borderRadius:"16px",border:"1px solid #333"},licenseHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(2)},licenseTitle:{display:"flex",alignItems:"center",gap:e.spacing(1),fontWeight:600,fontSize:"1.1rem"},licenseSummary:{marginTop:e.spacing(1),padding:e.spacing(1.5),backgroundColor:"#0f0f0f",borderRadius:"12px",fontSize:"0.875rem",color:"#bbb"},licenseStat:{display:"flex",justifyContent:"space-between",marginBottom:e.spacing(.5),"&:last-child":{marginBottom:0}},licenseStatLabel:{color:"#999",fontWeight:500},licenseStatValue:{color:"#fff",fontWeight:400},configuredChip:{backgroundColor:"#aaa",color:"#ffffff",fontWeight:600},comparisonContainer:{position:"relative",width:"100%"},comparisonCanvas:{borderRadius:"12px",width:"100%",transition:"opacity 300ms ease-in-out"},comparisonButton:{position:"absolute",top:16,right:16,padding:"6px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"#fff","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.6)"}},loadingIndicator:{position:"absolute",top:12,left:12,backgroundColor:"rgba(0, 0, 0, 0.6)",color:"#fff",padding:"4px 12px",borderRadius:"16px",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:4},cardTabs:{backgroundColor:"#171717","& .MuiTab-root":{minWidth:"72px !important"},"& .MuiTab-textColorPrimary.Mui-selected":{backgroundColor:"transparent"},"& .MuiTab-textColorPrimary.Mui-selected .MuiTab-wrapper":{color:"#171717 !important",zIndex:1},"& .MuiTab-fullWidth":{backgroundColor:"transparent",color:"#989898",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",borderRadius:"21px"},"& .MuiTab-fullWidth:hover":{backgroundColor:"rgba(255,255,255,0.06)"},"& span.MuiTabs-indicator":{height:"48px",backgroundColor:"#c7c7c7",borderRadius:"21px",transform:"scale3d(0.875, 0.75, 1)"},margin:"0px 0px 24px 0px",width:"100%",borderRadius:"21px",top:0,left:0,zIndex:1,transition:"transform 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},sendButton:{padding:"8px",color:"#fff","&:disabled":{color:"#555"}},descriptionField:{"& .MuiOutlinedInput-root":{paddingRight:"4px"},"& .MuiInputAdornment-root.MuiInputAdornment-positionEnd":{marginRight:"16px"}},quantizedMessage:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:e.spacing(2)},aspectRatioContainer:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},aspectRatioColumn:{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)},aspectRatioLabel:{fontSize:"0.875rem",color:"#999",fontWeight:500,marginBottom:e.spacing(.5)},aspectRatioButtonGroup:{"& .MuiButton-root":{color:"#ccc","&:hover":{color:"#fff",backgroundColor:"rgba(255,255,255,0.15)"}},"& .MuiButton-contained":{color:"#000",backgroundColor:"rgba(255,255,255,0.95)","&:hover":{color:"#171717 !important",backgroundColor:"rgba(255,255,255,0.85) !important"}}},sliderContainer:{marginTop:e.spacing(3),padding:e.spacing(2,2,4,2),backgroundColor:"#101010",borderRadius:"21px 21px 0px 0px"},sliderLabel:{fontSize:"0.875rem",color:"#bbb",marginBottom:e.spacing(1),fontWeight:500},errorText:{color:"#888",fontSize:"0.75rem",marginTop:e.spacing(.5),marginLeft:e.spacing(1.5)},errorField:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#666"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#888"}},"& .MuiFormLabel-root.Mui-error":{color:"#888"},"& .MuiOutlinedInput-root.Mui-error .MuiOutlinedInput-notchedOutline":{borderColor:"#666"}},charCounter:{color:"#666",fontSize:"0.75rem",textAlign:"right",marginTop:e.spacing(.5)},charCounterWarning:{color:"#888"},charCounterError:{color:"#aaa"},publishConfirmContent:{"& .MuiTypography-root":{color:"#333 !important"}},publishSummaryItem:{display:"flex",justifyContent:"space-between",padding:e.spacing(1,0),borderBottom:"1px solid #eee","&:last-child":{borderBottom:"none"}},publishSummaryLabel:{color:"#666",fontWeight:500},publishSummaryValue:{color:"#333",fontWeight:400,maxWidth:"60%",textAlign:"right",wordBreak:"break-word"},nsfwSwitch:{marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(1.5),borderRadius:"21px",border:"1px solid #333"}}}))(Ie);r()}catch(Le){r(Le)}}))},971:(e,t,n)=>{var r=n(377),a=n(459);t.A=void 0;var i=a(n(228)),o=(0,r(n(460)).default)(i.createElement("path",{d:"M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2v2zm0 15H5l5-6v6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"Compare");t.A=o},972:(e,t,n)=>{var r=n(377),a=n(459);t.A=void 0;var i=a(n(228)),o=(0,r(n(460)).default)(i.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.A=o},974:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Ei:()=>l,ZL:()=>u,zF:()=>c}),n(2),n(98),n(473),n(119),n(216),n(278),n(287),n(288),n(135),n(137),n(145),n(147),n(152),n(154),n(155),n(487),n(157),n(892),n(898),n(318),n(320),n(321),n(322),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(333),n(335),n(337),n(338),n(339),n(340),n(341),n(342),n(347),n(348),n(349),n(201),n(493),n(223),n(369);var a=n(975),i=n(976),o=e([i]),s=o.then?(await o)():o;function d(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return p(c,"_invoke",function(n,r,a){var i,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,l=e,p.n=n,o}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,i=u[t],f=p.p,m=i[2];n>3?(a=m===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,p.v=r,p.n=i[1]):f<m&&(a=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,p.n=m,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==o)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,i),!0),c}var o={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(p(t={},r,(function(){return this})),t),f=c.prototype=s.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,p(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,p(f,"constructor",c),p(c,"constructor",l),l.displayName="GeneratorFunction",p(c,a,"GeneratorFunction"),p(f),p(f,a,"Generator"),p(f,r,(function(){return this})),p(f,"toString",(function(){return"[object Generator]"})),(d=function(){return{w:i,m}})()}function p(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}p=function(e,t,n,r){function i(t,n){p(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},p(e,t,n,r)}function f(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,s,"next",e)}function s(e){f(i,r,a,o,s,"throw",e)}o(void 0)}))}}function h(e,t,n){var r=e*t,a=Math.sqrt(n/r);return Math.min(a,1)}function g(e,t){var n;try{if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");n=new OffscreenCanvas(e,t)}catch(r){(n=document.createElement("canvas")).width=e,n.height=t}return n}function v(e){e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1}i=s[0];var l=function(){var e=m(d().m((function e(t,n,r,a){var o,s,l,c,u,p,f;return d().w((function(e){for(;;)switch(e.n){case 0:return n=parseInt(n),r=parseInt(r),o=n*r,e.n=1,createImageBitmap(t);case 1:if(s=e.v,!((l=h(s.width,s.height,o))>1)){e.n=2;break}return e.a(2,!1);case 2:return c=g(s.width,s.height),v(u=c.getContext("2d")),u.drawImage(s,0,0,s.width,s.height),s.close(),p=u.getImageData(0,0,c.width,c.height),f=(0,i.U3)(p.data,a,"frequency"),e.a(2,!!Boolean(l<=1&&(null==f?void 0:f.color_count)<a)&&p)}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function b(e,t){var n=h(t.width,t.height,e.size*e.size),r=t.width,a=t.height,o=Math.round(r*n),s=Math.round(a*n),l=new i.ng;l.palette_size=e.colors,l.palette_strategy="oklab",l.kmeans_iterations=6,l.segmentation_method="hierarchy_fast",l.two_pass_refinement=!0,l.refinement_iterations=3,l.edge_weight=.75,l.region_weight=.5,l.neighbor_weight=.5,l.max_resolution_mp=1.25,l.max_color_preprocess=16384,l.k_centroid=3,l.k_centroid_iterations=3;var c=(0,i.SW)(t.data,r,a,o,s,l);return new ImageData(c.data,c.width,c.height)}var c=function(){var e=m(d().m((function e(t,n,r,i,o,s,l){var c,u,p,f,y,E,w,_=arguments;return d().w((function(e){for(;;)switch(e.p=e.n){case 0:if(c=t.file,u=t.description,p=_.length>7&&void 0!==_[7]?_[7]:"1:1",f=_.length>8&&void 0!==_[8]?_[8]:8,y=_.length>9&&void 0!==_[9]?_[9]:8,E=[{name:"S",size:128,colors:32},{name:"M",size:160,colors:40},{name:"L",size:192,colors:48},{name:"XL",size:224,colors:56},{name:"XXL",size:256,colors:64}],w=function(){var e=m(d().m((function e(t,a){var i,o,s,l,c,u,p,f,y,w,_,A;return d().w((function(e){for(;;)switch(e.n){case 0:return i=n*r,e.n=1,createImageBitmap(t,{resizeQuality:"pixelated"});case 1:return o=e.v,s=h(o.width,o.height,i),l=parseInt(Math.round(o.width*s)),c=parseInt(Math.round(o.height*s)),u=g(l,c),v(p=u.getContext("2d")),p.drawImage(o,0,0,u.width,u.height),o.close(),f=p.getImageData(0,0,u.width,u.height),y=new ImageData(new Uint8ClampedArray(f.data.buffer),f.width,f.height),w=y,_=function(e){var t=E.find((function(t){return t.name===e}));if(!t)throw new Error("Unknown size: ".concat(e));return b(t,w)},A=function(){var e=m(d().m((function e(t){var n,r,a;return d().w((function(e){for(;;)if(0===e.n){for(n={},r=0;r<E.length;r++)a=E[r],n[a.name]=b(a,w),t&&t(a.name,r+1,E.length);return e.a(2,n)}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.a(2,{artwork:f,originalImageData:f,processedCanvasData:y,availableSizes:E.map((function(e){return e.name})),sizeConfigs:E,generatePreview:_,generateAllPreviews:A,canvasWidth:u.width,canvasHeight:u.height,cachedBuffer:w,prompt:a||""})}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),void 0!==c||"string"!=typeof u){e.n=1;break}return e.a(2,(0,a.cM)(u,p,f,o,s).then((function(e,t){return w(e,t)})));case 1:if(!l){e.n=4;break}return e.p=2,e.a(2,(0,a.pd)(c,f,y,o,s,u).then((function(e,t){return w(e,t)})));case 3:return e.p=3,e.v,e.a(2,w(c,""));case 4:return e.a(2,w(c,""));case 5:return e.a(2)}}),e,null,[[2,3]])})));return function(t,n,r,a,i,o,s){return e.apply(this,arguments)}}(),u=function(e,t,n,r){return b({size:Math.floor(Math.max(e.width,e.height)/n),colors:r},t)};r()}catch(y){r(y)}}))},975:(e,t,n)=>{n.d(t,{cM:()=>he,pd:()=>me}),n(2),n(98),n(99),n(100),n(101),n(103),n(119),n(131),n(132),n(134),n(135),n(138),n(484),n(145),n(146),n(147),n(150),n(151),n(152),n(153),n(154),n(155),n(485),n(487),n(157),n(193),n(199),n(201),n(203),n(208),n(210),n(213);var r=n(500);n(499).Buffer;const a="host",i="queue/data",o="upload",s="login",l="config",c="This application is currently busy. Please try again. ",u="Connection errored out. ",d="Could not resolve app config. ",p="Space metadata could not be loaded. ",f="Not authorized to access this space. ",m="Invalid credentials. Could not login. ",h="Login credentials are required to access this space.",g="File system access is only available in Node.js environments",v="Root URL not found in client config";async function b(e,t,n){try{return(await(await fetch(`https://huggingface.co/api/spaces/${e}/jwt`,{headers:{Authorization:`Bearer ${t}`,...n?{Cookie:n}:{}}})).json()).token||!1}catch{return!1}}async function y(e){const t=this.options.token?{Authorization:`Bearer ${this.options.token}`}:{};if(t["Content-Type"]="application/json",typeof window<"u"&&window.gradio_config&&"http://localhost:9876"!==location.origin){if(window.gradio_config.current_page&&(e=e.substring(0,e.lastIndexOf("/"))),window.gradio_config.dev_mode){let n=k(e,this.deep_link?l+"?deep_link="+this.deep_link:l);const r=await this.fetch(n,{headers:t,credentials:"include"}),a=await E(r,e,!!this.options.auth);window.gradio_config={...a,current_page:window.gradio_config.current_page}}return window.gradio_config.root=e,{...window.gradio_config}}if(e){let n=k(e,this.deep_link?l+"?deep_link="+this.deep_link:l);return E(await this.fetch(n,{headers:t,credentials:"include"}),e,!!this.options.auth)}throw new Error(d)}async function E(e,t,n){if(401===e?.status&&!n){const t=(await e.json())?.detail?.auth_message;throw new Error(t||h)}if(401===e?.status&&n)throw new Error(m);if(200===e?.status){let n=await e.json();return n.root=t,n.dependencies?.forEach(((e,t)=>{void 0===e.id&&(e.id=t)})),n}if(401===e?.status)throw new Error(f);throw new Error(d)}async function w(){const{http_protocol:e,host:t}=await T(this.app_reference,this.options.token);try{if(this.options.auth){const n=await _(e,t,this.options.auth,this.fetch,this.options.token);n&&this.set_cookies(n)}}catch(e){throw Error(e.message)}}async function _(e,t,n,r,a){const i=new FormData;i.append("username",n?.[0]),i.append("password",n?.[1]);let o={};a&&(o.Authorization=`Bearer ${a}`);const l=await r(`${e}//${t}/${s}`,{headers:o,method:"POST",body:i,credentials:"include"});if(200===l.status)return l.headers.get("set-cookie");throw 401===l.status?new Error(m):new Error(p)}function A(e){if(e.startsWith("http")){const{protocol:t,host:n,pathname:r}=new URL(e);return{ws_protocol:"https:"===t?"wss":"ws",http_protocol:t,host:n+("/"!==r?r:"")}}return{ws_protocol:"wss",http_protocol:"https:",host:new URL(e).host}}const C=e=>{let t=[];return e.split(/,(?=\s*[^\s=;]+=[^\s=;]+)/).forEach((e=>{const[n,r]=e.split(";")[0].split("=");n&&r&&t.push(`${n.trim()}=${r.trim()}`)})),t},x=/^[a-zA-Z0-9_\-\.]+\/[a-zA-Z0-9_\-\.]+$/,S=/.*hf\.space\/{0,1}.*$/;async function T(e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);const r=e.trim().replace(/\/$/,"");if(x.test(r))try{return{space_id:e,...A((await(await fetch(`https://huggingface.co/api/spaces/${r}/${a}`,{headers:n})).json()).host)}}catch{throw new Error(p)}if(S.test(r)){const{ws_protocol:e,http_protocol:t,host:n}=A(r);return{space_id:n.split("/")[0].replace(".hf.space",""),ws_protocol:e,http_protocol:t,host:n}}return{space_id:!1,...A(r)}}const k=(...e)=>{try{return e.reduce(((e,t)=>(e=e.replace(/\/+$/,""),t=t.replace(/^\/+/,""),new URL(t,e+"/").toString())))}catch{throw new Error("Invalid URL. A full URL path is required.")}};function N(e,t,n,r){if("Api"===t)return e.type;switch(e?.type){case"string":return"string";case"boolean":return"boolean";case"number":return"number"}return"JSONSerializable"===n||"StringSerializable"===n?"any":"ListStringSerializable"===n?"string[]":"Image"===t?"parameter"===r?"Blob | File | Buffer":"string":"FileSerializable"===n?"array"===e?.type?"parameter"===r?"(Blob | File | Buffer)[]":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}[]":"parameter"===r?"Blob | File | Buffer":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}":"GallerySerializable"===n?"parameter"===r?"[(Blob | File | Buffer), (string | null)][]":"[{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}, (string | null))][]":void 0}function O(e,t){return"GallerySerializable"===t?"array of [file, label] tuples":"ListStringSerializable"===t?"array of strings":"FileSerializable"===t?"array of files or single file":e?.description}function I(e,t){switch(e.msg){case"send_data":return{type:"data"};case"send_hash":return{type:"hash"};case"queue_full":return{type:"update",status:{queue:!0,message:c,stage:"error",code:e.code,success:e.success}};case"heartbeat":return{type:"heartbeat"};case"unexpected_error":return{type:"unexpected_error",status:{queue:!0,message:e.message,session_not_found:e.session_not_found,stage:"error",success:!1}};case"broken_connection":return{type:"broken_connection",status:{queue:!0,message:e.message,stage:"error",success:!1}};case"estimation":return{type:"update",status:{queue:!0,stage:t||"pending",code:e.code,size:e.queue_size,position:e.rank,eta:e.rank_eta,success:e.success}};case"progress":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,progress_data:e.progress_data,success:e.success}};case"log":return{type:"log",data:e};case"process_generating":return{type:"generating",status:{queue:!0,message:e.success?null:e.output.error,stage:e.success?"generating":"error",code:e.code,progress_data:e.progress_data,eta:e.average_duration,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_streaming":return{type:"streaming",status:{queue:!0,message:e.output.error,stage:"streaming",time_limit:e.time_limit,code:e.code,progress_data:e.progress_data,eta:e.eta},data:e.output};case"process_completed":return"error"in e.output?{type:"update",status:{queue:!0,title:e.output.title??"Error",message:e.output.error??"An error occurred",visible:e.output.visible,duration:e.output.duration,stage:"error",code:e.code,success:e.success}}:{type:"complete",status:{queue:!0,message:e.success?void 0:e.output.error,stage:e.success?"complete":"error",code:e.code,progress_data:e.progress_data,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_starts":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,size:e.rank,position:0,success:e.success,eta:e.eta},original_msg:"process_starts"}}return{type:"none",status:{stage:"error",queue:!0}}}async function P(){if(this.api_info)return this.api_info;const{token:e}=this.options,{config:t}=this,n={"Content-Type":"application/json"};if(e&&(n.Authorization=`Bearer ${e}`),t)try{let e,r;if(typeof window<"u"&&window.gradio_api_info)r=window.gradio_api_info;else{const a=k(t.root,this.api_prefix,"info");if(e=await this.fetch(a,{headers:n,credentials:"include"}),!e.ok)throw new Error(u);r=await e.json()}return"api"in r&&(r=r.api),r.named_endpoints["/predict"]&&!r.unnamed_endpoints[0]&&(r.unnamed_endpoints[0]=r.named_endpoints["/predict"]),function(e,t,n){const r={named_endpoints:{},unnamed_endpoints:{}};return Object.keys(e).forEach((a=>{("named_endpoints"===a||"unnamed_endpoints"===a)&&(r[a]={},Object.entries(e[a]).forEach((([e,{parameters:i,returns:o}])=>{const s=t.dependencies.find((t=>t.api_name===e||t.api_name===e.replace("/","")))?.id||n[e.replace("/","")]||-1,l=-1!==s?t.dependencies.find((e=>e.id==s))?.types:{generator:!1,cancel:!1};if(-1!==s&&t.dependencies.find((e=>e.id==s))?.inputs?.length!==i.length){const e=t.dependencies.find((e=>e.id==s)).inputs.map((e=>t.components.find((t=>t.id===e))?.type));try{e.forEach(((e,t)=>{if("state"===e){const e={component:"state",example:null,parameter_default:null,parameter_has_default:!0,parameter_name:null,hidden:!0};i.splice(t,0,e)}}))}catch(e){}}const c=(e,t,n,r)=>({...e,description:O(e?.type,n),type:N(e?.type,t,n,r)||""});r[a][e]={parameters:i.map((e=>c(e,e?.component,e?.serializer,"parameter"))),returns:o.map((e=>c(e,e?.component,e?.serializer,"return"))),type:l}})))})),r}(r,t,this.api_map)}catch(e){throw new Error("Could not get API info. "+e.message)}}async function L(e,t,n){const r={};this?.options?.token&&(r.Authorization=`Bearer ${this.options.token}`);const a=[];let i;for(let s=0;s<t.length;s+=1e3){const l=t.slice(s,s+1e3),c=new FormData;l.forEach((e=>{c.append("files",e)}));try{const t=n?`${e}${this.api_prefix}/${o}?upload_id=${n}`:`${e}${this.api_prefix}/${o}`;i=await this.fetch(t,{method:"POST",body:c,headers:r,credentials:"include"})}catch(e){throw new Error(u+e.message)}if(!i.ok){const e=await i.text();return{error:`HTTP ${i.status}: ${e}`}}const d=await i.json();d&&a.push(...d)}return{files:a}}const R={si:{radix:1e3,unit:["b","kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]},iec:{radix:1024,unit:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"]},jedec:{radix:1024,unit:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]}};async function D(e,t,n,r){let a=(Array.isArray(e)?e:[e]).map((e=>e.blob));const i=a.filter((e=>e.size>(r??1/0)));if(i.length)throw new Error(`File(s) exceed the maximum allowed size of ${function(e,t=1,n="jedec"){e=Math.abs(e);const{radix:r,unit:a}=R[n]||R.jedec;let i=0;for(;e>=r;)e/=r,++i;return`${e.toFixed(t)} ${a[i]}`}(r||1/0)}: ${i.map((e=>`"${e.name}"`)).join(", ")}`);return await Promise.all(await this.upload_files(t,a,n).then((async n=>{if(n.error)throw new Error(n.error);return n.files?n.files.map(((n,r)=>new z({...e[r],path:n,url:`${t}${this.api_prefix}/file=${n}`}))):[]})))}class z{path;url;orig_name;size;blob;is_stream;mime_type;alt_text;b64;meta={_type:"gradio.FileData"};constructor({path:e,url:t,orig_name:n,size:r,blob:a,is_stream:i,mime_type:o,alt_text:s,b64:l}){this.path=e,this.url=t,this.orig_name=n,this.size=r,this.blob=t?void 0:a,this.is_stream=i,this.mime_type=o,this.alt_text=s,this.b64=l}}class M{type;command;meta;fileData;constructor(e,t){this.type="command",this.command=e,this.meta=t}}function F(e,t,n){for(;n.length>1;){const t=n.shift();if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid key type");e=e[t]}const r=n.shift();if("string"!=typeof r&&"number"!=typeof r)throw new Error("Invalid key type");e[r]=t}async function j(e,t=void 0,n=[],r=!1,a=void 0){if(Array.isArray(e)){let i=[];return await Promise.all(e.map((async(o,s)=>{let l=n.slice();l.push(String(s));const c=await j(e[s],r?a?.parameters[s]?.component||void 0:t,l,!1,a);i=i.concat(c)}))),i}if(globalThis.Buffer&&e instanceof globalThis.Buffer||e instanceof Blob)return[{path:n,blob:new Blob([e]),type:t}];if("object"==typeof e&&null!==e){let t=[];for(const r of Object.keys(e)){const i=[...n,r],o=e[r];t=t.concat(await j(o,void 0,i,!1,a))}return t}return[]}function $(e,t,n,r,a=!1){if("input"===r&&!a)throw new Error("Invalid code path. Cannot skip state inputs for input.");if("output"===r&&a)return e;let i=[],o=0;const s="input"===r?t.inputs:t.outputs;for(let t=0;t<s.length;t++){const r=s[t];if("state"!==n.find((e=>e.id===r))?.type){const t=e[o];i.push(t),o++}else{if(!a){o++;continue}if(e.length===s.length){const t=e[o];i.push(t),o++}else i.push(null)}}return i}async function B(e,t,n){const r=this;await async function(e,t){if(!e.config?.root&&!e.config?.root_url)throw new Error(v);await W(e,t)}(r,t);const a=await j(t,void 0,[],!0,n);return(await Promise.all(a.map((async({path:t,blob:n,type:a})=>{if(!n)return{path:t,type:a};const i=await r.upload_files(e,[n]);return{path:t,file_url:i.files&&i.files[0],type:a,name:typeof File<"u"&&n instanceof File?n?.name:void 0}})))).forEach((({path:e,file_url:n,type:r,name:a})=>{if("Gallery"===r)F(t,n,e);else if(n){const r=new z({path:n,orig_name:a});F(t,r,e)}})),t}async function W(e,t,n=[]){for(const r in t)t[r]instanceof M?await G(e,t,r):"object"==typeof t[r]&&null!==t[r]&&await W(e,t[r],[...n,r])}async function G(e,t,a){let i=t[a];const o=e.config?.root||e.config?.root_url;if(!o)throw new Error(v);try{let s,l;if(!(typeof r<"u"&&r.versions&&r.versions.node))throw new Error(g);{const e=await n.e(48).then(n.bind(n,2056));l=(await n.e(48).then(n.bind(n,2056))).resolve(r.cwd(),i.meta.path),s=await e.readFile(l)}const c=new Blob([s],{type:"application/octet-stream"}),u=await e.upload_files(o,[c]),d=u.files&&u.files[0];if(d){const e=new z({path:d,orig_name:i.meta.name||""});t[a]=e}}catch(e){}}async function U(e,t,n){const r={"Content-Type":"application/json"};this.options.token&&(r.Authorization=`Bearer ${this.options.token}`);try{var a=await this.fetch(e,{method:"POST",body:JSON.stringify(t),headers:{...r,...n},credentials:"include"})}catch{return[{error:u},500]}let i,o;try{i=await a.json(),o=a.status}catch(e){i={error:`Could not parse server response: ${e}`},o=500}return[i,o]}async function q(e,t={}){let n=!1,r=!1;if(!this.config)throw new Error("Could not resolve app config");if("number"==typeof e)this.config.dependencies.find((t=>t.id==e));else{const t=e.replace(/^\//,"");this.config.dependencies.find((e=>e.id==this.api_map[t]))}return new Promise((async(a,i)=>{const o=this.submit(e,t,null,null,!0);let s;for await(const e of o)"data"===e.type&&(r&&a(s),n=!0,s=e),"status"===e.type&&("error"===e.stage&&i(e),"complete"===e.stage&&(r=!0,n&&a(s)))}))}async function V(e,t,n){let r,a,i="subdomain"===t?`https://huggingface.co/api/spaces/by-subdomain/${e}`:`https://huggingface.co/api/spaces/${e}`;try{if(r=await fetch(i),a=r.status,200!==a)throw new Error;r=await r.json()}catch{return void n({status:"error",load_status:"error",message:"Could not get space status. ",detail:"NOT_FOUND"})}if(!r||200!==a)return;const{runtime:{stage:o},id:s}=r;switch(o){case"STOPPED":case"SLEEPING":n({status:"sleeping",load_status:"pending",message:"Space is asleep. Waking it up...",detail:o}),setTimeout((()=>{V(e,t,n)}),1e3);break;case"PAUSED":n({status:"paused",load_status:"error",message:"This space has been paused by the author. If you would like to try this demo, consider duplicating the space.",detail:o,discussions_enabled:await K(s)});break;case"RUNNING":case"RUNNING_BUILDING":n({status:"running",load_status:"complete",message:"Space is running.",detail:o});break;case"BUILDING":n({status:"building",load_status:"pending",message:"Space is building...",detail:o}),setTimeout((()=>{V(e,t,n)}),1e3);break;case"APP_STARTING":n({status:"starting",load_status:"pending",message:"Space is starting...",detail:o}),setTimeout((()=>{V(e,t,n)}),1e3);break;default:n({status:"space_error",load_status:"error",message:"This space is experiencing an issue.",detail:o,discussions_enabled:await K(s)})}}typeof r<"u"&&r.versions&&r.versions.node;const H=async(e,t)=>{let n=0;return new Promise((r=>{V(e,x.test(e)?"space_name":"subdomain",(a=>{t(a),"running"===a.status||"error"===a.status||"paused"===a.status||"space_error"===a.status?r():("sleeping"===a.status||"building"===a.status)&&(n<12?(n++,setTimeout((()=>{H(e,t).then(r)}),5e3)):r())}))}))},X=/^(?=[^]*\b[dD]iscussions{0,1}\b)(?=[^]*\b[dD]isabled\b)[^]*$/;async function K(e){try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/discussions`,{method:"HEAD"}),n=t.headers.get("x-error-message");return!(!t.ok||n&&X.test(n))}catch{return!1}}const Z=["cpu-basic","cpu-upgrade","cpu-xl","t4-small","t4-medium","a10g-small","a10g-large","a10g-largex2","a10g-largex4","a100-large","zero-a10g","h100","h100x8"];class Y extends TransformStream{#e="";constructor(e={allowCR:!1}){super({transform:(t,n)=>{for(t=this.#e+t;;){const r=t.indexOf("\n"),a=e.allowCR?t.indexOf("\r"):-1;if(-1!==a&&a!==t.length-1&&(-1===r||r-1>a)){n.enqueue(t.slice(0,a)),t=t.slice(a+1);continue}if(-1===r)break;const i="\r"===t[r-1]?r-1:r;n.enqueue(t.slice(0,i)),t=t.slice(r+1)}this.#e=t},flush:t=>{if(""===this.#e)return;const n=e.allowCR&&this.#e.endsWith("\r")?this.#e.slice(0,-1):this.#e;t.enqueue(n)}})}}function J(e){let t=/[:]\s*/.exec(e),n=t&&t.index;if(n)return[e.substring(0,n),e.substring(n+t[0].length)]}function Q(e,t,n){e.get(t)||e.set(t,n)}async function ee(){let{event_callbacks:e,unclosed_events:t,pending_stream_messages:n,stream_status:r,config:a,jwt:o}=this;const s=this;if(!a)throw new Error("Could not resolve app config");r.open=!0;let l=null,c=new URLSearchParams({session_hash:this.session_hash}).toString(),d=new URL(`${a.root}${this.api_prefix}/${i}?${c}`);o&&d.searchParams.set("__sign",o),l=this.stream(d),l&&(l.onmessage=async function(i){let o=JSON.parse(i.data);if("close_stream"===o.msg)return void te(r,s.abort_controller);const l=o.event_id;if(l)if(e[l]&&a){"process_completed"===o.msg&&["sse","sse_v1","sse_v2","sse_v2.1","sse_v3"].includes(a.protocol)&&t.delete(l);let n=e[l];typeof window<"u"&&typeof document<"u"?setTimeout(n,0,o):n(o)}else n[l]||(n[l]=[]),n[l].push(o);else await Promise.all(Object.keys(e).map((t=>e[t](o))))},l.onerror=async function(t){await Promise.all(Object.keys(e).map((t=>e[t]({msg:"broken_connection",message:u}))))})}function te(e,t){e&&(e.open=!1,t?.abort())}function ne(e,t={},n,r,a,o){try{let s=function(e){(a||H[e.type])&&f(e)},l=function(){for(J=!0;ee.length>0;)ee.shift()({value:void 0,done:!0})},d=function(e){ee.length>0?ee.shift()(e):Q.push(e)},p=function(e){d(function(e){return{then:(t,n)=>n(e)}}(e)),l()},f=function(e){d({value:e,done:!1})},m=function(){return Q.length>0?Promise.resolve(Q.shift()):new Promise((e=>ee.push(e)))};const{token:h}=this.options,{fetch:g,app_reference:v,config:b,session_hash:y,api_info:E,api_map:w,stream_status:_,pending_stream_messages:A,pending_diff_streams:C,event_callbacks:x,unclosed_events:S,post_data:T,options:k,api_prefix:N}=this,O=o||{"x-gradio-user":"api"},P=this;if(!E)throw new Error("No API found");if(!b)throw new Error("Could not resolve app config");let L,{fn_index:R,endpoint_info:D,dependency:z}=function(e,t,n,r){let a,i,o;if("number"==typeof t)a=t,i=e.unnamed_endpoints[a],o=r.dependencies.find((e=>e.id==t));else{const s=t.replace(/^\//,"");a=n[s],i=e.named_endpoints[t.trim()],o=r.dependencies.find((e=>e.id==n[s]))}if("number"!=typeof a)throw new Error("There is no endpoint matching that name of fn_index matching that number.");return{fn_index:a,endpoint_info:i,dependency:o}}(E,e,w,b),M=((e=[],t)=>{const n=t?t.parameters:[];if(Array.isArray(e))return t&&n.length>0&&(e.length,n.length),e;const r=[],a=Object.keys(e);return n.forEach(((t,n)=>{if(e.hasOwnProperty(t.parameter_name))r[n]=e[t.parameter_name];else{if(!t.parameter_has_default)throw new Error(`No value provided for required parameter: ${t.parameter_name}`);r[n]=t.parameter_default}})),a.forEach((e=>{if(!n.some((t=>t.parameter_name===e)))throw new Error(`Parameter \`${e}\` is not a valid keyword argument. Please refer to the API for usage.`)})),r.forEach(((e,t)=>{if(void 0===e&&!n[t].parameter_has_default)throw new Error(`No value provided for required parameter: ${n[t].parameter_name}`)})),r})(t,D),F=b.protocol??"ws";if("ws"===F)throw new Error("WebSocket protocol is not supported in this version");let j="";const B="number"==typeof e?"/predict":e;let W,G=null,U=!1,q={},V=typeof window<"u"&&typeof document<"u"?new URLSearchParams(window.location.search).toString():"";const H=k?.events?.reduce(((e,t)=>(e[t]=!0,e)),{})||{};async function X(){let e={},t={};e={event_id:G},t={event_id:G,session_hash:y,fn_index:R};try{if(!b)throw new Error("Could not resolve app config");"event_id"in t&&await g(`${b.root}${N}/cancel`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}),await g(`${b.root}${N}/reset`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)})}catch{}}const K=async e=>{await this._resolve_heartbeat(e)};async function Z(e){if(!b)return;let t=e.render_id;b.components=[...b.components.filter((e=>e.props.rendered_in!==t)),...e.components],b.dependencies=[...b.dependencies.filter((e=>e.rendered_in!==t)),...e.dependencies];const n=b.components.some((e=>"state"===e.type)),r=b.dependencies.some((e=>e.targets.some((e=>"unload"===e[1]))));b.connect_heartbeat=n||r,await K(b),s({type:"render",data:e,endpoint:B,fn_index:R})}const Y=this.handle_blob(b.root,M,D).then((async e=>{if(W={data:$(e,z,b.components,"input",!0)||[],event_data:n,fn_index:R,trigger_id:r},function(e,t){let n=t?.dependencies?.find((t=>t.id==e))?.queue;return null!=n?!n:!t.enable_queue}(R,b))s({type:"status",endpoint:B,stage:"pending",queue:!1,fn_index:R,time:new Date}),T(`${b.root}${N}/run${B.startsWith("/")?B:`/${B}`}${V?"?"+V:""}`,{...W,session_hash:y},O).then((async([e,t])=>{const a=e.data;200==t?(s({type:"data",endpoint:B,fn_index:R,data:$(a,z,b.components,"output",k.with_null_state),time:new Date,event_data:n,trigger_id:r}),e.render_config&&await Z(e.render_config),s({type:"status",endpoint:B,fn_index:R,stage:"complete",eta:e.average_duration,queue:!1,time:new Date})):s({type:"status",stage:"error",endpoint:B,fn_index:R,message:e.error,queue:!1,time:new Date})})).catch((e=>{s({type:"status",stage:"error",message:e.message,endpoint:B,fn_index:R,queue:!1,time:new Date})}));else if("sse"==F){s({type:"status",stage:"pending",queue:!0,endpoint:B,fn_index:R,time:new Date});var t=new URLSearchParams({fn_index:R.toString(),session_hash:y}).toString();let e=new URL(`${b.root}${N}/${i}?${V?V+"&":""}${t}`);if(this.jwt&&e.searchParams.set("__sign",this.jwt),L=this.stream(e),!L)return Promise.reject(new Error("Cannot connect to SSE endpoint: "+e.toString()));L.onmessage=async function(e){const t=JSON.parse(e.data),{type:a,status:i,data:o}=I(t,q[R]);if("update"===a&&i&&!U)s({type:"status",endpoint:B,fn_index:R,time:new Date,...i}),"error"===i.stage&&(L?.close(),l());else if("data"===a){let[e,t]=await T(`${b.root}${N}/queue/data`,{...W,session_hash:y,event_id:G});200!==t&&(s({type:"status",stage:"error",message:u,queue:!0,endpoint:B,fn_index:R,time:new Date}),L?.close(),l())}else"complete"===a?U=i:"log"===a?s({type:"log",title:o.title,log:o.log,level:o.level,endpoint:B,duration:o.duration,visible:o.visible,fn_index:R}):("generating"===a||"streaming"===a)&&s({type:"status",time:new Date,...i,stage:i?.stage,queue:!0,endpoint:B,fn_index:R});o&&(s({type:"data",time:new Date,data:$(o.data,z,b.components,"output",k.with_null_state),endpoint:B,fn_index:R,event_data:n,trigger_id:r}),U&&(s({type:"status",time:new Date,...U,stage:i?.stage,queue:!0,endpoint:B,fn_index:R}),L?.close(),l()))}}else if("sse_v1"==F||"sse_v2"==F||"sse_v2.1"==F||"sse_v3"==F){s({type:"status",stage:"pending",queue:!0,endpoint:B,fn_index:R,time:new Date});let e="";typeof window<"u"&&typeof document<"u"&&(e=window?.location?.hostname);const t=e.includes(".dev.")?`https://moon-${e.split(".")[1]}.dev.spaces.huggingface.tech`:"https://huggingface.co";return(typeof window<"u"&&typeof document<"u"&&window.parent!=window&&window.supports_zerogpu_headers?function(e,t){return new Promise(((e,n)=>{const r=new MessageChannel;r.port1.onmessage=({data:t})=>{r.port1.close(),e(t)},window.parent.postMessage("zerogpu-headers",t,[r.port2])}))}(0,t):Promise.resolve(null)).then((e=>{const t={...O,...e||{}};return T(`${b.root}${N}/queue/join?${V}`,{...W,session_hash:y},t)})).then((async([e,t])=>{if(e.event_id&&(j=e.event_id),503===t)s({type:"status",stage:"error",message:c,queue:!0,endpoint:B,fn_index:R,time:new Date,visible:!0});else if(422===t)s({type:"status",stage:"error",message:e.detail,queue:!0,endpoint:B,fn_index:R,code:"validation_error",time:new Date,visible:!0}),l();else if(200!==t)s({type:"status",stage:"error",broken:!1,message:e.detail,queue:!0,endpoint:B,fn_index:R,time:new Date,visible:!0});else{G=e.event_id,j=G;let t=async function(e){try{const{type:t,status:n,data:r,original_msg:a}=I(e,q[R]);if("heartbeat"==t)return;if("update"===t&&n&&!U)s({type:"status",endpoint:B,fn_index:R,time:new Date,original_msg:a,...n});else if("complete"===t)U=n;else if("unexpected_error"==t||"broken_connection"==t){const e="broken_connection"===t;s({type:"status",stage:"error",message:n?.message||"An Unexpected Error Occurred!",queue:!0,endpoint:B,broken:e,session_not_found:n?.session_not_found,fn_index:R,time:new Date})}else{if("log"===t)return void s({type:"log",title:r.title,log:r.log,level:r.level,endpoint:B,duration:r.duration,visible:r.visible,fn_index:R});("generating"===t||"streaming"===t)&&(s({type:"status",time:new Date,...n,stage:n?.stage,queue:!0,endpoint:B,fn_index:R}),r&&"stream"!==z.connection&&["sse_v2","sse_v2.1","sse_v3"].includes(F)&&function(e,t,n){e[t]?n.data.forEach(((r,a)=>{let i=function(e,t){return t.forEach((([t,n,r])=>{e=function(e,t,n,r){if(0===t.length){if("replace"===n)return r;if("append"===n)return e+r;throw new Error(`Unsupported action: ${n}`)}let a=e;for(let e=0;e<t.length-1;e++)a=a[t[e]];const i=t[t.length-1];switch(n){case"replace":a[i]=r;break;case"append":a[i]+=r;break;case"add":Array.isArray(a)?a.splice(Number(i),0,r):a[i]=r;break;case"delete":Array.isArray(a)?a.splice(Number(i),1):delete a[i];break;default:throw new Error(`Unknown action: ${n}`)}return e}(e,n,t,r)})),e}(e[t][a],r);e[t][a]=i,n.data[a]=i})):(e[t]=[],n.data.forEach(((n,r)=>{e[t][r]=n})))}(C,G,r))}r&&(s({type:"data",time:new Date,data:$(r.data,z,b.components,"output",k.with_null_state),endpoint:B,fn_index:R}),r.render_config&&await Z(r.render_config),U&&(s({type:"status",time:new Date,...U,stage:n?.stage,queue:!0,endpoint:B,fn_index:R}),l())),("complete"===n?.stage||"error"===n?.stage)&&(x[G]&&delete x[G],G in C&&delete C[G])}catch(e){s({type:"status",stage:"error",message:"An Unexpected Error Occurred!",queue:!0,endpoint:B,fn_index:R,time:new Date}),["sse_v2","sse_v2.1","sse_v3"].includes(F)&&(te(_,P.abort_controller),_.open=!1,l())}};G in A&&(A[G].forEach((e=>t(e))),delete A[G]),x[G]=t,S.add(G),_.open||await this.open_stream()}}))}}));let J=!1;const Q=[],ee=[],ne={[Symbol.asyncIterator]:()=>ne,next:m,throw:async e=>(p(e),m()),return:async()=>(l(),{value:void 0,done:!0}),cancel:X,send_chunk:e=>{this.post_data(`${b.root}${N}/stream/${j}`,{...e,session_hash:this.session_hash})},close_stream:()=>{this.post_data(`${b.root}${N}/stream/${j}/close`,{}),l()},event_id:()=>j,wait_for_id:async()=>(await Y,G)};return ne}catch(re){throw re}}class re{app_reference;options;deep_link=null;config;api_prefix="";api_info;api_map={};session_hash=Math.random().toString(36).substring(2);jwt=!1;last_status={};cookies=null;stream_status={open:!1};closed=!1;pending_stream_messages={};pending_diff_streams={};event_callbacks={};unclosed_events=new Set;heartbeat_event=null;abort_controller=null;stream_instance=null;current_payload;get_url_config(e=null){if(!this.config)throw new Error(d);null===e&&(e=window.location.href);const t=e=>e.replace(/^\/+|\/+$/g,"");let n,r=t(new URL(this.config.root).pathname),a=t(new URL(e).pathname);return n=a.startsWith(r)?t(a.substring(r.length)):"",this.get_page_config(n)}get_page_config(e){if(!this.config)throw new Error(d);let t=this.config;return e in t.page||(e=""),{...t,current_page:e,layout:t.page[e].layout,components:t.components.filter((n=>t.page[e].components.includes(n.id))),dependencies:this.config.dependencies.filter((n=>t.page[e].dependencies.includes(n.id)))}}fetch(e,t){const n=new Headers(t?.headers||{});if(this&&this.cookies&&n.append("Cookie",this.cookies),this&&this.options.headers)for(const e in this.options.headers)n.append(e,this.options.headers[e]);return fetch(e,{...t,headers:n})}stream(e){const t=new Headers;if(this&&this.cookies&&t.append("Cookie",this.cookies),this&&this.options.headers)for(const e in this.options.headers)t.append(e,this.options.headers[e]);return this&&this.options.token&&t.append("Authorization",`Bearer ${this.options.token}`),this.abort_controller=new AbortController,this.stream_instance=function(e,t={}){const n={close:()=>{},onerror:null,onmessage:null,onopen:null,readyState:0,url:e.toString(),withCredentials:!1,CONNECTING:0,OPEN:1,CLOSED:2,addEventListener:()=>{throw new Error("Method not implemented.")},dispatchEvent:()=>{throw new Error("Method not implemented.")},removeEventListener:()=>{throw new Error("Method not implemented.")}};return async function(e,t){let n=new Request(e,t);Q(n.headers,"Accept","text/event-stream"),Q(n.headers,"Content-Type","application/json");let r=await fetch(n);if(!r.ok)throw r;return async function*(e,t){if(!e.body)return;let n,r,a=function(e){let t=new TextDecoderStream,n=new Y({allowCR:!0});return e.pipeThrough(t).pipeThrough(n)}(e.body),i=a.getReader();for(;;){if(t&&t.aborted)return i.cancel();if(n=await i.read(),n.done)return;if(!n.value){r&&(yield r),r=void 0;continue}let[e,a]=J(n.value)||[];"data"===e?(r||={},r[e]=r[e]?r[e]+"\n"+a:a):"event"===e?(r||={},r[e]=a):"id"===e?(r||={},r[e]=String(+a)===a?+a:a):"retry"===e&&(r||={},r[e]=+a||void 0)}}(r,n.signal)}(e,t).then((async e=>{n.readyState=n.OPEN;try{for await(const t of e)n.onmessage&&n.onmessage(t);n.readyState=n.CLOSED}catch(e){n.onerror&&n.onerror(e),n.readyState=n.CLOSED}})).catch((e=>{n.onerror&&n.onerror(e),n.readyState=n.CLOSED})),n}(e.toString(),{credentials:"include",headers:t,signal:this.abort_controller.signal}),this.stream_instance}view_api;upload_files;upload;handle_blob;post_data;submit;predict;open_stream;resolve_config;resolve_cookies;constructor(e,t={events:["data"]}){this.app_reference=e,this.deep_link=t.query_params?.deep_link||null,t.events||(t.events=["data"]),this.options=t,this.current_payload={},this.view_api=P.bind(this),this.upload_files=L.bind(this),this.handle_blob=B.bind(this),this.post_data=U.bind(this),this.submit=ne.bind(this),this.predict=q.bind(this),this.open_stream=ee.bind(this),this.resolve_config=y.bind(this),this.resolve_cookies=w.bind(this),this.upload=D.bind(this),this.fetch=this.fetch.bind(this),this.handle_space_success=this.handle_space_success.bind(this),this.stream=this.stream.bind(this)}async init(){this.options.auth&&await this.resolve_cookies(),await this._resolve_config().then((({config:e})=>this._resolve_heartbeat(e))),this.api_info=await this.view_api(),this.api_map=function(e){let t={};return e.forEach((({api_name:e,id:n})=>{e&&(t[e]=n)})),t}(this.config?.dependencies||[])}async _resolve_heartbeat(e){if(e&&(this.config=e,this.api_prefix=e.api_prefix||"",this.config&&this.config.connect_heartbeat&&this.config.space_id&&this.options.token&&(this.jwt=await b(this.config.space_id,this.options.token,this.cookies))),e.space_id&&this.options.token&&(this.jwt=await b(e.space_id,this.options.token)),this.config&&this.config.connect_heartbeat){const e=new URL(`${this.config.root}${this.api_prefix}/heartbeat/${this.session_hash}`);this.jwt&&e.searchParams.set("__sign",this.jwt),this.heartbeat_event||(this.heartbeat_event=this.stream(e))}}static async connect(e,t={events:["data"]}){const n=new this(e,t);return t.session_hash&&(n.session_hash=t.session_hash),await n.init(),n}async reconnect(){const e=new URL(`${this.config.root}${this.api_prefix}/app_id`);let t;try{const n=await this.fetch(e);if(!n.ok)throw new Error;t=(await n.json()).app_id}catch{return"broken"}return t!==this.config.app_id?"changed":"connected"}close(){this.closed=!0,te(this.stream_status,this.abort_controller)}set_current_payload(e){this.current_payload=e}static async duplicate(e,t={events:["data"]}){return async function(e,t){const{token:n,private:r,hardware:a,timeout:i,auth:o}=t;if(a&&!Z.includes(a))throw new Error(`Invalid hardware type provided. Valid types are: ${Z.map((e=>`"${e}"`)).join(",")}.`);const{http_protocol:s,host:l}=await T(e,n);let c=null;if(o){const e=await _(s,l,o,fetch);e&&(c=C(e))}const u={Authorization:`Bearer ${n}`,"Content-Type":"application/json",...c?{Cookie:c.join("; ")}:{}},d=(await(await fetch("https://huggingface.co/api/whoami-v2",{headers:u})).json()).name,f=e.split("/")[1],m={repository:`${d}/${f}`};let h;r&&(m.private=!0);try{a||(h=await async function(e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/runtime`,{headers:n});if(200!==t.status)throw new Error("Space hardware could not be obtained.");const{hardware:r}=await t.json();return r.current}catch(e){throw new Error(e.message)}}(e,n))}catch(e){throw Error(p+e.message)}const g=a||h||"cpu-basic";m.hardware=g;try{const r=await fetch(`https://huggingface.co/api/spaces/${e}/duplicate`,{method:"POST",headers:u,body:JSON.stringify(m)});if(409===r.status)try{return await re.connect(`${d}/${f}`,t)}catch(e){throw e}else if(200!==r.status)throw new Error(r.statusText);const a=await r.json();return await async function(e,t,n){const r={};n&&(r.Authorization=`Bearer ${n}`);const a={seconds:t};try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/sleeptime`,{method:"POST",headers:{"Content-Type":"application/json",...r},body:JSON.stringify(a)});if(200!==t.status)throw new Error("Could not set sleep timeout on duplicated Space. Please visit *ADD HF LINK TO SETTINGS* to set a timeout manually to reduce billing charges.");return await t.json()}catch(e){throw new Error(e.message)}}(`${d}/${f}`,i||300,n),await re.connect(function(e){const t=e.match(/https:\/\/huggingface.co\/spaces\/([^/]+\/[^/]+)/);if(t)return t[1]}(a.url),t)}catch(e){throw new Error(e)}}(e,t)}async _resolve_config(){const{http_protocol:e,host:t,space_id:n}=await T(this.app_reference,this.options.token),{status_callback:r}=this.options;let a;n&&r&&await H(n,r);try{let n=`${e}//${t}`;if(a=await this.resolve_config(n),!a)throw new Error(d);return this.config_success(a)}catch(e){if(!n||!r)throw r&&r({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),Error(e);V(n,x.test(n)?"space_name":"subdomain",this.handle_space_success)}}async config_success(e){if(this.config=e,this.api_prefix=e.api_prefix||"",this.config.auth_required)return this.prepare_return_obj();try{this.api_info=await this.view_api()}catch(e){}return this.prepare_return_obj()}async handle_space_success(e){if(!this)throw new Error(d);const{status_callback:t}=this.options;if(t&&t(e),"running"===e.status)try{if(this.config=await this._resolve_config(),this.api_prefix=this?.config?.api_prefix||"",!this.config)throw new Error(d);return await this.config_success(this.config)}catch(e){throw t&&t({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),e}}async component_server(e,t,n){if(!this.config)throw new Error(d);const r={},{token:a}=this.options,{session_hash:i}=this;a&&(r.Authorization=`Bearer ${this.options.token}`);let o,s,l=this.config.components.find((t=>t.id===e));if(o=l?.props?.root_url?l.props.root_url:this.config.root,"binary"in n){s=new FormData;for(const e in n.data)"binary"!==e&&s.append(e,n.data[e]);s.set("component_id",e.toString()),s.set("fn_name",t),s.set("session_hash",i)}else s=JSON.stringify({data:n,component_id:e,fn_name:t,session_hash:i}),r["Content-Type"]="application/json";a&&(r.Authorization=`Bearer ${a}`);try{const e=await this.fetch(`${o}${this.api_prefix}/component_server/`,{method:"POST",body:s,headers:r,credentials:"include"});if(!e.ok)throw new Error("Could not connect to component server: "+e.statusText);return await e.json()}catch(e){}}set_cookies(e){this.cookies=C(e).join("; ")}prepare_return_obj(){return{config:this.config,predict:this.predict,submit:this.submit,view_api:this.view_api,component_server:this.component_server}}}function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return(t=function(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return ce(c,"_invoke",function(n,r,a){var i,s,l,c=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,l=e,p.n=n,o}};function f(n,r){for(s=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,i=u[t],f=p.p,m=i[2];n>3?(a=m===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,p.v=r,p.n=i[1]):f<m&&(a=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,p.n=m,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,m){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,l=m;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(p.n=-1),f(s,l)):p.n=l:p.v=l);try{if(c=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=p.n<0)?l:n.call(r,p))!==o)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,i),!0),c}var o={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(ce(t={},r,(function(){return this})),t),d=c.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,ce(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,ce(d,"constructor",c),ce(c,"constructor",l),l.displayName="GeneratorFunction",ce(c,a,"GeneratorFunction"),ce(d),ce(d,a,"Generator"),ce(d,r,(function(){return this})),ce(d,"toString",(function(){return"[object Generator]"})),(le=function(){return{w:i,m:p}})()}function ce(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ce=function(e,t,n,r){function i(t,n){ce(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},ce(e,t,n,r)}function ue(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ue(i,r,a,o,s,"next",e)}function s(e){ue(i,r,a,o,s,"throw",e)}o(void 0)}))}}document.createElement("canvas");var pe={prompt:"",negative_prompt:"Ugly, real, artifacts, blurry, disformed, photo-realistic, photo, photography, realistic, low-quality, text, white edges, border.",cfg_scale:1.2,steps:10,img_strength:.8,depth_strength:.8,seed:-1},fe={negative_prompt:"Ugly, real, artifacts, blurry, disformed, photo-realistic, photo, photography, realistic, low-quality, text, white edges, border.",cfg_scale:1.2,steps:10,seed:-1},me=function(){var e=de(le().m((function e(t,n,r){var a,i,o,s=arguments;return le().w((function(e){for(;;)if(0===e.n)return a=s.length>3&&void 0!==s[3]?s[3]:function(){},i=s.length>4&&void 0!==s[4]?s[4]:function(){},o=s.length>5&&void 0!==s[5]?s[5]:"",e.a(2,new Promise(function(){var e=de(le().m((function e(s,l){var c,u,d,p,f;return le().w((function(e){for(;;)switch(e.p=e.n){case 0:return a("AI CONVERT"),i("COMPUTE",Date.now(),Date.now()+25e3),c=t,u=parseInt(parseInt(n).toString(10)),d=parseFloat(parseFloat(1-parseFloat(r)).toFixed(2)),p=parseFloat(parseFloat(.2+1.3*parseFloat(parseInt(u)/10)).toFixed(2)),f={steps:u,img_strength:d,cfg_scale:p,image:c,prompt:o.length?o+", art, pixel art, video game, HD retro game art, detailed illustration artwork":""},e.p=1,e.n=2,re.connect("primerz/face-to-pixel-art");case 2:e.v.predict("/process_img",oe(oe({},pe),f)).then(function(){var e=de(le().m((function e(t){var n,r,a,i,o,l;return le().w((function(e){for(;;)switch(e.n){case 0:return n=t.data||[],r=n[0]||{},a=r.url||"",e.n=1,fetch(a);case 1:return e.n=2,e.v.blob();case 2:i=e.v,o=n[1]||" Output: ",l=o.split("Output: ")[1],s(i,l);case 3:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){l(e.message)})),e.n=4;break;case 3:e.p=3,e.v,l("Please Try Again Later");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,n){return e.apply(this,arguments)}}()))}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),he=function(){var e=de(le().m((function e(t,n,r){var a,i,o=arguments;return le().w((function(e){for(;;)if(0===e.n)return a=o.length>3&&void 0!==o[3]?o[3]:function(){},i=o.length>4&&void 0!==o[4]?o[4]:function(){},e.a(2,new Promise(function(){var e=de(le().m((function e(o,s){return le().w((function(e){for(;;)switch(e.p=e.n){case 0:return a("AI CONVERT"),i("COMPUTE",Date.now(),Date.now()+6e3),e.p=1,e.n=2,re.connect("primerz/pixel-art");case 2:e.v.predict("/process_text",oe(oe({},fe),{},{prompt:t,aspect_ratio:n,steps:r})).then(function(){var e=de(le().m((function e(n){var r,a,i,s;return le().w((function(e){for(;;)switch(e.n){case 0:return r=n.data||[],a=r[0]||{},i=a.url||"",e.n=1,fetch(i);case 1:return e.n=2,e.v.blob();case 2:s=e.v,o(s,t);case 3:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){s(e.message)})),e.n=4;break;case 3:e.p=3,e.v,s("Please Try Again Later");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,n){return e.apply(this,arguments)}}()))}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},986:(e,t,n)=>{n.d(t,{A:()=>T}),n(2),n(98),n(99),n(100),n(273),n(101),n(473),n(103),n(106),n(118),n(119),n(475),n(216),n(130),n(132),n(134),n(137),n(138),n(146),n(147),n(150),n(151),n(153),n(155),n(485),n(186),n(192),n(193),n(199),n(201),n(203),n(493),n(208),n(223),n(210),n(213);var r=n(228),a=n(376),i=n(662),o=n(659),s=n(660),l=n(661),c=n(663),u=n(957),d=n(969),p=n(961),f=n(664),m=n(987),h=n(990),g=n(991),v=n(992),b=n(993),y=n(994),E=n(686);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n){return(t=function(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=(0,a.default)((function(e){return{dialog:S(S({backgroundColor:"#101010 !important"},e.breakpoints.down("xs"),{"&.MuiDialog-paper":{margin:"0px 0px",maxHeight:"100%",borderRadius:0,width:"100%"},"&.MuiDialog-paperFullWidth":{width:"min(calc(100% - 64px), 640px)"}}),"& .MuiDialogContent-root",{padding:"8px 32px"}),dialogBody:{overflowY:"auto",display:"flex",flexDirection:"column"},section:{marginBottom:e.spacing(3)},sectionTitle:{fontSize:"1.25rem",fontWeight:600,marginBottom:e.spacing(2),fontFamily:"'Industry Book'",color:"#fff"},accordion:{"& .MuiAccordionDetails-root":{overflow:"hidden"},"& .MuiAccordion-root:before, & div.MuiAccordion-root.Mui-expanded:before":{opacity:0},"& .MuiAccordion-root":{margin:"8px 0"},"& .MuiAccordion-rounded:first-child":{borderTopLeftRadius:"21px",borderTopRightRadius:"21px"},"& .MuiAccordion-rounded:last-child":{borderBottomLeftRadius:"21px",borderBottomRightRadius:"21px"},backgroundColor:"#191919 !important",borderRadius:"16px !important",marginBottom:e.spacing(1),"&:before":{display:"none"},"&.Mui-expanded":{margin:"".concat(e.spacing(1),"px 0 !important")}},accordionSummary:{backgroundColor:"#191919",borderRadius:"16px",minHeight:"56px !important","&.Mui-expanded":{minHeight:"56px !important",borderRadius:"16px 16px 0 0"},"& .MuiAccordionSummary-content":{margin:"12px 0 !important"}},accordionDetails:{padding:e.spacing(2),display:"flex",flexDirection:"column",gap:e.spacing(1)},categoryLabel:{fontFamily:"'Industry Book'",fontWeight:600,fontSize:"1rem",color:"#fff"},rightItem:{display:"flex",alignItems:"flex-start",padding:"8px 12px",borderRadius:"12px",transition:"background-color 0.2s","&:hover":{backgroundColor:"#ffffff08"}},nestedRightItem:{paddingLeft:"32px",position:"relative"},nestedIcon:{fontSize:"1rem",marginRight:"8px",color:"#666",position:"absolute",left:"12px",top:"16px"},rightLabel:{flex:1,display:"flex",flexDirection:"column",gap:e.spacing(.5)},rightLabelText:{fontSize:"0.95rem",color:"#ddd",fontFamily:"'Normative Pro'",marginTop:12},rightNote:{fontSize:"0.75rem",color:"#aaa",fontStyle:"italic"},textFieldsContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2),marginTop:e.spacing(1)},textField:{"& .MuiInputBase-root":{backgroundColor:"#191919",borderRadius:"12px",color:"#ddd"},"& .MuiInputLabel-root":{color:"#999"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#333"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#555"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#666"}},infoBox:{backgroundColor:"#191919",padding:e.spacing(2),borderRadius:"16px",marginBottom:e.spacing(3),display:"flex",gap:e.spacing(1.5),alignItems:"flex-start"},infoIcon:{color:"#bbb",fontSize:"1.25rem",marginTop:"2px"},infoText:{fontSize:"0.875rem",color:"#bbb",lineHeight:1.6},divider:{backgroundColor:"#ffffff12",margin:"".concat(e.spacing(3),"px 0")},summaryCount:{marginLeft:"auto",fontSize:"0.875rem",color:"#999",fontWeight:400}}}))((function(e){var t,n=e.classes,a=e.open,w=e.onClose,_=e.onSave,x=e.licenseBase,T=e.initialCustomization,k=C((0,r.useState)(null),2),N=k[0],O=k[1],I=C((0,r.useState)({}),2),P=I[0],L=I[1];(0,r.useEffect)((function(){if(a&&x)if(T)O(T);else{var e={isCustomized:!0,rightsConfiguration:{holderRights:{},visitorRights:{}},royaltyPercentage:10,governingLaw:{jurisdiction:"Switzerland",court:"Zug, Switzerland",arbitrationLocation:"Zug, Switzerland",arbitrationRules:"Swiss Arbitration Centre"}},t=x.sections.find((function(e){return"license-options"===e.id}));null!=t&&t.rightsCategories&&t.rightsCategories.forEach((function(t){var n="holder-rights"===t.id?"holderRights":"visitorRights";t.rights.forEach((function(t){e.rightsConfiguration[n][t.id]=t.defaultValue}))})),O(e)}}),[a,x,T]);var R=function(e,t){O((function(n){return A(A({},n),{},{governingLaw:A(A({},n.governingLaw),{},S({},e,t))})}))};if(!N||!x)return null;var D=x.sections.find((function(e){return"license-options"===e.id}));return r.createElement(o.A,{PaperProps:{classes:{root:n.dialog}},maxWidth:"md",fullWidth:!0,keepMounted:!1,open:a,scroll:"paper",onClose:w},r.createElement(c.A,null,r.createElement(f.A,{component:"h2",variant:"h4",style:{fontWeight:500}},"PIXA NFT LICENSE 0.1"),r.createElement("div",{style:{fontSize:"0.95rem",fontWeight:400,color:"#bbb",marginTop:"4px"}},"Configure the terms of the agreement for your NFT artwork's rights to be granted to the holders and visitors")),r.createElement("div",{className:n.dialogBody},r.createElement(l.A,{className:n.dialogBody},r.createElement("div",{className:n.infoBox},r.createElement(y.A,{className:n.infoIcon}),r.createElement(f.A,{className:n.infoText},"Customize how holders and visitors can use your artwork. These settings will be permanently associated with your NFT and automatically transfer with ownership.")),null==D||null===(t=D.rightsCategories)||void 0===t?void 0:t.map((function(e){return l="holder-rights"===(s=(t=e).id)?"holderRights":"visitorRights",c=(null==N||null===(a=N.rightsConfiguration)||void 0===a?void 0:a[l])||{},i=t.rights,o={},i.forEach((function(e){o[e.category]||(o[e.category]={label:e.categoryLabel||e.category.charAt(0).toUpperCase()+e.category.slice(1),rights:[]}),o[e.category].rights.push(e)})),p=["basic","commercial","creative","digital","media","display","educational","advanced"].filter((function(e){return o[e]})).map((function(e){return A({category:e},o[e])})),function(e,t){var n,r="holder-rights"===e?"holderRights":"visitorRights",a=(null==N||null===(n=N.rightsConfiguration)||void 0===n?void 0:n[r])||{};t.forEach((function(e){e.rights.forEach((function(e){a[e.id]&&e.dependsOn&&a[e.dependsOn]}))}))}(s,p),r.createElement("div",{className:n.section,key:s},r.createElement(f.A,{className:n.sectionTitle},t.title),p.map((function(e){var t=e.category,a=e.label,i=e.rights;return r.createElement(m.A,{key:t,className:n.accordion,defaultExpanded:"basic"===t},r.createElement(h.A,{expandIcon:r.createElement(v.A,{style:{color:"#999"}}),className:n.accordionSummary},r.createElement(f.A,{className:n.categoryLabel},a),r.createElement(f.A,{className:n.summaryCount},i.filter((function(e){return c[e.id]&&(!e.dependsOn||c[e.dependsOn])})).length,"/",i.length)),r.createElement(g.A,{className:n.accordionDetails},i.map((function(e){var t=c[e.id]||!1,a=Boolean(e.dependsOn),i=!e.dependsOn||c[e.dependsOn];return r.createElement("div",{key:e.id,className:"".concat(n.rightItem," ").concat(a?n.nestedRightItem:"")},a&&r.createElement(b.A,{className:n.nestedIcon}),r.createElement("div",{className:n.rightLabel},r.createElement(f.A,{className:n.rightLabelText},e.label),e.note&&r.createElement(f.A,{className:n.rightNote},e.note)),r.createElement(u.A,{control:r.createElement(d.A,{color:"primary",checked:t,onChange:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;O((function(r){var a="holder-rights"===e?"holderRights":"visitorRights",i=A({},r.rightsConfiguration[a]),o=!i[t];if(i[t]=o,!o&&!n){var s,l=x.sections.find((function(e){return"license-options"===e.id})),c=null==l||null===(s=l.rightsCategories)||void 0===s?void 0:s.find((function(t){return t.id===e}));c&&c.rights.forEach((function(e){e.dependsOn===t&&(i[e.id]=!1)}))}return A(A({},r),{},{rightsConfiguration:A(A({},r.rightsConfiguration),{},S({},a,i))})}))}(s,e.id,e.dependsOn)},disabled:a&&!i}),label:""}))}))))})));var t,a,i,o,s,l,c,p})),r.createElement(E.A,{className:n.divider}),r.createElement("div",{className:n.section},r.createElement(f.A,{className:n.sectionTitle},"Royalty Settings"),r.createElement("div",{className:n.textFieldsContainer},r.createElement(p.A,{label:"Royalty Percentage (%)",type:"number",variant:"outlined",fullWidth:!0,className:n.textField,value:N.royaltyPercentage,onChange:function(e){var t=e.target.value,n=parseFloat(t);""===t||n>=0&&n<=100?(O((function(e){return A(A({},e),{},{royaltyPercentage:""===t?"":n})})),L((function(e){return A(A({},e),{},{royalty:null})}))):L((function(e){return A(A({},e),{},{royalty:"Must be between 0 and 100"})}))},error:Boolean(P.royalty),helperText:P.royalty||"Percentage you'll receive on secondary sales (0-100)",inputProps:{min:0,max:100,step:.1}}))),r.createElement(E.A,{className:n.divider}),r.createElement("div",{className:n.section},r.createElement(f.A,{className:n.sectionTitle},"Governing Law & Jurisdiction"),r.createElement("div",{className:n.textFieldsContainer},r.createElement(p.A,{label:"Jurisdiction",variant:"outlined",fullWidth:!0,className:n.textField,value:N.governingLaw.jurisdiction,onChange:function(e){return R("jurisdiction",e.target.value)},placeholder:"e.g., Switzerland"}),r.createElement(p.A,{label:"Court",variant:"outlined",fullWidth:!0,className:n.textField,value:N.governingLaw.court,onChange:function(e){return R("court",e.target.value)},placeholder:"e.g., Zug, Switzerland"}),r.createElement(p.A,{label:"Arbitration Location",variant:"outlined",fullWidth:!0,className:n.textField,value:N.governingLaw.arbitrationLocation,onChange:function(e){return R("arbitrationLocation",e.target.value)},placeholder:"e.g., Zug, Switzerland"}),r.createElement(p.A,{label:"Arbitration Rules",variant:"outlined",fullWidth:!0,className:n.textField,value:N.governingLaw.arbitrationRules,onChange:function(e){return R("arbitrationRules",e.target.value)},placeholder:"e.g., Swiss Arbitration Centre"}))),P.dependencies&&r.createElement(f.A,{style:{color:"#ff6b6b",fontSize:"0.875rem",marginTop:"16px"}},P.dependencies)),r.createElement(s.A,null,r.createElement(i.A,{onClick:w,style:{color:"#999"}},"Cancel"),r.createElement(i.A,{onClick:function(){var e;if(""===N.royaltyPercentage||N.royaltyPercentage<0||N.royaltyPercentage>100)L((function(e){return A(A({},e),{},{royalty:"Royalty percentage is required and must be between 0 and 100"})}));else{var t=x.sections.find((function(e){return"license-options"===e.id})),n=null==t||null===(e=t.rightsCategories)||void 0===e?void 0:e.find((function(e){return"holder-rights"===e.id}));if(n){var r=N.rightsConfiguration.holderRights,a=[];if(n.rights.forEach((function(e){e.dependsOn&&r[e.id]&&!r[e.dependsOn]&&a.push('"'.concat(e.label,'" requires "').concat(e.dependsOn,'" to be enabled'))})),a.length>0)return void L((function(e){return A(A({},e),{},{dependencies:a.join(", ")})}))}_(N)}},color:"primary",variant:"contained",autoFocus:!0},"Save & Generate License"))))}))},997:(e,t,n)=>{var r=n(377),a=n(459);t.A=void 0;var i=a(n(228)),o=(0,r(n(460)).default)(i.createElement("path",{d:"M5.2496 8.0688l2.83-2.8268 14.134 14.15-2.83 2.8268zM9.4857 3.8272l2.828-2.8288 5.6576 5.656-2.828 2.8288zM.9989 12.3147l2.8284-2.8284L9.484 15.143l-2.8284 2.8284zM1 21h12v2H1z"}),"Gavel");t.A=o},998:(e,t,n)=>{var r=n(377),a=n(459);t.A=void 0;var i=a(n(228)),o=(0,r(n(460)).default)(i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.A=o},1001:(e,t,n)=>{var r=n(377),a=n(459);t.A=void 0;var i=a(n(228)),o=(0,r(n(460)).default)(i.createElement("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}),"AddPhotoAlternate");t.A=o}}]);