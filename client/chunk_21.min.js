/*! For license information please see chunk_21.min.js.LICENSE.txt */
(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([[21],{939:(e,t,n)=>{"use strict";var a=n(377),o=n(459);t.A=void 0;var i=o(n(228)),s=(0,a(n(460)).default)(i.createElement(i.Fragment,null,i.createElement("circle",{cx:"12",cy:"12",r:"3"}),i.createElement("path",{d:"M20 4h-3.17l-1.24-1.35c-.37-.41-.91-.65-1.47-.65H9.88c-.56 0-1.1.24-1.48.65L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 13c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"PhotoCameraRounded");t.A=s},940:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(237),o=n(215),i=n(228),s=n(382),r=n(235),c=n(456),d=n(439),l=i.forwardRef((function(e,t){var n=e.children,r=e.classes,l=e.className,u=e.color,p=void 0===u?"default":u,h=e.component,f=void 0===h?"button":h,g=e.disabled,m=void 0!==g&&g,_=e.disableFocusRipple,w=void 0!==_&&_,b=e.focusVisibleClassName,y=e.size,v=void 0===y?"large":y,k=e.variant,x=void 0===k?"circular":k,E=(0,a.A)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return i.createElement(c.A,(0,o.A)({className:(0,s.default)(r.root,l,"large"!==v&&r["size".concat((0,d.A)(v))],m&&r.disabled,"extended"===x&&r.extended,{primary:r.primary,secondary:r.secondary,inherit:r.colorInherit}[p]),component:f,disabled:m,focusRipple:!w,focusVisibleClassName:(0,s.default)(r.focusVisible,b),ref:t},E),i.createElement("span",{className:r.label},n))}));const u=(0,r.A)((function(e){return{root:(0,o.A)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(l)},952:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var a=n(215),o=n(237),i=n(228),s=n(382),r=n(953),c=n(235),d=n(657),l=n(439),u=i.forwardRef((function(e,t){e.checked;var n=e.classes,c=e.className,u=e.control,p=e.disabled,h=(e.inputRef,e.label),f=e.labelPlacement,g=void 0===f?"end":f,m=(e.name,e.onChange,e.value,(0,o.A)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),_=(0,r.A)(),w=p;void 0===w&&void 0!==u.props.disabled&&(w=u.props.disabled),void 0===w&&_&&(w=_.disabled);var b={disabled:w};return["checked","name","onChange","value","inputRef"].forEach((function(t){void 0===u.props[t]&&void 0!==e[t]&&(b[t]=e[t])})),i.createElement("label",(0,a.A)({className:(0,s.default)(n.root,c,"end"!==g&&n["labelPlacement".concat((0,l.A)(g))],w&&n.disabled),ref:t},m),i.cloneElement(u,b),i.createElement(d.A,{component:"span",className:(0,s.default)(n.label,w&&n.disabled)},h))}));const p=(0,c.A)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(u)},955:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(215),o=n(266),i=n(237),s=n(228),r=n(382),c=n(454),d=n(953),l=n(235),u=n(455),p=s.forwardRef((function(e,t){var n=e.autoFocus,l=e.checked,p=e.checkedIcon,h=e.classes,f=e.className,g=e.defaultChecked,m=e.disabled,_=e.icon,w=e.id,b=e.inputProps,y=e.inputRef,v=e.name,k=e.onBlur,x=e.onChange,E=e.onFocus,$=e.readOnly,S=e.required,C=e.tabIndex,A=e.type,z=e.value,T=(0,i.A)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),P=(0,c.A)({controlled:l,default:Boolean(g),name:"SwitchBase",state:"checked"}),R=(0,o.A)(P,2),j=R[0],N=R[1],O=(0,d.A)(),B=m;O&&void 0===B&&(B=O.disabled);var D="checkbox"===A||"radio"===A;return s.createElement(u.A,(0,a.A)({component:"span",className:(0,r.default)(h.root,f,j&&h.checked,B&&h.disabled),disabled:B,tabIndex:null,role:void 0,onFocus:function(e){E&&E(e),O&&O.onFocus&&O.onFocus(e)},onBlur:function(e){k&&k(e),O&&O.onBlur&&O.onBlur(e)},ref:t},T),s.createElement("input",(0,a.A)({autoFocus:n,checked:l,defaultChecked:g,className:h.input,disabled:B,id:D&&w,name:v,onChange:function(e){var t=e.target.checked;N(t),x&&x(e,t)},readOnly:$,ref:y,required:S,tabIndex:C,type:A,value:z},b)),j?p:_)}));const h=(0,l.A)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(p)},966:(e,t,n)=>{"use strict";var a=n(377),o=n(459);t.A=void 0;var i=o(n(228)),s=(0,a(n(460)).default)(i.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"}),"InsertDriveFileOutlined");t.A=s},967:(e,t,n)=>{"use strict";var a=n(377),o=n(459);t.A=void 0;var i=o(n(228)),s=(0,a(n(460)).default)(i.createElement("path",{d:"M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2v2zm0 15H5l5-6v6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"Compare");t.A=s},968:(e,t,n)=>{"use strict";var a=n(377),o=n(459);t.A=void 0;var i=o(n(228)),s=(0,a(n(460)).default)(i.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.A=s},974:(e,t,n)=>{"use strict";n.d(t,{Kj:()=>ae});var a=n(494);n(493).Buffer;const o="host",i="queue/data",s="upload",r="login",c="config",d="This application is currently busy. Please try again. ",l="Connection errored out. ",u="Could not resolve app config. ",p="Space metadata could not be loaded. ",h="Not authorized to access this space. ",f="Invalid credentials. Could not login. ",g="Login credentials are required to access this space.",m="File system access is only available in Node.js environments",_="Root URL not found in client config";async function w(e,t,n){try{return(await(await fetch(`https://huggingface.co/api/spaces/${e}/jwt`,{headers:{Authorization:`Bearer ${t}`,...n?{Cookie:n}:{}}})).json()).token||!1}catch{return!1}}async function b(e){const t=this.options.token?{Authorization:`Bearer ${this.options.token}`}:{};if(t["Content-Type"]="application/json",typeof window<"u"&&window.gradio_config&&"http://localhost:9876"!==location.origin){if(window.gradio_config.current_page&&(e=e.substring(0,e.lastIndexOf("/"))),window.gradio_config.dev_mode){let n=A(e,this.deep_link?c+"?deep_link="+this.deep_link:c);const a=await this.fetch(n,{headers:t,credentials:"include"}),o=await y(a,e,!!this.options.auth);window.gradio_config={...o,current_page:window.gradio_config.current_page}}return window.gradio_config.root=e,{...window.gradio_config}}if(e){let n=A(e,this.deep_link?c+"?deep_link="+this.deep_link:c);return y(await this.fetch(n,{headers:t,credentials:"include"}),e,!!this.options.auth)}throw new Error(u)}async function y(e,t,n){if(401===e?.status&&!n){const t=(await e.json())?.detail?.auth_message;throw new Error(t||g)}if(401===e?.status&&n)throw new Error(f);if(200===e?.status){let n=await e.json();return n.root=t,n.dependencies?.forEach(((e,t)=>{void 0===e.id&&(e.id=t)})),n}if(401===e?.status)throw new Error(h);throw new Error(u)}async function v(){const{http_protocol:e,host:t}=await C(this.app_reference,this.options.token);try{if(this.options.auth){const n=await k(e,t,this.options.auth,this.fetch,this.options.token);n&&this.set_cookies(n)}}catch(e){throw Error(e.message)}}async function k(e,t,n,a,o){const i=new FormData;i.append("username",n?.[0]),i.append("password",n?.[1]);let s={};o&&(s.Authorization=`Bearer ${o}`);const c=await a(`${e}//${t}/${r}`,{headers:s,method:"POST",body:i,credentials:"include"});if(200===c.status)return c.headers.get("set-cookie");throw 401===c.status?new Error(f):new Error(p)}function x(e){if(e.startsWith("http")){const{protocol:t,host:n,pathname:a}=new URL(e);return{ws_protocol:"https:"===t?"wss":"ws",http_protocol:t,host:n+("/"!==a?a:"")}}return{ws_protocol:"wss",http_protocol:"https:",host:new URL(e).host}}const E=e=>{let t=[];return e.split(/,(?=\s*[^\s=;]+=[^\s=;]+)/).forEach((e=>{const[n,a]=e.split(";")[0].split("=");n&&a&&t.push(`${n.trim()}=${a.trim()}`)})),t},$=/^[a-zA-Z0-9_\-\.]+\/[a-zA-Z0-9_\-\.]+$/,S=/.*hf\.space\/{0,1}.*$/;async function C(e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);const a=e.trim().replace(/\/$/,"");if($.test(a))try{return{space_id:e,...x((await(await fetch(`https://huggingface.co/api/spaces/${a}/${o}`,{headers:n})).json()).host)}}catch{throw new Error(p)}if(S.test(a)){const{ws_protocol:e,http_protocol:t,host:n}=x(a);return{space_id:n.split("/")[0].replace(".hf.space",""),ws_protocol:e,http_protocol:t,host:n}}return{space_id:!1,...x(a)}}const A=(...e)=>{try{return e.reduce(((e,t)=>(e=e.replace(/\/+$/,""),t=t.replace(/^\/+/,""),new URL(t,e+"/").toString())))}catch{throw new Error("Invalid URL. A full URL path is required.")}};function z(e,t,n,a){if("Api"===t)return e.type;switch(e?.type){case"string":return"string";case"boolean":return"boolean";case"number":return"number"}return"JSONSerializable"===n||"StringSerializable"===n?"any":"ListStringSerializable"===n?"string[]":"Image"===t?"parameter"===a?"Blob | File | Buffer":"string":"FileSerializable"===n?"array"===e?.type?"parameter"===a?"(Blob | File | Buffer)[]":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}[]":"parameter"===a?"Blob | File | Buffer":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}":"GallerySerializable"===n?"parameter"===a?"[(Blob | File | Buffer), (string | null)][]":"[{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}, (string | null))][]":void 0}function T(e,t){return"GallerySerializable"===t?"array of [file, label] tuples":"ListStringSerializable"===t?"array of strings":"FileSerializable"===t?"array of files or single file":e?.description}function P(e,t){switch(e.msg){case"send_data":return{type:"data"};case"send_hash":return{type:"hash"};case"queue_full":return{type:"update",status:{queue:!0,message:d,stage:"error",code:e.code,success:e.success}};case"heartbeat":return{type:"heartbeat"};case"unexpected_error":return{type:"unexpected_error",status:{queue:!0,message:e.message,session_not_found:e.session_not_found,stage:"error",success:!1}};case"broken_connection":return{type:"broken_connection",status:{queue:!0,message:e.message,stage:"error",success:!1}};case"estimation":return{type:"update",status:{queue:!0,stage:t||"pending",code:e.code,size:e.queue_size,position:e.rank,eta:e.rank_eta,success:e.success}};case"progress":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,progress_data:e.progress_data,success:e.success}};case"log":return{type:"log",data:e};case"process_generating":return{type:"generating",status:{queue:!0,message:e.success?null:e.output.error,stage:e.success?"generating":"error",code:e.code,progress_data:e.progress_data,eta:e.average_duration,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_streaming":return{type:"streaming",status:{queue:!0,message:e.output.error,stage:"streaming",time_limit:e.time_limit,code:e.code,progress_data:e.progress_data,eta:e.eta},data:e.output};case"process_completed":return"error"in e.output?{type:"update",status:{queue:!0,title:e.output.title??"Error",message:e.output.error??"An error occurred",visible:e.output.visible,duration:e.output.duration,stage:"error",code:e.code,success:e.success}}:{type:"complete",status:{queue:!0,message:e.success?void 0:e.output.error,stage:e.success?"complete":"error",code:e.code,progress_data:e.progress_data,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_starts":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,size:e.rank,position:0,success:e.success,eta:e.eta},original_msg:"process_starts"}}return{type:"none",status:{stage:"error",queue:!0}}}async function R(){if(this.api_info)return this.api_info;const{token:e}=this.options,{config:t}=this,n={"Content-Type":"application/json"};if(e&&(n.Authorization=`Bearer ${e}`),t)try{let e,a;if(typeof window<"u"&&window.gradio_api_info)a=window.gradio_api_info;else{const o=A(t.root,this.api_prefix,"info");if(e=await this.fetch(o,{headers:n,credentials:"include"}),!e.ok)throw new Error(l);a=await e.json()}return"api"in a&&(a=a.api),a.named_endpoints["/predict"]&&!a.unnamed_endpoints[0]&&(a.unnamed_endpoints[0]=a.named_endpoints["/predict"]),function(e,t,n){const a={named_endpoints:{},unnamed_endpoints:{}};return Object.keys(e).forEach((o=>{("named_endpoints"===o||"unnamed_endpoints"===o)&&(a[o]={},Object.entries(e[o]).forEach((([e,{parameters:i,returns:s}])=>{const r=t.dependencies.find((t=>t.api_name===e||t.api_name===e.replace("/","")))?.id||n[e.replace("/","")]||-1,c=-1!==r?t.dependencies.find((e=>e.id==r))?.types:{generator:!1,cancel:!1};if(-1!==r&&t.dependencies.find((e=>e.id==r))?.inputs?.length!==i.length){const e=t.dependencies.find((e=>e.id==r)).inputs.map((e=>t.components.find((t=>t.id===e))?.type));try{e.forEach(((e,t)=>{if("state"===e){const e={component:"state",example:null,parameter_default:null,parameter_has_default:!0,parameter_name:null,hidden:!0};i.splice(t,0,e)}}))}catch(e){}}const d=(e,t,n,a)=>({...e,description:T(e?.type,n),type:z(e?.type,t,n,a)||""});a[o][e]={parameters:i.map((e=>d(e,e?.component,e?.serializer,"parameter"))),returns:s.map((e=>d(e,e?.component,e?.serializer,"return"))),type:c}})))})),a}(a,t,this.api_map)}catch(e){throw new Error("Could not get API info. "+e.message)}}async function j(e,t,n){const a={};this?.options?.token&&(a.Authorization=`Bearer ${this.options.token}`);const o=[];let i;for(let r=0;r<t.length;r+=1e3){const c=t.slice(r,r+1e3),d=new FormData;c.forEach((e=>{d.append("files",e)}));try{const t=n?`${e}${this.api_prefix}/${s}?upload_id=${n}`:`${e}${this.api_prefix}/${s}`;i=await this.fetch(t,{method:"POST",body:d,headers:a,credentials:"include"})}catch(e){throw new Error(l+e.message)}if(!i.ok){const e=await i.text();return{error:`HTTP ${i.status}: ${e}`}}const u=await i.json();u&&o.push(...u)}return{files:o}}const N={si:{radix:1e3,unit:["b","kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]},iec:{radix:1024,unit:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"]},jedec:{radix:1024,unit:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]}};async function O(e,t,n,a){let o=(Array.isArray(e)?e:[e]).map((e=>e.blob));const i=o.filter((e=>e.size>(a??1/0)));if(i.length)throw new Error(`File(s) exceed the maximum allowed size of ${function(e,t=1,n="jedec"){e=Math.abs(e);const{radix:a,unit:o}=N[n]||N.jedec;let i=0;for(;e>=a;)e/=a,++i;return`${e.toFixed(t)} ${o[i]}`}(a||1/0)}: ${i.map((e=>`"${e.name}"`)).join(", ")}`);return await Promise.all(await this.upload_files(t,o,n).then((async n=>{if(n.error)throw new Error(n.error);return n.files?n.files.map(((n,a)=>new B({...e[a],path:n,url:`${t}${this.api_prefix}/file=${n}`}))):[]})))}class B{path;url;orig_name;size;blob;is_stream;mime_type;alt_text;b64;meta={_type:"gradio.FileData"};constructor({path:e,url:t,orig_name:n,size:a,blob:o,is_stream:i,mime_type:s,alt_text:r,b64:c}){this.path=e,this.url=t,this.orig_name=n,this.size=a,this.blob=t?void 0:o,this.is_stream=i,this.mime_type=s,this.alt_text=r,this.b64=c}}class D{type;command;meta;fileData;constructor(e,t){this.type="command",this.command=e,this.meta=t}}function q(e,t,n){for(;n.length>1;){const t=n.shift();if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid key type");e=e[t]}const a=n.shift();if("string"!=typeof a&&"number"!=typeof a)throw new Error("Invalid key type");e[a]=t}async function I(e,t=void 0,n=[],a=!1,o=void 0){if(Array.isArray(e)){let i=[];return await Promise.all(e.map((async(s,r)=>{let c=n.slice();c.push(String(r));const d=await I(e[r],a?o?.parameters[r]?.component||void 0:t,c,!1,o);i=i.concat(d)}))),i}if(globalThis.Buffer&&e instanceof globalThis.Buffer||e instanceof Blob)return[{path:n,blob:new Blob([e]),type:t}];if("object"==typeof e&&null!==e){let t=[];for(const a of Object.keys(e)){const i=[...n,a],s=e[a];t=t.concat(await I(s,void 0,i,!1,o))}return t}return[]}function L(e,t,n,a,o=!1){if("input"===a&&!o)throw new Error("Invalid code path. Cannot skip state inputs for input.");if("output"===a&&o)return e;let i=[],s=0;const r="input"===a?t.inputs:t.outputs;for(let t=0;t<r.length;t++){const a=r[t];if("state"!==n.find((e=>e.id===a))?.type){const t=e[s];i.push(t),s++}else{if(!o){s++;continue}if(e.length===r.length){const t=e[s];i.push(t),s++}else i.push(null)}}return i}async function F(e,t,n){const a=this;await async function(e,t){if(!e.config?.root&&!e.config?.root_url)throw new Error(_);await M(e,t)}(a,t);const o=await I(t,void 0,[],!0,n);return(await Promise.all(o.map((async({path:t,blob:n,type:o})=>{if(!n)return{path:t,type:o};const i=await a.upload_files(e,[n]);return{path:t,file_url:i.files&&i.files[0],type:o,name:typeof File<"u"&&n instanceof File?n?.name:void 0}})))).forEach((({path:e,file_url:n,type:a,name:o})=>{if("Gallery"===a)q(t,n,e);else if(n){const a=new B({path:n,orig_name:o});q(t,a,e)}})),t}async function M(e,t,n=[]){for(const a in t)t[a]instanceof D?await U(e,t,a):"object"==typeof t[a]&&null!==t[a]&&await M(e,t[a],[...n,a])}async function U(e,t,o){let i=t[o];const s=e.config?.root||e.config?.root_url;if(!s)throw new Error(_);try{let r,c;if(!(typeof a<"u"&&a.versions&&a.versions.node))throw new Error(m);{const e=await n.e(49).then(n.bind(n,2057));c=(await n.e(49).then(n.bind(n,2057))).resolve(a.cwd(),i.meta.path),r=await e.readFile(c)}const d=new Blob([r],{type:"application/octet-stream"}),l=await e.upload_files(s,[d]),u=l.files&&l.files[0];if(u){const e=new B({path:u,orig_name:i.meta.name||""});t[o]=e}}catch(e){}}async function H(e,t,n){const a={"Content-Type":"application/json"};this.options.token&&(a.Authorization=`Bearer ${this.options.token}`);try{var o=await this.fetch(e,{method:"POST",body:JSON.stringify(t),headers:{...a,...n},credentials:"include"})}catch{return[{error:l},500]}let i,s;try{i=await o.json(),s=o.status}catch(e){i={error:`Could not parse server response: ${e}`},s=500}return[i,s]}async function V(e,t={}){let n=!1,a=!1;if(!this.config)throw new Error("Could not resolve app config");if("number"==typeof e)this.config.dependencies.find((t=>t.id==e));else{const t=e.replace(/^\//,"");this.config.dependencies.find((e=>e.id==this.api_map[t]))}return new Promise((async(o,i)=>{const s=this.submit(e,t,null,null,!0);let r;for await(const e of s)"data"===e.type&&(a&&o(r),n=!0,r=e),"status"===e.type&&("error"===e.stage&&i(e),"complete"===e.stage&&(a=!0,n&&o(r)))}))}async function W(e,t,n){let a,o,i="subdomain"===t?`https://huggingface.co/api/spaces/by-subdomain/${e}`:`https://huggingface.co/api/spaces/${e}`;try{if(a=await fetch(i),o=a.status,200!==o)throw new Error;a=await a.json()}catch{return void n({status:"error",load_status:"error",message:"Could not get space status. ",detail:"NOT_FOUND"})}if(!a||200!==o)return;const{runtime:{stage:s},id:r}=a;switch(s){case"STOPPED":case"SLEEPING":n({status:"sleeping",load_status:"pending",message:"Space is asleep. Waking it up...",detail:s}),setTimeout((()=>{W(e,t,n)}),1e3);break;case"PAUSED":n({status:"paused",load_status:"error",message:"This space has been paused by the author. If you would like to try this demo, consider duplicating the space.",detail:s,discussions_enabled:await X(r)});break;case"RUNNING":case"RUNNING_BUILDING":n({status:"running",load_status:"complete",message:"Space is running.",detail:s});break;case"BUILDING":n({status:"building",load_status:"pending",message:"Space is building...",detail:s}),setTimeout((()=>{W(e,t,n)}),1e3);break;case"APP_STARTING":n({status:"starting",load_status:"pending",message:"Space is starting...",detail:s}),setTimeout((()=>{W(e,t,n)}),1e3);break;default:n({status:"space_error",load_status:"error",message:"This space is experiencing an issue.",detail:s,discussions_enabled:await X(r)})}}typeof a<"u"&&a.versions&&a.versions.node;const G=async(e,t)=>{let n=0;return new Promise((a=>{W(e,$.test(e)?"space_name":"subdomain",(o=>{t(o),"running"===o.status||"error"===o.status||"paused"===o.status||"space_error"===o.status?a():("sleeping"===o.status||"building"===o.status)&&(n<12?(n++,setTimeout((()=>{G(e,t).then(a)}),5e3)):a())}))}))},J=/^(?=[^]*\b[dD]iscussions{0,1}\b)(?=[^]*\b[dD]isabled\b)[^]*$/;async function X(e){try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/discussions`,{method:"HEAD"}),n=t.headers.get("x-error-message");return!(!t.ok||n&&J.test(n))}catch{return!1}}const Z=["cpu-basic","cpu-upgrade","cpu-xl","t4-small","t4-medium","a10g-small","a10g-large","a10g-largex2","a10g-largex4","a100-large","zero-a10g","h100","h100x8"];class K extends TransformStream{#e="";constructor(e={allowCR:!1}){super({transform:(t,n)=>{for(t=this.#e+t;;){const a=t.indexOf("\n"),o=e.allowCR?t.indexOf("\r"):-1;if(-1!==o&&o!==t.length-1&&(-1===a||a-1>o)){n.enqueue(t.slice(0,o)),t=t.slice(o+1);continue}if(-1===a)break;const i="\r"===t[a-1]?a-1:a;n.enqueue(t.slice(0,i)),t=t.slice(a+1)}this.#e=t},flush:t=>{if(""===this.#e)return;const n=e.allowCR&&this.#e.endsWith("\r")?this.#e.slice(0,-1):this.#e;t.enqueue(n)}})}}function Y(e){let t=/[:]\s*/.exec(e),n=t&&t.index;if(n)return[e.substring(0,n),e.substring(n+t[0].length)]}function Q(e,t,n){e.get(t)||e.set(t,n)}async function ee(){let{event_callbacks:e,unclosed_events:t,pending_stream_messages:n,stream_status:a,config:o,jwt:s}=this;const r=this;if(!o)throw new Error("Could not resolve app config");a.open=!0;let c=null,d=new URLSearchParams({session_hash:this.session_hash}).toString(),u=new URL(`${o.root}${this.api_prefix}/${i}?${d}`);s&&u.searchParams.set("__sign",s),c=this.stream(u),c&&(c.onmessage=async function(i){let s=JSON.parse(i.data);if("close_stream"===s.msg)return void te(a,r.abort_controller);const c=s.event_id;if(c)if(e[c]&&o){"process_completed"===s.msg&&["sse","sse_v1","sse_v2","sse_v2.1","sse_v3"].includes(o.protocol)&&t.delete(c);let n=e[c];typeof window<"u"&&typeof document<"u"?setTimeout(n,0,s):n(s)}else n[c]||(n[c]=[]),n[c].push(s);else await Promise.all(Object.keys(e).map((t=>e[t](s))))},c.onerror=async function(t){await Promise.all(Object.keys(e).map((t=>e[t]({msg:"broken_connection",message:l}))))})}function te(e,t){e&&(e.open=!1,t?.abort())}function ne(e,t={},n,a,o,s){try{let r=function(e){(o||G[e.type])&&h(e)},c=function(){for(Y=!0;ee.length>0;)ee.shift()({value:void 0,done:!0})},u=function(e){ee.length>0?ee.shift()(e):Q.push(e)},p=function(e){u(function(e){return{then:(t,n)=>n(e)}}(e)),c()},h=function(e){u({value:e,done:!1})},f=function(){return Q.length>0?Promise.resolve(Q.shift()):new Promise((e=>ee.push(e)))};const{token:g}=this.options,{fetch:m,app_reference:_,config:w,session_hash:b,api_info:y,api_map:v,stream_status:k,pending_stream_messages:x,pending_diff_streams:E,event_callbacks:$,unclosed_events:S,post_data:C,options:A,api_prefix:z}=this,T=s||{"x-gradio-user":"api"},R=this;if(!y)throw new Error("No API found");if(!w)throw new Error("Could not resolve app config");let j,{fn_index:N,endpoint_info:O,dependency:B}=function(e,t,n,a){let o,i,s;if("number"==typeof t)o=t,i=e.unnamed_endpoints[o],s=a.dependencies.find((e=>e.id==t));else{const r=t.replace(/^\//,"");o=n[r],i=e.named_endpoints[t.trim()],s=a.dependencies.find((e=>e.id==n[r]))}if("number"!=typeof o)throw new Error("There is no endpoint matching that name of fn_index matching that number.");return{fn_index:o,endpoint_info:i,dependency:s}}(y,e,v,w),D=((e=[],t)=>{const n=t?t.parameters:[];if(Array.isArray(e))return t&&n.length>0&&(e.length,n.length),e;const a=[],o=Object.keys(e);return n.forEach(((t,n)=>{if(e.hasOwnProperty(t.parameter_name))a[n]=e[t.parameter_name];else{if(!t.parameter_has_default)throw new Error(`No value provided for required parameter: ${t.parameter_name}`);a[n]=t.parameter_default}})),o.forEach((e=>{if(!n.some((t=>t.parameter_name===e)))throw new Error(`Parameter \`${e}\` is not a valid keyword argument. Please refer to the API for usage.`)})),a.forEach(((e,t)=>{if(void 0===e&&!n[t].parameter_has_default)throw new Error(`No value provided for required parameter: ${n[t].parameter_name}`)})),a})(t,O),q=w.protocol??"ws";if("ws"===q)throw new Error("WebSocket protocol is not supported in this version");let I="";const F="number"==typeof e?"/predict":e;let M,U=null,H=!1,V={},W=typeof window<"u"&&typeof document<"u"?new URLSearchParams(window.location.search).toString():"";const G=A?.events?.reduce(((e,t)=>(e[t]=!0,e)),{})||{};async function J(){let e={},t={};e={event_id:U},t={event_id:U,session_hash:b,fn_index:N};try{if(!w)throw new Error("Could not resolve app config");"event_id"in t&&await m(`${w.root}${z}/cancel`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}),await m(`${w.root}${z}/reset`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)})}catch{}}const X=async e=>{await this._resolve_heartbeat(e)};async function Z(e){if(!w)return;let t=e.render_id;w.components=[...w.components.filter((e=>e.props.rendered_in!==t)),...e.components],w.dependencies=[...w.dependencies.filter((e=>e.rendered_in!==t)),...e.dependencies];const n=w.components.some((e=>"state"===e.type)),a=w.dependencies.some((e=>e.targets.some((e=>"unload"===e[1]))));w.connect_heartbeat=n||a,await X(w),r({type:"render",data:e,endpoint:F,fn_index:N})}const K=this.handle_blob(w.root,D,O).then((async e=>{if(M={data:L(e,B,w.components,"input",!0)||[],event_data:n,fn_index:N,trigger_id:a},function(e,t){let n=t?.dependencies?.find((t=>t.id==e))?.queue;return null!=n?!n:!t.enable_queue}(N,w))r({type:"status",endpoint:F,stage:"pending",queue:!1,fn_index:N,time:new Date}),C(`${w.root}${z}/run${F.startsWith("/")?F:`/${F}`}${W?"?"+W:""}`,{...M,session_hash:b},T).then((async([e,t])=>{const o=e.data;200==t?(r({type:"data",endpoint:F,fn_index:N,data:L(o,B,w.components,"output",A.with_null_state),time:new Date,event_data:n,trigger_id:a}),e.render_config&&await Z(e.render_config),r({type:"status",endpoint:F,fn_index:N,stage:"complete",eta:e.average_duration,queue:!1,time:new Date})):r({type:"status",stage:"error",endpoint:F,fn_index:N,message:e.error,queue:!1,time:new Date})})).catch((e=>{r({type:"status",stage:"error",message:e.message,endpoint:F,fn_index:N,queue:!1,time:new Date})}));else if("sse"==q){r({type:"status",stage:"pending",queue:!0,endpoint:F,fn_index:N,time:new Date});var t=new URLSearchParams({fn_index:N.toString(),session_hash:b}).toString();let e=new URL(`${w.root}${z}/${i}?${W?W+"&":""}${t}`);if(this.jwt&&e.searchParams.set("__sign",this.jwt),j=this.stream(e),!j)return Promise.reject(new Error("Cannot connect to SSE endpoint: "+e.toString()));j.onmessage=async function(e){const t=JSON.parse(e.data),{type:o,status:i,data:s}=P(t,V[N]);if("update"===o&&i&&!H)r({type:"status",endpoint:F,fn_index:N,time:new Date,...i}),"error"===i.stage&&(j?.close(),c());else if("data"===o){let[e,t]=await C(`${w.root}${z}/queue/data`,{...M,session_hash:b,event_id:U});200!==t&&(r({type:"status",stage:"error",message:l,queue:!0,endpoint:F,fn_index:N,time:new Date}),j?.close(),c())}else"complete"===o?H=i:"log"===o?r({type:"log",title:s.title,log:s.log,level:s.level,endpoint:F,duration:s.duration,visible:s.visible,fn_index:N}):("generating"===o||"streaming"===o)&&r({type:"status",time:new Date,...i,stage:i?.stage,queue:!0,endpoint:F,fn_index:N});s&&(r({type:"data",time:new Date,data:L(s.data,B,w.components,"output",A.with_null_state),endpoint:F,fn_index:N,event_data:n,trigger_id:a}),H&&(r({type:"status",time:new Date,...H,stage:i?.stage,queue:!0,endpoint:F,fn_index:N}),j?.close(),c()))}}else if("sse_v1"==q||"sse_v2"==q||"sse_v2.1"==q||"sse_v3"==q){r({type:"status",stage:"pending",queue:!0,endpoint:F,fn_index:N,time:new Date});let e="";typeof window<"u"&&typeof document<"u"&&(e=window?.location?.hostname);const t=e.includes(".dev.")?`https://moon-${e.split(".")[1]}.dev.spaces.huggingface.tech`:"https://huggingface.co";return(typeof window<"u"&&typeof document<"u"&&window.parent!=window&&window.supports_zerogpu_headers?function(e,t){return new Promise(((e,n)=>{const a=new MessageChannel;a.port1.onmessage=({data:t})=>{a.port1.close(),e(t)},window.parent.postMessage("zerogpu-headers",t,[a.port2])}))}(0,t):Promise.resolve(null)).then((e=>{const t={...T,...e||{}};return C(`${w.root}${z}/queue/join?${W}`,{...M,session_hash:b},t)})).then((async([e,t])=>{if(e.event_id&&(I=e.event_id),503===t)r({type:"status",stage:"error",message:d,queue:!0,endpoint:F,fn_index:N,time:new Date,visible:!0});else if(422===t)r({type:"status",stage:"error",message:e.detail,queue:!0,endpoint:F,fn_index:N,code:"validation_error",time:new Date,visible:!0}),c();else if(200!==t)r({type:"status",stage:"error",broken:!1,message:e.detail,queue:!0,endpoint:F,fn_index:N,time:new Date,visible:!0});else{U=e.event_id,I=U;let t=async function(e){try{const{type:t,status:n,data:a,original_msg:o}=P(e,V[N]);if("heartbeat"==t)return;if("update"===t&&n&&!H)r({type:"status",endpoint:F,fn_index:N,time:new Date,original_msg:o,...n});else if("complete"===t)H=n;else if("unexpected_error"==t||"broken_connection"==t){const e="broken_connection"===t;r({type:"status",stage:"error",message:n?.message||"An Unexpected Error Occurred!",queue:!0,endpoint:F,broken:e,session_not_found:n?.session_not_found,fn_index:N,time:new Date})}else{if("log"===t)return void r({type:"log",title:a.title,log:a.log,level:a.level,endpoint:F,duration:a.duration,visible:a.visible,fn_index:N});("generating"===t||"streaming"===t)&&(r({type:"status",time:new Date,...n,stage:n?.stage,queue:!0,endpoint:F,fn_index:N}),a&&"stream"!==B.connection&&["sse_v2","sse_v2.1","sse_v3"].includes(q)&&function(e,t,n){e[t]?n.data.forEach(((a,o)=>{let i=function(e,t){return t.forEach((([t,n,a])=>{e=function(e,t,n,a){if(0===t.length){if("replace"===n)return a;if("append"===n)return e+a;throw new Error(`Unsupported action: ${n}`)}let o=e;for(let e=0;e<t.length-1;e++)o=o[t[e]];const i=t[t.length-1];switch(n){case"replace":o[i]=a;break;case"append":o[i]+=a;break;case"add":Array.isArray(o)?o.splice(Number(i),0,a):o[i]=a;break;case"delete":Array.isArray(o)?o.splice(Number(i),1):delete o[i];break;default:throw new Error(`Unknown action: ${n}`)}return e}(e,n,t,a)})),e}(e[t][o],a);e[t][o]=i,n.data[o]=i})):(e[t]=[],n.data.forEach(((n,a)=>{e[t][a]=n})))}(E,U,a))}a&&(r({type:"data",time:new Date,data:L(a.data,B,w.components,"output",A.with_null_state),endpoint:F,fn_index:N}),a.render_config&&await Z(a.render_config),H&&(r({type:"status",time:new Date,...H,stage:n?.stage,queue:!0,endpoint:F,fn_index:N}),c())),("complete"===n?.stage||"error"===n?.stage)&&($[U]&&delete $[U],U in E&&delete E[U])}catch(e){r({type:"status",stage:"error",message:"An Unexpected Error Occurred!",queue:!0,endpoint:F,fn_index:N,time:new Date}),["sse_v2","sse_v2.1","sse_v3"].includes(q)&&(te(k,R.abort_controller),k.open=!1,c())}};U in x&&(x[U].forEach((e=>t(e))),delete x[U]),$[U]=t,S.add(U),k.open||await this.open_stream()}}))}}));let Y=!1;const Q=[],ee=[],ne={[Symbol.asyncIterator]:()=>ne,next:f,throw:async e=>(p(e),f()),return:async()=>(c(),{value:void 0,done:!0}),cancel:J,send_chunk:e=>{this.post_data(`${w.root}${z}/stream/${I}`,{...e,session_hash:this.session_hash})},close_stream:()=>{this.post_data(`${w.root}${z}/stream/${I}/close`,{}),c()},event_id:()=>I,wait_for_id:async()=>(await K,U)};return ne}catch(ae){throw ae}}class ae{app_reference;options;deep_link=null;config;api_prefix="";api_info;api_map={};session_hash=Math.random().toString(36).substring(2);jwt=!1;last_status={};cookies=null;stream_status={open:!1};closed=!1;pending_stream_messages={};pending_diff_streams={};event_callbacks={};unclosed_events=new Set;heartbeat_event=null;abort_controller=null;stream_instance=null;current_payload;get_url_config(e=null){if(!this.config)throw new Error(u);null===e&&(e=window.location.href);const t=e=>e.replace(/^\/+|\/+$/g,"");let n,a=t(new URL(this.config.root).pathname),o=t(new URL(e).pathname);return n=o.startsWith(a)?t(o.substring(a.length)):"",this.get_page_config(n)}get_page_config(e){if(!this.config)throw new Error(u);let t=this.config;return e in t.page||(e=""),{...t,current_page:e,layout:t.page[e].layout,components:t.components.filter((n=>t.page[e].components.includes(n.id))),dependencies:this.config.dependencies.filter((n=>t.page[e].dependencies.includes(n.id)))}}fetch(e,t){const n=new Headers(t?.headers||{});if(this&&this.cookies&&n.append("Cookie",this.cookies),this&&this.options.headers)for(const e in this.options.headers)n.append(e,this.options.headers[e]);return fetch(e,{...t,headers:n})}stream(e){const t=new Headers;if(this&&this.cookies&&t.append("Cookie",this.cookies),this&&this.options.headers)for(const e in this.options.headers)t.append(e,this.options.headers[e]);return this&&this.options.token&&t.append("Authorization",`Bearer ${this.options.token}`),this.abort_controller=new AbortController,this.stream_instance=function(e,t={}){const n={close:()=>{},onerror:null,onmessage:null,onopen:null,readyState:0,url:e.toString(),withCredentials:!1,CONNECTING:0,OPEN:1,CLOSED:2,addEventListener:()=>{throw new Error("Method not implemented.")},dispatchEvent:()=>{throw new Error("Method not implemented.")},removeEventListener:()=>{throw new Error("Method not implemented.")}};return async function(e,t){let n=new Request(e,t);Q(n.headers,"Accept","text/event-stream"),Q(n.headers,"Content-Type","application/json");let a=await fetch(n);if(!a.ok)throw a;return async function*(e,t){if(!e.body)return;let n,a,o=function(e){let t=new TextDecoderStream,n=new K({allowCR:!0});return e.pipeThrough(t).pipeThrough(n)}(e.body),i=o.getReader();for(;;){if(t&&t.aborted)return i.cancel();if(n=await i.read(),n.done)return;if(!n.value){a&&(yield a),a=void 0;continue}let[e,o]=Y(n.value)||[];"data"===e?(a||={},a[e]=a[e]?a[e]+"\n"+o:o):"event"===e?(a||={},a[e]=o):"id"===e?(a||={},a[e]=String(+o)===o?+o:o):"retry"===e&&(a||={},a[e]=+o||void 0)}}(a,n.signal)}(e,t).then((async e=>{n.readyState=n.OPEN;try{for await(const t of e)n.onmessage&&n.onmessage(t);n.readyState=n.CLOSED}catch(e){n.onerror&&n.onerror(e),n.readyState=n.CLOSED}})).catch((e=>{n.onerror&&n.onerror(e),n.readyState=n.CLOSED})),n}(e.toString(),{credentials:"include",headers:t,signal:this.abort_controller.signal}),this.stream_instance}view_api;upload_files;upload;handle_blob;post_data;submit;predict;open_stream;resolve_config;resolve_cookies;constructor(e,t={events:["data"]}){this.app_reference=e,this.deep_link=t.query_params?.deep_link||null,t.events||(t.events=["data"]),this.options=t,this.current_payload={},this.view_api=R.bind(this),this.upload_files=j.bind(this),this.handle_blob=F.bind(this),this.post_data=H.bind(this),this.submit=ne.bind(this),this.predict=V.bind(this),this.open_stream=ee.bind(this),this.resolve_config=b.bind(this),this.resolve_cookies=v.bind(this),this.upload=O.bind(this),this.fetch=this.fetch.bind(this),this.handle_space_success=this.handle_space_success.bind(this),this.stream=this.stream.bind(this)}async init(){this.options.auth&&await this.resolve_cookies(),await this._resolve_config().then((({config:e})=>this._resolve_heartbeat(e))),this.api_info=await this.view_api(),this.api_map=function(e){let t={};return e.forEach((({api_name:e,id:n})=>{e&&(t[e]=n)})),t}(this.config?.dependencies||[])}async _resolve_heartbeat(e){if(e&&(this.config=e,this.api_prefix=e.api_prefix||"",this.config&&this.config.connect_heartbeat&&this.config.space_id&&this.options.token&&(this.jwt=await w(this.config.space_id,this.options.token,this.cookies))),e.space_id&&this.options.token&&(this.jwt=await w(e.space_id,this.options.token)),this.config&&this.config.connect_heartbeat){const e=new URL(`${this.config.root}${this.api_prefix}/heartbeat/${this.session_hash}`);this.jwt&&e.searchParams.set("__sign",this.jwt),this.heartbeat_event||(this.heartbeat_event=this.stream(e))}}static async connect(e,t={events:["data"]}){const n=new this(e,t);return t.session_hash&&(n.session_hash=t.session_hash),await n.init(),n}async reconnect(){const e=new URL(`${this.config.root}${this.api_prefix}/app_id`);let t;try{const n=await this.fetch(e);if(!n.ok)throw new Error;t=(await n.json()).app_id}catch{return"broken"}return t!==this.config.app_id?"changed":"connected"}close(){this.closed=!0,te(this.stream_status,this.abort_controller)}set_current_payload(e){this.current_payload=e}static async duplicate(e,t={events:["data"]}){return async function(e,t){const{token:n,private:a,hardware:o,timeout:i,auth:s}=t;if(o&&!Z.includes(o))throw new Error(`Invalid hardware type provided. Valid types are: ${Z.map((e=>`"${e}"`)).join(",")}.`);const{http_protocol:r,host:c}=await C(e,n);let d=null;if(s){const e=await k(r,c,s,fetch);e&&(d=E(e))}const l={Authorization:`Bearer ${n}`,"Content-Type":"application/json",...d?{Cookie:d.join("; ")}:{}},u=(await(await fetch("https://huggingface.co/api/whoami-v2",{headers:l})).json()).name,h=e.split("/")[1],f={repository:`${u}/${h}`};let g;a&&(f.private=!0);try{o||(g=await async function(e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/runtime`,{headers:n});if(200!==t.status)throw new Error("Space hardware could not be obtained.");const{hardware:a}=await t.json();return a.current}catch(e){throw new Error(e.message)}}(e,n))}catch(e){throw Error(p+e.message)}const m=o||g||"cpu-basic";f.hardware=m;try{const a=await fetch(`https://huggingface.co/api/spaces/${e}/duplicate`,{method:"POST",headers:l,body:JSON.stringify(f)});if(409===a.status)try{return await ae.connect(`${u}/${h}`,t)}catch(e){throw e}else if(200!==a.status)throw new Error(a.statusText);const o=await a.json();return await async function(e,t,n){const a={};n&&(a.Authorization=`Bearer ${n}`);const o={seconds:t};try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/sleeptime`,{method:"POST",headers:{"Content-Type":"application/json",...a},body:JSON.stringify(o)});if(200!==t.status)throw new Error("Could not set sleep timeout on duplicated Space. Please visit *ADD HF LINK TO SETTINGS* to set a timeout manually to reduce billing charges.");return await t.json()}catch(e){throw new Error(e.message)}}(`${u}/${h}`,i||300,n),await ae.connect(function(e){const t=e.match(/https:\/\/huggingface.co\/spaces\/([^/]+\/[^/]+)/);if(t)return t[1]}(o.url),t)}catch(e){throw new Error(e)}}(e,t)}async _resolve_config(){const{http_protocol:e,host:t,space_id:n}=await C(this.app_reference,this.options.token),{status_callback:a}=this.options;let o;n&&a&&await G(n,a);try{let n=`${e}//${t}`;if(o=await this.resolve_config(n),!o)throw new Error(u);return this.config_success(o)}catch(e){if(!n||!a)throw a&&a({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),Error(e);W(n,$.test(n)?"space_name":"subdomain",this.handle_space_success)}}async config_success(e){if(this.config=e,this.api_prefix=e.api_prefix||"",this.config.auth_required)return this.prepare_return_obj();try{this.api_info=await this.view_api()}catch(e){}return this.prepare_return_obj()}async handle_space_success(e){if(!this)throw new Error(u);const{status_callback:t}=this.options;if(t&&t(e),"running"===e.status)try{if(this.config=await this._resolve_config(),this.api_prefix=this?.config?.api_prefix||"",!this.config)throw new Error(u);return await this.config_success(this.config)}catch(e){throw t&&t({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),e}}async component_server(e,t,n){if(!this.config)throw new Error(u);const a={},{token:o}=this.options,{session_hash:i}=this;o&&(a.Authorization=`Bearer ${this.options.token}`);let s,r,c=this.config.components.find((t=>t.id===e));if(s=c?.props?.root_url?c.props.root_url:this.config.root,"binary"in n){r=new FormData;for(const e in n.data)"binary"!==e&&r.append(e,n.data[e]);r.set("component_id",e.toString()),r.set("fn_name",t),r.set("session_hash",i)}else r=JSON.stringify({data:n,component_id:e,fn_name:t,session_hash:i}),a["Content-Type"]="application/json";o&&(a.Authorization=`Bearer ${o}`);try{const e=await this.fetch(`${s}${this.api_prefix}/component_server/`,{method:"POST",body:r,headers:a,credentials:"include"});if(!e.ok)throw new Error("Could not connect to component server: "+e.statusText);return await e.json()}catch(e){}}set_cookies(e){this.cookies=E(e).join("; ")}prepare_return_obj(){return{config:this.config,predict:this.predict,submit:this.submit,view_api:this.view_api,component_server:this.component_server}}}},979:(e,t,n)=>{"use strict";var a=n(4),o=n(84).some;a({target:"Array",proto:!0,forced:!n(105)("some")},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},980:(e,t,n)=>{"use strict";n(981)},981:(e,t,n)=>{"use strict";var a=n(4),o=n(179),i=n(31),s=n(47),r=n(205);a({target:"Iterator",proto:!0,real:!0},{some:function(e){s(this),i(e);var t=r(this),n=0;return o(t,(function(t,a){if(e(t,n++))return a()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},982:(e,t,n)=>{"use strict";var a=n(459),o=n(377);t.Ay=void 0;var i=o(n(378)),s=o(n(389)),r=a(n(228)),c=(o(n(392)),o(n(382))),d=(n(391),o(n(983))),l=o(n(376)),u=r.forwardRef((function(e,t){var n=e.disableUnderline,a=e.classes,o=e.fullWidth,l=void 0!==o&&o,u=e.inputComponent,p=void 0===u?"input":u,h=e.multiline,f=void 0!==h&&h,g=e.type,m=void 0===g?"text":g,_=(0,s.default)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return r.createElement(d.default,(0,i.default)({classes:(0,i.default)({},a,{root:(0,c.default)(a.root,!n&&a.underline),underline:null}),fullWidth:l,inputComponent:p,multiline:f,ref:t,type:m},_))}));u.muiName="Input";var p=(0,l.default)((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:a,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:a}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(u);t.Ay=p},983:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a.A});var a=n(946)},984:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var s=o.apply(null,n);s&&e.push(s)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var r in n)a.call(n,r)&&n[r]&&e.push(r)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},995:(e,t,n)=>{"use strict";var a=n(377),o=n(459);t.A=void 0;var i=o(n(228)),s=(0,a(n(460)).default)(i.createElement("path",{d:"M5.2496 8.0688l2.83-2.8268 14.134 14.15-2.83 2.8268zM9.4857 3.8272l2.828-2.8288 5.6576 5.656-2.828 2.8288zM.9989 12.3147l2.8284-2.8284L9.484 15.143l-2.8284 2.8284zM1 21h12v2H1z"}),"Gavel");t.A=s},996:(e,t,n)=>{"use strict";var a=n(377),o=n(459);t.A=void 0;var i=o(n(228)),s=(0,a(n(460)).default)(i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.A=s},1026:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var a=n(215),o=n(237),i=n(228),s=n(382),r=n(955),c=n(462);const d=(0,c.A)(i.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),l=(0,c.A)(i.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");var u=n(264);const p=(0,c.A)(i.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var h=n(439),f=n(235),g=i.createElement(l,null),m=i.createElement(d,null),_=i.createElement(p,null),w=i.forwardRef((function(e,t){var n=e.checkedIcon,c=void 0===n?g:n,d=e.classes,l=e.color,u=void 0===l?"secondary":l,p=e.icon,f=void 0===p?m:p,w=e.indeterminate,b=void 0!==w&&w,y=e.indeterminateIcon,v=void 0===y?_:y,k=e.inputProps,x=e.size,E=void 0===x?"medium":x,$=(0,o.A)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),S=b?v:f,C=b?v:c;return i.createElement(r.A,(0,a.A)({type:"checkbox",classes:{root:(0,s.default)(d.root,d["color".concat((0,h.A)(u))],b&&d.indeterminate),checked:d.checked,disabled:d.disabled},color:u,inputProps:(0,a.A)({"data-indeterminate":b},k),icon:i.cloneElement(S,{fontSize:void 0===S.props.fontSize&&"small"===E?E:S.props.fontSize}),checkedIcon:i.cloneElement(C,{fontSize:void 0===C.props.fontSize&&"small"===E?E:C.props.fontSize}),ref:t},$))}));const b=(0,f.A)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,u.X4)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,u.X4)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(w)}}]);