/*! For license information please see chunk_22.min.js.LICENSE.txt */
"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([[22],{925:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>Pe}),n(2),n(98),n(99),n(100),n(273),n(101),n(103),n(106),n(116),n(118),n(119),n(857),n(216),n(130),n(275),n(131),n(132),n(134),n(135),n(137),n(138),n(478),n(145),n(146),n(147),n(150),n(151),n(152),n(153),n(154),n(155),n(874),n(157),n(186),n(192),n(193),n(678),n(195),n(199),n(300),n(305),n(221),n(201),n(203),n(208),n(223),n(680),n(683),n(684),n(692),n(693),n(694),n(695),n(697),n(699),n(701),n(703),n(704),n(705),n(706),n(707),n(709),n(210),n(213),n(371),n(875),n(881),n(882);var a=n(228),i=n(376),o=n(926),l=n(650),c=n(651),s=n(652),u=n(649),p=n(654),d=n(929),m=n(934),f=n(656),g=n(935),h=n(936),v=n(938),b=n(940),y=n(947),E=n(948),A=n(471),C=n(949),T=n(950),w=n(951),S=n(952),x=n(917),I=n(465),O=n(953),_=n(375),L=n(960),N=n(449),P=n(967),R=n(976),D=n(661),k=n(978),z=n(979),M=n(442),F=n(455),j=n(980),B=n(981),W=n(911),G=n(912),U=e([O]),V=U.then?(await U)():U;function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function pe(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return de(s,"_invoke",function(n,r,a){var i,l,c,s=0,u=a||[],p=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,l=0,c=e,d.n=n,o}};function m(n,r){for(l=n,c=r,t=0;!p&&s&&!a&&t<u.length;t++){var a,i=u[t],m=d.p,f=i[2];n>3?(a=f===r)&&(c=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=m&&((a=n<2&&m<i[1])?(l=0,d.v=r,d.n=i[1]):m<f&&(a=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,d.n=f,l=0))}if(a||n>1)return o;throw p=!0,r}return function(a,u,f){if(s>1)throw TypeError("Generator is already running");for(p&&1===u&&m(u,f),l=u,c=f;(t=l<2?e:c)||!p;){i||(l?l<3?(l>1&&(d.n=-1),m(l,c)):d.n=c:d.v=c);try{if(s=2,i){if(l||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);i=e}else if((t=(p=d.n<0)?c:n.call(r,d))!==o)break}catch(t){i=e,l=1,c=t}finally{s=1}}return{value:t,done:p}}}(n,a,i),!0),s}var o={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(de(t={},r,(function(){return this})),t),p=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,de(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=s,de(p,"constructor",s),de(s,"constructor",c),c.displayName="GeneratorFunction",de(s,a,"GeneratorFunction"),de(p),de(p,a,"Generator"),de(p,r,(function(){return this})),de(p,"toString",(function(){return"[object Generator]"})),(pe=function(){return{w:i,m:d}})()}function de(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}de=function(e,t,n,r){function i(t,n){de(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},de(e,t,n,r)}function me(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){me(i,r,a,o,l,"next",e)}function l(e){me(i,r,a,o,l,"throw",e)}o(void 0)}))}}function ge(e,t){return be(e)||ve(e,t)||_e(e,t)||he()}function he(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ve(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}function be(e){if(Array.isArray(e))return e}function ye(e){return Ce(e)||Ae(e)||_e(e)||Ee()}function Ee(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ae(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ce(e){if(Array.isArray(e))return Le(e)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return(t=xe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e){var t=Ie(e,"string");return"symbol"==ue(t)?t:t+""}function Ie(e,t){if("object"!=ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Oe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_e(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function _e(e,t){if(e){if("string"==typeof e)return Le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}O=V[0];var H={TITLE_MAX_LENGTH:32,DESCRIPTION_MAX_LENGTH:1024,TAGS_MIN_COUNT:1,TAGS_MAX_COUNT:5,TAG_MIN_LENGTH:3,TAG_PATTERN:/^[a-z][a-z0-9\-]*$/,TAG_INVALID_CHARS:/[^a-z0-9\-]/g,TAG_STARTS_WITH_NUMBER_OR_MINUS:/^[0-9\-]/,TAG_CONTAINS_DOT:/\./},q=function(e){return e&&e.trim()?e.length>H.TITLE_MAX_LENGTH?{valid:!1,error:"Title must be ".concat(H.TITLE_MAX_LENGTH," characters or less (currently ").concat(e.length,")")}:{valid:!0,error:null}:{valid:!1,error:"Title is required"}},X=function(e){return e&&e.trim()?e.length>H.DESCRIPTION_MAX_LENGTH?{valid:!1,error:"Description must be ".concat(H.DESCRIPTION_MAX_LENGTH," characters or less (currently ").concat(e.length,")")}:{valid:!0,error:null}:{valid:!1,error:"Description is required"}},K=function(e){return!e||e.length<H.TAG_MIN_LENGTH?{valid:!1,error:"Tag must be at least ".concat(H.TAG_MIN_LENGTH," characters")}:H.TAG_STARTS_WITH_NUMBER_OR_MINUS.test(e)?{valid:!1,error:"Tag cannot begin with a number or minus sign"}:H.TAG_CONTAINS_DOT.test(e)?{valid:!1,error:"Tag cannot contain dots"}:H.TAG_PATTERN.test(e)?{valid:!0,error:null}:{valid:!1,error:"Tag can only contain lowercase letters, numbers, and hyphens"}},Z=function(e){if(!e||e.length<H.TAGS_MIN_COUNT)return{valid:!1,error:"At least ".concat(H.TAGS_MIN_COUNT," tag is required")};if(e.length>H.TAGS_MAX_COUNT)return{valid:!1,error:"Maximum ".concat(H.TAGS_MAX_COUNT," tags allowed")};var t,n=Oe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=K(r);if(!a.valid)return{valid:!1,error:'Tag "'.concat(r,'": ').concat(a.error)}}}catch(e){n.e(e)}finally{n.f()}return{valid:!0,error:null}},Y=function(e,t,n){var r={},a=q(e);a.valid||(r.title=a.error);var i=X(t);i.valid||(r.description=i.error);var o=Z(n);return o.valid||(r.tags=o.error),{valid:0===Object.keys(r).length,errors:r}},Q=function(e){var t=Date.now(),n=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,50);return"".concat(n,"-").concat(t)},$=function(e){if(e&&"string"==typeof e&&e.startsWith("blob:"))try{URL.revokeObjectURL(e)}catch(e){}},J=function(e){return.1+e/100*.5},ee=function(e){for(var t,n,r,a,i,o,l=(null==e||null===(t=e.target)||void 0===t?void 0:t.files)||(null==e||null===(n=e.srcElement)||void 0===n?void 0:n.files)||(null==e||null===(r=e.currentTarget)||void 0===r?void 0:r.files)||(null==e||null===(a=e.path)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.files)||(null==e||null===(o=e.dataTransfer)||void 0===o?void 0:o.files)||[],c=0;c<l.length;c++){var s,u;if(null!==(s=l[c])&&void 0!==s&&null!==(u=s.type)&&void 0!==u&&u.startsWith("image/"))return l[c]}return l[0]||null},te={tabValue:0,currentStep:0,title:"",description:"",tags:[],validationErrors:{},touched:{title:!1,description:!1,tags:!1},preferredSize:"L",aspectRatio:"1:1",transformationPercent:50,fidelityPercent:50,preview:null,previewCache:{},quantizedData:null,base64:"",processorData:null,availableSizes:[],dropzoneActive:!1,message:"We maintain privacy and don't store uploaded images.",inputFileUrl:"",inputFile:null,showingOriginal:!1,preloading:!1,preloadProgress:0,isGenerating:!1,isImageOptimal:!1,canvasKey:0,isPublishing:!1,closeConfirmOpen:!1,useAiOpen:!1,quantizeDialogOpen:!1,licenseCustomizationOpen:!1,publishConfirmOpen:!1,quantizeDownscale:4,quantizeColors:64,licenseBase:null,licenseCustomization:null,processName:"upload file",processStart:0,processFinish:0},ne={SET_FIELD:"SET_FIELD",SET_MULTIPLE:"SET_MULTIPLE",RESET:"RESET",RESET_UPLOAD:"RESET_UPLOAD",SET_PREVIEW_DATA:"SET_PREVIEW_DATA",CACHE_PREVIEW:"CACHE_PREVIEW",SET_PROCESS:"SET_PROCESS",INCREMENT_CANVAS_KEY:"INCREMENT_CANVAS_KEY",SET_VALIDATION_ERROR:"SET_VALIDATION_ERROR",CLEAR_VALIDATION_ERROR:"CLEAR_VALIDATION_ERROR",SET_TOUCHED:"SET_TOUCHED",VALIDATE_ALL:"VALIDATE_ALL"},re=function(e,t){switch(t.type){case ne.SET_FIELD:return we(we({},e),{},Se({},t.field,t.value));case ne.SET_MULTIPLE:return we(we({},e),t.payload);case ne.RESET:return we(we({},te),{},{licenseBase:t.licenseBase,licenseCustomization:t.defaultCustomization});case ne.RESET_UPLOAD:return we(we({},e),{},{currentStep:0,preview:null,previewCache:{},quantizedData:null,base64:"",processorData:null,availableSizes:[],inputFileUrl:"",inputFile:null,showingOriginal:!1,preloading:!1,preloadProgress:0,isGenerating:!1,isImageOptimal:!1,canvasKey:0,quantizeDialogOpen:!1,quantizeDownscale:4,quantizeColors:64,message:"We maintain privacy and don't store uploaded images.",processName:"upload file",processStart:0,processFinish:0});case ne.SET_PREVIEW_DATA:return we(we({},e),{},{preview:t.preview,previewCache:Se({},t.sizeName,t.preview),processorData:t.processorData,availableSizes:t.availableSizes,title:t.title||e.title,currentStep:1,processName:"upload file",processStart:0,processFinish:0,isGenerating:!1,canvasKey:e.canvasKey+1});case ne.CACHE_PREVIEW:return we(we({},e),{},{previewCache:we(we({},e.previewCache),{},Se({},t.sizeName,t.preview)),preview:t.setAsCurrent?t.preview:e.preview,canvasKey:t.setAsCurrent?e.canvasKey+1:e.canvasKey});case ne.SET_PROCESS:return we(we({},e),{},{processName:t.name,processStart:t.start,processFinish:t.finish});case ne.INCREMENT_CANVAS_KEY:return we(we({},e),{},{canvasKey:e.canvasKey+1});case ne.SET_VALIDATION_ERROR:return we(we({},e),{},{validationErrors:we(we({},e.validationErrors),{},Se({},t.field,t.error))});case ne.CLEAR_VALIDATION_ERROR:var n=we({},e.validationErrors);return delete n[t.field],we(we({},e),{},{validationErrors:n});case ne.SET_TOUCHED:return we(we({},e),{},{touched:we(we({},e.touched),{},Se({},t.field,!0))});case ne.VALIDATE_ALL:return we(we({},e),{},{validationErrors:t.errors,touched:{title:!0,description:!0,tags:!0}});default:return e}},ae=(0,a.memo)((function(e){var t=e.classes,n=e.dropzoneActive,r=e.inputFileUrl,i=e.loading,o=e.processName,l=e.loadingPercent,c=e.message,u=e.onFileUpload,g=e.dropRef,h=(0,a.useRef)(null),v=(0,a.useCallback)((function(){var e;null===(e=h.current)||void 0===e||e.click()}),[]);return a.createElement("div",{ref:g},a.createElement("div",{style:{borderRadius:"21px"},className:n?t.dropZoneActive:t.dropZone},r&&a.createElement(N.A,{in:!0,timeout:300},a.createElement("img",{src:r,className:t.inputImage+" pixelated",alt:"Input Image"})),a.createElement(d.A,{inputRef:h,onChange:u,inputProps:{accept:"image/*"},style:{display:"none",position:"absolute"},id:"button-file-dialog-secondary",type:"file"}),a.createElement(N.A,{in:!0,timeout:600},a.createElement("div",{style:{pointerEvents:i||"upload file"!==o?"none":"auto",transform:"translate(-50%, -50%)",top:"50%",left:"50%",position:"absolute",display:"inline",zIndex:10}},a.createElement(N.A,{in:!0,timeout:600},a.createElement(s.A,{disabled:i||"upload file"!==o,onClick:v},a.createElement("span",{style:{fontWeight:"bold",fontSize:"24px",verticalAlign:"super",color:"#999",marginRight:"16px"}},o||"Upload Image"),i||"upload file"!==o?a.createElement(m.A,{position:"relative",display:"inline-flex"},a.createElement(f.A,{variant:i?"determinate":"indeterminate",style:{color:"#ffffff"},value:Math.round(100*l)}),a.createElement(m.A,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},a.createElement(p.A,{variant:"caption",component:"div",color:"textSecondary"},i?"".concat(Math.round(Math.min(100*l,100)),"%"):"wait"))):a.createElement(C.A,{style:{color:"#555"}}))),a.createElement(N.A,{in:!0,timeout:900},a.createElement("p",{style:{textAlign:"center",color:"#a7a7a7"}},c))))))}),(function(e,t){return e.dropzoneActive===t.dropzoneActive&&e.inputFileUrl===t.inputFileUrl&&e.loading===t.loading&&e.processName===t.processName&&e.loadingPercent===t.loadingPercent&&e.message===t.message})),ie=(0,a.memo)((function(e){var t=e.classes,n=e.aspectRatio,r=e.onAspectRatioChange,i=e.disabled,o=(0,a.useCallback)((function(e){return function(){r(e)}}),[r]);return a.createElement(N.A,{in:!0,timeout:600},a.createElement(m.A,{className:t.aspectRatioContainer},a.createElement(B.A,{container:!0,spacing:2},a.createElement(B.A,{item:!0,xs:4},a.createElement("div",{className:t.aspectRatioColumn},a.createElement(p.A,{className:t.aspectRatioLabel},"Squared"),a.createElement(j.A,{className:t.aspectRatioButtonGroup,variant:"1:1"===n?"contained":"outlined",fullWidth:!0,disabled:i},a.createElement(s.A,{variant:"1:1"===n?"contained":"outlined",onClick:o("1:1")},"1:1")))),a.createElement(B.A,{item:!0,xs:4},a.createElement("div",{className:t.aspectRatioColumn},a.createElement(p.A,{className:t.aspectRatioLabel},"Landscape"),a.createElement(j.A,{className:t.aspectRatioButtonGroup,variant:"outlined",fullWidth:!0,disabled:i},a.createElement(s.A,{variant:"4:3"===n?"contained":"outlined",onClick:o("4:3")},"4:3"),a.createElement(s.A,{variant:"16:9"===n?"contained":"outlined",onClick:o("16:9")},"16:9")))),a.createElement(B.A,{item:!0,xs:4},a.createElement("div",{className:t.aspectRatioColumn},a.createElement(p.A,{className:t.aspectRatioLabel},"Portrait"),a.createElement(j.A,{className:t.aspectRatioButtonGroup,variant:"outlined",fullWidth:!0,disabled:i},a.createElement(s.A,{variant:"3:4"===n?"contained":"outlined",onClick:o("3:4")},"3:4"),a.createElement(s.A,{variant:"9:16"===n?"contained":"outlined",onClick:o("9:16")},"9:16")))))))}),(function(e,t){return e.aspectRatio===t.aspectRatio&&e.disabled===t.disabled})),oe=(0,a.memo)((function(e){var t=e.classes,n=e.showFidelity,r=e.transformationPercent,i=e.fidelityPercent,o=e.onTransformationChange,l=e.onFidelityChange,c=e.disabled,s=(0,a.useCallback)((function(e,t){o(t)}),[o]),u=(0,a.useCallback)((function(e,t){l(t)}),[l]);return a.createElement(N.A,{in:!0,timeout:900},a.createElement(m.A,{className:t.sliderContainer},a.createElement(m.A,{mb:n?3:0},a.createElement(p.A,{className:t.sliderLabel},"Transformation (Details): ",r,"%"),a.createElement(y.A,{value:r,onChange:s,min:0,max:100,step:10,valueLabelDisplay:"auto",valueLabelFormat:function(e){return"".concat(e,"%")},disabled:c})),n&&a.createElement(m.A,null,a.createElement(p.A,{className:t.sliderLabel},"Fidelity (Similarities): ",i,"%"),a.createElement(y.A,{value:i,onChange:u,min:0,max:100,step:2,valueLabelDisplay:"auto",valueLabelFormat:function(e){return"".concat(e,"%")},disabled:c}))))}),(function(e,t){return e.showFidelity===t.showFidelity&&e.transformationPercent===t.transformationPercent&&e.fidelityPercent===t.fidelityPercent&&e.disabled===t.disabled})),le=(0,a.memo)((function(e){var t=e.classes,n=e.preview,r=e.quantizedData,i=e.preferredSize,l=e.availableSizes,c=e.preloading,u=e.preloadProgress,p=e.showingOriginal,d=e.hasProcessorData,m=e.originalImageData,b=e.onSizeChange,y=e.onToggleComparison,E=e.onApplyQuantize,A=e.onCancelQuantize,C=e.onDownload,w=e.onOpenEditor,S=e.canvasRef,x=e.originalCanvasRef,I=e.base64Kb,O=r||n;return a.createElement("div",{style:{position:"relative"}},a.createElement(g.A,{component:"fieldset",style:{padding:"8px 16px 64px 16px",position:"absolute",background:"linear-gradient(180deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",top:"0px",display:"flow",zIndex:10}},r?a.createElement(N.A,{in:!0,timeout:600},a.createElement("div",{className:t.quantizedMessage},a.createElement("span",{style:{lineHeight:"32px"}},"Quantization applied"),a.createElement(s.A,{variant:"text",onClick:A},"CANCEL"))):1===l.length?a.createElement(N.A,{in:!0,timeout:600},a.createElement("p",{style:{lineHeight:"32px"}},"Your artwork is already optimized for pixel art")):a.createElement(o.A,{row:!0,defaultValue:"top","aria-label":"size",name:"SIZE",color:"primary",value:i,onChange:b},l.map((function(e,t){return a.createElement(N.A,{key:e,in:!0,timeout:200*(t+1)},a.createElement(h.A,{value:e,control:a.createElement(v.A,null),label:e}))})))),c&&a.createElement("div",{className:t.loadingIndicator},a.createElement(f.A,{size:12,style:{color:"#fff"}}),a.createElement("span",null,"Preloading ",Math.round(u),"%")),a.createElement("div",{className:t.comparisonContainer+" pixelated",style:{width:"100%"}},d&&a.createElement(F.A,{className:t.comparisonButton,onClick:y,size:"small"},a.createElement(T.A,null)),d&&m&&a.createElement("canvas",{className:t.comparisonCanvas,ref:x,width:m.width,height:m.height,style:{borderRadius:"21px",width:"100%",opacity:p?1:0,position:p?"relative":"absolute",pointerEvents:p?"auto":"none",top:0,left:0}}),O&&a.createElement("canvas",{className:t.comparisonCanvas,ref:S,width:O.width,height:O.height,style:{borderRadius:"21px",width:"100%",opacity:p?0:1,position:p?"absolute":"relative",pointerEvents:p?"none":"auto",top:p?0:"auto",left:p?0:"auto"}})),a.createElement("div",{style:{padding:"64px 8px 16px 8px",textAlign:"right",position:"absolute",background:"linear-gradient(0deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",bottom:"0px",zIndex:10}},a.createElement(N.A,{in:!0,timeout:600},a.createElement(s.A,{variant:"text",style:{color:"#ffffff88"},onClick:E},r?"ADJUST":"QUANTIZE")),a.createElement(N.A,{in:!0,timeout:800},a.createElement(s.A,{variant:"text",style:{color:"#ffffff88"},onClick:C},"DOWNLOAD (",I.toFixed(2)," kB)")),a.createElement(N.A,{in:!0,timeout:1e3},a.createElement(s.A,{variant:"text",style:{color:"#ffffff88"},onClick:w},"OPEN EDITOR"))))}),(function(e,t){return e.preview===t.preview&&e.quantizedData===t.quantizedData&&e.preferredSize===t.preferredSize&&e.preloading===t.preloading&&e.preloadProgress===t.preloadProgress&&e.showingOriginal===t.showingOriginal&&e.base64Kb===t.base64Kb&&e.availableSizes===t.availableSizes&&e.hasProcessorData===t.hasProcessorData})),ce=(0,a.memo)((function(e){var t,n=e.classes,r=e.licenseCustomization,i=e.onOpenLicense,o=null==r?void 0:r.isCustomized,l=(0,a.useMemo)((function(){return null!=r&&r.rightsConfiguration?{holderRights:Object.values(r.rightsConfiguration.holderRights||{}).filter((function(e){return!0===e})).length,visitorRights:Object.values(r.rightsConfiguration.visitorRights||{}).filter((function(e){return!0===e})).length,royalty:r.royaltyPercentage||0}:{holderRights:0,visitorRights:0,royalty:0}}),[r]);return a.createElement("div",{className:n.licenseSection},a.createElement(M.A,{className:n.licensePaper},a.createElement("div",{className:n.licenseHeader},a.createElement(p.A,{className:n.licenseTitle},a.createElement(k.A,null),"NFT License"),o&&a.createElement(D.A,{icon:a.createElement(z.A,null),label:"Configured",size:"small",className:n.configuredChip})),a.createElement(p.A,{variant:"body2",style:{color:"#bbb",marginBottom:16}},"Configure usage rights and terms for your NFT artwork"),r&&a.createElement("div",{className:n.licenseSummary},a.createElement("div",{className:n.licenseStat},a.createElement("span",{className:n.licenseStatLabel},"Holder Rights:"),a.createElement("span",{className:n.licenseStatValue},l.holderRights," granted")),a.createElement("div",{className:n.licenseStat},a.createElement("span",{className:n.licenseStatLabel},"Visitor Rights:"),a.createElement("span",{className:n.licenseStatValue},l.visitorRights," granted")),a.createElement("div",{className:n.licenseStat},a.createElement("span",{className:n.licenseStatLabel},"Royalty:"),a.createElement("span",{className:n.licenseStatValue},l.royalty,"%")),a.createElement("div",{className:n.licenseStat},a.createElement("span",{className:n.licenseStatLabel},"Jurisdiction:"),a.createElement("span",{className:n.licenseStatValue},(null===(t=r.governingLaw)||void 0===t?void 0:t.jurisdiction)||"Not set"))),a.createElement(s.A,{variant:"contained",color:"primary",fullWidth:!0,style:{marginTop:8},onClick:i},o?"Edit License":"Configure License")))}),(function(e,t){return e.licenseCustomization===t.licenseCustomization})),se=(0,a.memo)((function(e){var t=e.classes,n=e.title,r=e.description,i=e.tags,o=e.base64,l=e.licenseCustomization,c=e.validationErrors,s=e.touched,u=e.onTitleChange,d=e.onDescriptionChange,f=e.onTagsChange,g=e.onOpenLicense,h=e.onFieldBlur,v=n.length,y=r.length;return a.createElement(N.A,{in:!0,timeout:300},a.createElement("div",null,a.createElement(b.A,{style:{marginTop:8},value:n,fullWidth:!0,label:"Title",variant:"outlined",onChange:u,onBlur:function(){return h("title")},error:s.title&&!!c.title,className:s.title&&c.title?t.errorField:"",inputProps:{maxLength:H.TITLE_MAX_LENGTH+10}}),a.createElement(m.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},s.title&&c.title?a.createElement(p.A,{className:t.errorText},c.title):a.createElement("span",null),a.createElement(p.A,{className:v>H.TITLE_MAX_LENGTH?t.charCounterError:v>.8*H.TITLE_MAX_LENGTH?t.charCounterWarning:t.charCounter},v,"/",H.TITLE_MAX_LENGTH)),a.createElement(b.A,{style:{marginTop:16},label:"Content",multiline:!0,rows:1,defaultValue:o?"[Image data: ".concat((o.length/1e3*3/4).toFixed(2)," kB]"):"",variant:"filled",disabled:!0,fullWidth:!0}),a.createElement(b.A,{style:{marginTop:16},label:"Description",multiline:!0,minRows:6,value:r,onChange:d,onBlur:function(){return h("description")},variant:"outlined",fullWidth:!0,error:s.description&&!!c.description,className:s.description&&c.description?t.errorField:"",inputProps:{maxLength:H.DESCRIPTION_MAX_LENGTH+100}}),a.createElement(m.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},s.description&&c.description?a.createElement(p.A,{className:t.errorText},c.description):a.createElement("span",null),a.createElement(p.A,{className:y>H.DESCRIPTION_MAX_LENGTH?t.charCounterError:y>.8*H.DESCRIPTION_MAX_LENGTH?t.charCounterWarning:t.charCounter},y,"/",H.DESCRIPTION_MAX_LENGTH)),a.createElement(m.A,{style:{marginTop:16,marginBottom:8}},a.createElement(L.A,{fullWidth:!0,variant:"outlined",label:"Tags",placeholder:"Add tag and press Enter",value:i,onAdd:function(e){var t=e.toLowerCase().trim();t&&!i.includes(t)&&f([].concat(ye(i),[t]))},onDelete:function(e,t){var n=ye(i);n.splice(t,1),f(n)},onBlur:function(){return h("tags")},error:s.tags&&!!c.tags,className:s.tags&&c.tags?t.errorField:""}),a.createElement(m.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mt:.5},s.tags&&c.tags?a.createElement(p.A,{className:t.errorText},c.tags):a.createElement(p.A,{className:t.charCounter,style:{color:"#666"}},"Tags: lowercase, no dots, min 3 chars, cannot start with number or hyphen"),a.createElement(p.A,{className:i.length>H.TAGS_MAX_COUNT?t.charCounterError:t.charCounter},i.length,"/",H.TAGS_MAX_COUNT))),a.createElement(ce,{classes:t,licenseCustomization:l,onOpenLicense:g})))}),(function(e,t){return e.title===t.title&&e.description===t.description&&e.tags===t.tags&&e.base64===t.base64&&e.licenseCustomization===t.licenseCustomization&&e.validationErrors===t.validationErrors&&e.touched===t.touched}));function Ne(e){var t=e.classes,r=e.open,i=e.onClose,o=e.api,d=ge((0,a.useReducer)(re,te),2),g=d[0],h=d[1],v=(0,a.useRef)(null),C=(0,a.useRef)(null),T=(0,a.useRef)(null),L=(0,a.useRef)(null),D=(0,a.useRef)(null),k=(0,a.useRef)(null),z=(0,a.useRef)(!0),j=(0,a.useRef)(null),B=ge((0,a.useState)(0),2),U=(B[0],B[1]),V=g.tabValue,H=g.currentStep,K=g.title,ce=g.description,ue=g.tags,de=g.preferredSize,me=g.aspectRatio,he=g.transformationPercent,ve=g.fidelityPercent,be=g.preview,ye=g.previewCache,Ee=g.quantizedData,Ae=g.base64,Ce=g.processorData,Te=g.availableSizes,we=g.dropzoneActive,Se=g.message,xe=g.inputFileUrl,Ie=g.inputFile,Oe=g.showingOriginal,_e=g.preloading,Le=g.preloadProgress,Ne=g.isGenerating,Pe=g.canvasKey,Re=g.closeConfirmOpen,De=g.useAiOpen,ke=g.quantizeDialogOpen,ze=g.licenseCustomizationOpen,Me=g.publishConfirmOpen,Fe=g.quantizeDownscale,je=g.quantizeColors,Be=g.licenseBase,We=g.licenseCustomization,Ge=g.processName,Ue=g.processStart,Ve=g.processFinish,He=g.validationErrors,qe=g.touched,Xe=g.isPublishing,Ke=Date.now(),Ze=Ve-Ue,Ye=Ke-Ue,Qe=Ze>0?Math.min(Ye/Ze,1):0,$e=Ze>Ye&&Ze>0,Je=((Ae||"").length||0)/1e3*3/4,et=(0,a.useMemo)((function(){return Y(K,ce,ue).valid&&Ae}),[K,ce,ue,Ae]);(0,a.useEffect)((function(){var e,t;return z.current=!0,e=R.V1,t=(0,R.b0)(e),h({type:ne.SET_MULTIPLE,payload:{licenseBase:e,licenseCustomization:t}}),function(){z.current=!1}}),[]),(0,a.useEffect)((function(){return function(){$(xe),k.current&&clearTimeout(k.current),D.current&&clearTimeout(D.current)}}),[]),(0,a.useEffect)((function(){j.current&&j.current!==xe&&$(j.current),j.current=xe}),[xe]),(0,a.useEffect)((function(){if($e&&Ue>0&&Ve>0){var e=setInterval((function(){z.current&&U((function(e){return e+1}))}),100);return function(){return clearInterval(e)}}}),[$e,Ue,Ve]),(0,a.useEffect)((function(){var e=L.current;if(e){var t=function(e){e.preventDefault(),e.stopPropagation(),h({type:ne.SET_FIELD,field:"dropzoneActive",value:!0})},n=function(e){e.preventDefault(),e.stopPropagation()},r=function(e){e.preventDefault(),e.stopPropagation(),h({type:ne.SET_FIELD,field:"dropzoneActive",value:!1})},a=function(e){e.preventDefault(),e.stopPropagation(),h({type:ne.SET_FIELD,field:"dropzoneActive",value:!1})};return e.addEventListener("dragenter",t),e.addEventListener("dragover",n),e.addEventListener("dragleave",r),e.addEventListener("dragend",a),function(){e.removeEventListener("dragenter",t),e.removeEventListener("dragover",n),e.removeEventListener("dragleave",r),e.removeEventListener("dragend",a)}}}),[]),(0,a.useEffect)((function(){var e=L.current;if(e){var t=function(){var e=fe(pe().m((function e(t){var n;return pe().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),t.stopPropagation(),h({type:ne.SET_FIELD,field:"dropzoneActive",value:!1}),!(n=ee(t))){e.n=1;break}return e.n=1,tt(n);case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.addEventListener("drop",t),function(){e.removeEventListener("drop",t)}}}),[me,he,ve]),(0,a.useEffect)((function(){if(v.current){var e=Ee||be;if(e&&e.width){var t=v.current,r=t.getContext("2d");t.width=e.width,t.height=e.height,r.putImageData(e,0,0),(0,_.A)((function(){return Promise.all([n.e(48),n.e(49)]).then(n.bind(n,2178))})).then((function(t){var n=t.encodeIMG;z.current&&n(e,"WEBP",!0).then((function(e){z.current&&h({type:ne.SET_FIELD,field:"base64",value:e})}))}))}}}),[be,Ee,Pe]),(0,a.useEffect)((function(){if(C.current&&null!=Ce&&Ce.originalImageData){var e=Ce.originalImageData,t=C.current;t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0)}}),[Ce]),(0,a.useEffect)((function(){T.current&&Ce&&ke&&(D.current&&clearTimeout(D.current),D.current=setTimeout((function(){if(z.current)try{var e=(0,O.ZL)({width:Ce.canvasWidth,height:Ce.canvasHeight},Ce.cachedBuffer,Fe,je),t=T.current;if(e&&null!=t&&t.getContext){t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0)}}catch(e){}}),300))}),[Fe,je,Ce,ke]);var tt=(0,a.useCallback)(function(){var e=fe(pe().m((function e(t){var n,r;return pe().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,O.Ei)(t,512,512,160);case 2:(n=e.v)instanceof ImageData?(h({type:ne.SET_PREVIEW_DATA,preview:n,sizeName:"default",processorData:null,availableSizes:["default"],title:""}),h({type:ne.SET_FIELD,field:"message",value:"The image appears to be already optimized!"})):($(xe),r=URL.createObjectURL(t),h({type:ne.SET_MULTIPLE,payload:{inputFileUrl:r,inputFile:t,useAiOpen:!0}})),e.n=4;break;case 3:e.p=3,e.v,h({type:ne.SET_FIELD,field:"message",value:"Error processing image. Please try again."});case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),[xe]),nt=(0,a.useCallback)(function(){var e=fe(pe().m((function e(t){var n;return pe().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),t.stopPropagation(),!(n=ee(t))){e.n=1;break}return e.n=1,tt(n);case 1:t.target&&(t.target.value="");case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),[tt]),rt=(0,a.useCallback)(function(){var e=fe(pe().m((function e(t){var n,r,a,i,o;return pe().w((function(e){for(;;)switch(e.p=e.n){case 0:if(z.current){e.n=1;break}return e.a(2);case 1:return e.p=1,h({type:ne.SET_FIELD,field:"isGenerating",value:!0}),l=he,n=Math.round(5+l/100*10),r=J(ve),e.n=2,(0,O.zF)(ce.length?ce:Ie,1028,1028,void 0,(function(e){z.current&&h({type:ne.SET_FIELD,field:"message",value:e})}),(function(e,t,n){z.current&&h({type:ne.SET_PROCESS,name:e,start:t,finish:n})}),t,me,n,r);case 2:if(a=e.v,z.current){e.n=3;break}return e.a(2);case 3:i=null;try{i=a.generatePreview(de)}catch(e){(null===(o=a.availableSizes)||void 0===o?void 0:o.length)>0&&(i=a.generatePreview(a.availableSizes[0]))}i&&(h({type:ne.SET_PREVIEW_DATA,preview:i,sizeName:de,processorData:a,availableSizes:a.availableSizes||[],title:a.prompt||""}),at(a,a.availableSizes,de)),e.n=5;break;case 4:e.p=4,e.v,z.current&&h({type:ne.SET_MULTIPLE,payload:{isGenerating:!1,message:"Error processing image. Please try again."}});case 5:return e.a(2)}var l}),e,null,[[1,4]])})));return function(t){return e.apply(this,arguments)}}(),[ce,Ie,de,me,he,ve]),at=(0,a.useCallback)((function(e,t,n){e&&!_e&&(k.current&&clearTimeout(k.current),k.current=setTimeout(fe(pe().m((function r(){var a,i,o;return pe().w((function(r){for(;;)switch(r.p=r.n){case 0:if(z.current){r.n=1;break}return r.a(2);case 1:h({type:ne.SET_FIELD,field:"preloading",value:!0}),a=0;case 2:if(!(a<t.length)){r.n=7;break}if((i=t[a])!==n){r.n=3;break}return r.a(3,6);case 3:return r.p=3,o=e.generatePreview(i),z.current&&(h({type:ne.CACHE_PREVIEW,sizeName:i,preview:o,setAsCurrent:!1}),h({type:ne.SET_FIELD,field:"preloadProgress",value:(a+1)/t.length*100})),r.n=4,new Promise((function(e){return setTimeout(e,50)}));case 4:r.n=6;break;case 5:r.p=5,r.v;case 6:a++,r.n=2;break;case 7:z.current&&h({type:ne.SET_MULTIPLE,payload:{preloading:!1,preloadProgress:100}});case 8:return r.a(2)}}),r,null,[[3,5]])}))),500))}),[_e]),it=(0,a.useCallback)((function(){$(xe),k.current&&clearTimeout(k.current),D.current&&clearTimeout(D.current);var e=Be?(0,R.b0)(Be):null;h({type:ne.RESET,licenseBase:Be,defaultCustomization:e})}),[xe,Be]),ot=(0,a.useCallback)((function(){$(xe),k.current&&clearTimeout(k.current),D.current&&clearTimeout(D.current),h({type:ne.RESET_UPLOAD})}),[xe]),lt=(0,a.useCallback)((function(e){h({type:ne.SET_FIELD,field:"useAiOpen",value:!1}),rt(e)}),[rt]),ct=(0,a.useCallback)((function(e){var t=e.target.value;if(h({type:ne.SET_FIELD,field:"preferredSize",value:t}),ye[t])h({type:ne.CACHE_PREVIEW,sizeName:t,preview:ye[t],setAsCurrent:!0});else if(null!=Ce&&Ce.generatePreview)try{var n=Ce.generatePreview(t);h({type:ne.CACHE_PREVIEW,sizeName:t,preview:n,setAsCurrent:!0})}catch(e){}}),[ye,Ce]),st=(0,a.useCallback)((function(e){var t=e.target.value;if(h({type:ne.SET_FIELD,field:"title",value:t}),qe.title){var n=q(t);n.valid?h({type:ne.CLEAR_VALIDATION_ERROR,field:"title"}):h({type:ne.SET_VALIDATION_ERROR,field:"title",error:n.error})}}),[qe.title]),ut=(0,a.useCallback)((function(e){var t=e.target.value;if(h({type:ne.SET_FIELD,field:"description",value:t}),qe.description){var n=X(t);n.valid?h({type:ne.CLEAR_VALIDATION_ERROR,field:"description"}):h({type:ne.SET_VALIDATION_ERROR,field:"description",error:n.error})}}),[qe.description]),pt=(0,a.useCallback)((function(e){if(h({type:ne.SET_FIELD,field:"tags",value:e}),qe.tags){var t=Z(e);t.valid?h({type:ne.CLEAR_VALIDATION_ERROR,field:"tags"}):h({type:ne.SET_VALIDATION_ERROR,field:"tags",error:t.error})}}),[qe.tags]),dt=(0,a.useCallback)((function(e){var t;switch(h({type:ne.SET_TOUCHED,field:e}),e){case"title":t=q(K);break;case"description":t=X(ce);break;case"tags":t=Z(ue);break;default:return}t.valid?h({type:ne.CLEAR_VALIDATION_ERROR,field:e}):h({type:ne.SET_VALIDATION_ERROR,field:e,error:t.error})}),[K,ce,ue]),mt=(0,a.useCallback)((function(e,t){h({type:ne.SET_FIELD,field:"tabValue",value:t})}),[]),ft=(0,a.useCallback)((function(e){h({type:ne.SET_FIELD,field:"aspectRatio",value:e})}),[]),gt=(0,a.useCallback)((function(e){h({type:ne.SET_FIELD,field:"transformationPercent",value:e})}),[]),ht=(0,a.useCallback)((function(e){h({type:ne.SET_FIELD,field:"fidelityPercent",value:e})}),[]),vt=(0,a.useCallback)((function(){h({type:ne.SET_FIELD,field:"showingOriginal",value:!Oe})}),[Oe]),bt=(0,a.useCallback)((function(){var e=Ee||be;e&&(0,_.A)((function(){return Promise.all([n.e(48),n.e(49)]).then(n.bind(n,2178))})).then((function(t){(0,t.encodeIMG)(e,"PNG",!0).then((function(e){var t=document.createElement("a");t.download="Pixagram.png",t.href=e,t.click(),t.remove()}))}))}),[Ee,be]),yt=(0,a.useCallback)((function(e){window.open(e,"_blank")}),[]),Et=(0,a.useCallback)((function(){0===H?arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(it(),i()):h({type:ne.SET_FIELD,field:"closeConfirmOpen",value:!0}):1===H?ot():h({type:ne.SET_FIELD,field:"currentStep",value:H-1})}),[H,it,ot,i]),At=(0,a.useCallback)((function(){var e=Y(K,ce,ue);e.valid?h({type:ne.SET_FIELD,field:"publishConfirmOpen",value:!0}):h({type:ne.VALIDATE_ALL,errors:e.errors})}),[K,ce,ue]),Ct=(0,a.useCallback)(fe(pe().m((function e(){var t,n,r,a,l,c,s;return pe().w((function(e){for(;;)switch(e.p=e.n){case 0:if(h({type:ne.SET_FIELD,field:"publishConfirmOpen",value:!1}),h({type:ne.SET_FIELD,field:"isPublishing",value:!0}),e.p=1,o&&o.broadcast){e.n=2;break}throw new Error("API not available");case 2:return n=Q(K),r=ue[0],a={app:"pixagram/3.0.2",format:"markdown",tags:ue,image:[],description:ce,license:We?{type:"PIXA_LICENSE",version:We.version||"1.0",rightsConfiguration:We.rightsConfiguration,royaltyPercentage:We.royaltyPercentage,governingLaw:We.governingLaw,isCustomized:We.isCustomized}:null},e.n=3,null===(t=o.sessionManager)||void 0===t?void 0:t.getActiveAccount();case 3:if(l=e.v){e.n=4;break}throw new Error("No active account. Please log in first.");case 4:return c=Ae,e.n=5,o.broadcast.comment({parentAuthor:"",parentPermlink:r,author:l,permlink:n,title:K,body:c,jsonMetadata:a});case 5:h({type:ne.SET_FIELD,field:"isPublishing",value:!1}),A.trigger_snackbar("Post published successfully!"),setTimeout((function(){it(),i()}),1500),e.n=7;break;case 6:e.p=6,s=e.v,h({type:ne.SET_FIELD,field:"isPublishing",value:!1}),A.trigger_snackbar(s.message||"Failed to publish post. Please try again.");case 7:return e.a(2)}}),e,null,[[1,6]])}))),[o,K,ce,ue,Ae,We,it,i]),Tt=(0,a.useCallback)((function(){if(0===H&&1===V){if(!ce.trim())return;h({type:ne.SET_FIELD,field:"isGenerating",value:!0}),rt(!0)}else 2===H?At():h({type:ne.SET_FIELD,field:"currentStep",value:H+1})}),[H,V,ce,rt,At]),wt=(0,a.useCallback)((function(){if(Ce)try{var e=(0,O.ZL)({width:Ce.canvasWidth,height:Ce.canvasHeight},Ce.cachedBuffer,Fe,je);h({type:ne.SET_MULTIPLE,payload:{quantizedData:e,quantizeDialogOpen:!ke}}),h({type:ne.INCREMENT_CANVAS_KEY})}catch(e){}}),[Ce,Fe,je,ke]),St=(0,a.useCallback)((function(){if(Ce)try{var e=(0,O.ZL)({width:Ce.canvasWidth,height:Ce.canvasHeight},Ce.cachedBuffer,Fe,je);h({type:ne.SET_MULTIPLE,payload:{quantizedData:e,quantizeDialogOpen:!1}}),h({type:ne.INCREMENT_CANVAS_KEY})}catch(e){}}),[Ce,Fe,je]),xt=(0,a.useCallback)((function(){h({type:ne.SET_MULTIPLE,payload:{quantizedData:null,quantizeDialogOpen:!1,quantizeDownscale:4,quantizeColors:64}}),ye[de]&&h({type:ne.CACHE_PREVIEW,sizeName:de,preview:ye[de],setAsCurrent:!0})}),[de,ye]),It=(0,a.useCallback)((function(){h({type:ne.SET_FIELD,field:"licenseCustomizationOpen",value:!0})}),[]),Ot=(0,a.useCallback)((function(){h({type:ne.SET_FIELD,field:"licenseCustomizationOpen",value:!1})}),[]),_t=(0,a.useCallback)((function(e){h({type:ne.SET_MULTIPLE,payload:{licenseCustomization:e,licenseCustomizationOpen:!1}})}),[]),Lt=(0,a.useCallback)((function(e,t){h({type:ne.SET_FIELD,field:"quantizeDownscale",value:t})}),[]),Nt=(0,a.useCallback)((function(e,t){h({type:ne.SET_FIELD,field:"quantizeColors",value:t})}),[]),Pt=(0,a.useCallback)((function(){h({type:ne.SET_FIELD,field:"closeConfirmOpen",value:!1})}),[]),Rt=(0,a.useCallback)((function(){h({type:ne.SET_FIELD,field:"closeConfirmOpen",value:!1}),it(),i()}),[it,i]),Dt=(0,a.useCallback)((function(){h({type:ne.SET_FIELD,field:"publishConfirmOpen",value:!1})}),[]),kt=null;switch(H){case 0:kt=a.createElement(a.Fragment,null,a.createElement(G.A,{className:t.cardTabs,value:V,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:mt},a.createElement(W.A,{icon:a.createElement(S.A,null)}),a.createElement(W.A,{icon:a.createElement(x.A,null)})),1===V?a.createElement("div",{style:{width:"100%"}},a.createElement(ie,{classes:t,aspectRatio:me,onAspectRatioChange:ft,disabled:Ne}),a.createElement(N.A,{in:!0,timeout:900},a.createElement(b.A,{className:t.descriptionField,label:"Description",multiline:!0,minRows:10,value:ce,onChange:ut,variant:"outlined",fullWidth:!0,disabled:Ne,InputProps:{endAdornment:a.createElement(E.A,{position:"end",style:{alignSelf:"flex-end",marginBottom:"8px",marginRight:"16px"}},a.createElement(F.A,{className:t.sendButton,onClick:Tt,disabled:!ce.trim()||Ne,edge:"end"},Ne?a.createElement(f.A,{size:24,style:{color:"#fff"}}):a.createElement(w.A,null)))}})),a.createElement(oe,{classes:t,showFidelity:!1,transformationPercent:he,fidelityPercent:ve,onTransformationChange:gt,onFidelityChange:ht,disabled:Ne})):a.createElement(a.Fragment,null,a.createElement(ae,{classes:t,dropzoneActive:we,inputFileUrl:xe,loading:$e,processName:Ge,loadingPercent:Qe,message:Se,onFileUpload:nt,dropRef:L}),a.createElement(oe,{classes:t,showFidelity:!0,transformationPercent:he,fidelityPercent:ve,onTransformationChange:gt,onFidelityChange:ht,disabled:$e})));break;case 1:kt=a.createElement(le,{classes:t,preview:be,quantizedData:Ee,preferredSize:de,availableSizes:Te,preloading:_e,preloadProgress:Le,showingOriginal:Oe,hasProcessorData:!!Ce,originalImageData:null==Ce?void 0:Ce.originalImageData,onSizeChange:ct,onToggleComparison:vt,onApplyQuantize:wt,onCancelQuantize:xt,onDownload:bt,onOpenEditor:function(){return yt("https://pixa.pics/")},canvasRef:v,originalCanvasRef:C,base64Kb:Je});break;case 2:kt=a.createElement(se,{classes:t,title:K,description:ce,tags:ue,base64:Ae,licenseCustomization:We,validationErrors:He,touched:qe,onTitleChange:st,onDescriptionChange:ut,onTagsChange:pt,onOpenLicense:It,onFieldBlur:dt})}return a.createElement(a.Fragment,null,a.createElement(u.A,{className:t.dialog,open:r,maxWidth:!1,fullWidth:!1,disablePortal:!1,onClose:function(){return h({type:ne.SET_FIELD,field:"closeConfirmOpen",value:!0})},keepMounted:!1,PaperProps:{style:{width:"min(calc(100% - 64px), 640px)",maxWidth:"none"}}},a.createElement(c.A,{style:{position:"relative"}},a.createElement(F.A,{onClick:function(){return h({type:ne.SET_FIELD,field:"closeConfirmOpen",value:!0})},style:{position:"absolute",right:8,top:8,color:"#999",zIndex:100}},a.createElement(I.A,null)),a.createElement(p.A,{style:{marginTop:0,marginBottom:24,paddingRight:36},component:"h2",variant:"h6"},"Pixel Art Creation Wizard"),kt),a.createElement(l.A,{style:{backgroundColor:"#171717",borderRadius:"32px",textAlign:"right",justifyContent:"space-between",alignItems:"center",padding:"16px 24px"}},a.createElement(m.A,{style:{textAlign:"left"}},a.createElement(p.A,{variant:"caption",style:{color:"#999",display:"block",fontSize:"0.875rem",lineHeight:1.125}},"Step ",H+1," of ",3),a.createElement(p.A,{variant:"body2",style:{fontWeight:600,marginTop:0,fontSize:"1rem",color:"#ccc",lineHeight:1}},["Create","Adjust","Publish"][H])),a.createElement(m.A,null,H>0&&a.createElement(s.A,{variant:"text",color:"primary",onClick:function(){return Et()},disabled:Xe},"Back"),a.createElement(s.A,{size:"large",style:{borderRadius:"32px"},variant:"contained",color:"primary",disabled:Xe||(0===H&&1===V?!ce.trim()||Ne:0===H||2===H&&!et),onClick:Tt},Xe?a.createElement(f.A,{size:24,style:{color:"#fff"}}):2===H?"Publish":0===H&&1===V?"Generate":"Next")))),a.createElement(u.A,{PaperProps:{classes:{root:t.whiteDialog}},open:Re,maxWidth:"xs",disablePortal:!1,onClose:Pt,keepMounted:!1},a.createElement(c.A,null,a.createElement(p.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Are you sure?"),a.createElement(p.A,{variant:"body2",color:"textPrimary",component:"p"},"Your current artwork will be lost.")),a.createElement(l.A,{style:{textAlign:"right"}},a.createElement(s.A,{variant:"text",color:"primary",autoFocus:!0,onClick:Pt},"Cancel"),a.createElement(s.A,{variant:"contained",color:"primary",onClick:Rt},"Close"))),a.createElement(u.A,{PaperProps:{classes:{root:t.whiteDialog}},open:Me,maxWidth:"sm",fullWidth:!0,disablePortal:!1,onClose:Dt,keepMounted:!1},a.createElement(c.A,{className:t.publishConfirmContent},a.createElement(p.A,{style:{marginTop:8,marginBottom:24,color:"#000"},component:"h2",variant:"h6"},"Confirm Publication"),a.createElement(p.A,{variant:"body2",style:{color:"#555",marginBottom:16}},"Please review your post details before publishing:"),a.createElement(M.A,{style:{padding:16,backgroundColor:"#f5f5f5",borderRadius:8}},a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"Title:"),a.createElement("span",{className:t.publishSummaryValue},K)),a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"Description:"),a.createElement("span",{className:t.publishSummaryValue},ce.length>100?"".concat(ce.substring(0,100),"..."):ce)),a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"Tags:"),a.createElement("span",{className:t.publishSummaryValue},ue.join(", "))),a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"Content Size:"),a.createElement("span",{className:t.publishSummaryValue},Je.toFixed(2)," kB")),a.createElement("div",{className:t.publishSummaryItem},a.createElement("span",{className:t.publishSummaryLabel},"License:"),a.createElement("span",{className:t.publishSummaryValue},null!=We&&We.isCustomized?"Custom PIXA License":"Default PIXA License"))),a.createElement(p.A,{variant:"body2",style:{color:"#666",marginTop:16}},"This action cannot be undone. Your post will be published to the blockchain.")),a.createElement(l.A,{style:{textAlign:"right",padding:16}},a.createElement(s.A,{variant:"text",color:"primary",onClick:Dt},"Cancel"),a.createElement(s.A,{variant:"contained",color:"primary",onClick:Ct},"Confirm & Publish"))),a.createElement(u.A,{PaperProps:{classes:{root:t.whiteDialog}},open:De,maxWidth:"xs",disablePortal:!1,onClose:function(){return lt(!1)},keepMounted:!1},a.createElement(c.A,null,a.createElement(p.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Transform with AI?"),a.createElement(p.A,{variant:"body2",color:"textPrimary",component:"p"},"It takes around 10 seconds. ",a.createElement("b",null,"#Free")," ",a.createElement("b",null,"#Anonymous"))),a.createElement(l.A,{style:{textAlign:"right"}},a.createElement(s.A,{variant:"text",color:"primary",autoFocus:!0,onClick:function(){return lt(!1)}},"NO"),a.createElement(s.A,{variant:"contained",color:"primary",onClick:function(){return lt(!0)}},"YES"))),a.createElement(u.A,{PaperProps:{classes:{root:t.whiteDialog}},open:ke,maxWidth:"sm",fullWidth:!0,disablePortal:!1,onClose:xt,keepMounted:!1},a.createElement(c.A,null,a.createElement(p.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Quantization Settings"),a.createElement(m.A,null,a.createElement(p.A,{gutterBottom:!0},"Downscale Ratio: ",Fe,"x"),a.createElement(y.A,{value:Fe,onChange:Lt,min:2,max:32,step:1,marks:[{value:2,label:"2x"},{value:8,label:"8x"},{value:16,label:"16x"},{value:32,label:"32x"}],valueLabelDisplay:"auto"})),a.createElement(m.A,null,a.createElement(p.A,{gutterBottom:!0},"Number of Colors: ",je),a.createElement(y.A,{value:je,onChange:Nt,min:2,max:256,step:1,marks:[{value:2,label:"2"},{value:64,label:"64"},{value:128,label:"128"},{value:256,label:"256"}],valueLabelDisplay:"auto"})),a.createElement(m.A,null,a.createElement("div",{className:"pixelated",style:{width:"100%",textAlign:"center"}},a.createElement("canvas",{style:{borderRadius:"21px",width:"100%"},ref:T})))),a.createElement(l.A,{style:{textAlign:"right"}},a.createElement(s.A,{variant:"text",color:"primary",onClick:xt},"Cancel"),a.createElement(s.A,{variant:"contained",color:"primary",onClick:St},"Apply"))),Be&&a.createElement(P.A,{open:ze,onClose:Ot,onSave:_t,licenseBase:Be,initialCustomization:We}))}const Pe=(0,i.default)((function(e){return{dialog:{"& .MuiDialogContent-root":{padding:"8px 24px 0px 24px"}},dropZone:{width:"100%",height:"100%",minHeight:"384px",maxHeight:"70vh",border:"2px dashed #555",textAlign:"center",verticalAlign:"middle",backgroundColor:"transparent",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 225ms",position:"relative",overflow:"hidden"},dropZoneActive:{width:"100%",height:"100%",minHeight:"384px",maxHeight:"70vh",border:"2px solid #555",textAlign:"center",verticalAlign:"middle",backgroundColor:"rgba(255, 255, 255, 0.07)",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 25ms",position:"relative",overflow:"hidden"},whiteDialog:{backgroundColor:"#fff !important",color:"#000 !important",boxShadow:"0px 11px 15px -7px rgb(255 255 255 / 20%), 0px 24px 38px 3px rgb(255 255 255 / 14%), 0px 9px 46px 8px rgb(255 255 255 / 12%) !important","& .MuiButton-textPrimary":{color:"#222 !important","&:hover":{color:"#000 !important"}},"& .MuiButton-containedPrimary":{color:"#fff !important",backgroundColor:"#000 !important","&:hover":{color:"#ddd !important",backgroundColor:"#222 !important"}},"& .MuiRadio-colorPrimary.Mui-checked, & .MuiCheckbox-colorPrimary.Mui-checked, & .MuiRadio-colorSecondary.Mui-checked":{color:"#000 !important"},"& .MuiRadio-root, & .MuiFormLabel-root.Mui-focused, .MuiTypography-root":{color:"#000 !important"},"& .MuiSlider-root":{color:"#000 !important"},"& span.MuiSlider-valueLabel > span > span":{color:"#fff !important"},"& .MuiSlider-markLabelActive":{color:"#000"}},inputImage:{margin:"0px",borderRadius:"12px",width:"100%",height:"100%",objectFit:"contain",maxHeight:"70vh",filter:"grayscale(1) contrast(.8) brightness(0.55) opacity(0.65) blur(8px)",transition:"filter 400ms cubic-bezier(0.4, 0, 0.2, 1) 25ms !important",animationName:"$opacity-create",animationTimingFunction:"ease-in-out",animationDuration:"2400ms",animationFillMode:"both",animationDelay:"1200ms",animationDirection:"alternate",animationIterationCount:"infinite","@global":{"@keyframes opacity-create":{"0%":{opacity:"0.666"},"100%":{opacity:"1.000"}}},"&:hover":{filter:"grayscale(0.15) contrast(.8) brightness(0.6) opacity(0.7) blur(0px)"}},licenseSection:{marginBottom:16},licensePaper:{padding:e.spacing(2),backgroundColor:"#191919",borderRadius:"16px",border:"1px solid #333"},licenseHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(2)},licenseTitle:{display:"flex",alignItems:"center",gap:e.spacing(1),fontWeight:600,fontSize:"1.1rem"},licenseSummary:{marginTop:e.spacing(1),padding:e.spacing(1.5),backgroundColor:"#0f0f0f",borderRadius:"12px",fontSize:"0.875rem",color:"#bbb"},licenseStat:{display:"flex",justifyContent:"space-between",marginBottom:e.spacing(.5),"&:last-child":{marginBottom:0}},licenseStatLabel:{color:"#999",fontWeight:500},licenseStatValue:{color:"#fff",fontWeight:400},configuredChip:{backgroundColor:"#aaa",color:"#ffffff",fontWeight:600},comparisonContainer:{position:"relative",width:"100%"},comparisonCanvas:{borderRadius:"12px",width:"100%",transition:"opacity 300ms ease-in-out"},comparisonButton:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0, 0, 0, 0.6)",color:"#fff","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.8)"}},loadingIndicator:{position:"absolute",top:8,left:8,backgroundColor:"rgba(0, 0, 0, 0.6)",color:"#fff",padding:"4px 12px",borderRadius:"16px",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:4},cardTabs:{backgroundColor:"#171717","& .MuiTab-root":{minWidth:"72px !important"},"& .MuiTab-textColorPrimary.Mui-selected":{backgroundColor:"transparent"},"& .MuiTab-textColorPrimary.Mui-selected .MuiTab-wrapper":{color:"#171717 !important",zIndex:1},"& .MuiTab-fullWidth":{backgroundColor:"transparent",color:"#989898",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",borderRadius:"21px"},"& .MuiTab-fullWidth:hover":{backgroundColor:"rgba(255,255,255,0.06)"},"& span.MuiTabs-indicator":{height:"48px",backgroundColor:"#c7c7c7",borderRadius:"21px",transform:"scale3d(0.875, 0.75, 1)"},margin:"0px 0px 24px 0px",width:"100%",borderRadius:"21px",top:0,left:0,zIndex:1,transition:"transform 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},sendButton:{padding:"8px",color:"#fff","&:disabled":{color:"#555"}},descriptionField:{"& .MuiOutlinedInput-root":{paddingRight:"4px"},"& .MuiInputAdornment-root.MuiInputAdornment-positionEnd":{marginRight:"16px"}},quantizedMessage:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:e.spacing(2)},aspectRatioContainer:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},aspectRatioColumn:{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)},aspectRatioLabel:{fontSize:"0.875rem",color:"#999",fontWeight:500,marginBottom:e.spacing(.5)},aspectRatioButtonGroup:{"& .MuiButton-root":{color:"#ccc","&:hover":{color:"#fff",backgroundColor:"rgba(255,255,255,0.15)"}},"& .MuiButton-contained":{color:"#000",backgroundColor:"rgba(255,255,255,0.95)","&:hover":{color:"#171717 !important",backgroundColor:"rgba(255,255,255,0.85) !important"}}},sliderContainer:{marginTop:e.spacing(3),padding:e.spacing(2,2,4,2),backgroundColor:"#101010",borderRadius:"21px 21px 0px 0px"},sliderLabel:{fontSize:"0.875rem",color:"#bbb",marginBottom:e.spacing(1),fontWeight:500},errorText:{color:"#888",fontSize:"0.75rem",marginTop:e.spacing(.5),marginLeft:e.spacing(1.5)},errorField:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#666"},"&:hover fieldset":{borderColor:"#888"},"&.Mui-focused fieldset":{borderColor:"#888"}},"& .MuiFormLabel-root.Mui-error":{color:"#888"},"& .MuiOutlinedInput-root.Mui-error .MuiOutlinedInput-notchedOutline":{borderColor:"#666"}},charCounter:{color:"#666",fontSize:"0.75rem",textAlign:"right",marginTop:e.spacing(.5)},charCounterWarning:{color:"#888"},charCounterError:{color:"#aaa"},publishConfirmContent:{"& .MuiTypography-root":{color:"#333 !important"}},publishSummaryItem:{display:"flex",justifyContent:"space-between",padding:e.spacing(1,0),borderBottom:"1px solid #eee","&:last-child":{borderBottom:"none"}},publishSummaryLabel:{color:"#666",fontWeight:500},publishSummaryValue:{color:"#333",fontWeight:400,maxWidth:"60%",textAlign:"right",wordBreak:"break-word"}}}))(Ne);r()}catch(Re){r(Re)}}))},953:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Ei:()=>o,ZL:()=>c,zF:()=>l}),n(2),n(98),n(472),n(119),n(216),n(278),n(287),n(288),n(135),n(137),n(145),n(147),n(152),n(154),n(155),n(954),n(157),n(887),n(889),n(318),n(320),n(321),n(322),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(333),n(335),n(337),n(338),n(339),n(340),n(341),n(342),n(347),n(348),n(349),n(201),n(483),n(223),n(369);var a=n(956),i=n(958);function s(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return u(s,"_invoke",function(n,r,a){var i,l,c,s=0,u=a||[],p=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,l=0,c=e,d.n=n,o}};function m(n,r){for(l=n,c=r,t=0;!p&&s&&!a&&t<u.length;t++){var a,i=u[t],m=d.p,f=i[2];n>3?(a=f===r)&&(c=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=m&&((a=n<2&&m<i[1])?(l=0,d.v=r,d.n=i[1]):m<f&&(a=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,d.n=f,l=0))}if(a||n>1)return o;throw p=!0,r}return function(a,u,f){if(s>1)throw TypeError("Generator is already running");for(p&&1===u&&m(u,f),l=u,c=f;(t=l<2?e:c)||!p;){i||(l?l<3?(l>1&&(d.n=-1),m(l,c)):d.n=c:d.v=c);try{if(s=2,i){if(l||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);i=e}else if((t=(p=d.n<0)?c:n.call(r,d))!==o)break}catch(t){i=e,l=1,c=t}finally{s=1}}return{value:t,done:p}}}(n,a,i),!0),s}var o={};function l(){}function c(){}function p(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(u(t={},r,(function(){return this})),t),m=p.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=p,u(m,"constructor",p),u(p,"constructor",c),c.displayName="GeneratorFunction",u(p,a,"GeneratorFunction"),u(m),u(m,a,"Generator"),u(m,r,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:i,m:f}})()}function u(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,n,r){function i(t,n){u(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},u(e,t,n,r)}function p(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){p(i,r,a,o,l,"next",e)}function l(e){p(i,r,a,o,l,"throw",e)}o(void 0)}))}}function m(e,t,n){var r=e*t,a=Math.sqrt(n/r);return Math.min(a,1)}function f(e,t){var n;try{if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");n=new OffscreenCanvas(e,t)}catch(r){(n=document.createElement("canvas")).width=e,n.height=t}return n}function g(e){e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1}await(0,i.Ay)();var o=function(){var e=d(s().m((function e(t,n,r,a){var o,l,c,u,p,d,h;return s().w((function(e){for(;;)switch(e.n){case 0:return n=parseInt(n),r=parseInt(r),o=n*r,e.n=1,createImageBitmap(t);case 1:if(l=e.v,!((c=m(l.width,l.height,o))>1)){e.n=2;break}return e.a(2,!1);case 2:return u=f(l.width,l.height),g(p=u.getContext("2d")),p.drawImage(l,0,0,l.width,l.height),l.close(),d=p.getImageData(0,0,u.width,u.height),e.n=3,(0,i.U3)(d.data,a,"frequency");case 3:return h=e.v,e.a(2,!!Boolean(c<=1&&h.colors.length<a)&&d)}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function h(e,t,n){var r,a,o,l=m(t.width,t.height,e.size*e.size),c=t.width,s=t.height,u=Math.round(c*l),p=Math.round(s*l),d=(0,i.E7)(n,c,s,u,p,3,7);return r=new ImageData(new Uint8ClampedArray(d.data),d.width,d.height),a=e.colors,o=(0,i.M9)(r.data,r.width,r.height,a,!1),new ImageData(new Uint8ClampedArray(o.data),o.width,o.height)}var l=function(){var e=d(s().m((function e(t,n,r,i,o,l,c){var u,p,v,b,y,E=arguments;return s().w((function(e){for(;;)switch(e.p=e.n){case 0:if(u=E.length>7&&void 0!==E[7]?E[7]:"1:1",p=E.length>8&&void 0!==E[8]?E[8]:8,v=E.length>9&&void 0!==E[9]?E[9]:8,n=parseInt(n),r=parseInt(r),b=[{name:"XS",size:96,colors:16},{name:"S",size:128,colors:24},{name:"M",size:160,colors:32},{name:"L",size:192,colors:48},{name:"XL",size:224,colors:56},{name:"XXL",size:256,colors:64}],y=function(){var e=d(s().m((function e(t,a){var i,o,l,c,u,p,v,y,E,A,C,T,w,S;return s().w((function(e){for(;;)switch(e.n){case 0:return i=n*r,e.n=1,createImageBitmap(t,{resizeQuality:"pixelated"});case 1:return o=e.v,l=m(o.width,o.height,i),c=parseInt(Math.round(o.width*l)),u=parseInt(Math.round(o.height*l)),p=f(o.width,o.height),v=f(c,u),y=p.getContext("2d"),E=v.getContext("2d"),g(y),g(E),y.drawImage(o,0,0,o.width,o.height),E.drawImage(p,0,0,v.width,v.height),o.close(),A=y.getImageData(0,0,p.width,p.height),C=E.getImageData(0,0,v.width,v.height),T=E.getImageData(0,0,v.width,v.height).data,w=function(e){var t=b.find((function(t){return t.name===e}));if(!t)throw new Error("Unknown size: ".concat(e));return h(t,v,T)},S=function(){var e=d(s().m((function e(t){var n,r,a;return s().w((function(e){for(;;)if(0===e.n){for(n={},r=0;r<b.length;r++)a=b[r],n[a.name]=h(a,v,T),t&&t(a.name,r+1,b.length);return e.a(2,n)}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.a(2,{artwork:A,originalImageData:A,processedCanvasData:C,availableSizes:b.map((function(e){return e.name})),sizeConfigs:b,generatePreview:w,generateAllPreviews:S,canvasWidth:v.width,canvasHeight:v.height,cachedBuffer:T,prompt:a||""})}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),"string"!=typeof t){e.n=1;break}return e.a(2,(0,a.cM)(t,u,p,o,l).then((function(e,t){return y(e,t)})));case 1:if(!c){e.n=4;break}return e.p=2,e.a(2,(0,a.pd)(t,p,v,o,l).then((function(e,t){return y(e,t)})));case 3:return e.p=3,e.v,e.a(2,y(t,""));case 4:return e.a(2,y(t,""));case 5:return e.a(2)}}),e,null,[[2,3]])})));return function(t,n,r,a,i,o,l){return e.apply(this,arguments)}}(),c=function(e,t,n,r){return h({size:Math.floor(Math.max(e.width,e.height)/n),colors:r},e,t)};r()}catch(v){r(v)}}),1)},956:(e,t,n)=>{n.d(t,{cM:()=>b,pd:()=>v}),n(2),n(98),n(99),n(100),n(101),n(103),n(119),n(131),n(132),n(134),n(135),n(138),n(478),n(145),n(146),n(147),n(150),n(151),n(152),n(153),n(154),n(155),n(480),n(954),n(157),n(193),n(199),n(201),n(203),n(208),n(210),n(213);var r=n(957);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return s(u,"_invoke",function(n,r,a){var i,l,c,s=0,u=a||[],p=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,l=0,c=e,d.n=n,o}};function m(n,r){for(l=n,c=r,t=0;!p&&s&&!a&&t<u.length;t++){var a,i=u[t],m=d.p,f=i[2];n>3?(a=f===r)&&(c=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=m&&((a=n<2&&m<i[1])?(l=0,d.v=r,d.n=i[1]):m<f&&(a=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,d.n=f,l=0))}if(a||n>1)return o;throw p=!0,r}return function(a,u,f){if(s>1)throw TypeError("Generator is already running");for(p&&1===u&&m(u,f),l=u,c=f;(t=l<2?e:c)||!p;){i||(l?l<3?(l>1&&(d.n=-1),m(l,c)):d.n=c:d.v=c);try{if(s=2,i){if(l||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);i=e}else if((t=(p=d.n<0)?c:n.call(r,d))!==o)break}catch(t){i=e,l=1,c=t}finally{s=1}}return{value:t,done:p}}}(n,a,i),!0),u}var o={};function l(){}function u(){}function p(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(s(t={},r,(function(){return this})),t),m=p.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=p,s(m,"constructor",p),s(p,"constructor",u),u.displayName="GeneratorFunction",s(p,a,"GeneratorFunction"),s(m),s(m,a,"Generator"),s(m,r,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),(c=function(){return{w:i,m:f}})()}function s(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}s=function(e,t,n,r){function i(t,n){s(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},s(e,t,n,r)}function u(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){u(i,r,a,o,l,"next",e)}function l(e){u(i,r,a,o,l,"throw",e)}o(void 0)}))}}var d=document.createElement("canvas");function m(e){return f.apply(this,arguments)}function f(){return(f=p(c().m((function e(t){var n,r,a,i,o,l,s,u;return c().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,createImageBitmap(t);case 1:return n=e.v,r=n.width,a=n.height,o=r,l=a,(i=r*a)>1e6&&(s=Math.sqrt(1e6/i),o=Math.floor(r*s),l=Math.floor(a*s)),d.width=o,d.height=l,(u=d.getContext("2d")).imageSmoothingEnabled=!0,u.imageSmoothingQuality="high",u.drawImage(n,0,0,o,l),e.a(2,new Promise((function(e,t){d.toBlob((function(n){n?e(n):t(new Error("Canvas to Blob conversion failed"))}),"image/jpeg",.75)})))}}),e)})))).apply(this,arguments)}var g={prompt:"art",negative_prompt:"Ugly, artifacts, blurry, disformed, photo-realistic, photo, photography, realistic, low-quality, text.",cfg_scale:1.2,steps:10,img_strength:.65,depth_strength:.8,seed:-1},h={negative_prompt:"Ugly, artifacts, blurry, disformed, photo-realistic, photo, photography, realistic, low-quality, text.",cfg_scale:1.2,steps:10,seed:-1},v=function(){var e=p(c().m((function e(t,n,a){var i,l,s=arguments;return c().w((function(e){for(;;)if(0===e.n)return i=s.length>3&&void 0!==s[3]?s[3]:function(){},l=s.length>4&&void 0!==s[4]?s[4]:function(){},e.a(2,new Promise(function(){var e=p(c().m((function e(s,u){var d,f,h,v,b;return c().w((function(e){for(;;)switch(e.p=e.n){case 0:return i("AI CONVERT"),l("COMPUTE",Date.now(),Date.now()+25e3),e.n=1,m(t);case 1:return d=e.v,f=parseInt(parseInt(n).toString(10)),h=parseFloat(parseFloat(1-parseFloat(a)).toFixed(2)),v=parseFloat(parseFloat(parseFloat(parseInt(f)/10)+.4).toFixed(2)),b={steps:f,img_strength:h,cfg_scale:v,image:d},e.p=2,e.n=3,r.Kj.connect("primerz/face-to-pixel-art");case 3:e.v.predict("/process_img",o(o({},g),b)).then(function(){var e=p(c().m((function e(t){var n,r,a,i,o,l;return c().w((function(e){for(;;)switch(e.n){case 0:return n=t.data||[],r=n[0]||{},a=r.url||"",e.n=1,fetch(a);case 1:return e.n=2,e.v.blob();case 2:i=e.v,o=n[1]||" Output: ",l=o.split("Output: ")[1],s(i,l);case 3:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){u(e.message)})),e.n=5;break;case 4:e.p=4,e.v,u("Please Try Again Later");case 5:return e.a(2)}}),e,null,[[2,4]])})));return function(t,n){return e.apply(this,arguments)}}()))}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var e=p(c().m((function e(t,n,a){var i,l,s=arguments;return c().w((function(e){for(;;)if(0===e.n)return i=s.length>3&&void 0!==s[3]?s[3]:function(){},l=s.length>4&&void 0!==s[4]?s[4]:function(){},e.a(2,new Promise(function(){var e=p(c().m((function e(s,u){return c().w((function(e){for(;;)switch(e.p=e.n){case 0:return i("AI CONVERT"),l("COMPUTE",Date.now(),Date.now()+6e3),e.p=1,e.n=2,r.Kj.connect("primerz/pixel-art");case 2:e.v.predict("/process_text",o(o({},h),{},{prompt:t,aspect_ratio:n,steps:a})).then(function(){var e=p(c().m((function e(n){var r,a,i,o;return c().w((function(e){for(;;)switch(e.n){case 0:return r=n.data||[],a=r[0]||{},i=a.url||"",e.n=1,fetch(i);case 1:return e.n=2,e.v.blob();case 2:o=e.v,s(o,t);case 3:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){u(e.message)})),e.n=4;break;case 3:e.p=3,e.v,u("Please Try Again Later");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,n){return e.apply(this,arguments)}}()))}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},967:(e,t,n)=>{n.d(t,{A:()=>I}),n(2),n(98),n(99),n(100),n(273),n(101),n(472),n(103),n(106),n(118),n(119),n(857),n(216),n(130),n(132),n(134),n(137),n(138),n(146),n(147),n(150),n(151),n(153),n(155),n(480),n(186),n(192),n(193),n(199),n(201),n(203),n(483),n(208),n(223),n(210),n(213);var r=n(228),a=n(376),i=n(652),o=n(649),l=n(650),c=n(651),s=n(653),u=n(936),p=n(968),d=n(940),m=n(654),f=n(969),g=n(971),h=n(972),v=n(973),b=n(974),y=n(975),E=n(676);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n){return(t=function(e){var t=function(e){if("object"!=A(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==A(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const I=(0,a.default)((function(e){return{dialog:x(x({backgroundColor:"#101010 !important"},e.breakpoints.down("xs"),{"&.MuiDialog-paper":{margin:"0px 0px",maxHeight:"100%",borderRadius:0,width:"100%"},"&.MuiDialog-paperFullWidth":{width:"min(calc(100% - 64px), 640px)"}}),"& .MuiDialogContent-root",{padding:"8px 32px"}),dialogBody:{overflowY:"auto",display:"flex",flexDirection:"column"},section:{marginBottom:e.spacing(3)},sectionTitle:{fontSize:"1.25rem",fontWeight:600,marginBottom:e.spacing(2),fontFamily:"'Industry Book'",color:"#fff"},accordion:{"& .MuiAccordionDetails-root":{overflow:"hidden"},"& .MuiAccordion-root:before, & div.MuiAccordion-root.Mui-expanded:before":{opacity:0},"& .MuiAccordion-root":{margin:"8px 0"},"& .MuiAccordion-rounded:first-child":{borderTopLeftRadius:"21px",borderTopRightRadius:"21px"},"& .MuiAccordion-rounded:last-child":{borderBottomLeftRadius:"21px",borderBottomRightRadius:"21px"},backgroundColor:"#191919 !important",borderRadius:"16px !important",marginBottom:e.spacing(1),"&:before":{display:"none"},"&.Mui-expanded":{margin:"".concat(e.spacing(1),"px 0 !important")}},accordionSummary:{backgroundColor:"#191919",borderRadius:"16px",minHeight:"56px !important","&.Mui-expanded":{minHeight:"56px !important",borderRadius:"16px 16px 0 0"},"& .MuiAccordionSummary-content":{margin:"12px 0 !important"}},accordionDetails:{padding:e.spacing(2),display:"flex",flexDirection:"column",gap:e.spacing(1)},categoryLabel:{fontFamily:"'Industry Book'",fontWeight:600,fontSize:"1rem",color:"#fff"},rightItem:{display:"flex",alignItems:"flex-start",padding:"8px 12px",borderRadius:"12px",transition:"background-color 0.2s","&:hover":{backgroundColor:"#ffffff08"}},nestedRightItem:{paddingLeft:"32px",position:"relative"},nestedIcon:{fontSize:"1rem",marginRight:"8px",color:"#666",position:"absolute",left:"12px",top:"16px"},rightLabel:{flex:1,display:"flex",flexDirection:"column",gap:e.spacing(.5)},rightLabelText:{fontSize:"0.95rem",color:"#ddd",fontFamily:"'Normative Pro'",marginTop:12},rightNote:{fontSize:"0.75rem",color:"#aaa",fontStyle:"italic"},textFieldsContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2),marginTop:e.spacing(1)},textField:{"& .MuiInputBase-root":{backgroundColor:"#191919",borderRadius:"12px",color:"#ddd"},"& .MuiInputLabel-root":{color:"#999"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#333"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#555"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#666"}},infoBox:{backgroundColor:"#191919",padding:e.spacing(2),borderRadius:"16px",marginBottom:e.spacing(3),display:"flex",gap:e.spacing(1.5),alignItems:"flex-start"},infoIcon:{color:"#bbb",fontSize:"1.25rem",marginTop:"2px"},infoText:{fontSize:"0.875rem",color:"#bbb",lineHeight:1.6},divider:{backgroundColor:"#ffffff12",margin:"".concat(e.spacing(3),"px 0")},summaryCount:{marginLeft:"auto",fontSize:"0.875rem",color:"#999",fontWeight:400}}}))((function(e){var t,n=e.classes,a=e.open,A=e.onClose,C=e.onSave,S=e.licenseBase,I=e.initialCustomization,O=w((0,r.useState)(null),2),_=O[0],L=O[1],N=w((0,r.useState)({}),2),P=N[0],R=N[1];(0,r.useEffect)((function(){if(a&&S)if(I)L(I);else{var e={isCustomized:!0,rightsConfiguration:{holderRights:{},visitorRights:{}},royaltyPercentage:10,governingLaw:{jurisdiction:"Switzerland",court:"Zug, Switzerland",arbitrationLocation:"Zug, Switzerland",arbitrationRules:"Swiss Arbitration Centre"}},t=S.sections.find((function(e){return"license-options"===e.id}));null!=t&&t.rightsCategories&&t.rightsCategories.forEach((function(t){var n="holder-rights"===t.id?"holderRights":"visitorRights";t.rights.forEach((function(t){e.rightsConfiguration[n][t.id]=t.defaultValue}))})),L(e)}}),[a,S,I]);var D=function(e,t){L((function(n){return T(T({},n),{},{governingLaw:T(T({},n.governingLaw),{},x({},e,t))})}))};if(!_||!S)return null;var k=S.sections.find((function(e){return"license-options"===e.id}));return r.createElement(o.A,{PaperProps:{classes:{root:n.dialog}},maxWidth:"md",fullWidth:!0,keepMounted:!1,open:a,scroll:"paper",onClose:A},r.createElement(s.A,null,r.createElement(m.A,{component:"h2",variant:"h4",style:{fontWeight:500}},"PIXA NFT LICENSE 0.1"),r.createElement("div",{style:{fontSize:"0.95rem",fontWeight:400,color:"#bbb",marginTop:"4px"}},"Configure the terms of the agreement for your NFT artwork's rights to be granted to the holders and visitors")),r.createElement("div",{className:n.dialogBody},r.createElement(c.A,{className:n.dialogBody},r.createElement("div",{className:n.infoBox},r.createElement(y.A,{className:n.infoIcon}),r.createElement(m.A,{className:n.infoText},"Customize how holders and visitors can use your artwork. These settings will be permanently associated with your NFT and automatically transfer with ownership.")),null==k||null===(t=k.rightsCategories)||void 0===t?void 0:t.map((function(e){return c="holder-rights"===(l=(t=e).id)?"holderRights":"visitorRights",s=(null==_||null===(a=_.rightsConfiguration)||void 0===a?void 0:a[c])||{},i=t.rights,o={},i.forEach((function(e){o[e.category]||(o[e.category]={label:e.categoryLabel||e.category.charAt(0).toUpperCase()+e.category.slice(1),rights:[]}),o[e.category].rights.push(e)})),d=["basic","commercial","creative","digital","media","display","educational","advanced"].filter((function(e){return o[e]})).map((function(e){return T({category:e},o[e])})),function(e,t){var n,r="holder-rights"===e?"holderRights":"visitorRights",a=(null==_||null===(n=_.rightsConfiguration)||void 0===n?void 0:n[r])||{};t.forEach((function(e){e.rights.forEach((function(e){a[e.id]&&e.dependsOn&&a[e.dependsOn]}))}))}(l,d),r.createElement("div",{className:n.section,key:l},r.createElement(m.A,{className:n.sectionTitle},t.title),d.map((function(e){var t=e.category,a=e.label,i=e.rights;return r.createElement(f.A,{key:t,className:n.accordion,defaultExpanded:"basic"===t},r.createElement(g.A,{expandIcon:r.createElement(v.A,{style:{color:"#999"}}),className:n.accordionSummary},r.createElement(m.A,{className:n.categoryLabel},a),r.createElement(m.A,{className:n.summaryCount},i.filter((function(e){return s[e.id]&&(!e.dependsOn||s[e.dependsOn])})).length,"/",i.length)),r.createElement(h.A,{className:n.accordionDetails},i.map((function(e){var t=s[e.id]||!1,a=Boolean(e.dependsOn),i=!e.dependsOn||s[e.dependsOn];return r.createElement("div",{key:e.id,className:"".concat(n.rightItem," ").concat(a?n.nestedRightItem:"")},a&&r.createElement(b.A,{className:n.nestedIcon}),r.createElement("div",{className:n.rightLabel},r.createElement(m.A,{className:n.rightLabelText},e.label),e.note&&r.createElement(m.A,{className:n.rightNote},e.note)),r.createElement(u.A,{control:r.createElement(p.A,{color:"primary",checked:t,onChange:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;L((function(r){var a="holder-rights"===e?"holderRights":"visitorRights",i=T({},r.rightsConfiguration[a]),o=!i[t];if(i[t]=o,!o&&!n){var l,c=S.sections.find((function(e){return"license-options"===e.id})),s=null==c||null===(l=c.rightsCategories)||void 0===l?void 0:l.find((function(t){return t.id===e}));s&&s.rights.forEach((function(e){e.dependsOn===t&&(i[e.id]=!1)}))}return T(T({},r),{},{rightsConfiguration:T(T({},r.rightsConfiguration),{},x({},a,i))})}))}(l,e.id,e.dependsOn)},disabled:a&&!i}),label:""}))}))))})));var t,a,i,o,l,c,s,d})),r.createElement(E.A,{className:n.divider}),r.createElement("div",{className:n.section},r.createElement(m.A,{className:n.sectionTitle},"Royalty Settings"),r.createElement("div",{className:n.textFieldsContainer},r.createElement(d.A,{label:"Royalty Percentage (%)",type:"number",variant:"outlined",fullWidth:!0,className:n.textField,value:_.royaltyPercentage,onChange:function(e){var t=e.target.value,n=parseFloat(t);""===t||n>=0&&n<=100?(L((function(e){return T(T({},e),{},{royaltyPercentage:""===t?"":n})})),R((function(e){return T(T({},e),{},{royalty:null})}))):R((function(e){return T(T({},e),{},{royalty:"Must be between 0 and 100"})}))},error:Boolean(P.royalty),helperText:P.royalty||"Percentage you'll receive on secondary sales (0-100)",inputProps:{min:0,max:100,step:.1}}))),r.createElement(E.A,{className:n.divider}),r.createElement("div",{className:n.section},r.createElement(m.A,{className:n.sectionTitle},"Governing Law & Jurisdiction"),r.createElement("div",{className:n.textFieldsContainer},r.createElement(d.A,{label:"Jurisdiction",variant:"outlined",fullWidth:!0,className:n.textField,value:_.governingLaw.jurisdiction,onChange:function(e){return D("jurisdiction",e.target.value)},placeholder:"e.g., Switzerland"}),r.createElement(d.A,{label:"Court",variant:"outlined",fullWidth:!0,className:n.textField,value:_.governingLaw.court,onChange:function(e){return D("court",e.target.value)},placeholder:"e.g., Zug, Switzerland"}),r.createElement(d.A,{label:"Arbitration Location",variant:"outlined",fullWidth:!0,className:n.textField,value:_.governingLaw.arbitrationLocation,onChange:function(e){return D("arbitrationLocation",e.target.value)},placeholder:"e.g., Zug, Switzerland"}),r.createElement(d.A,{label:"Arbitration Rules",variant:"outlined",fullWidth:!0,className:n.textField,value:_.governingLaw.arbitrationRules,onChange:function(e){return D("arbitrationRules",e.target.value)},placeholder:"e.g., Swiss Arbitration Centre"}))),P.dependencies&&r.createElement(m.A,{style:{color:"#ff6b6b",fontSize:"0.875rem",marginTop:"16px"}},P.dependencies)),r.createElement(l.A,null,r.createElement(i.A,{onClick:A,style:{color:"#999"}},"Cancel"),r.createElement(i.A,{onClick:function(){var e;if(""===_.royaltyPercentage||_.royaltyPercentage<0||_.royaltyPercentage>100)R((function(e){return T(T({},e),{},{royalty:"Royalty percentage is required and must be between 0 and 100"})}));else{var t=S.sections.find((function(e){return"license-options"===e.id})),n=null==t||null===(e=t.rightsCategories)||void 0===e?void 0:e.find((function(e){return"holder-rights"===e.id}));if(n){var r=_.rightsConfiguration.holderRights,a=[];if(n.rights.forEach((function(e){e.dependsOn&&r[e.id]&&!r[e.dependsOn]&&a.push('"'.concat(e.label,'" requires "').concat(e.dependsOn,'" to be enabled'))})),a.length>0)return void R((function(e){return T(T({},e),{},{dependencies:a.join(", ")})}))}C(_)}},color:"primary",variant:"contained",autoFocus:!0},"Save & Generate License"))))}))}}]);