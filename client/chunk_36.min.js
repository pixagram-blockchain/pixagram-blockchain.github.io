"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([[36],{1621:(e,t,n)=>{n.a(e,(async(e,o)=>{try{n.d(t,{default:()=>P}),n(2),n(98),n(99),n(100),n(273),n(103),n(473),n(119),n(216),n(278),n(287),n(288),n(131),n(132),n(135),n(138),n(143),n(145),n(147),n(152),n(154),n(155),n(157),n(298),n(199),n(306),n(318),n(320),n(321),n(322),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(333),n(334),n(335),n(337),n(338),n(339),n(340),n(341),n(342),n(347),n(348),n(349),n(201),n(208),n(223),n(369),n(210),n(213),n(371);var i=n(228),r=n(214),_=n(376),s=n(471),a=n(375),l=n(717),c=n(858),u=n(872),d=n(916),f=n(926),p=n(927),h=n(928),m=n(986),g=e([c,u,h,m]);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function b(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,C(o.key),o)}}function S(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e){var t=M(e,"string");return"symbol"==w(t)?t:t+""}function M(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=w(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function z(e,t,n){return t=T(t),E(e,U()?Reflect.construct(t,n||[],T(e).constructor):t.apply(e,n))}function E(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}[c,u,h,m]=g.then?(await g)():g;var y=function(e){function t(){return x(this,t),z(this,t,arguments)}return j(t,e),S(t,[{key:"_getEstimatedTotalHeight",value:function(){var e=this.props,t=e.cellCount,n=e.cellMeasurerCache,o=e.width,i=Math.floor(o/(n||{}).defaultWidth||0),r=this._positionCache.estimateTotalHeight(t,i,(n||{}).defaultHeight||0);return isFinite(r)?r:0}}])}(l.a),v=function(e){function t(e){var n;return x(this,t),b(n=z(this,t,[e]),"_updated_dimensions",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=document.documentElement,o=document.body||document.getElementsByTagName("body")[0],i=window.innerWidth||t.clientWidth||o.clientWidth,r=window.innerHeight||t.clientHeight||o.clientHeight,_=Boolean(i<960),s=Boolean(r<690),a=n.st4te._less_than_960w!==_||n.st4te._less_than_690h!==s;n.st4te._window_width,n.setSt4te({_window_width:i,_window_height:r,_load_more_threshold:r*(r/i)*2},(function(){n.forceUpdate((function(){var t=n.st4te,o=t._root,i=t._gutter_size,r=t._window_width,_=t._window_height,s=(t.data,n.st4te._column_count);if(o){var a=o.getBoundingClientRect(),l=a.width,c=a.height;if(r<100||l<100||c<100||_<100)setTimeout((function(){n._updated_dimensions(e)}),250);else{s=1;var u=Math.floor((a.width-(s+1)*i)/s);n.setSt4te({_overscan_by_pixels:_*(_/r)*8,_column_width:Math.min(u,720),_column_count:s,_root_width:l,_root_height:c},(function(){n._init_cell_measurements((function(){n.setSt4te({_is_resizing:!1})}))}))}}}))})),a&&n.setSt4te({_less_than_960w:_,_less_than_690h:s,_window_width:i,_window_height:r},(function(){n.forceUpdate()}))})),b(n,"_recompute_cell_measurements",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=n.st4te,o=t._cell_measurer_cache,i=t._masonry,r=t._cell_positioner,_=t._column_count,s=t._gutter_size,a=t._column_width;if(null!=o&&null!=i&&null!=r){o.clearAll(),o.visible_ids={};var l={cellMeasurerCache:o,columnCount:_,columnWidth:a,spacer:s};r.reset(l),i.clearCellPositions(),n.setSt4te({_cell_positioner:r,_cell_positioner_config:l,_cell_measurer_cache:o},(function(){i.forceUpdate(e)}))}else n._init_cell_measurements(e)})),b(n,"_set_masonry_ref",(function(e){null!==e&&n.setSt4te({_masonry:e},(function(){n._init_cell_measurements()}))})),b(n,"_set_root_ref",(function(e){null!==e&&n.setSt4te({_root:e})})),b(n,"_cell_renderer",(function(e){var t=e.index,o=e.key,r=e.parent,_=e.style,s=e.isScrolling,a=n.st4te,c=a._root_height,d=a._root_width,f=a._masonry,p=a._column_width,h=a._cell_measurer_cache,m=a._column_count,g=a._settings,y=a._selected_post_index;if(void 0!==f.props.itemsWithSizes[0|t]){var v=f.props.itemsWithSizes[0|t],w=v.item,b=v.size,x=f._scrollingContainer.scrollTop,k=y===t;if(b.height){var S=t%m,C=(t-S)/m,M=Math.ceil(p*(b.height/b.width))||0;_.width=0+p;var z=n.st4te,E=z._top_scroll_of_el_by_index,O=z._height_of_el_by_index,U=z._x_y_of_el_by_index,T=0+_.top,j=0+_.height,B=T+j;E[t]=T,O[t]=j,U[t]=[C,S];var P=2*c*(c/d),W=P+B>x&&T<x+c+P;h.visible_ids[b.id]=W||h.visible_ids[b.id]||!1;var A=g._selected_locales_code;return n.setSt4te({_top_scroll_of_el_by_index:E,_height_of_el_by_index:O}),i.createElement(l.dl,{cache:h,index:t,key:o,parent:r},i.createElement(u.A,{onOpen:n._open_artwork,locales:A,nsfw:g._nsfw_enabled,data:w,renderer:g._renderer,mode:g._mode,onMenuClick:n.openCardMenu,is_scrolling:s,selected:k,size:b,visible:h.visible_ids[b.id],column_width:p,image_height:M,image_width:p,id:b.id,key:o,rowIndex:C,columnIndex:S,style:_}))}}})),b(n,"_init_cell_measurements",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};n.forceUpdate((function(){if(null!=n.st4te._cell_measurer_cache&&null!=n.st4te._cell_positioner_config&&null!=n.st4te._cell_positioner)n._recompute_cell_measurements(e);else{var t=n.st4te,o=t._column_count,i=t._column_width,r=t._gutter_size,_=new l.jS({defaultHeight:600,defaultWidth:i,fixedWidth:!0,minHeight:144});_.visible_ids={};var s={cellMeasurerCache:_,columnCount:o,columnWidth:i,spacer:r},a=(0,l.wT)(s);n.setSt4te({_cell_measurer_cache:_,_cell_positioner:a,_cell_positioner_config:s},(function(){n.forceUpdate((function(){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},o=n.st4te._masonry;o?o.forceUpdate(e):setTimeout((function(){t(e)}),5)};t(e)}))}))}}))})),b(n,"_next_current_post",(function(){var e=n.st4te,t=e._post,o=e._posts,i=e._masonry,r=o.map((function(e){return e.id})).indexOf(t.id)+1,_=Math.max(0,Math.min(o.length-1,r)),s=i.props.itemsWithSizes[0|_],a=s.item;s.size,n.setSt4te({_post:a},(function(){n.forceUpdate(),n._update_selected_post_index(_)}))})),b(n,"_previous_current_post",(function(){var e=n.st4te,t=e._post,o=e._posts,i=e._masonry,r=o.map((function(e){return e.id})).indexOf(t.id)-1,_=Math.max(0,Math.min(o.length-1,r)),s=i.props.itemsWithSizes[0|_],a=s.item;s.size,n.setSt4te({_post:a},(function(){n.forceUpdate(),n._update_selected_post_index(_)}))})),b(n,"_update_selected_post_index",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=n.st4te,i=o._post,r=o._posts,_=o._masonry;if(_){var s=_.props.itemsWithSizes,a=void 0!==e?e:i?r.map((function(e){return(e||{}).title})).indexOf(i.title):n.st4te._selected_post_index;n.setSt4te({_selected_post_index:a,_post:r[a],_post_img:(s[a]||{}).size},(function(){n.forceUpdate((function(){t?_.forceUpdate():n._scroll_to_index()}))}))}})),b(n,"_scroll_to",(function(e){var t=n.st4te._masonry;t&&(void 0===e?(t._scrollingContainer.scrollTop=n.st4te._scroll_top,t.forceUpdate()):n.setSt4te({_scroll_top:e},(function(){t._scrollingContainer.scrollTop=e,t.forceUpdate()})))})),b(n,"_scroll_to_index",(function(e){var t=n.st4te,o=t._selected_post_index,i=t._top_scroll_of_el_by_index,r=t._height_of_el_by_index,_=t._root_height,s=i[e=void 0!==e?e:o]+r[e]/2-_/3;n._scroll_to(s)})),b(n,"_handle_masonry_scroll",(function(e){var t=n.st4te,o=(t._load_more_threshold,t._loading_posts,n.st4te),i=o._masonry,r=o._scroll_top,_=o._y,s=o._overscan_by_pixels,a=i&&i._scrollingContainer?i._scrollingContainer.scrollTop:0,l=a-r,c=n.st4te._last_scroll_check_height+l,u=Math.abs(c)>s,d=Math.min(Math.max(-64,_-l),64);r===a&&_===d||n.setSt4te({_scroll_top:a,_y:d,_last_scroll_check_height:c},(function(){(_!==d||u)&&n.setSt4te({_last_scroll_check_height:0},(function(){n.forceUpdate()}))}))})),b(n,"openCardMenu",(function(e,t){n.setSt4te({menuCardXY:Int32Array.of(e.x-24,e.y-24),menuCardData:t},(function(){n.forceUpdate()}))})),b(n,"closeCardMenu",(function(){n.setSt4te({menuCardXY:Int32Array.of(0,0),menuCardData:{}},(function(){n.forceUpdate()}))})),b(n,"_open_create_artwork",(function(){n.setSt4te({_create_artwork_dialog_open:!0},(function(){n.forceUpdate()}))})),b(n,"_create_artwork_dialog_close",(function(){n.setSt4te({_create_artwork_dialog_open:!1},(function(){n.forceUpdate()}))})),b(n,"_open_artwork",(function(e){n.setSt4te({_artwork_open:!0,_post:e},(function(){n.forceUpdate()}))})),b(n,"_close_artwork",(function(){n.setSt4te({_artwork_open:!1,_post:{}},(function(){n.forceUpdate()}))})),n.st4te={classes:e.classes,_settings:e.settings,_history:r.Vv,_pathname:e.pathname,_image_name_infographics:"",_infographics_fadein_time:300,_infographics_in:!0,_bii3_opacity:1,_join_now_button_update:0,_less_than_960w:!0,_less_than_690h:!0,menuCardXY:[],menuCardData:{},authors:[],_scrolling_reset_time_interval:380,_min_col_width:180,_max_col_width:1280,_root_width:0,_root_height:0,_root:null,_window_width:0,_window_height:0,_average_img_ratio:1,_gutter_size:16,column_count:1,_column_width:640,_load_more_threshold:2e3,_overscan_by_pixels:9e3,_cell_positioner:null,_cell_positioner_config:null,_masonry:null,_cell_measurer_cache:null,_scroll_top:0,_intervals:[],_y:0,_top_scroll_of_el_by_index:[],_last_scroll_check_height:0,_height_of_el_by_index:[],_x_y_of_el_by_index:[],_selected_post_index:0,_post_closed_at:0,_posts:[],_create_artwork_dialog_open:!1,_artwork_open:!1,_post:{}},n}return j(t,e),S(t,[{key:"componentWillMount",value:function(){window.addEventListener("resize",this._updated_dimensions),s.trigger_page_render_complete(),s.trigger_loading_update(0),setTimeout((function(){s.trigger_loading_update(100)}),300);var e=setInterval(this._handle_masonry_scroll,this.st4te._scrolling_reset_time_interval,{passive:!0});this.setSt4te({_intervals:[e]})}},{key:"setSt4te",value:function(e,t){e=e||{},this.st4te=Object.assign(this.st4te,e),"function"==typeof t&&t()}},{key:"componentDidMount",value:function(){var e=this;this._updated_dimensions(),i.default.findDOMNode(this).addEventListener("keydown",this._handle_keydown),(0,a.A)((function(){return n.e(45).then(n.bind(n,2041))})).then((function(t){var o=t.default();(0,a.A)((function(){return n.e(46).then(n.bind(n,2042))})).then((function(t){var n=t.default();e.setSt4te({_posts:n.map((function(e){return e.author=o[e.author],e}))},(function(){e.forceUpdate((function(){e._updated_dimensions()}))}))}))}))}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.settings._renderer!==this.st4te._settings._renderer,o=e.settings._nsfw_enabled!==this.st4te._settings._nsfw_enabled;this.setSt4te({_settings:e.settings},(function(){(n||o)&&t.forceUpdate((function(){t.st4te._masonry.forceUpdate()}))}))}},{key:"componentWillUnmount",value:function(){this.st4te._intervals.forEach((function(e){clearInterval(e)}));try{window.removeEventListener("resize",this._updated_dimensions)}catch(e){}try{i.default.findDOMNode(this).removeEventListener("keydown",this._handle_keydown)}catch(e){}}},{key:"render",value:function(){var e=this,t=this.st4te,n=t.classes,o=t._settings,r=this.st4te,_=(r._less_than_960w,r._less_than_690h,r._column_width),s=r.menuCardXY,a=r.menuCardData,l=this.st4te,u=l._artwork_open,g=l._post,v=this.st4te,w=v._window_width,b=v._window_height,x=v._cell_positioner,k=v._cell_measurer_cache,S=v._overscan_by_pixels,C=v._y,M=v._scroll_top,z=v._posts,E=v._create_artwork_dialog_open,O=v._scrolling_reset_time_interval,U=b,T=w>960?w-284:w,j=Math.round((T-_)/2),B=T-2*j,P=U-16,W=o._selected_locales_code;return i.createElement(i.Fragment,null,i.createElement("div",{ref:this._set_root_ref},i.createElement(c.A,{className:n.masonry,items:z,image:function(e){return e.image},keyMapper:function(e){return e.id}},(function(t){return i.createElement(y,{style:{padding:"16px ".concat(j,"px 0px ").concat(j,"px")},key:"masonry-extended",scrollTop:M,scrollingResetTimeInterval:O,height:P,cellCount:0|(t||[]).length,itemsWithSizes:t,keyMapper:function(e){return t[e].size.id},cellMeasurerCache:k,cellPositioner:x,cellRenderer:e._cell_renderer,overscanByPixels:S,ref:e._set_masonry_ref,width:B})}))),i.createElement("div",{onClick:this._open_create_artwork,className:n.mainFab,style:{transform:"translateY(".concat(0<C&&M>512?96:0,"px)")}},i.createElement(p.A,{variant:"extended",size:"large"},i.createElement(f.A,{style:{marginRight:12}}),i.createElement("span",null,"CREATE"))),i.createElement(d.A,{xy:s,data:a,onClose:this.closeCardMenu}),i.createElement(h.A,{keepMounted:!0,open:E,onClose:this._create_artwork_dialog_close}),i.createElement(m.A,{renderer:o._renderer,mode:o._mode,nsfw:o._nsfw_enabled,format:o._format,data:g,open:u,locales:W,onClose:this._close_artwork,onPrevious:this._previous_current_post,onNext:this._next_current_post}))}}])}(i.PureComponent);const P=(0,_.default)((function(e){return{mainFab:{animation:"$slideInFromBottom 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","@global":{"@keyframes slideInFromBottom":{"0%":{transform:"translateY(160px)",filter:"opacity(0)"},"100%":{transform:"translateY(0px)",filter:"opacity(1)"}}},position:"fixed",right:16,bottom:16,transition:"transform 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms","& .MuiButtonBase-root":{borderRadius:"32px",background:"#f6f6f6",transition:"background 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms",mixBlendMode:"overlay","& .MuiTouchRipple-root":{filter:"opacity(1)","& .MuiTouchRipple-child":{backgroundImage:"\n                      radial-gradient(circle at 50% 50%,\n                        magenta 0%, blue 20%, cyan 40%, green 60%, yellow 80%, red 100%)"}}},"& .MuiButtonBase-root:hover":{background:"white",transition:"background 225ms cubic-bezier(0.4, 0, 0.2, 1) 5ms"},"& .MuiFab-extended":{padding:"0 24px",height:64,fontSize:"1.125rem"},"& .MuiFab-extended .MuiSvgIcon-root":{fontSize:"1.75rem"}},masonry:{overflow:"hidden overlay !important",contain:"style layout","& > .ReactVirtualized__Masonry":{zIndex:0,position:"absolute",margin:0,scrollBehavior:"smooth",overscrollBehavior:"none",boxSizing:"content-box !important",touchAction:"pan-y",overflow:"hidden overlay !important",willChange:"scroll-position !important","& > .ReactVirtualized__Masonry__innerScrollContainer":{top:"auto !important",left:"auto !important",contentVisibility:"auto",overflow:"initial !important",position:"absolute !important",paddingBottom:"48px",boxSizing:"content-box"}}}}}))(v);o()}catch(W){o(W)}}))}}]);