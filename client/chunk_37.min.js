/*! For license information please see chunk_37.min.js.LICENSE.txt */
"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([[37],{1652:(e,t,n)=>{n.d(t,{A:()=>p}),n(2),n(98),n(99),n(100),n(119),n(132),n(135),n(138),n(145),n(147),n(152),n(154),n(155),n(298),n(199),n(213);var r=n(228),a=n(463),o=n(235);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}function c(e,t,n){return t=u(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var m=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.default.createElement(a.A,this.props,r.default.createElement("path",{d:"M15,14C17.67,14 23,15.33 23,18V20H7V18C7,15.33 12.33,14 15,14M15,12A4,4 0 0,1 11,8A4,4 0 0,1 15,4A4,4 0 0,1 19,8A4,4 0 0,1 15,12M5,9.59L7.12,7.46L8.54,8.88L6.41,11L8.54,13.12L7.12,14.54L5,12.41L2.88,14.54L1.46,13.12L3.59,11L1.46,8.88L2.88,7.46L5,9.59Z"}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.default.PureComponent);const p=(0,o.A)((function(e){return{}}))(m)},1653:(e,t,n)=>{n.d(t,{A:()=>p}),n(2),n(98),n(99),n(100),n(119),n(132),n(135),n(138),n(145),n(147),n(152),n(154),n(155),n(298),n(199),n(213);var r=n(228),a=n(463),o=n(235);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}function c(e,t,n){return t=u(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var m=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.default.createElement(a.A,this.props,r.default.createElement("path",{d:"M13,8A4,4 0 0,1 9,12A4,4 0 0,1 5,8A4,4 0 0,1 9,4A4,4 0 0,1 13,8M17,18V20H1V18C1,15.79 4.58,14 9,14C13.42,14 17,15.79 17,18M20.5,14.5V16H19V14.5H20.5M18.5,9.5H17V9A3,3 0 0,1 20,6A3,3 0 0,1 23,9C23,9.97 22.5,10.88 21.71,11.41L21.41,11.6C20.84,12 20.5,12.61 20.5,13.3V13.5H19V13.3C19,12.11 19.6,11 20.59,10.35L20.88,10.16C21.27,9.9 21.5,9.47 21.5,9A1.5,1.5 0 0,0 20,7.5A1.5,1.5 0 0,0 18.5,9V9.5Z"}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.default.PureComponent);const p=(0,o.A)((function(e){return{}}))(m)},1654:(e,t,n)=>{n.d(t,{A:()=>p}),n(2),n(98),n(99),n(100),n(119),n(132),n(135),n(138),n(145),n(147),n(152),n(154),n(155),n(298),n(199),n(213);var r=n(228),a=n(463),o=n(235);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}function c(e,t,n){return t=u(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var m=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){return r.default.createElement(a.A,this.props,r.default.createElement("path",{d:"M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L13,20H3V18C3,15.79 6.58,14 11,14L12.89,14.11L10,17M11,4A4,4 0 0,1 15,8A4,4 0 0,1 11,12A4,4 0 0,1 7,8A4,4 0 0,1 11,4Z"}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.default.PureComponent);const p=(0,o.A)((function(e){return{}}))(m)},1655:(e,t,n)=>{n.d(t,{default:()=>ve}),n(2),n(98),n(99),n(100),n(273),n(101),n(103),n(106),n(116),n(118),n(119),n(216),n(130),n(132),n(134),n(135),n(137),n(138),n(484),n(145),n(146),n(147),n(148),n(150),n(151),n(152),n(153),n(154),n(155),n(882),n(487),n(157),n(298),n(186),n(192),n(193),n(199),n(221),n(201),n(203),n(208),n(223),n(210),n(213),n(371);var r=n(228),a=n(376),o=n(660),i=n(661),l=n(662),c=n(659),s=n(663),u=n(956),d=n(964),m=n(970),p=n(1040),f=n(664),y=n(1652),h=n(1653),b=n(1654),g=n(963),v=n(666),_=n(455),E=n(955),w=n(672),k=n(1572),A=n(1573),C=n(1599),S=n(1600),x=n(1601),P=n(449),T=n(987),O=n(990),I=n(991),N=n(992),j=n(448),R=n(445),M=n(1602),L=n(1592),K=n(450),z=n(968),D=n(969),B=n(671),F=n(1656),V=n(1657),W=n(1590),q=n(1658),U=n(1659),G=n(1660),H=n(1661),Q=n(1662),Y=n(1663);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return ee(s,"_invoke",function(n,r,a){var o,l,c,s=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,c=e,m.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!d&&s&&!a&&t<u.length;t++){var a,o=u[t],p=m.p,f=o[2];n>3?(a=f===r)&&(c=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,m.v=r,m.n=o[1]):p<f&&(a=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,m.n=f,l=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,f){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),l=u,c=f;(t=l<2?e:c)||!d;){o||(l?l<3?(l>1&&(m.n=-1),p(l,c)):m.n=c:m.v=c);try{if(s=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(d=m.n<0)?c:n.call(r,m))!==i)break}catch(t){o=e,l=1,c=t}finally{s=1}}return{value:t,done:d}}}(n,a,o),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(ee(t={},r,(function(){return this})),t),d=s.prototype=l.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,ee(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=s,ee(d,"constructor",s),ee(s,"constructor",c),c.displayName="GeneratorFunction",ee(s,a,"GeneratorFunction"),ee(d),ee(d,a,"Generator"),ee(d,r,(function(){return this})),ee(d,"toString",(function(){return"[object Generator]"})),(X=function(){return{w:o,m}})()}function ee(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ee=function(e,t,n,r){function o(t,n){ee(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},ee(e,t,n,r)}function te(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){te(o,r,a,i,l,"next",e)}function l(e){te(o,r,a,i,l,"throw",e)}i(void 0)}))}}function re(e,t,n){return t=oe(t),function(e,t){if(t&&("object"==Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ae()?Reflect.construct(t,n||[],oe(e).constructor):t.apply(e,n))}function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ae=function(){return!!e})()}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t,n){return(t=ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e){var t=function(e){if("object"!=Z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:t+""}var de={master:{label:"Master",description:"Derives all keys automatically",inputType:"password",placeholder:"Enter your master password",color:"#e0e0e0"},posting:{label:"Posting",description:"For voting, commenting, and posting",inputType:"password",placeholder:"Enter your posting private key (WIF)",color:"#d0d0d0"},active:{label:"Active",description:"For transfers and wallet operations",inputType:"password",placeholder:"Enter your active private key (WIF)",color:"#c8c8c8"},owner:{label:"Owner",description:"For account recovery and authority changes",inputType:"password",placeholder:"Enter your owner private key (WIF)",color:"#b8b8b8"},memo:{label:"Memo",description:"For encrypted messages",inputType:"password",placeholder:"Enter your memo private key (WIF)",color:"#c0c0c0"}},me=[{value:5,label:"5m"},{value:60,label:"1h"},{value:240,label:"4h"},{value:480,label:"8h"},{value:1440,label:"24h"}],pe=[{value:5,label:"5m"},{value:10,label:"15m"},{value:30,label:"30m"},{value:60,label:"1h"}],fe=(0,r.memo)((function(e){var t=e.classes,n=e.rcPercent;if(e.rcMana,null===n)return null;var a=function(e){return e>=80?"#e0e0e0":e>=50?"#b0b0b0":e>=20?"#808080":"#606060"};return r.createElement("div",{className:t.rcIndicator},r.createElement(K.Ay,{title:"Resource Credits - used for blockchain operations"},r.createElement(H.A,{style:{color:a(n),fontSize:20}})),r.createElement("div",{className:"rc-bar"},r.createElement("div",{className:"rc-fill",style:{width:"".concat(n,"%"),backgroundColor:a(n)}})),r.createElement(f.A,{variant:"caption",style:{color:a(n),minWidth:40,textAlign:"right"}},n.toFixed(1),"%"))})),ye=(0,r.memo)((function(e){var t=e.classes,n=e.username,a=e.usernameMessage,o=e.pendingUsernameValidation,l=e.usernameExists,c=e.selectedKeyType,s=e.primaryKey,p=e.showPrimaryKey,C=e.primaryKeyValid,S=e.pendingKeyValidation,x=e.requiredKeyType,P=e.requiredKeyHint,T=e.rcPercent,O=e.rcMana,I=e.accountReputation,N=e.onUsernameChange,j=e.onKeyTypeSelect,R=e.onPrimaryKeyChange,z=e.onToggleShowPrimaryKey,D=e.onMouseDownPassword,B=e.onOpenQRScanner,W=(0,r.useMemo)((function(){return r.createElement(K.Ay,{title:o?"Checking if account exists...":l?"Account found! Reputation: ".concat(I||"N/A"):n.length>0?"Account not found. Please check the username.":"Enter a username to check"},r.createElement(m.A,{position:"end",className:t.inputEndAdornment},o?r.createElement(E.A,{position:"relative",display:"inline-flex"},r.createElement(v.A,{variant:"indeterminate",size:24,color:"secondary"}),r.createElement(E.A,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},r.createElement(_.A,{edge:"end",disabled:!0,className:t.buttonNotDisabled,size:"small"},r.createElement(h.A,{style:{fontSize:16}})))):r.createElement(_.A,{edge:"end",disabled:!0,className:t.buttonNotDisabled},l?r.createElement(b.A,null):n.length>0?r.createElement(y.A,null):r.createElement(h.A,null))))}),[t,o,l,n,I]),q=(0,r.useMemo)((function(){return r.createElement(m.A,{position:"end",className:t.inputEndAdornment},S?r.createElement(v.A,{size:20,color:"secondary"}):s.length>0?r.createElement(K.Ay,{title:C?"Key format is valid":"Invalid key format"},r.createElement(_.A,{edge:"end",disabled:!0,className:t.buttonNotDisabled},C?r.createElement(L.A,{style:{color:"#ffffff"}}):r.createElement(M.A,{style:{color:"#a5a5a5"}}))):null,r.createElement(K.Ay,{title:"Scan QR Code"},r.createElement(_.A,{edge:"end",className:t.qrScanButton,onClick:function(){return B("primary")}},r.createElement(Q.A,null))),r.createElement(K.Ay,{title:p?"Hide key":"Show key"},r.createElement(_.A,{edge:"end","aria-label":"toggle key visibility",onClick:z,onMouseDown:D},p?r.createElement(k.A,null):r.createElement(A.A,null))))}),[t,S,s,C,p,z,D,B]),U=de[c],H=(0,r.useCallback)((function(e,t){null!==t&&j(t)}),[j]);return r.createElement(i.A,{key:"view-1"},x&&P&&r.createElement("div",{className:t.requiredHint},r.createElement(G.A,null),r.createElement(f.A,{variant:"body2"},P)),r.createElement(u.A,{fullWidth:!0,variant:"outlined",style:{marginBottom:a.length>0?"8px":"16px"}},r.createElement(d.A,{htmlFor:"login-username"},"Username"),r.createElement(g.A,{id:"login-username",value:n,onChange:N,startAdornment:r.createElement(m.A,{position:"start"},"@"),endAdornment:W,labelWidth:70,autoComplete:"username"})),r.createElement(w.A,{in:a.length>0&&n.length>0},r.createElement(f.A,{style:{fontSize:"14px",marginBottom:"16px",color:"#9b9b9b",textAlign:"right"}},a)),r.createElement(w.A,{in:l&&null!==T},r.createElement(fe,{classes:t,rcPercent:T,rcMana:O})),r.createElement(f.A,{style:{fontSize:14,color:"#9b9b9b",marginTop:8}},"Select authentication method:"),r.createElement(V.A,{value:c,exclusive:!0,onChange:H,className:t.keyTypeToggleGroup,size:"small"},Object.entries(de).map((function(e){var t=le(e,2),n=t[0],a=t[1],o=x===n,i=x&&"master"!==x&&n!==x&&"master"!==n;return r.createElement(F.A,{key:n,value:n,disabled:i,style:{borderWidth:o?"2px":void 0,borderColor:o?a.color:void 0}},a.label)}))),r.createElement(w.A,{in:l},r.createElement(u.A,{fullWidth:!0,variant:"outlined",style:{marginTop:16}},r.createElement(d.A,{htmlFor:"login-primary-key"},U.label),r.createElement(g.A,{id:"login-primary-key",type:p?"text":"password",value:s,onChange:R,endAdornment:q,labelWidth:"master"===c?130:90,placeholder:U.placeholder,autoComplete:"current-password"})),r.createElement(f.A,{style:{fontSize:12,color:"#7b7b7b",marginTop:8,textAlign:"right"}},U.description)))})),he=(0,r.memo)((function(e){var t=e.classes,n=e.pin,a=e.pinConfirmation,o=e.showPIN,l=e.pinValid,c=e.sessionTimeout,s=e.pinTimeout,p=e.selectedKeyType,y=e.additionalKeys,h=e.keyPINProtection,b=e.expanded,v=e.onPINChange,C=e.onPINConfirmationChange,S=e.onToggleShowPIN,x=e.onSessionTimeoutChange,P=e.onPINTimeoutChange,j=e.onAdditionalKeyChange,R=e.onKeyPINProtectionChange,M=e.onAccordionChange,B=e.onMouseDownPassword,F=e.onOpenQRScanner,V=(0,r.useMemo)((function(){return r.createElement(K.Ay,{title:o?"Hide PIN":"Show PIN"},r.createElement(m.A,{position:"end"},r.createElement(_.A,{edge:"end","aria-label":"toggle PIN visibility",onClick:S,onMouseDown:B},o?r.createElement(k.A,null):r.createElement(A.A,null))))}),[o,S,B]),G=a.length>0&&n===a,H=a.length>0&&n!==a,Y=n.length>=6&&n===a,Z="master"===p?[]:["posting","active","owner","memo"].filter((function(e){return e!==p}));return r.createElement(i.A,{key:"view-2"},r.createElement(T.A,{expanded:"pin"===b,onChange:M("pin")},r.createElement(O.A,{expandIcon:r.createElement(N.A,{style:{marginRight:8}})},r.createElement(E.A,{display:"flex",alignItems:"center",gap:1,width:"100%"},r.createElement(W.A,{style:{color:Y?"#ffffff":"#7b7b7b",marginRight:8}}),r.createElement("span",null,"PIN Protection"),r.createElement("span",{className:"".concat(t.pinStatusIndicator," ").concat(Y?"enabled":"disabled")},Y?r.createElement(r.Fragment,null,r.createElement(L.A,{style:{fontSize:14}}),"Enabled"):"Optional"))),r.createElement(I.A,null,r.createElement("div",{style:{width:"100%"}},r.createElement(f.A,{style:{fontSize:14,marginBottom:16,color:"#9b9b9b"}},"Set a PIN to protect your keys. You'll need to enter it to access encrypted operations. PIN protection is automatically enabled when both fields match."),r.createElement(u.A,{fullWidth:!0,variant:"outlined",style:{marginBottom:16}},r.createElement(d.A,{htmlFor:"login-pin"},"PIN (min 6 characters)"),r.createElement(g.A,{id:"login-pin",type:o?"text":"password",value:n,onChange:v,endAdornment:V,labelWidth:160})),r.createElement(u.A,{fullWidth:!0,variant:"outlined"},r.createElement(d.A,{htmlFor:"login-pin-confirm"},"Confirm PIN"),r.createElement(g.A,{id:"login-pin-confirm",type:o?"text":"password",value:a,onChange:C,labelWidth:100})),r.createElement(w.A,{in:G&&n.length>=6},r.createElement(f.A,{style:{fontSize:14,marginTop:8,color:"#90EE90",textAlign:"right"}},"PINs match - Protection enabled ÃƒÆ’Ã‚Â¢Ãƒâ€¦Ã¢â‚¬Å“ÃƒÂ¢Ã¢â€šÂ¬Ã…â€œ")),r.createElement(w.A,{in:H},r.createElement(f.A,{style:{fontSize:14,marginTop:8,color:"#b3b3b3",textAlign:"right"}},"PINs do not match")),r.createElement(w.A,{in:n.length>0&&n.length<6},r.createElement(f.A,{style:{fontSize:14,marginTop:8,color:"#b3b3b3",textAlign:"right"}},"PIN must be at least 6 characters")),r.createElement(w.A,{in:l},r.createElement("div",{className:t.sliderContainer},r.createElement("div",{className:t.sliderLabel},r.createElement(E.A,{display:"flex",alignItems:"center"},r.createElement(U.A,null),r.createElement(f.A,{variant:"body2"},"PIN Timeout")),r.createElement(f.A,{variant:"body2",style:{color:"#fff"}},s<60?"".concat(s," min"):"".concat(Math.floor(s/60),"h ").concat(s%60,"m"))),r.createElement(z.A,{value:s,onChange:P,min:1,max:30,marks:pe,step:1,valueLabelDisplay:"auto",valueLabelFormat:function(e){return"".concat(e,"m")}})))))),Z.length>0&&r.createElement(T.A,{expanded:"keys"===b,onChange:M("keys")},r.createElement(O.A,{expandIcon:r.createElement(N.A,{style:{marginRight:8}})},r.createElement(E.A,{display:"flex",alignItems:"center",gap:1},r.createElement(q.A,{style:{color:"#7b7b7b",marginRight:8}}),r.createElement(f.A,null,"Additional Keys (Optional)"))),r.createElement(I.A,null,r.createElement("div",{style:{width:"100%"}},r.createElement(f.A,{style:{fontSize:14,marginBottom:16,color:"#9b9b9b"}},"Add other private keys to enable more operations without re-entering them."),Z.map((function(e){var n=de[e];return r.createElement("div",{key:e,style:{marginBottom:16}},r.createElement(u.A,{fullWidth:!0,variant:"outlined",size:"small"},r.createElement(d.A,{htmlFor:"additional-key-".concat(e)},n.label),r.createElement(g.A,{id:"additional-key-".concat(e),type:"password",value:y[e]||"",onChange:function(t){return j(e,t.target.value)},labelWidth:8*n.label.length,placeholder:n.placeholder,endAdornment:r.createElement(m.A,{position:"end"},r.createElement(K.Ay,{title:"Scan QR Code"},r.createElement(_.A,{edge:"end",className:t.qrScanButton,onClick:function(){return F(e)},size:"small"},r.createElement(Q.A,{fontSize:"small"}))))})),Y&&y[e]&&r.createElement("div",{className:t.keyToggleRow},r.createElement(f.A,{variant:"body2",style:{color:"#9b9b9b"}},"Require PIN for ",n.label),r.createElement(D.A,{checked:h[e]||!1,onChange:function(t){return R(e,t.target.checked)},color:"primary",size:"small"})))}))))),r.createElement(T.A,{expanded:"session"===b,onChange:M("session")},r.createElement(O.A,{expandIcon:r.createElement(N.A,{style:{marginRight:8}})},r.createElement(E.A,{display:"flex",alignItems:"center",gap:1},r.createElement(U.A,{style:{color:"#7b7b7b",marginRight:8}}),r.createElement(f.A,null,"Session Settings"))),r.createElement(I.A,null,r.createElement("div",{style:{width:"100%"}},r.createElement(f.A,{style:{fontSize:14,marginBottom:16,color:"#9b9b9b"}},"Configure how long your session remains active before requiring re-authentication."),r.createElement("div",{className:t.sliderContainer},r.createElement("div",{className:t.sliderLabel},r.createElement(f.A,{variant:"body2"},"Session Timeout"),r.createElement(f.A,{variant:"body2",style:{color:"#fff"}},c<60?"".concat(c," min"):c<1440?"".concat(Math.floor(c/60),"h ").concat(c%60>0?"".concat(c%60,"m"):""):"24h")),r.createElement(z.A,{value:c,onChange:x,min:5,max:1440,marks:me,step:null,valueLabelDisplay:"auto",valueLabelFormat:function(e){return e<60?"".concat(e,"m"):"".concat(Math.floor(e/60),"h")}}))))))})),be=(0,r.memo)((function(e){var t=e.classes,n=e.username,a=e.selectedKeyType,o=e.pinEnabled,l=e.sessionTimeout,c=e.pinTimeout,s=e.additionalKeys,u=e.keyPINProtection,d=e.loginStatus,m=e.loginError,p=e.loginProgress,y=e.rcPercent,h=Object.values(s).filter((function(e){return e&&e.length>0})).length,b=Object.values(u).filter(Boolean).length;return r.createElement(i.A,{key:"view-3"},r.createElement(f.A,{style:{fontSize:14,marginBottom:16,color:"#9b9b9b"}},"Review your login configuration before proceeding."),r.createElement("div",{className:t.summaryBox},r.createElement("div",{className:"summary-row"},r.createElement("span",{className:"summary-label"},"Account"),r.createElement("span",{className:"summary-value"},"@",n)),r.createElement("div",{className:"summary-row"},r.createElement("span",{className:"summary-label"},"Authentication"),r.createElement(B.A,{size:"small",label:de[a].label,style:{height:24,backgroundColor:"#3a3a3a",color:"#fff"}})),r.createElement("div",{className:"summary-row"},r.createElement("span",{className:"summary-label"},"PIN Protection"),r.createElement("span",{className:"summary-value",style:{color:o?"#90EE90":"#9b9b9b"}},o?"Enabled":"Disabled")),r.createElement("div",{className:"summary-row"},r.createElement("span",{className:"summary-label"},"Session Timeout"),r.createElement("span",{className:"summary-value"},l<60?"".concat(l," minutes"):"".concat(Math.floor(l/60)," hours"))),o&&r.createElement("div",{className:"summary-row"},r.createElement("span",{className:"summary-label"},"PIN Timeout"),r.createElement("span",{className:"summary-value"},c," minutes")),"master"!==a&&h>0&&r.createElement("div",{className:"summary-row"},r.createElement("span",{className:"summary-label"},"Additional Keys"),r.createElement("span",{className:"summary-value"},h," key(s)")),o&&b>0&&r.createElement("div",{className:"summary-row"},r.createElement("span",{className:"summary-label"},"PIN-Protected Keys"),r.createElement("span",{className:"summary-value"},b+1," key(s)")),null!==y&&r.createElement("div",{className:"summary-row"},r.createElement("span",{className:"summary-label"},"Resource Credits"),r.createElement("span",{className:"summary-value",style:{color:y>=80?"#e0e0e0":y>=50?"#b0b0b0":"#808080"}},y.toFixed(1),"%"))),d&&r.createElement("div",{className:"".concat(t.statusIndicator," ").concat(d)},"pending"===d&&r.createElement(r.Fragment,null,r.createElement(v.A,{size:20,color:"inherit"}),r.createElement(f.A,{variant:"body2"},p||"Authenticating...")),"success"===d&&r.createElement(r.Fragment,null,r.createElement(L.A,null),r.createElement(f.A,{variant:"body2"},"Login successful!")),"error"===d&&r.createElement(r.Fragment,null,r.createElement(M.A,null),r.createElement(f.A,{variant:"body2"},m||"Login failed")),"warning"===d&&r.createElement(r.Fragment,null,r.createElement(M.A,null),r.createElement(f.A,{variant:"body2"},m))))})),ge=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),se(n=re(this,t,[e]),"_computeSize",(function(){var e=(window.innerWidth||document.documentElement.clientWidth||(document.body||document.getElementsByTagName("body")[0]).clientWidth)<=960;n.state._fullscreen!==e&&n.setState({_fullscreen:e})})),se(n,"_getClient",(function(){var e=n.props.api;return e&&e.client||null})),se(n,"_getFormatter",(function(){var e=n.props.api;return e&&e.formatter||null})),se(n,"_getAuth",(function(){var e=n.props.api;return e&&e.auth||null})),se(n,"_getRC",(function(){var e=n.props.api;return e&&e.rc||null})),se(n,"_handleUsernameChange",(function(e){var t=e.target.value.toString().toLowerCase().trim();n.setState({_username:t,_pending_username_validation:!0,_username_exists:!1,_username_message:"",_primary_key:"",_primary_key_valid:!1,_account_reputation:null,_rc_percent:null,_rc_mana:null}),n._usernameValidationTimer&&clearTimeout(n._usernameValidationTimer),t.length<3?n.setState({_pending_username_validation:!1,_username_message:t.length>0?"Username must be at least 3 characters":""}):n._usernameValidationTimer=setTimeout((function(){n._validateUsername(t)}),500)})),se(n,"_validateUsername",function(){var e=ne(X().m((function e(t){var r,a,o,i,l,c,s,u,d,m,p,f,y,h;return X().w((function(e){for(;;)switch(e.p=e.n){case 0:if(r=n.props.api,a=n._getClient(),r&&a){e.n=1;break}return n.setState({_pending_username_validation:!1,_username_message:"API not available"}),e.a(2);case 1:return e.p=1,e.n=2,a.database.getAccounts([t]);case 2:if(o=e.v,i=o&&o.length>0&&o[0]&&o[0].name===t,l=null,c=null,s=null,!i||!o[0]){e.n=7;break}if((u=n._getFormatter())&&u.reputation&&(l=u.reputation(o[0].reputation)),e.p=3,!(d=n._getRC())||!d.getRCMana){e.n=5;break}return e.n=4,d.getRCMana(t);case 4:(m=e.v)&&(f=BigInt(m.max_rc||m.max_mana||0),y=BigInt((null===(p=m.rc_manabar)||void 0===p?void 0:p.current_mana)||m.current_mana||0),f>0n&&(c=Number(10000n*y/f)/100,s=m));case 5:e.n=7;break;case 6:e.p=6,e.v;case 7:n.setState({_pending_username_validation:!1,_username_exists:i,_username_message:i?"":"Account not found",_account_reputation:l,_rc_percent:c,_rc_mana:s}),e.n=9;break;case 8:e.p=8,h=e.v,n.setState({_pending_username_validation:!1,_username_exists:!1,_username_message:h.message||"Error checking account"});case 9:return e.a(2)}}),e,null,[[3,6],[1,8]])})));return function(t){return e.apply(this,arguments)}}()),se(n,"_handleKeyTypeSelect",(function(e){n.setState({_selected_key_type:e,_primary_key:"",_primary_key_valid:!1,_additional_keys:{posting:"",active:"",owner:"",memo:""}})})),se(n,"_handlePrimaryKeyChange",(function(e){var t=e.target.value;n.setState({_primary_key:t,_pending_key_validation:!0,_primary_key_valid:!1}),n._keyValidationTimer&&clearTimeout(n._keyValidationTimer),t.length<8?n.setState({_pending_key_validation:!1,_primary_key_valid:!1}):n._keyValidationTimer=setTimeout((function(){n._validatePrimaryKey(t)}),300)})),se(n,"_validatePrimaryKey",(function(e){var t=n.state._selected_key_type,r=n._getAuth(),a=!1;if("master"===t)a=e.length>=8;else if(r&&r.isWif)try{a=r.isWif(e)}catch(e){a=!1}else a=/^5[HJK][1-9A-HJ-NP-Za-km-z]{49,51}$/.test(e);n.setState({_pending_key_validation:!1,_primary_key_valid:a})})),se(n,"_handleToggleShowPrimaryKey",(function(){n.setState({_show_primary_key:!n.state._show_primary_key})})),se(n,"_handlePINChange",(function(e){n.setState({_pin:e.target.value})})),se(n,"_handlePINConfirmationChange",(function(e){n.setState({_pin_confirmation:e.target.value})})),se(n,"_handleToggleShowPIN",(function(){n.setState({_show_pin:!n.state._show_pin})})),se(n,"_isPINValid",(function(){var e=n.state,t=e._pin,r=e._pin_confirmation;return t.length>=6&&t===r})),se(n,"_isPINEnabled",(function(){return n._isPINValid()})),se(n,"_handleSessionTimeoutChange",(function(e,t){n.setState({_session_timeout:t})})),se(n,"_handlePINTimeoutChange",(function(e,t){n.setState({_pin_timeout:t})})),se(n,"_handleAdditionalKeyChange",(function(e,t){n.setState((function(n){return{_additional_keys:$($({},n._additional_keys),{},se({},e,t))}}))})),se(n,"_handleKeyPINProtectionChange",(function(e,t){n.setState((function(n){return{_key_pin_protection:$($({},n._key_pin_protection),{},se({},e,t))}}))})),se(n,"_handleAccordionChange",(function(e){return function(t,r){n.setState({_expanded:r?e:null})}})),se(n,"_handleMouseDownPassword",(function(e){e.preventDefault()})),se(n,"_handleOpenQRScanner",(function(e){n.setState({_qr_scanner_open:!0,_qr_scanner_target:e})})),se(n,"_handleCloseQRScanner",(function(){n.setState({_qr_scanner_open:!1,_qr_scanner_target:null})})),se(n,"_handleQRScanResult",(function(e){var t=n.state._qr_scanner_target;"primary"===t?n.setState({_primary_key:e,_qr_scanner_open:!1,_qr_scanner_target:null},(function(){n._validatePrimaryKey(e)})):["posting","active","owner","memo"].includes(t)&&n.setState((function(n){return{_additional_keys:$($({},n._additional_keys),{},se({},t,e)),_qr_scanner_open:!1,_qr_scanner_target:null}}))})),se(n,"_firstStepDone",(function(){var e=n.state,t=e._username_exists,r=e._primary_key_valid;return t&&r})),se(n,"_secondStepDone",(function(){return!0})),se(n,"_thirdStepDone",(function(){return!0})),se(n,"_canClickNext",(function(){var e=n.state._tab_value;return 0===e&&n._firstStepDone()||1===e&&n._secondStepDone()||2===e&&n._thirdStepDone()})),se(n,"_handleTabChange",(function(e,t){(t<n.state._tab_value||n._canClickNext())&&n.setState({_tab_value:parseInt(t)},(function(){n._swipeableViewScrollTop()}))})),se(n,"_swipeableViewScrollTop",(function(){var e=document.getElementsByClassName("react-swipeable-view-container");if(e.length>0){var t=e.item(0).children.item(0);t&&(t.style.scrollBehavior="smooth",t.scrollTop=0)}})),se(n,"_executeLogin",ne(X().m((function e(){var t,r,a,o,i,l,c,s,u,d,m,p,f,y,h,b,g,v,_,E,w,k,A,C,S,x,P,T,O,I,N,j,R,M,L;return X().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t=n.props,r=t.api,a=t.onLogin,o=t.onClose,i=n.state,l=i._username,c=i._selected_key_type,s=i._primary_key,u=i._pin,d=i._session_timeout,m=i._pin_timeout,p=i._additional_keys,i._key_pin_protection,f=n._isPINEnabled(),r){e.n=1;break}return n.setState({_login_status:"error",_login_error:"API not available"}),e.a(2);case 1:if(n.setState({_login_status:"pending",_login_progress:"Initializing...",_backdropOpened:!0}),y=!1,e.p=2,r.updateConfig&&r.updateConfig({SESSION_TIMEOUT:60*d*1e3,PIN_TIMEOUT:60*m*1e3}),!f){e.n=8;break}if(r.initialized){e.n=3;break}throw new Error("API not initialized. Please refresh the page.");case 3:return n.setState({_login_progress:"Setting up secure vault..."}),e.p=4,e.n=5,r.initializeVault(u,{pinTimeout:60*m*1e3});case 5:e.n=7;break;case 6:throw e.p=6,R=e.v,new Error("Failed to initialize secure storage: "+R.message);case 7:case 8:return n.setState({_login_progress:"Validating credentials..."}),e.n=9,r.validateCredentials(l,s,c);case 9:if((h=e.v).valid){e.n=10;break}throw new Error(h.error||"Invalid credentials");case 10:if(n.setState({_login_progress:"Storing keys..."}),b=r.isVaultInitialized&&r.isVaultInitialized(),!f||!b){e.n=26;break}if("master"!==c){e.n=12;break}return e.n=11,r.keyManager.addAccountWithMasterKey(l,s,{storeInVault:!0});case 11:e.n=20;break;case 12:return e.n=13,r.keyManager.addIndividualKey(l,c,s,{storeInVault:!0});case 13:g=n._getAuth(),v=0,_=Object.entries(p);case 14:if(!(v<_.length)){e.n=20;break}if(E=le(_[v],2),w=E[0],!((k=E[1])&&k.length>0)){e.n=19;break}if(e.p=15,!g||!g.isWif||g.isWif(k)){e.n=16;break}return e.a(3,19);case 16:return e.n=17,r.keyManager.addIndividualKey(l,w,k,{storeInVault:!0});case 17:e.n=19;break;case 18:e.p=18,e.v;case 19:v++,e.n=14;break;case 20:if(n.setState({_login_progress:"Creating session..."}),!r.sessionManager){e.n=25;break}return e.p=21,e.n=22,r.sessionManager.initialize(r.eventEmitter);case 22:return e.n=23,r.sessionManager.createSession(l,{loginType:c,pinEnabled:f,quickLogin:!1});case 23:r.sessionManager.setSessionTimeout(60*d*1e3),y=!0,e.n=25;break;case 24:throw e.p=24,M=e.v,new Error("Failed to create session: "+M.message);case 25:r.keyManager&&r.keyManager.setActiveAccount(l),e.n=33;break;case 26:return e.n=27,r.quickLogin(l,s,c,{skipValidation:!0,validation:h,skipSession:!1,userAgent:navigator.userAgent||"unknown"});case 27:if(A=e.v,y=A&&(A.sessionId||A.eventEmitted),"master"===c){e.n=33;break}C=n._getAuth(),S=0,x=Object.entries(p);case 28:if(!(S<x.length)){e.n=33;break}if(P=le(x[S],2),T=P[0],!((O=P[1])&&O.length>0)){e.n=32;break}if(e.p=29,!C||!C.isWif||C.isWif(O)){e.n=30;break}return e.a(3,32);case 30:r.keyManager.sessionKeys.set("".concat(l,"_").concat(T),O),e.n=32;break;case 31:e.p=31,e.v;case 32:S++,e.n=28;break;case 33:!y&&r.eventEmitter&&r.eventEmitter.emit("session_created",{account:l}),n.setState({_login_status:"success",_login_progress:null,_backdropOpened:!1}),a&&a({username:l,keyType:c,enabledPIN:f,sessionTimeout:d,pinTimeout:m,derivedKeys:h.derivedKeys,publicKey:h.publicKey}),setTimeout((function(){o&&o()}),1e3),e.n=35;break;case 34:e.p=34,L=e.v,I=L.message||"Login failed","PIN_TOO_SHORT"===L.code?I="PIN must be at least 6 characters":"PIN_REQUIRED"===L.code?I="PIN is required":"NOT_INITIALIZED"===L.code?I="API not properly initialized. Please refresh and try again.":"VAULT_INIT_FAILED"===L.code?I="Failed to initialize secure storage. "+(L.message||""):"VALIDATION_FAILED"===L.code?I="Invalid credentials. Please check your key.":"INVALID_KEY"===L.code?I="Invalid key format":"KEY_NOT_FOUND"===L.code&&(I="Key not found for ".concat(null===(N=L.data)||void 0===N?void 0:N.account,"/").concat(null===(j=L.data)||void 0===j?void 0:j.keyType)),n.setState({_login_status:"error",_login_error:I,_login_progress:null,_backdropOpened:!1});case 35:return e.a(2)}}),e,null,[[29,31],[21,24],[15,18],[4,6],[2,34]])})))),se(n,"_handleConfirmClick",(function(){var e=n.state,t=e._tab_value,r=e._login_status;2===t?"success"===r?n.props.onClose&&n.props.onClose():"pending"!==r&&n._executeLogin():n._handleTabChange({},t+1)})),se(n,"_getConfirmButtonText",(function(){var e=n.state,t=e._tab_value,r=e._login_status;if(2===t)switch(r){case"pending":return"LOGGING IN...";case"success":return"DONE";case"error":return"RETRY";default:return"LOGIN"}return"NEXT"})),n._usernameValidationTimer=null,n._keyValidationTimer=null,n.state={_tab_value:0,_fullscreen:(window.innerWidth||document.documentElement.clientWidth||(document.body||document.getElementsByTagName("body")[0]).clientWidth)<=960,_backdropOpened:!1,_expanded:null,_username:e.defaultUsername||"",_pending_username_validation:!1,_username_exists:!1,_username_message:"",_selected_key_type:e.requiredKeyType||"master",_primary_key:"",_show_primary_key:!1,_primary_key_valid:!1,_pending_key_validation:!1,_account_reputation:null,_rc_percent:null,_rc_mana:null,_pin:"",_pin_confirmation:"",_show_pin:!1,_session_timeout:e.defaultSessionTimeout||30,_pin_timeout:e.defaultPinTimeout||5,_additional_keys:{posting:"",active:"",owner:"",memo:""},_key_pin_protection:{posting:!0,active:!0,owner:!0,memo:!0},_login_status:null,_login_error:null,_login_progress:null,_qr_scanner_open:!1,_qr_scanner_target:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this._computeSize),this.props.defaultUsername&&this._validateUsername(this.props.defaultUsername)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._computeSize),this._usernameValidationTimer&&clearTimeout(this._usernameValidationTimer),this._keyValidationTimer&&clearTimeout(this._keyValidationTimer)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.open!==this.props.open&&e.open&&this.setState({_tab_value:0,_login_status:null,_login_error:null}),e.defaultUsername!==this.props.defaultUsername&&this.setState({_username:e.defaultUsername||""},(function(){e.defaultUsername&&t._validateUsername(e.defaultUsername)})),e.requiredKeyType!==this.props.requiredKeyType&&this.setState({_selected_key_type:e.requiredKeyType||"master"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.open,i=t.onClose,u=t.requiredKeyType,d=t.requiredKeyHint,m=this.state,y=m._fullscreen,h=m._tab_value,b=m._backdropOpened,g=m._expanded,_=m._username,w=m._pending_username_validation,k=m._username_exists,A=m._username_message,T=m._selected_key_type,O=m._primary_key,I=m._show_primary_key,N=m._primary_key_valid,M=m._pending_key_validation,L=m._account_reputation,K=m._rc_percent,z=m._rc_mana,D=m._pin,B=m._pin_confirmation,F=m._show_pin,V=m._session_timeout,W=m._pin_timeout,q=m._additional_keys,U=m._key_pin_protection,G=m._login_status,H=m._login_error,Q=m._login_progress,Z=m._qr_scanner_open,J=this._isPINEnabled();return r.createElement(r.Fragment,null,r.createElement(c.A,{className:n.dialog,open:a,fullScreen:y,fullWidth:!0,disablePortal:!1,onClose:i,keepMounted:!1},r.createElement(s.A,{style:{display:"flex",margin:"0px 0px 16px 0px"}},r.createElement(f.A,{component:"h1",variant:"h4",style:{float:"left",width:"100%",margin:"0px"}},"Login")),r.createElement(x.A,{activeStep:h},r.createElement(C.A,{completed:h>0},r.createElement(S.A,null,"AUTH.")),r.createElement(C.A,{completed:h>1},r.createElement(S.A,{optional:r.createElement(f.A,{variant:"caption"},"Optional")},"SECURITY")),r.createElement(C.A,{completed:h>2},r.createElement(S.A,null,"OK"))),r.createElement(p.Ay,{ignoreNativeScroll:!0,containerStyle:{height:"100%"},animateTransitions:!0,disableLazyLoading:!0,resistance:!0,springConfig:{tension:450,friction:60,duration:"360ms",easeFunction:"cubic-bezier(0.280, 0.840, 0.420, 1)",delay:"5ms"},index:h,onChangeIndex:function(t){return e._handleTabChange({},t)},disabled:!1},r.createElement(ye,{classes:n,username:_,usernameMessage:A,pendingUsernameValidation:w,usernameExists:k,selectedKeyType:T,primaryKey:O,showPrimaryKey:I,primaryKeyValid:N,pendingKeyValidation:M,requiredKeyType:u,requiredKeyHint:d,rcPercent:K,rcMana:z,accountReputation:L,onUsernameChange:this._handleUsernameChange,onKeyTypeSelect:this._handleKeyTypeSelect,onPrimaryKeyChange:this._handlePrimaryKeyChange,onToggleShowPrimaryKey:this._handleToggleShowPrimaryKey,onMouseDownPassword:this._handleMouseDownPassword,onOpenQRScanner:this._handleOpenQRScanner}),r.createElement(he,{classes:n,pin:D,pinConfirmation:B,showPIN:F,pinValid:this._isPINValid(),sessionTimeout:V,pinTimeout:W,selectedKeyType:T,additionalKeys:q,keyPINProtection:U,expanded:g,onPINChange:this._handlePINChange,onPINConfirmationChange:this._handlePINConfirmationChange,onToggleShowPIN:this._handleToggleShowPIN,onSessionTimeoutChange:this._handleSessionTimeoutChange,onPINTimeoutChange:this._handlePINTimeoutChange,onAdditionalKeyChange:this._handleAdditionalKeyChange,onKeyPINProtectionChange:this._handleKeyPINProtectionChange,onAccordionChange:this._handleAccordionChange,onMouseDownPassword:this._handleMouseDownPassword,onOpenQRScanner:this._handleOpenQRScanner}),r.createElement(be,{classes:n,username:_,selectedKeyType:T,pinEnabled:J,sessionTimeout:V,pinTimeout:W,additionalKeys:q,keyPINProtection:U,loginStatus:G,loginError:H,loginProgress:Q,rcPercent:K})),r.createElement(o.A,{style:{textAlign:"right"}},r.createElement(P.A,{in:h>0},r.createElement(l.A,{variant:"text",color:"primary",onClick:function(){return e._handleTabChange({},h-1)},disabled:0===h||"pending"===G},"BACK")),r.createElement(l.A,{variant:"contained",color:"primary",onClick:i,disabled:"pending"===G},"CANCEL"),r.createElement(l.A,{className:n.whiteButton,variant:"contained",color:"primary",onClick:this._handleConfirmClick,disabled:!this._canClickNext()||"pending"===G},this._getConfirmButtonText()))),r.createElement(R.A,null,r.createElement(j.A,{className:n.backdrop,open:b},r.createElement(E.A,{display:"flex",flexDirection:"column",alignItems:"center",gap:2},r.createElement(v.A,{color:"inherit"}),Q&&r.createElement(f.A,{variant:"body2"},Q)))),r.createElement(Y.default,{open:Z,onClose:this._handleCloseQRScanner,onScanResult:this._handleQRScanResult}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ue(r.key),r)}}(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a}(r.PureComponent);ge.defaultProps={open:!1,onClose:function(){},onLogin:function(){},api:null,requiredKeyType:null,requiredKeyHint:null,defaultUsername:"",defaultSessionTimeout:30,defaultPinTimeout:5};const ve=(0,a.default)((function(e){var t;return{backdrop:{zIndex:"1301",color:"#fff"},whiteButton:{"&.MuiButton-contained":{backgroundColor:"#d0d0d0",color:"#151515",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},"&.MuiButton-contained:hover":{backgroundColor:"#ffffff",color:"#000000",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},dialog:{"&.MuiDialog-paperFullWidth":{width:"min(100%, 620px) !important"}},buttonNotDisabled:{"&.MuiButtonBase-root.Mui-disabled":{cursor:"help",pointerEvents:"all"}},inputEndAdornment:{"& .MuiIconButton-root.Mui-disabled":{color:"#7b7b7b"},"& .MuiCircularProgress-colorSecondary":{color:"#7b7b7b",marginLeft:"8px"}},keyTypeToggleGroup:{marginTop:"16px",marginBottom:"16px",display:"flex",flexWrap:"wrap",justifyContent:"center","& .MuiToggleButtonGroup-grouped":(t={border:"1px solid #4a4a4a",padding:"8px 16px"},se(se(se(se(se(se(se(se(se(se(t,e.breakpoints.down("md"),{padding:"6px 12px"}),"flex","auto"),"textTransform","none"),"fontSize","13px"),"fontWeight",500),"color","#b0b0b0"),"backgroundColor","#171717"),"transition","color 125ms cubic-bezier(0.4, 0, 0.2, 1) 25ms, background-color 175ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"),"&:not(:first-child)",{borderLeft:"1px solid #4a4a4a",marginLeft:"-1px"}),"&:first-child",{borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px"}),se(se(se(se(t,"&:last-child",{borderTopRightRadius:"16px",borderBottomRightRadius:"16px"}),"&:hover",{backgroundColor:"#222",color:"#fff",zIndex:1}),"&.Mui-selected",{backgroundColor:"#fff",color:"#222",borderColor:"#fff",zIndex:2,"&:hover":{color:"#000"}}),"&.Mui-disabled",{opacity:.4,color:"#666"}))},qrScanButton:{padding:"8px",color:"#9b9b9b","&:hover":{color:"#ffffff",backgroundColor:"rgba(255, 255, 255, 0.1)"}},sliderContainer:{padding:"16px 8px",marginTop:"8px"},sliderLabel:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px","& .MuiSvgIcon-root":{marginRight:"8px",color:"#7b7b7b"}},keyToggleRow:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #333","&:last-child":{borderBottom:"none"}},summaryBox:{backgroundColor:"#171717",borderRadius:"12px",padding:"16px",marginBottom:"16px","& .summary-row":{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:"1px solid #2a2a2a","&:last-child":{borderBottom:"none"}},"& .summary-label":{color:"#9b9b9b",fontSize:"14px"},"& .summary-value":{color:"#fff",fontSize:"14px",fontWeight:500}},statusIndicator:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",borderRadius:"8px",marginTop:"16px","&.pending":{backgroundColor:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(150, 150, 150, 0.3)",color:"#b0b0b0"},"&.success":{backgroundColor:"rgba(200, 200, 200, 0.1)",border:"1px solid rgba(200, 200, 200, 0.3)",color:"#d0d0d0"},"&.error":{backgroundColor:"rgba(120, 120, 120, 0.1)",border:"1px solid rgba(120, 120, 120, 0.3)",color:"#a0a0a0"},"&.warning":{backgroundColor:"rgba(140, 140, 140, 0.1)",border:"1px solid rgba(140, 140, 140, 0.3)",color:"#b8b8b8"}},requiredHint:{backgroundColor:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(150, 150, 150, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px","& .MuiSvgIcon-root":{color:"#a0a0a0"}},rcIndicator:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",borderRadius:"8px",marginTop:"12px",backgroundColor:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(150, 150, 150, 0.2)","& .rc-bar":{flex:1,height:"6px",backgroundColor:"#1a1a1a",borderRadius:"3px",overflow:"hidden","& .rc-fill":{height:"100%",borderRadius:"3px",transition:"width 300ms ease"}}},pinStatusIndicator:{display:"flex",alignItems:"center",gap:"4px",marginLeft:"auto",fontSize:"12px","&.enabled":{color:"#9b9b9b"},"&.disabled":{color:"#9b9b9b"}}}}))(ge)},1663:(e,t,n)=>{n.d(t,{default:()=>L}),n(2),n(98),n(99),n(273),n(101),n(106),n(118),n(119),n(475),n(216),n(130),n(134),n(135),n(137),n(145),n(147),n(152),n(154),n(155),n(157),n(186),n(192),n(193),n(199),n(201),n(203),n(223),n(213),n(371);var r=n(228),a=n(376),o=n(659),i=n(661),l=n(664),c=n(455),s=n(955),u=n(967),d=n(674),m=n(956),p=n(964),f=n(449),y=n(666),h=n(465),b=n(1664),g=n(1665),v=n(1666),_=(n(100),n(103),n(116),n(278),n(287),n(288),n(132),n(138),n(153),n(195),n(492),n(318),n(320),n(321),n(322),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(333),n(335),n(337),n(338),n(339),n(340),n(341),n(342),n(347),n(348),n(349),n(208),n(369),n(210),n(1667));function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return k(s,"_invoke",function(n,r,a){var o,l,c,s=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,c=e,m.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!d&&s&&!a&&t<u.length;t++){var a,o=u[t],p=m.p,f=o[2];n>3?(a=f===r)&&(c=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,m.v=r,m.n=o[1]):p<f&&(a=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,m.n=f,l=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,f){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),l=u,c=f;(t=l<2?e:c)||!d;){o||(l?l<3?(l>1&&(m.n=-1),p(l,c)):m.n=c:m.v=c);try{if(s=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(d=m.n<0)?c:n.call(r,m))!==i)break}catch(t){o=e,l=1,c=t}finally{s=1}}return{value:t,done:d}}}(n,a,o),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(k(t={},r,(function(){return this})),t),d=s.prototype=l.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,k(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=s,k(d,"constructor",s),k(s,"constructor",c),c.displayName="GeneratorFunction",k(s,a,"GeneratorFunction"),k(d),k(d,a,"Generator"),k(d,r,(function(){return this})),k(d,"toString",(function(){return"[object Generator]"})),(w=function(){return{w:o,m}})()}function k(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}k=function(e,t,n,r){function o(t,n){k(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},k(e,t,n,r)}function A(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){A(o,r,a,i,l,"next",e)}function l(e){A(o,r,a,i,l,"throw",e)}i(void 0)}))}}function S(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}var x=function(){return e=function e(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.displayCanvas=document.getElementById(t),this.displayCtx=null===(n=this.displayCanvas)||void 0===n?void 0:n.getContext("bitmaprenderer"),this.analysisCanvas=document.createElement("canvas"),this.analysisCtx=this.analysisCanvas.getContext("2d",{willReadFrequently:!0}),this.video=document.createElement("video"),this.video.setAttribute("playsinline","true"),this.video.setAttribute("webkit-playsinline","true"),this.video.setAttribute("muted","true"),this.video.autoplay=!0,this.processor=null,this.memory=null,this.stream=null,this.isRunning=!1,this.isDestroyed=!1,this.lastScanTime=0,this.scanInterval=500,this.animationFrameId=null,this.onResult=null},t=[{key:"init",value:(i=C(w().m((function e(){var t,n,r=arguments;return w().w((function(e){for(;;)switch(e.n){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:"mixed",!this.isDestroyed){e.n=1;break}throw new Error("Scanner has been destroyed");case 1:if(this.processor){e.n=3;break}return e.n=2,(0,_.Ay)();case 2:n=e.v,this.memory=n.memory,this.processor=_.wG.new(1920,1920),this.setScanMode(t);case 3:return e.a(2)}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setScanMode",value:function(e){if(this.processor){var t={normal:0,both:1,reversed:2,mixed:3};Object.prototype.hasOwnProperty.call(t,e)&&this.processor.set_mode(t[e])}}},{key:"start",value:(o=C(w().m((function e(){var t,n,r,a=this,o=arguments;return w().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:null,!this.isDestroyed){e.n=1;break}throw new Error("Scanner has been destroyed");case 1:return this.stopStream(),n={audio:!1,video:{deviceId:t?{exact:t}:void 0,facingMode:t?void 0:"environment",width:{ideal:1920},height:{ideal:1920}}},e.p=2,e.n=3,navigator.mediaDevices.getUserMedia(n);case 3:if(this.stream=e.v,!this.isDestroyed){e.n=4;break}return this.stopStream(),e.a(2,!1);case 4:return this.video.srcObject=this.stream,this.applyFocusMode(),e.n=5,new Promise((function(e,t){var n=setTimeout((function(){return t(new Error("Video metadata timeout"))}),1e4);a.video.readyState>=1?(clearTimeout(n),e()):(a.video.onloadedmetadata=function(){clearTimeout(n),e()},a.video.onerror=function(){clearTimeout(n),t(new Error("Video loading error"))})}));case 5:if(!this.isDestroyed){e.n=6;break}return this.stopStream(),e.a(2,!1);case 6:return e.n=7,this.video.play();case 7:return this.setupResolution(),this.isRunning=!0,this.loop(),e.a(2,!0);case 8:if(e.p=8,r=e.v,this.stopStream(),t){e.n=9;break}return e.a(2,this.startBasic());case 9:throw r;case 10:return e.a(2)}}),e,this,[[2,8]])}))),function(){return o.apply(this,arguments)})},{key:"startBasic",value:(a=C(w().m((function e(){return w().w((function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isDestroyed){e.n=1;break}return e.a(2,!1);case 1:return e.p=1,e.n=2,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});case 2:if(this.stream=e.v,!this.isDestroyed){e.n=3;break}return this.stopStream(),e.a(2,!1);case 3:return this.video.srcObject=this.stream,e.n=4,this.video.play();case 4:return this.setupResolution(),this.isRunning=!0,this.loop(),e.a(2,!0);case 5:return e.p=5,e.v,e.a(2,!1)}}),e,this,[[1,5]])}))),function(){return a.apply(this,arguments)})},{key:"setupResolution",value:function(){var e=this.video.videoWidth,t=this.video.videoHeight;if(0!==e&&0!==t){var n=Math.min(1,1280/e);this.displayCanvas.width=e*n|0,this.displayCanvas.height=t*n|0;var r=Math.min(1,1920/e);this.analysisCanvas.width=e*r|0,this.analysisCanvas.height=t*r|0,this.processor&&this.processor.resize(this.analysisCanvas.width,this.analysisCanvas.height)}}},{key:"applyFocusMode",value:(r=C(w().m((function e(){var t,n;return w().w((function(e){for(;;)switch(e.p=e.n){case 0:if(this.stream){e.n=1;break}return e.a(2);case 1:if(t=this.stream.getVideoTracks()[0]){e.n=2;break}return e.a(2);case 2:if(e.p=2,!(n=t.getCapabilities()).focusMode||!n.focusMode.includes("continuous")){e.n=3;break}return e.n=3,t.applyConstraints({advanced:[{focusMode:"continuous"}]});case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}}),e,this,[[2,4]])}))),function(){return r.apply(this,arguments)})},{key:"stopStream",value:function(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.isRunning=!1,this.stream&&(this.stream.getTracks().forEach((function(e){e.stop()})),this.stream=null),this.video.pause(),this.video.srcObject=null,this.video.onloadedmetadata=null,this.video.onerror=null}},{key:"stop",value:function(){this.stopStream()}},{key:"destroy",value:function(){if(this.stop(),this.isDestroyed=!0,this.onResult=null,this.processor&&"function"==typeof this.processor.free)try{this.processor.free()}catch(e){}this.processor=null,this.memory=null,this.displayCanvas=null,this.displayCtx=null,this.analysisCanvas=null,this.analysisCtx=null}},{key:"toggleFlashlight",value:function(e){if(!this.stream)return Promise.resolve(!1);var t=this.stream.getVideoTracks()[0];return t?t.applyConstraints({advanced:[{torch:e}]}).then((function(){return!0})).catch((function(){return!1})):Promise.resolve(!1)}},{key:"loop",value:(n=C(w().m((function e(){var t,n,r=this;return w().w((function(e){for(;;)switch(e.p=e.n){case 0:if(this.isRunning&&!this.isDestroyed){e.n=1;break}return e.a(2);case 1:if(!(this.video.videoWidth>0&&this.displayCanvas)){e.n=6;break}return e.p=2,e.n=3,createImageBitmap(this.video,{resizeWidth:this.displayCanvas.width,resizeHeight:this.displayCanvas.height});case 3:t=e.v,this.displayCtx&&this.isRunning&&this.displayCtx.transferFromImageBitmap(t),e.n=5;break;case 4:e.p=4,e.v;case 5:(n=performance.now())-this.lastScanTime>this.scanInterval&&(this.lastScanTime=n,this.scanFrame());case 6:this.isRunning&&!this.isDestroyed&&(this.animationFrameId=requestAnimationFrame((function(){return r.loop()})));case 7:return e.a(2)}}),e,this,[[2,4]])}))),function(){return n.apply(this,arguments)})},{key:"scanFrame",value:function(){if(this.isRunning&&!this.isDestroyed&&this.processor&&this.memory){var e=this.analysisCanvas.width,t=this.analysisCanvas.height;if(0!==e&&0!==t)try{this.analysisCtx.drawImage(this.video,0,0,e,t);var n=this.analysisCtx.getImageData(0,0,e,t),r=this.processor.get_buffer_ptr();new Uint8Array(this.memory.buffer,r,e*t*4).set(n.data);var a=this.processor.scan_stream(),o=JSON.parse(a);o.found&&this.onResult&&o.content&&"Decoding..."!==o.content&&this.onResult(o.content)}catch(e){}}}}],t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a,o,i}();function P(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return T(s,"_invoke",function(n,r,a){var o,l,c,s=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,c=e,m.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!d&&s&&!a&&t<u.length;t++){var a,o=u[t],p=m.p,f=o[2];n>3?(a=f===r)&&(c=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,m.v=r,m.n=o[1]):p<f&&(a=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,m.n=f,l=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,f){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),l=u,c=f;(t=l<2?e:c)||!d;){o||(l?l<3?(l>1&&(m.n=-1),p(l,c)):m.n=c:m.v=c);try{if(s=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(d=m.n<0)?c:n.call(r,m))!==i)break}catch(t){o=e,l=1,c=t}finally{s=1}}return{value:t,done:d}}}(n,a,o),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(T(t={},r,(function(){return this})),t),d=s.prototype=l.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,T(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=s,T(d,"constructor",s),T(s,"constructor",c),c.displayName="GeneratorFunction",T(s,a,"GeneratorFunction"),T(d),T(d,a,"Generator"),T(d,r,(function(){return this})),T(d,"toString",(function(){return"[object Generator]"})),(P=function(){return{w:o,m}})()}function T(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}T=function(e,t,n,r){function o(t,n){T(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},T(e,t,n,r)}function O(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){O(o,r,a,i,l,"next",e)}function l(e){O(o,r,a,i,l,"throw",e)}i(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var R=(0,r.memo)((function(e){var t=e.containerWidth,n=void 0===t?400:t,a=e.containerHeight,o=void 0===a?300:a,i=e.maskSize,l=void 0===i?200:i,c=e.cornerLength,s=void 0===c?30:c,u=e.cornerRadius,d=void 0===u?12:u,m=e.lineWidth,p=void 0===m?6:m,f=e.lineColor,y=void 0===f?"#ffffff":f,h=e.maskColor,b=void 0===h?"rgba(0, 0, 0, 0.6)":h,g=Math.min(d,s),v=n/2,_=o/2,E=l/2,w=v-E,k=_-E,A=v+E,C=_+E,S=g,x=Math.min(s,l/2),P=["M ".concat(w," ").concat(k+x," L ").concat(w," ").concat(k+S," Q ").concat(w," ").concat(k," ").concat(w+S," ").concat(k," L ").concat(w+x," ").concat(k),"M ".concat(A-x," ").concat(k," L ").concat(A-S," ").concat(k," Q ").concat(A," ").concat(k," ").concat(A," ").concat(k+S," L ").concat(A," ").concat(k+x),"M ".concat(A," ").concat(C-x," L ").concat(A," ").concat(C-S," Q ").concat(A," ").concat(C," ").concat(A-S," ").concat(C," L ").concat(A-x," ").concat(C),"M ".concat(w+x," ").concat(C," L ").concat(w+S," ").concat(C," Q ").concat(w," ").concat(C," ").concat(w," ").concat(C-S," L ").concat(w," ").concat(C-x)].join(" "),T="scannerMaskPixels-".concat(n,"-").concat(o);return r.createElement("svg",{width:n,height:o,viewBox:"0 0 ".concat(n," ").concat(o),style:{position:"absolute",top:0,left:0,pointerEvents:"none"}},r.createElement("defs",null,r.createElement("mask",{id:T},r.createElement("rect",{x:"0",y:"0",width:n,height:o,fill:"white"}),r.createElement("rect",{x:w,y:k,width:l,height:l,rx:g,ry:g,fill:"black"}))),r.createElement("rect",{x:"0",y:"0",width:n,height:o,fill:b,mask:"url(#".concat(T,")")}),r.createElement("path",{d:P,fill:"none",stroke:y,strokeWidth:p,strokeLinecap:"round",strokeLinejoin:"round"}))})),M=(0,r.memo)((function(e){var t=e.classes,n=e.onCanvasReady,a=e.isLoading,o=(0,r.useRef)(null),i=N((0,r.useState)({width:400,height:300}),2),l=i[0],c=i[1];(0,r.useEffect)((function(){var e=function(){if(o.current){var e=o.current,t=e.offsetWidth,n=e.offsetHeight;t>0&&n>0&&c({width:t,height:n})}};e();var t=new ResizeObserver(e);return o.current&&t.observe(o.current),function(){return t.disconnect()}}),[]);var s=.75*Math.min(l.width,l.height);return r.createElement("div",{className:t.canvasContainer,ref:o},a&&r.createElement(f.A,{in:!0,timeout:500},r.createElement(y.A,{style:{color:"#fff",position:"absolute",zIndex:20}})),r.createElement("canvas",{id:"qr-scanner-canvas",className:t.canvas,ref:n}),!a&&r.createElement(R,{containerWidth:l.width,containerHeight:l.height,maskSize:s,cornerLength:64,cornerRadius:24,lineWidth:12,lineColor:"#ffffff",maskColor:"rgba(0, 0, 0, 0.6)"}))}),(function(e,t){return e.isLoading===t.isLoading}));const L=(0,a.default)((function(e){return{dialog:{"& .MuiDialogContent-root":{padding:"8px 24px 0px 24px"}},canvasContainer:{width:"100%",backgroundColor:"#eee",borderRadius:"21px",overflow:"hidden",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",contain:"paint style layout"},canvas:{width:"100%",maxWidth:"100%",maxHeight:"100%",display:"block"},scannerOverlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:10},controlsRow:{marginTop:e.spacing(2),marginBottom:e.spacing(1),display:"flex",justifyContent:"space-between",alignItems:"center",gap:e.spacing(2)},selectDropdown:{"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:"rgba(0,0,0,0.05)",color:"#000000","&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#666"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#000000"}},"& .MuiSelect-icon":{color:"#333"},"& .MuiInputLabel-root":{color:"#333"},"& .MuiInputLabel-root.Mui-focused":{color:"#000"}},flashBtn:{backgroundColor:"rgba(0,0,0,0.05)",color:"#000",padding:"12px","&:hover":{backgroundColor:"rgba(0,0,0,0.15)"}}}}))((function(e){var t=e.classes,n=e.open,a=e.onClose,f=e.onScanResult,y=N((0,r.useState)([]),2),_=y[0],E=y[1],w=N((0,r.useState)(""),2),k=w[0],A=w[1],C=N((0,r.useState)(!1),2),S=C[0],T=C[1],O=N((0,r.useState)(!0),2),j=O[0],R=O[1],L=N((0,r.useState)(!1),2),K=L[0],z=L[1],D=(0,r.useRef)(null),B=(0,r.useRef)(null),F=(0,r.useRef)(0),V=(0,r.useRef)(!1),W=(0,r.useCallback)((function(){var e=B.current;if(e){try{e.stop(),e.onResult=null}catch(e){}B.current=null}}),[]),q=(0,r.useCallback)((function(){E([]),A(""),T(!1),R(!0),z(!1),V.current=!1}),[]);(0,r.useEffect)((function(){if(!n)return W(),void q();var e=++F.current;V.current=!1;var t=function(){return e===F.current},r=function(){var e=I(P().m((function e(){var n,r,o,i,l,c;return P().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,new Promise((function(e){return setTimeout(e,50)}));case 1:if(t()){e.n=2;break}return e.a(2);case 2:if(D.current){e.n=3;break}return e.a(2);case 3:if(e.p=3,R(!0),z(!1),n=new x("qr-scanner-canvas"),t()){e.n=4;break}return e.a(2);case 4:return e.n=5,n.init();case 5:if(t()){e.n=6;break}return n.stop(),e.a(2);case 6:return n.onResult=function(e){t()&&!V.current&&(V.current=!0,navigator.vibrate&&navigator.vibrate(200),n.stop(),f(e),a())},e.n=7,n.start();case 7:if(t()){e.n=8;break}return n.stop(),e.a(2);case 8:return B.current=n,e.n=9,navigator.mediaDevices.enumerateDevices();case 9:if(r=e.v,o=r.filter((function(e){return"videoinput"===e.kind})),t()){e.n=10;break}return n.stop(),B.current=null,e.a(2);case 10:E(o),i="",n.stream&&(l=n.stream.getVideoTracks()).length>0&&(c=l[0].getSettings(),i=c.deviceId||""),i?A(i):o.length>0&&A(o[o.length-1].deviceId),R(!1),e.n=12;break;case 11:e.p=11,e.v,t()&&(z(!0),R(!1));case 12:return e.a(2)}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return r(),function(){F.current++,W()}}),[n,f,a,W,q]),(0,r.useEffect)((function(){return function(){F.current++,W()}}),[W]);var U=(0,r.useCallback)((function(){F.current++,W(),q(),a()}),[W,q,a]),G=(0,r.useCallback)(function(){var e=I(P().m((function e(t){var n,r;return P().w((function(e){for(;;)switch(e.p=e.n){case 0:if(n=t.target.value,A(n),!(r=B.current)){e.n=5;break}return e.p=1,R(!0),e.n=2,r.start(n);case 2:T(!1),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,R(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(t){return e.apply(this,arguments)}}(),[]),H=(0,r.useCallback)(I(P().m((function e(){var t,n;return P().w((function(e){for(;;)switch(e.n){case 0:if(!(t=B.current)){e.n=2;break}return n=!S,e.n=1,t.toggleFlashlight(n);case 1:T(n);case 2:return e.a(2)}}),e)}))),[S]),Q=(0,r.useCallback)((function(e){D.current=e}),[]);return r.createElement(o.A,{className:t.dialog,open:n,maxWidth:!1,onClose:U,PaperProps:{style:{width:"min(calc(100% - 32px), 800px)",maxWidth:"none",backgroundColor:"#ffffff",color:"#000000"}}},r.createElement(i.A,{style:{position:"relative",overflow:"hidden"}},r.createElement(c.A,{onClick:U,style:{position:"absolute",right:8,top:8,color:"#000000",zIndex:100}},r.createElement(h.A,null)),r.createElement(l.A,{style:{marginTop:8,marginBottom:16},component:"h2",variant:"h6"},"Scan QR Code"),K?r.createElement(s.A,{className:t.canvasContainer,style:{flexDirection:"column",gap:16,border:"2px dashed #555",minHeight:300}},r.createElement(v.A,{style:{fontSize:48,color:"#000000"}}),r.createElement(l.A,{variant:"h6"},"Camera Blocked"),r.createElement(l.A,{variant:"body2",style:{color:"#101010",padding:"0 24px",textAlign:"center"}},"Please check browser permissions.")):r.createElement(M,{classes:t,isLoading:j,onCanvasReady:Q}),r.createElement(s.A,{className:t.controlsRow},r.createElement(m.A,{variant:"outlined",className:t.selectDropdown,size:"small",style:{flexGrow:1}},r.createElement(p.A,null,"Camera"),r.createElement(u.A,{value:k,onChange:G,label:"Camera",disabled:0===_.length,MenuProps:{PaperProps:{style:{backgroundColor:"#eee",color:"#202020"}}}},_.map((function(e,t){return r.createElement(d.A,{key:e.deviceId||t,value:e.deviceId},e.label||"Camera ".concat(t+1))})))),r.createElement(c.A,{className:t.flashBtn,onClick:H,disabled:j||K},S?r.createElement(b.A,{style:{color:"#000000"}}):r.createElement(g.A,{style:{color:"#202020"}})))))}))}}]);