(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([[9],{862:(e,t,n)=>{"use strict";n(307)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},863:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{$y:()=>s.$y,OS:()=>s.OS,QQ:()=>s.QQ,s5:()=>s.s5});var i=n(864),s=n(865),o=e([i]);i=(o.then?(await o)():o)[0],(0,s.lI)(i),r()}catch(e){r(e)}}))},864:(e,t,n)=>{"use strict";var r=n(865);e.exports=n.v(t,e.id,"2afb3eabf87d5b450caa",{"./wasm_hash_module_bg.js":{__wbg_new_78feb108b6472713:r.M2,__wbg_length_e2d2a49132c1b256:r.Ry,__wbg_get_b9b93047fe3cf45b:r.RK,__wbg_instanceof_Uint8Array_17156bcf118086a9:r.SJ,__wbg_length_a446193dc22c12f8:r.eI,__wbindgen_memory:r.Py,__wbg_buffer_609cc3eee51ed158:r.FH,__wbg_new_a12002a7f91c75be:r.vV,__wbindgen_object_drop_ref:r.bk,__wbg_set_65595bdd868b3009:r.HB,__wbindgen_string_new:r.yc,__wbg_push_737cfc8c1432c2c6:r.tZ,__wbg_now_807e54c39636c349:r.f3,__wbindgen_throw:r.Qn}})},865:(e,t,n)=>{"use strict";let r;function i(e){r=e}n.d(t,{$y:()=>x,FH:()=>y,HB:()=>N,M2:()=>E,OS:()=>m,Py:()=>k,QQ:()=>b,Qn:()=>I,RK:()=>C,Ry:()=>L,SJ:()=>B,bk:()=>A,eI:()=>D,f3:()=>S,lI:()=>i,s5:()=>w,tZ:()=>P,vV:()=>T,yc:()=>R});const s=new Array(128).fill(void 0);function o(e){return s[e]}s.push(void 0,null,!0,!1);let a=s.length;function c(e){a===s.length&&s.push(s.length+1);const t=a;return a=s[t],s[t]=e,t}let d=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});d.decode();let l=null;function u(){return null!==l&&0!==l.byteLength||(l=new Uint8Array(r.memory.buffer)),l}function f(e,t){return e>>>=0,d.decode(u().subarray(e,e+t))}let h=0,_=null;function p(){return(null===_||!0===_.buffer.detached||void 0===_.buffer.detached&&_.buffer!==r.memory.buffer)&&(_=new DataView(r.memory.buffer)),_}function b(e,t){let n,i;try{const a=r.__wbindgen_add_to_stack_pointer(-16),c=function(e,t){const n=t(1*e.length,1)>>>0;return u().set(e,n/1),h=e.length,n}(e,r.__wbindgen_export_0),d=h;r.museair_hash(a,c,d,t);var s=p().getInt32(a+0,!0),o=p().getInt32(a+4,!0);return n=s,i=o,f(s,o)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_export_1(n,i,1)}}let g=new("undefined"==typeof TextEncoder?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const v="function"==typeof g.encodeInto?function(e,t){return g.encodeInto(e,t)}:function(e,t){const n=g.encode(e);return t.set(n),{read:e.length,written:n.length}};function w(e){try{const a=r.__wbindgen_add_to_stack_pointer(-16),c=function(e,t,n){if(void 0===n){const n=g.encode(e),r=t(n.length,1)>>>0;return u().subarray(r,r+n.length).set(n),h=n.length,r}let r=e.length,i=t(r,1)>>>0;const s=u();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;s[i+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),i=n(i,r,r=o+3*e.length,1)>>>0;const t=u().subarray(i+o,i+r);o+=v(e,t).written,i=n(i,r,o,1)>>>0}return h=o,i}(e,r.__wbindgen_export_0,r.__wbindgen_export_2),d=h;r.string_to_bytes(a,c,d);var t=p().getInt32(a+0,!0),n=p().getInt32(a+4,!0),i=(s=t,o=n,s>>>=0,u().subarray(s/1,s/1+o)).slice();return r.__wbindgen_export_1(t,1*n,1),i}finally{r.__wbindgen_add_to_stack_pointer(16)}var s,o}function m(){r.clear_memory()}const x=Object.freeze({Hex:0,0:"Hex",Base58:1,1:"Base58",Base64:2,2:"Base64"});function y(e){return c(o(e).buffer)}function C(e,t){return c(o(e)[t>>>0])}function B(e){let t;try{t=o(e)instanceof Uint8Array}catch(e){t=!1}return t}function D(e){return o(e).length}function L(e){return o(e).length}function E(){return c(new Array)}function T(e){return c(new Uint8Array(o(e)))}function S(){return Date.now()}function P(e,t){return o(e).push(o(t))}function N(e,t,n){o(e).set(o(t),n>>>0)}function k(){return c(r.memory)}function A(e){var t;o(t=e),function(e){e<132||(s[e]=a,a=e)}(t)}function R(e,t){return c(f(e,t))}function I(e,t){throw new Error(f(e,t))}"undefined"==typeof FinalizationRegistry||new FinalizationRegistry((e=>r.__wbg_hashcomparison_free(e>>>0,1))),"undefined"==typeof FinalizationRegistry||new FinalizationRegistry((e=>r.__wbg_xxh3hasher_free(e>>>0,1)))},866:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r,i=n(494);const s=(r="file:///home/asaitama/Documents/pixagram-blockchain.github.io/node_modules/@jsquash/webp/codec/dec/webp_dec.js",function(e={}){var t,s;(e=void 0!==e?e:{}).ready=new Promise((function(e,n){t=e,s=n}));const o=void 0!==globalThis.ServiceWorkerGlobalScope&&"undefined"!=typeof self&&globalThis.caches&&void 0!==globalThis.caches.default,a="object"==typeof i&&i.release&&"node"===i.release.name;(o||a)&&(globalThis.ImageData||(globalThis.ImageData=class{constructor(e,t,n){this.data=e,this.width=t,this.height=n}}),"undefined"!=typeof self&&void 0===self.location&&(self.location={href:""}));var c,d=Object.assign({},e),l="object"==typeof window,u="function"==typeof importScripts,f=("object"==typeof i&&"object"==typeof i.versions&&i.versions.node,"");(l||u)&&(u?f=self.location.href:"undefined"!=typeof document&&document.currentScript&&(f=document.currentScript.src),r&&(f=r),f=0!==f.indexOf("blob:")?f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):"",u&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),e.print;var h,_,p=e.printErr||void 0;Object.assign(e,d),d=null,e.arguments&&e.arguments,e.thisProgram&&e.thisProgram,e.quit&&e.quit,e.wasmBinary&&(h=e.wasmBinary),e.noExitRuntime,"object"!=typeof WebAssembly&&I("no native wasm support detected");var b,g,v,w,m,x,y,C,B,D=!1;function L(){var t=_.buffer;e.HEAP8=b=new Int8Array(t),e.HEAP16=v=new Int16Array(t),e.HEAP32=m=new Int32Array(t),e.HEAPU8=g=new Uint8Array(t),e.HEAPU16=w=new Uint16Array(t),e.HEAPU32=x=new Uint32Array(t),e.HEAPF32=y=new Float32Array(t),e.HEAPF64=C=new Float64Array(t)}var E,T,S=[],P=[],N=[],k=0,A=null,R=null;function I(t){e.onAbort&&e.onAbort(t),p(t="Aborted("+t+")"),D=!0,t+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(t);throw s(n),n}function O(e){return e.startsWith("data:application/octet-stream;base64,")}function Y(e){try{if(e==E&&h)return new Uint8Array(h);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){I(e)}}function z(e,t,n){return function(e){return h||!l&&!u||"function"!=typeof fetch?Promise.resolve().then((function(){return Y(e)})):fetch(e,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((function(){return Y(e)}))}(e).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(n,(function(e){p("failed to asynchronously prepare wasm: "+e),I(e)}))}function M(t){for(;t.length>0;)t.shift()(e)}function q(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){x[this.ptr+4>>2]=e},this.get_type=function(){return x[this.ptr+4>>2]},this.set_destructor=function(e){x[this.ptr+8>>2]=e},this.get_destructor=function(){return x[this.ptr+8>>2]},this.set_refcount=function(e){m[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,b[this.ptr+12|0]=e},this.get_caught=function(){return 0!=b[this.ptr+12|0]},this.set_rethrown=function(e){e=e?1:0,b[this.ptr+13|0]=e},this.get_rethrown=function(){return 0!=b[this.ptr+13|0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=m[this.ptr>>2];m[this.ptr>>2]=e+1},this.release_ref=function(){var e=m[this.ptr>>2];return m[this.ptr>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){x[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return x[this.ptr+16>>2]},this.get_exception_ptr=function(){if(Le(this.get_type()))return x[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}function U(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}e.locateFile?O(E="webp_dec.wasm")||(T=E,E=e.locateFile?e.locateFile(T,f):f+T):E=new URL(n(867),n.b).href;var j=void 0;function F(e){for(var t="",n=e;g[n];)t+=j[g[n++]];return t}var $={},W={},G={};function X(e,t){var n,r,i=(r=function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))},n=function(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}(n=t),{[n]:function(){return r.apply(this,arguments)}}[n]);return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},i}var H=void 0;function V(e){throw new H(e)}var Q=void 0;function Z(e){throw new Q(e)}function J(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||V('type "'+r+'" must have a positive integer typeid pointer'),W.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;V("Cannot register type '"+r+"' twice")}if(W[e]=t,delete G[e],$.hasOwnProperty(e)){var i=$[e];delete $[e],i.forEach((e=>e()))}}var K=[],ee=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function te(e){e>4&&0==--ee[e].refcount&&(ee[e]=void 0,K.push(e))}var ne=e=>(e||V("Cannot use deleted val. handle = "+e),ee[e].value),re=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=K.length?K.pop():ee.length;return ee[t]={refcount:1,value:e},t}};function ie(e){return this.fromWireType(m[e>>2])}function se(e,t){switch(t){case 2:return function(e){return this.fromWireType(y[e>>2])};case 3:return function(e){return this.fromWireType(C[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}var oe=[];function ae(e){var t=oe[e];return t||(e>=oe.length&&(oe.length=e+1),oe[e]=t=B.get(e)),t}var ce=void 0;function de(e){var t=De(e),n=F(t);return Be(t),n}function le(e,t,n){switch(t){case 0:return n?function(e){return b[e]}:function(e){return g[e]};case 1:return n?function(e){return v[e>>1]}:function(e){return w[e>>1]};case 2:return n?function(e){return m[e>>2]}:function(e){return x[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function ue(e,t){for(var n="",r=0;!(r>=t/2);++r){var i=v[e+2*r>>1];if(0==i)break;n+=String.fromCharCode(i)}return n}function fe(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,s=0;s<i;++s){var o=e.charCodeAt(s);v[t>>1]=o,t+=2}return v[t>>1]=0,t-r}function he(e){return 2*e.length}function _e(e,t){for(var n=0,r="";!(n>=t/4);){var i=m[e+4*n>>2];if(0==i)break;if(++n,i>=65536){var s=i-65536;r+=String.fromCharCode(55296|s>>10,56320|1023&s)}else r+=String.fromCharCode(i)}return r}function pe(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,i=r+n-4,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),m[t>>2]=o,(t+=4)+4>i)break}return m[t>>2]=0,t-r}function be(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}var ge={};function ve(){if("object"==typeof globalThis)return globalThis;function e(e){e.$$$embind_global$$$=e;var t="object"==typeof $$$embind_global$$$&&e.$$$embind_global$$$==e;return t||delete e.$$$embind_global$$$,t}if("object"==typeof $$$embind_global$$$)return $$$embind_global$$$;if("object"==typeof global&&e(global)?$$$embind_global$$$=global:"object"==typeof self&&e(self)&&($$$embind_global$$$=self),"object"==typeof $$$embind_global$$$)return $$$embind_global$$$;throw Error("unable to get global object.")}var we={};function me(e){var t=_.buffer;try{return _.grow(e-t.byteLength+65535>>>16),L(),1}catch(e){}}!function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);j=e}(),H=e.BindingError=X(Error,"BindingError"),Q=e.InternalError=X(Error,"InternalError"),e.count_emval_handles=function(){for(var e=0,t=5;t<ee.length;++t)void 0!==ee[t]&&++e;return e},e.get_first_emval=function(){for(var e=5;e<ee.length;++e)if(void 0!==ee[e])return ee[e];return null},ce=e.UnboundTypeError=X(Error,"UnboundTypeError");var xe,ye={n:function(e,t,n){throw new q(e).init(t,n),e},o:function(e,t,n,r,i){},l:function(e,t,n,r,i){var s=U(n);J(e,{name:t=F(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=b;else if(2===n)r=v;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=m}return this.fromWireType(r[e>>s])},destructorFunction:null})},r:function(e,t){J(e,{name:t=F(t),fromWireType:function(e){var t=ne(e);return te(e),t},toWireType:function(e,t){return re(t)},argPackAdvance:8,readValueFromPointer:ie,destructorFunction:null})},k:function(e,t,n){var r=U(n);J(e,{name:t=F(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:se(t,r),destructorFunction:null})},c:function(t,n,r,i,s,o,a){var c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(x[t+4*r>>2]);return n}(n,r);t=F(t),s=function(t,n){var r,i,s,o=(t=F(t)).includes("j")?(r=t,i=n,s=[],function(){return s.length=0,Object.assign(s,arguments),function(t,n,r){return t.includes("j")?function(t,n,r){var i=e["dynCall_"+t];return r&&r.length?i.apply(null,[n].concat(r)):i.call(null,n)}(t,n,r):ae(n).apply(null,r)}(r,i,s)}):ae(n);return"function"!=typeof o&&V("unknown function pointer with signature "+t+": "+n),o}(i,s),function(t,n,r){e.hasOwnProperty(t)?((void 0===r||void 0!==e[t].overloadTable&&void 0!==e[t].overloadTable[r])&&V("Cannot register public name '"+t+"' twice"),function(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||V("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}(e,t,t),e.hasOwnProperty(r)&&V("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),e[t].overloadTable[r]=n):(e[t]=n,void 0!==r&&(e[t].numArguments=r))}(t,(function(){!function(e,t){var n=[],r={};throw t.forEach((function e(t){r[t]||W[t]||(G[t]?G[t].forEach(e):(n.push(t),r[t]=!0))})),new ce(e+": "+n.map(de).join([", "]))}("Cannot call "+t+" due to unbound types",c)}),n-1),function(r,i){function a(i){var a=function(r){var i=[r[0],null].concat(r.slice(1));return function(t,n,r){e.hasOwnProperty(t)||Z("Replacing nonexistant public symbol"),void 0!==e[t].overloadTable&&void 0!==r?e[t].overloadTable[r]=n:(e[t]=n,e[t].argCount=r)}(t,function(e,t,n,r,i){var s=t.length;s<2&&V("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&!1,a=!1,c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){a=!0;break}var d="void"!==t[0].name,l=s-2,u=new Array(l),f=[],h=[];return function(){var n;arguments.length!==l&&V("function "+e+" called with "+arguments.length+" arguments, expected "+l+" args!"),h.length=0,f.length=o?2:1,f[0]=i,o&&(n=t[1].toWireType(h,this),f[1]=n);for(var s=0;s<l;++s)u[s]=t[s+2].toWireType(h,arguments[s]),f.push(u[s]);return function(e){if(a)!function(e){for(;e.length;){var t=e.pop();e.pop()(t)}}(h);else for(var r=o?1:2;r<t.length;r++){var i=1===r?n:u[r-2];null!==t[r].destructorFunction&&t[r].destructorFunction(i)}if(d)return t[0].fromWireType(e)}(r.apply(null,f))}}(t,i,0,s,o),n-1),[]}(i);a.length!==r.length&&Z("Mismatched type converter count");for(var c=0;c<r.length;++c)J(r[c],a[c])}r.forEach((function(e){G[e]=i}));var c=new Array(i.length),d=[],l=0;i.forEach(((e,t)=>{W.hasOwnProperty(e)?c[t]=W[e]:(d.push(e),$.hasOwnProperty(e)||($[e]=[]),$[e].push((()=>{c[t]=W[e],++l===d.length&&a(c)})))})),0===d.length&&a(c)}([],c)},b:function(e,t,n,r,i){t=F(t),-1===i&&(i=4294967295);var s=U(n),o=e=>e;if(0===r){var a=32-8*n;o=e=>e<<a>>>a}var c=t.includes("unsigned");J(e,{name:t,fromWireType:o,toWireType:c?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:le(t,s,0!==r),destructorFunction:null})},a:function(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=x,n=t[e>>=2],i=t[e+1];return new r(t.buffer,i,n)}J(e,{name:n=F(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},g:function(e,t){var n="std::string"===(t=F(t));J(e,{name:t,fromWireType:function(e){var t,r,i=x[e>>2],s=e+4;if(n)for(var o=s,a=0;a<=i;++a){var c=s+a;if(a==i||0==g[c]){var d=(r=o)?function(e,t,n){for(var r=t+n,i="";!(t>=r);){var s=e[t++];if(!s)return i;if(128&s){var o=63&e[t++];if(192!=(224&s)){var a=63&e[t++];if((s=224==(240&s)?(15&s)<<12|o<<6|a:(7&s)<<18|o<<12|a<<6|63&e[t++])<65536)i+=String.fromCharCode(s);else{var c=s-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&s)<<6|o)}else i+=String.fromCharCode(s)}return i}(g,r,c-o):"";void 0===t?t=d:(t+=String.fromCharCode(0),t+=d),o=c+1}}else{var l=new Array(i);for(a=0;a<i;++a)l[a]=String.fromCharCode(g[s+a]);t=l.join("")}return Be(e),t},toWireType:function(e,t){var r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"==typeof t;i||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||V("Cannot pass non-string to std::string"),r=n&&i?function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t}(t):t.length;var s=Ce(4+r+1),o=s+4;if(x[s>>2]=r,n&&i)!function(e,t,n,r){if(!(r>0))return 0;for(var i=n+r-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),o<=127){if(n>=i)break;t[n++]=o}else if(o<=2047){if(n+1>=i)break;t[n++]=192|o>>6,t[n++]=128|63&o}else if(o<=65535){if(n+2>=i)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|63&o}else{if(n+3>=i)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|63&o}}t[n]=0}(t,g,o,r+1);else if(i)for(var a=0;a<r;++a){var c=t.charCodeAt(a);c>255&&(Be(o),V("String has UTF-16 code units that do not fit in 8 bits")),g[o+a]=c}else for(a=0;a<r;++a)g[o+a]=t[a];return null!==e&&e.push(Be,s),s},argPackAdvance:8,readValueFromPointer:ie,destructorFunction:function(e){Be(e)}})},f:function(e,t,n){var r,i,s,o,a;n=F(n),2===t?(r=ue,i=fe,o=he,s=()=>w,a=1):4===t&&(r=_e,i=pe,o=be,s=()=>x,a=2),J(e,{name:n,fromWireType:function(e){for(var n,i=x[e>>2],o=s(),c=e+4,d=0;d<=i;++d){var l=e+4+d*t;if(d==i||0==o[l>>a]){var u=r(c,l-c);void 0===n?n=u:(n+=String.fromCharCode(0),n+=u),c=l+t}}return Be(e),n},toWireType:function(e,r){"string"!=typeof r&&V("Cannot pass non-string to C++ string type "+n);var s=o(r),c=Ce(4+s+t);return x[c>>2]=s>>a,i(r,c+4,s+t),null!==e&&e.push(Be,c),c},argPackAdvance:8,readValueFromPointer:ie,destructorFunction:function(e){Be(e)}})},m:function(e,t){J(e,{isVoid:!0,name:t=F(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},d:te,e:function(e){return 0===e?re(ve()):(e=void 0===(n=ge[t=e])?F(t):n,re(ve()[e]));var t,n},i:function(e){e>4&&(ee[e].refcount+=1)},h:function(e,t,n,r){e=ne(e);var i=we[t];return i||(i=function(e){var t=new Array(e+1);return function(n,r,i){t[0]=n;for(var s=0;s<e;++s){var o=(a=x[r+4*s>>2],c="parameter "+s,void 0===(d=W[a])&&V(c+" has unknown type "+de(a)),d);t[s+1]=o.readValueFromPointer(i),i+=o.argPackAdvance}var a,c,d,l=new(n.bind.apply(n,t));return re(l)}}(t),we[t]=i),i(e,n,r)},j:function(){I("")},q:function(e,t,n){g.copyWithin(e,t,t+n)},p:function(e){var t,n=g.length,r=2147483648;if((e>>>=0)>r)return!1;for(var i=1;i<=4;i*=2){var s=n*(1+.2/i);if(s=Math.min(s,e+100663296),me(Math.min(r,(t=Math.max(e,s))+(65536-t%65536)%65536)))return!0}return!1}},Ce=(function(){var t,n,r,i,o={a:ye};function a(t,n){var r,i=t.exports;return e.asm=i,_=e.asm.s,L(),B=e.asm.y,r=e.asm.t,P.unshift(r),function(){if(k--,e.monitorRunDependencies&&e.monitorRunDependencies(k),0==k&&(null!==A&&(clearInterval(A),A=null),R)){var t=R;R=null,t()}}(),i}if(k++,e.monitorRunDependencies&&e.monitorRunDependencies(k),e.instantiateWasm)try{return e.instantiateWasm(o,a)}catch(e){p("Module.instantiateWasm callback failed with error: "+e),s(e)}(t=h,n=E,r=o,i=function(e){a(e.instance)},t||"function"!=typeof WebAssembly.instantiateStreaming||O(n)||"function"!=typeof fetch?z(n,r,i):fetch(n,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(i,(function(e){return p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),z(n,r,i)}))}))).catch(s)}(),function(){return(Ce=e.asm.u).apply(null,arguments)}),Be=function(){return(Be=e.asm.v).apply(null,arguments)},De=e.___getTypeName=function(){return(De=e.___getTypeName=e.asm.w).apply(null,arguments)},Le=(e.__embind_initialize_bindings=function(){return(e.__embind_initialize_bindings=e.asm.x).apply(null,arguments)},function(){return(Le=e.asm.z).apply(null,arguments)});function Ee(){function n(){xe||(xe=!0,e.calledRun=!0,D||(M(P),t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),N.unshift(t);var t;M(N)}()))}k>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),S.unshift(t);var t;M(S)}(),k>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n()))}if(R=function e(){xe||Ee(),xe||(R=e)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Ee(),e.ready});var o=n(868);let a;async function c(e){a||async function(e,t){let n=e,r=t;1!==arguments.length||e instanceof WebAssembly.Module||(n=void 0,r=e),a=(0,o.d)(s,n,r)}();const t=(await a).decode(e);if(!t)throw new Error("Decoding error");return t}},867:(e,t,n)=>{"use strict";e.exports=n.p+"650fe24327284bd87050.wasm"},868:(e,t,n)=>{"use strict";function r(e,t,n={}){let r;return t&&(r=(e,n)=>{const r=new WebAssembly.Instance(t,e);return n(r),r.exports}),e({noInitialRun:!0,instantiateWasm:r,...n})}n.d(t,{d:()=>r})},869:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>y});var r=n(494);let i;const s=new Array(128).fill(void 0);s.push(void 0,null,!0,!1);let o=s.length;function a(e){o===s.length&&s.push(s.length+1);const t=o;return o=s[t],s[t]=e,t}function c(e){return s[e]}function d(e){const t=c(e);return function(e){e<132||(s[e]=o,o=e)}(e),t}const l="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&l.decode();let u=null;function f(){return null!==u&&0!==u.byteLength||(u=new Uint8Array(i.memory.buffer)),u}let h=null,_=0;function p(e,t){const n=t(1*e.length,1)>>>0;return f().set(e,n/1),_=e.length,n}let b=null;class g{static __wrap(e){e>>>=0;const t=Object.create(g.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_imagedatargba16_free(e)}get width(){return i.imagedatargba16_width(this.__wbg_ptr)>>>0}get height(){return i.imagedatargba16_height(this.__wbg_ptr)>>>0}get data(){return d(i.imagedatargba16_data(this.__wbg_ptr))}}const v=async function e(t){if(void 0!==i)return i;void 0===t&&(t=new URL(n(870),n.b));const r=function(){const e={wbg:{}};return e.wbg.__wbindgen_memory=function(){return a(i.memory)},e.wbg.__wbg_buffer_a448f833075b71ba=function(e){return a(c(e).buffer)},e.wbg.__wbg_newwithbyteoffsetandlength_099217381c451830=function(e,t,n){return a(new Uint16Array(c(e),t>>>0,n>>>0))},e.wbg.__wbindgen_object_drop_ref=function(e){d(e)},e.wbg.__wbg_newwithownedu8clampedarrayandsh_91db5987993a08fb=function(e,t,n,r){var s,o,c=(s=e,o=t,s>>>=0,(null!==h&&0!==h.byteLength||(h=new Uint8ClampedArray(i.memory.buffer)),h).subarray(s/1,s/1+o)).slice();return i.__wbindgen_free(e,1*t,1),a(new ImageData(c,n>>>0,r>>>0))},e.wbg.__wbindgen_throw=function(e,t){throw new Error((n=e,r=t,n>>>=0,l.decode(f().subarray(n,n+r))));var n,r},e}();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:s,module:o}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await t,r);return function(t,n){return i=t.exports,e.__wbindgen_wasm_module=n,b=null,u=null,h=null,i}(s,o)},w=void 0!==globalThis.ServiceWorkerGlobalScope&&"undefined"!=typeof self&&globalThis.caches&&void 0!==globalThis.caches.default,m="object"==typeof r&&r.release&&"node"===r.release.name;let x;(w||m)&&(globalThis.ImageData||(globalThis.ImageData=class{constructor(e,t,n){this.data=e,this.width=t,this.height=n}}),"undefined"!=typeof self&&void 0===self.location&&(self.location={href:""}));const y=async function(e,t={}){await async function(){return x||(x=v(void 0)),x}();const{bitDepth:n=8}=t;if(16===n){const t=await function(e){const t=p(e,i.__wbindgen_malloc),n=_,r=i.decode_rgba16(t,n);return g.__wrap(r)}(new Uint8Array(e));if(!t)throw new Error("Encoding error.");return t}const r=await function(e){const t=p(e,i.__wbindgen_malloc),n=_;return d(i.decode(t,n))}(new Uint8Array(e));if(!r)throw new Error("Encoding error.");return r}},870:(e,t,n)=>{"use strict";e.exports=n.p+"ee89e83aefa4929fa028.wasm"},871:(e,t,n)=>{"use strict";n.d(t,{R9:()=>he});var r=new TextDecoder,i=(e,t=0,n=e.length)=>r.decode(e.slice(t,n)),s=(e,t=0,n=e.length)=>e.slice(t,n).reduce(((e,t)=>e+`0${t.toString(16)}`.slice(-2)),""),o=(e,t)=>new DataView(e.buffer,e.byteOffset+t),a=(e,t=0)=>o(e,t).getInt16(0,!0),c=(e,t=0)=>o(e,t).getUint16(0,!1),d=(e,t=0)=>o(e,t).getUint16(0,!0),l=(e,t=0)=>{const n=o(e,t);return n.getUint16(0,!0)+(n.getUint8(2)<<16)},u=(e,t=0)=>o(e,t).getInt32(0,!0),f=(e,t=0)=>o(e,t).getUint32(0,!1),h=(e,t=0)=>o(e,t).getUint32(0,!0),_=(e,t,n)=>o(e,t).getBigUint64(0,!n),p={readUInt16BE:c,readUInt16LE:d,readUInt32BE:f,readUInt32LE:h};function b(e,t,n=0,r=!1){return p[`readUInt${t}${r?"BE":"LE"}`](e,n)}function g(e,t){if(e.length-t<4)return;const n=f(e,t);return e.length-t<n?void 0:{name:i(e,4+t,8+t),offset:t,size:n}}function v(e,t,n){for(;n<e.length;){const r=g(e,n);if(!r)break;if(r.name===t)return r;n+=r.size>0?r.size:8}}var w={validate:e=>"BM"===i(e,0,2),calculate:e=>({height:Math.abs(u(e,22)),width:h(e,18)})};function m(e,t){const n=e[t];return 0===n?256:n}function x(e,t){const n=6+16*t;return{height:m(e,n+1),width:m(e,n)}}var y={validate(e){const t=d(e,0),n=d(e,4);return 0===t&&0!==n&&1===d(e,2)},calculate(e){const t=d(e,4),n=x(e,0);if(1===t)return n;const r=[];for(let n=0;n<t;n+=1)r.push(x(e,n));return{width:n.width,height:n.height,images:r}}},C={validate(e){const t=d(e,0),n=d(e,4);return 0===t&&0!==n&&2===d(e,2)},calculate:e=>y.calculate(e)},B={validate:e=>542327876===h(e,0),calculate:e=>({height:h(e,12),width:h(e,16)})},D=/^GIF8[79]a/,L={validate:e=>D.test(i(e,0,6)),calculate:e=>({height:d(e,8),width:d(e,6)})},E={avif:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"},T={validate(e){if("ftyp"!==i(e,4,8))return!1;const t=v(e,"ftyp",0);return!!t&&i(e,t.offset+8,t.offset+12)in E},calculate(e){const t=v(e,"meta",0),n=t&&v(e,"iprp",t.offset+12),r=n&&v(e,"ipco",n.offset+8);if(!r)throw new TypeError("Invalid HEIF, no ipco box found");const s=i(e,8,12),o=[];let a=r.offset+8;for(;a<r.offset+r.size;){const t=v(e,"ispe",a);if(!t)break;const n=f(e,t.offset+12),i=f(e,t.offset+16),s=v(e,"clap",a);let c=n,d=i;s&&s.offset<r.offset+r.size&&(c=n-f(e,s.offset+12)),o.push({height:d,width:c}),a=t.offset+t.size}if(0===o.length)throw new TypeError("Invalid HEIF, no sizes found");return{width:o[0].width,height:o[0].height,type:s,...o.length>1?{images:o}:{}}}},S={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function P(e,t){const n=t+4;return[i(e,t,n),f(e,n)]}function N(e){const t=S[e];return{width:t,height:t,type:e}}var k={validate:e=>"icns"===i(e,0,4),calculate(e){const t=e.length,n=f(e,4);let r=8;const i=[];for(;r<n&&r<t;){const t=P(e,r),n=N(t[0]);i.push(n),r+=t[1]}if(0===i.length)throw new TypeError("Invalid ICNS, no sizes found");return{width:i[0].width,height:i[0].height,...i.length>1?{images:i}:{}}}},A={validate:e=>4283432785===f(e,0),calculate:e=>({height:f(e,12),width:f(e,8)})},R={validate(e){if("jP  "!==i(e,4,8))return!1;const t=v(e,"ftyp",0);return!!t&&"jp2 "===i(e,t.offset+8,t.offset+12)},calculate(e){const t=v(e,"jp2h",0),n=t&&v(e,"ihdr",t.offset+8);if(n)return{height:f(e,n.offset+8),width:f(e,n.offset+12)};throw new TypeError("Unsupported JPEG 2000 format")}};function I(e){return"45786966"===s(e,2,6)}function O(e,t){return{height:c(e,t),width:c(e,t+2)}}function Y(e,t){const n=e.slice(2,t),r=s(n,6,8),i="4d4d"===r;if(i||"4949"===r)return function(e,t){const n=b(e,16,14,t);for(let r=0;r<n;r++){const n=16+12*r,i=n+12;if(n>e.length)return;const s=e.slice(n,i);if(274===b(s,16,0,t)){if(3!==b(s,16,2,t))return;if(1!==b(s,32,4,t))return;return b(s,16,8,t)}}}(n,i)}function z(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits")}var M={validate:e=>"ffd8"===s(e,0,2),calculate(e){let t,n,r=e.slice(4);for(;r.length;){const e=c(r,0);if(z(r,e),255===r[e]){if(I(r)&&(t=Y(r,e)),n=r[e+1],192===n||193===n||194===n){const n=O(r,e+5);return t?{height:n.height,orientation:t,width:n.width}:n}r=r.slice(e+2)}else r=r.slice(1)}throw new TypeError("Invalid JPG, no size found")}},q=class{constructor(e,t){this.input=e,this.endianness=t,this.byteOffset=2,this.bitOffset=0}getBits(e=1){let t=0,n=0;for(;n<e;){if(this.byteOffset>=this.input.length)throw new Error("Reached end of input");const r=this.input[this.byteOffset],i=8-this.bitOffset,s=Math.min(e-n,i);if("little-endian"===this.endianness){const e=(1<<s)-1;t|=(r>>this.bitOffset&e)<<n}else t=t<<s|(r&(1<<s)-1<<8-this.bitOffset-s)>>8-this.bitOffset-s;n+=s,this.bitOffset+=s,8===this.bitOffset&&(this.byteOffset++,this.bitOffset=0)}return t}};function U(e,t){if(t)return 8*(1+e.getBits(5));const n=[9,13,18,30][e.getBits(2)];return 1+e.getBits(n)}var j={validate:e=>"ff0a"===s(e,0,2),calculate(e){const t=new q(e,"little-endian"),n=1===t.getBits(1),r=U(t,n),i=t.getBits(3),s=function(e,t,n,r){return t&&0===n?8*(1+e.getBits(5)):0===n?U(e,!1):Math.floor(r*[1,1.2,4/3,1.5,16/9,5/4,2][n-1])}(t,n,i,r);return{width:s,height:r}}},F={validate:e=>{if("JXL "!==i(e,4,8))return!1;const t=v(e,"ftyp",0);return!!t&&"jxl "===i(e,t.offset+8,t.offset+12)},calculate(e){const t=function(e){const t=v(e,"jxlc",0);if(t)return e.slice(t.offset+8,t.offset+t.size);const n=function(e){const t=[];let n=0;for(;n<e.length;){const r=v(e,"jxlp",n);if(!r)break;t.push(e.slice(r.offset+12,r.offset+r.size)),n=r.offset+r.size}return t}(e);return n.length>0?function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(n):void 0}(e);if(t)return j.calculate(t);throw new Error("No codestream found in JXL container")}},$={validate:e=>{const t=i(e,1,7);return["KTX 11","KTX 20"].includes(t)},calculate:e=>{const t=49===e[5]?"ktx":"ktx2",n="ktx"===t?36:20;return{height:h(e,n+4),width:h(e,n),type:t}}},W="CgBI",G={validate(e){if("PNG\r\n\n"===i(e,1,8)){let t=i(e,12,16);if(t===W&&(t=i(e,28,32)),"IHDR"!==t)throw new TypeError("Invalid PNG");return!0}return!1},calculate:e=>i(e,12,16)===W?{height:f(e,36),width:f(e,32)}:{height:f(e,20),width:f(e,16)}},X={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},H={default:e=>{let t=[];for(;e.length>0;){const n=e.shift();if("#"!==n[0]){t=n.split(" ");break}}if(2===t.length)return{height:Number.parseInt(t[1],10),width:Number.parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{const t={};for(;e.length>0;){const n=e.shift();if(n.length>16||n.charCodeAt(0)>128)continue;const[r,i]=n.split(" ");if(r&&i&&(t[r.toLowerCase()]=Number.parseInt(i,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}},V={validate:e=>i(e,0,2)in X,calculate(e){const t=i(e,0,2),n=X[t],r=i(e,3).split(/[\r\n]+/);return(H[n]||H.default)(r)}},Q={validate:e=>"8BPS"===i(e,0,4),calculate:e=>({height:f(e,14),width:f(e,18)})},Z=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,J={height:/\sheight=(['"])([^%]+?)\1/,root:Z,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},K=2.54,ee={in:96,cm:96/K,em:16,ex:8,m:96/K*100,mm:96/K/10,pc:96/72/12,pt:96/72,px:1},te=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(ee).join("|")})?$`);function ne(e){const t=te.exec(e);if(t)return Math.round(Number(t[1])*(ee[t[2]]||1))}function re(e){const t=e.split(" ");return{height:ne(t[3]),width:ne(t[2])}}var ie={validate:e=>Z.test(i(e,0,1e3)),calculate(e){const t=i(e).match(J.root);if(t){const e=function(e){const t=e.match(J.width),n=e.match(J.height),r=e.match(J.viewbox);return{height:n&&ne(n[2]),viewbox:r&&re(r[2]),width:t&&ne(t[2])}}(t[0]);if(e.width&&e.height)return function(e){return{height:e.height,width:e.width}}(e);if(e.viewbox)return function(e,t){const n=t.width/t.height;return e.width?{height:Math.floor(e.width/n),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*n)}:{height:t.height,width:t.width}}(e,e.viewbox)}throw new TypeError("Invalid SVG")}},se={validate:e=>0===d(e,0)&&0===d(e,4),calculate:e=>({height:d(e,14),width:d(e,12)})};function oe(e,t,n,r){switch(t){case 3:return b(e,16,n,r);case 4:return b(e,32,n,r);case 16:{const t=Number(_(e,n,r));if(t>Number.MAX_SAFE_INTEGER)throw new TypeError("Value too large");return t}default:return 0}}function ae(e,t){const n=t?20:12;if(e.length>n)return e.slice(n)}var ce=new Set(["49492a00","4d4d002a","49492b00","4d4d002b"]),de=new Map([["bmp",w],["cur",C],["dds",B],["gif",L],["heif",T],["icns",k],["ico",y],["j2c",A],["jp2",R],["jpg",M],["jxl",F],["jxl-stream",j],["ktx",$],["png",G],["pnm",V],["psd",Q],["svg",ie],["tga",se],["tiff",{validate:e=>{const t=s(e,0,4);return ce.has(t)},calculate(e){const t=function(e){const t=i(e,0,2);return{isBigEndian:"MM"===t,isBigTiff:43===b(e,16,2,"MM"===t)}}(e);t.isBigTiff&&function(e,t){const n=b(e,16,4,t),r=b(e,16,6,t);if(8!==n||0!==r)throw new TypeError("Invalid BigTIFF header")}(e,t.isBigEndian);const n=function(e,{isBigEndian:t,isBigTiff:n}){const r=n?Number(_(e,8,t)):b(e,32,4,t),i=n?8:2;return e.slice(r+i)}(e,t),r=function(e,{isBigEndian:t,isBigTiff:n}){const r={};let i=e;for(;i?.length;){const e=b(i,16,0,t),s=b(i,16,2,t),o=n?Number(_(i,4,t)):b(i,32,4,t);if(0===e)break;if(1===o&&(3===s||4===s||n&&16===s)){const o=n?12:8;r[e]=oe(i,s,o,t)}i=ae(i,n)}return r}(n,t),s={height:r[257],width:r[256],type:t.isBigTiff?"bigtiff":"tiff"};if(r[259]&&(s.compression=r[259]),!s.width||!s.height)throw new TypeError("Invalid Tiff. Missing tags");return s}}],["webp",{validate(e){const t="RIFF"===i(e,0,4),n="WEBP"===i(e,8,12),r="VP8"===i(e,12,15);return t&&n&&r},calculate(e){const t=i(e,12,16),n=e.slice(20,30);if("VP8X"===t){const e=n[0];if(!(192&e||1&e))return function(e){return{height:1+l(e,7),width:1+l(e,4)}}(n);throw new TypeError("Invalid WebP")}if("VP8 "===t&&47!==n[0])return function(e){return{height:16383&a(e,8),width:16383&a(e,6)}}(n);const r=s(n,3,6);if("VP8L"===t&&"9d012a"!==r)return function(e){return{height:1+((15&e[4])<<10|e[3]<<2|(192&e[2])>>6),width:1+((63&e[2])<<8|e[1])}}(n);throw new TypeError("Invalid WebP")}}]]),le=Array.from(de.keys()),ue=new Map([[0,"heif"],[56,"psd"],[66,"bmp"],[68,"dds"],[71,"gif"],[73,"tiff"],[77,"tiff"],[82,"webp"],[105,"icns"],[137,"png"],[255,"jpg"]]),fe={disabledTypes:[]};function he(e){const t=function(e){const t=e[0],n=ue.get(t);return n&&de.get(n).validate(e)?n:le.find((t=>de.get(t).validate(e)))}(e);if(void 0!==t){if(fe.disabledTypes.indexOf(t)>-1)throw new TypeError(`disabled file type: ${t}`);const n=de.get(t).calculate(e);if(void 0!==n){if(n.type=n.type??t,n.images&&n.images.length>1){const e=n.images.reduce(((e,t)=>t.width*t.height>e.width*e.height?t:e),n.images[0]);n.width=e.width,n.height=e.height}return n}}throw new TypeError(`unsupported file type: ${t}`)}},887:(e,t,n)=>{"use strict";n(307)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},888:(e,t,n)=>{"use strict";function r(e,t){if(void 0===e)return t;if("number"==typeof e)return[(e>>24&255)/255,(e>>16&255)/255,(e>>8&255)/255,(255&e)/255];if("transparent"===e)return[0,0,0,0];if(e.startsWith("#")){const t=e.slice(1);if(6===t.length)return[parseInt(t.slice(0,2),16)/255,parseInt(t.slice(2,4),16)/255,parseInt(t.slice(4,6),16)/255,1];if(8===t.length)return[parseInt(t.slice(0,2),16)/255,parseInt(t.slice(2,4),16)/255,parseInt(t.slice(4,6),16)/255,parseInt(t.slice(6,8),16)/255]}return t}n.d(t,{PQ:()=>i});class i{static resources=null;initialized=!1;static create(){const e=new i;return e.init(),e}init(){if(!this.initialized){if(!i.resources){if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");const e=new OffscreenCanvas(1,1),t=e.getContext("webgl2",{alpha:!0,premultipliedAlpha:!1,desynchronized:!0,powerPreference:"high-performance",antialias:!1});if(!t)throw new Error("WebGL2 not supported");const n=this.createShader(t,t.VERTEX_SHADER,"#version 300 es\nlayout(location = 0) in vec2 position;\nout vec2 vUv;\n\nvoid main() {\n    vUv = position * 0.5 + 0.5;\n    gl_Position = vec4(position, 0.0, 1.0);\n}"),r=this.createShader(t,t.FRAGMENT_SHADER,"#version 300 es\nprecision highp float;\n\nuniform sampler2D uTex;\nuniform vec2 uOutputRes;\nuniform vec2 uInputRes;\nuniform float uScale;\nuniform int uOrientation;\nuniform int uDrawBorders;\nuniform vec4 uBorderColor;\nuniform float uBorderThickness;\nuniform vec4 uBackgroundColor;\n\nin vec2 vUv;\nout vec4 outColor;\n\nconst float SQRT3 = 1.732050808;\n\nvec2 hexRound(vec2 uv) {\n    float q = uv.x;\n    float r = uv.y;\n    float s = -q - r;\n\n    float qi = round(q);\n    float ri = round(r);\n    float si = round(s);\n\n    float q_diff = abs(qi - q);\n    float r_diff = abs(ri - r);\n    float s_diff = abs(si - s);\n\n    if (q_diff > r_diff && q_diff > s_diff) {\n        qi = -ri - si;\n    } else if (r_diff > s_diff) {\n        ri = -qi - si;\n    }\n    \n    return vec2(qi, ri);\n}\n\nvec2 pixelToHex(vec2 pos, float scale, int orientation) {\n    vec2 axial;\n    if (orientation == 0) {\n        float q = (2.0/3.0 * pos.x) / scale;\n        float r = (-1.0/3.0 * pos.x + SQRT3/3.0 * pos.y) / scale;\n        axial = hexRound(vec2(q, r));\n        float col = axial.x;\n        float row = axial.y + (axial.x - mod(axial.x, 2.0)) / 2.0;\n        if (mod(axial.x, 2.0) != 0.0 && axial.x < 0.0) row -= 1.0;\n        return vec2(col, row);\n    } else {\n        float q = (SQRT3/3.0 * pos.x - 1.0/3.0 * pos.y) / scale;\n        float r = (2.0/3.0 * pos.y) / scale;\n        axial = hexRound(vec2(q, r));\n        float col = axial.x + (axial.y - mod(axial.y, 2.0)) / 2.0;\n        float row = axial.y;\n        if (mod(axial.y, 2.0) != 0.0 && axial.y < 0.0) col -= 1.0;\n        return vec2(col, row);\n    }\n}\n\nvoid main() {\n    vec2 pixelPos = vUv * uOutputRes;\n    vec2 offset;\n    if (uOrientation == 0) {\n        offset = vec2(uScale, uScale * SQRT3 * 0.5);\n    } else {\n        offset = vec2(uScale * SQRT3 * 0.5, uScale);\n    }\n\n    vec2 adjustedPos = pixelPos - offset;\n    vec2 hexCoord = pixelToHex(adjustedPos, uScale, uOrientation);\n    \n    if (hexCoord.x < 0.0 || hexCoord.y < 0.0 || \n        hexCoord.x >= uInputRes.x || hexCoord.y >= uInputRes.y) {\n        outColor = uBackgroundColor;\n        return;\n    }\n    \n    if (uDrawBorders == 1 && uBorderThickness > 0.0) {\n        float t = uBorderThickness;\n        bool isBorder = false;\n        \n        for (float dy = -t; dy <= t; dy += 1.0) {\n            for (float dx = -t; dx <= t; dx += 1.0) {\n                if (dx == 0.0 && dy == 0.0) continue;\n                if (isBorder) break;\n                vec2 neighborHex = pixelToHex(pixelPos + vec2(dx, dy) - offset, uScale, uOrientation);\n                if (neighborHex != hexCoord) isBorder = true;\n            }\n        }\n        if (isBorder) {\n            outColor = uBorderColor;\n            return;\n        }\n    }\n    \n    vec2 texCoord = (hexCoord + 0.5) / uInputRes;\n    outColor = texture(uTex, texCoord);\n}"),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,r),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error("Shader link failed: "+t.getProgramInfoLog(s));t.useProgram(s),t.deleteShader(n),t.deleteShader(r);const o={uTex:t.getUniformLocation(s,"uTex"),uOutputRes:t.getUniformLocation(s,"uOutputRes"),uInputRes:t.getUniformLocation(s,"uInputRes"),uScale:t.getUniformLocation(s,"uScale"),uOrientation:t.getUniformLocation(s,"uOrientation"),uDrawBorders:t.getUniformLocation(s,"uDrawBorders"),uBorderColor:t.getUniformLocation(s,"uBorderColor"),uBorderThickness:t.getUniformLocation(s,"uBorderThickness"),uBackgroundColor:t.getUniformLocation(s,"uBackgroundColor")};t.uniform1i(o.uTex,0);const a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0);const c=t.createTexture();t.bindTexture(t.TEXTURE_2D,c),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i.resources={gl:t,canvas:e,program:s,texture:c,uniforms:o,capacity:{width:0,height:0},refCount:0}}i.resources.refCount++,this.initialized=!0}}createShader(e,t,n){const r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error("Shader compile failed: "+t)}return r}isReady(){return this.initialized&&!!i.resources&&!i.resources.gl.isContextLost()}render(e,t={}){if(!this.initialized||!i.resources)throw new Error("Renderer not initialized");const{gl:n,canvas:s,uniforms:o,texture:a,capacity:c}=i.resources;if(n.isContextLost())throw new Error("WebGL context lost");const d=(ImageData,e.data),l=e.width,u=e.height,f=Math.min(32,Math.max(2,t.scale??16)),h=t.orientation??"flat-top",{width:_,height:p}=function(e,t,n,r="flat-top"){const i=1.732050808;if("flat-top"===r){const r=1.5*n,s=n*i,o=2*n,a=n*i;return{width:Math.ceil((e-1)*r+o),height:Math.ceil((t-1)*s+a+n*i*.5)}}{const r=n*i,s=1.5*n,o=n*i,a=2*n;return{width:Math.ceil((e-1)*r+o+n*i*.5),height:Math.ceil((t-1)*s+a)}}}(l,u,f,h);n.useProgram(i.resources.program),(_>c.width||p>c.height)&&(s.width=Math.max(c.width,_),s.height=Math.max(c.height,p),i.resources.capacity={width:s.width,height:s.height}),n.viewport(0,0,_,p),n.uniform2f(o.uOutputRes,_,p),n.uniform2f(o.uInputRes,l,u),n.uniform1f(o.uScale,f),n.uniform1i(o.uOrientation,"flat-top"===h?0:1),n.uniform1i(o.uDrawBorders,t.drawBorders?1:0),n.uniform1f(o.uBorderThickness,t.borderThickness??1);const b=r(t.borderColor,[.16,.16,.16,1]);n.uniform4f(o.uBorderColor,...b);const g=r(t.backgroundColor,[0,0,0,0]);n.uniform4f(o.uBackgroundColor,...g),n.bindTexture(n.TEXTURE_2D,a),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,l,u,0,n.RGBA,n.UNSIGNED_BYTE,d),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLES,0,3);const v=new Uint8ClampedArray(_*p*4);return n.readPixels(0,0,_,p,n.RGBA,n.UNSIGNED_BYTE,v),{data:v,width:_,height:p}}dispose(){if(this.initialized&&i.resources){if(i.resources.refCount--,i.resources.refCount<=0){const{gl:e,texture:t,program:n}=i.resources;e.deleteTexture(t),e.deleteProgram(n),i.resources=null}this.initialized=!1}}}},889:(e,t,n)=>{"use strict";let r;n.d(t,{Ad:()=>b,Ay:()=>v,PM:()=>p,PZ:()=>h,Xq:()=>_});let i=null,s=null;function o(){return null!==s&&0!==s.byteLength||(s=new Uint8Array(r.memory.buffer)),s}function a(e,t){const n=t(1*e.length,1)>>>0;return o().set(e,n/1),l=e.length,n}let c=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});c.decode();let d=0,l=0;const u="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>r.__wbg_upscaleresult_free(e>>>0,1)));class f{static __wrap(e){e>>>=0;const t=Object.create(f.prototype);return t.__wbg_ptr=e,u.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,u.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_upscaleresult_free(e,0)}get ptr(){return r.__wbg_get_upscaleresult_ptr(this.__wbg_ptr)>>>0}set ptr(e){r.__wbg_set_upscaleresult_ptr(this.__wbg_ptr,e)}get len(){return r.__wbg_get_upscaleresult_len(this.__wbg_ptr)>>>0}set len(e){r.__wbg_set_upscaleresult_len(this.__wbg_ptr,e)}get width(){return r.__wbg_get_upscaleresult_width(this.__wbg_ptr)>>>0}set width(e){r.__wbg_set_upscaleresult_width(this.__wbg_ptr,e)}get height(){return r.__wbg_get_upscaleresult_height(this.__wbg_ptr)>>>0}set height(e){r.__wbg_set_upscaleresult_height(this.__wbg_ptr,e)}}function h(e,t,n,i,s,o,c,d,u,h,_,p){const b=a(e,r.__wbindgen_malloc),g=l,v=r.crt_upscale_config(b,g,t,n,i,s,o,c,d,u,h,_,p);return f.__wrap(v)}function _(){return r.get_memory()}function p(e,t,n,i,s,o,c,d,u){const h=a(e,r.__wbindgen_malloc),_=l,p=r.hex_upscale_config(h,_,t,n,i,s,o,c,d,u);return f.__wrap(p)}function b(e,t,n,i,s,o,c,d){const u=a(e,r.__wbindgen_malloc),h=l,_=r.xbrz_upscale_config(u,h,t,n,i,s,o,c,d);return f.__wrap(_)}Symbol.dispose&&(f.prototype[Symbol.dispose]=f.prototype.free);const g=new Set(["basic","cors","default"]),v=async function e(t){if(void 0!==r)return r;void 0!==t&&Object.getPrototypeOf(t)===Object.prototype&&({module_or_path:t}=t),void 0===t&&(t=new URL(n(890),n.b));const a=function(){const e={wbg:{}};return e.wbg.__wbg___wbindgen_memory_a342e963fbcabd68=function(){return r.memory},e.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e=function(e,t){throw new Error((n=e,function(e,t){return d+=t,d>=2146435072&&(c=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),c.decode(),d=t),c.decode(o().subarray(e,e+t))}(n>>>=0,t)));var n},e.wbg.__wbindgen_init_externref_table=function(){const e=r.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e}();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:l,module:u}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if(!e.ok||!g.has(e.type)||"application/wasm"===e.headers.get("Content-Type"))throw t}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await t,a);return function(t,n){return r=t.exports,e.__wbindgen_wasm_module=n,i=null,s=null,r.__wbindgen_start(),r}(l,u)}},890:(e,t,n)=>{"use strict";e.exports=n.p+"7be1a118a96b0ea89073.wasm"},893:(e,t,n)=>{"use strict";n(307)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},894:(e,t,n)=>{"use strict";n(895)},895:(e,t,n)=>{"use strict";var r,i=n(296),s=n(5),o=n(15),a=n(207),c=n(293),d=n(292),l=n(896),u=n(21),f=n(52).enforce,h=n(8),_=n(53),p=Object,b=Array.isArray,g=p.isExtensible,v=p.isFrozen,w=p.isSealed,m=p.freeze,x=p.seal,y=!s.ActiveXObject&&"ActiveXObject"in s,C=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},B=d("WeakMap",C,l),D=B.prototype,L=o(D.set);if(_)if(y){r=l.getConstructor(C,"WeakMap",!0),c.enable();var E=o(D.delete),T=o(D.has),S=o(D.get);a(D,{delete:function(e){if(u(e)&&!g(e)){var t=f(this);return t.frozen||(t.frozen=new r),E(this,e)||t.frozen.delete(e)}return E(this,e)},has:function(e){if(u(e)&&!g(e)){var t=f(this);return t.frozen||(t.frozen=new r),T(this,e)||t.frozen.has(e)}return T(this,e)},get:function(e){if(u(e)&&!g(e)){var t=f(this);return t.frozen||(t.frozen=new r),T(this,e)?S(this,e):t.frozen.get(e)}return S(this,e)},set:function(e,t){if(u(e)&&!g(e)){var n=f(this);n.frozen||(n.frozen=new r),T(this,e)?L(this,e,t):n.frozen.set(e,t)}else L(this,e,t);return this}})}else i&&h((function(){var e=m([]);return L(new B,e,1),!v(e)}))&&a(D,{set:function(e,t){var n;return b(e)&&(v(e)?n=m:w(e)&&(n=x)),L(this,e,t),n&&n(e),this}})},896:(e,t,n)=>{"use strict";var r=n(15),i=n(207),s=n(293).getWeakData,o=n(162),a=n(47),c=n(18),d=n(21),l=n(179),u=n(84),f=n(39),h=n(52),_=h.set,p=h.getterFor,b=u.find,g=u.findIndex,v=r([].splice),w=0,m=function(e){return e.frozen||(e.frozen=new x)},x=function(){this.entries=[]},y=function(e,t){return b(e.entries,(function(e){return e[0]===t}))};x.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=g(this.entries,(function(t){return t[0]===e}));return~t&&v(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var u=e((function(e,i){o(e,h),_(e,{type:t,id:w++,frozen:null}),c(i)||l(i,e[r],{that:e,AS_ENTRIES:n})})),h=u.prototype,b=p(t),g=function(e,t,n){var r=b(e),i=s(a(t),!0);return!0===i?m(r).set(t,n):i[r.id]=n,e};return i(h,{delete:function(e){var t=b(this);if(!d(e))return!1;var n=s(e);return!0===n?m(t).delete(e):n&&f(n,t.id)&&delete n[t.id]},has:function(e){var t=b(this);if(!d(e))return!1;var n=s(e);return!0===n?m(t).has(e):n&&f(n,t.id)}}),i(h,n?{get:function(e){var t=b(this);if(d(e)){var n=s(e);if(!0===n)return m(t).get(e);if(n)return n[t.id]}},set:function(e,t){return g(this,e,t)}}:{add:function(e){return g(this,e,!0)}}),u}}},897:(e,t,n)=>{"use strict";n(898)},898:(e,t,n)=>{"use strict";n(292)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(896))},899:(e,t,n)=>{"use strict";var r=n(4),i=n(900),s=n(901).remove;r({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),n=!0,r=0,o=arguments.length;r<o;r++)e=s(t,arguments[r]),n=n&&e;return!!n}})},900:(e,t,n)=>{"use strict";var r=n(901).has;e.exports=function(e){return r(e),e}},901:(e,t,n)=>{"use strict";var r=n(15),i=WeakMap.prototype;e.exports={WeakMap,set:r(i.set),get:r(i.get),has:r(i.has),remove:r(i.delete)}},902:(e,t,n)=>{"use strict";var r=n(4),i=n(900),s=n(901),o=s.get,a=s.has,c=s.set;r({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(e,t){var n,r,s=i(this);return a(s,e)?(n=o(s,e),"update"in t&&(n=t.update(n,e,s),c(s,e,n)),n):(r=t.insert(e,s),c(s,e,r),r)}})},903:(e,t,n)=>{"use strict";var r=n(4),i=n(904),s=n(905).add;r({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=i(this),t=0,n=arguments.length;t<n;t++)s(e,arguments[t]);return e}})},904:(e,t,n)=>{"use strict";var r=n(905).has;e.exports=function(e){return r(e),e}},905:(e,t,n)=>{"use strict";var r=n(15),i=WeakSet.prototype;e.exports={WeakSet,add:r(i.add),has:r(i.has),remove:r(i.delete)}},906:(e,t,n)=>{"use strict";var r=n(4),i=n(904),s=n(905).remove;r({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),n=!0,r=0,o=arguments.length;r<o;r++)e=s(t,arguments[r]),n=n&&e;return!!n}})},907:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{HI:()=>s.HI});var i=n(908),s=n(909),o=e([i]);i=(o.then?(await o)():o)[0],(0,s.lI)(i),i.__wbindgen_start(),r()}catch(e){r(e)}}))},908:(e,t,n)=>{"use strict";var r=n(909);e.exports=n.v(t,e.id,"5f5a0b8e4c69ce28b12a",{"./vtracer_color_bg.js":{__wbindgen_object_drop_ref:r.bk,__wbindgen_string_new:r.yc,__wbg_new_abda76e883ba8a5f:r.V5,__wbg_stack_658279fe44541cf6:r.u$,__wbg_error_f851667af71bcfc6:r.Xu,__wbg_createElementNS_6a08d8f33e767e18:r.WF,__wbg_getElementById_328f8c4a5bb51ba8:r.sP,__wbg_instanceof_Window_cde2416cf5126a72:r.Ie,__wbg_document_183cf1eecfdbffee:r.Pi,__wbg_setAttribute_aebcae2169f2f869:r.TJ,__wbg_prepend_78bb3ef0d1f21108:r.D3,__wbg_instanceof_CanvasRenderingContext2d_e264df6db9ec5a3d:r.Di,__wbg_getImageData_f55fb8cd70493ea6:r.UE,__wbg_debug_8f9a97dc395d342f:r.rY,__wbg_error_94a25ece8eeb7bca:r.uz,__wbg_info_1d035e3d63b89260:r.aC,__wbg_log_7811587c4c6d2844:r.Q9,__wbg_log_00bb83da94eb9ca8:r.m1,__wbg_warn_fab4b297e5c436a0:r.$k,__wbg_data_f2cf019dc3a2c762:r.dQ,__wbg_instanceof_HtmlCanvasElement_838d8b92f3c55028:r.D4,__wbg_width_b813b325b323728a:r.Dw,__wbg_height_646e862bac72cff1:r.i0,__wbg_getContext_a29bad1d160bec3d:r.kc,__wbg_newnoargs_ccdcae30fd002262:r.Vu,__wbg_call_669127b9d730c650:r.B1,__wbindgen_object_clone_ref:r.BZ,__wbg_self_3fad056edded10bd:r.Fb,__wbg_window_a4f46c98a61d4089:r.z$,__wbg_globalThis_17eff828815f7d84:r.I3,__wbg_global_46f939f6541643c5:r.o5,__wbindgen_is_undefined:r.vU,__wbindgen_debug_string:r.rl,__wbindgen_throw:r.Qn}})},909:(e,t,n)=>{"use strict";let r;function i(e){r=e}n.d(t,{$k:()=>U,B1:()=>H,BZ:()=>V,D3:()=>A,D4:()=>F,Di:()=>R,Dw:()=>$,Fb:()=>Q,HI:()=>y,I3:()=>J,Ie:()=>P,Pi:()=>N,Q9:()=>M,Qn:()=>ne,TJ:()=>k,UE:()=>I,V5:()=>D,Vu:()=>X,WF:()=>T,Xu:()=>E,aC:()=>z,bk:()=>C,dQ:()=>j,i0:()=>W,kc:()=>G,lI:()=>i,m1:()=>q,o5:()=>K,rY:()=>O,rl:()=>te,sP:()=>S,u$:()=>L,uz:()=>Y,vU:()=>ee,yc:()=>B,z$:()=>Z}),e=n.hmd(e);const s=new Array(128).fill(void 0);function o(e){return s[e]}s.push(void 0,null,!0,!1);let a=s.length,c=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});c.decode();let d=null;function l(){return null!==d&&0!==d.byteLength||(d=new Uint8Array(r.memory.buffer)),d}function u(e,t){return e>>>=0,c.decode(l().subarray(e,e+t))}function f(e){a===s.length&&s.push(s.length+1);const t=a;return a=s[t],s[t]=e,t}function h(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let n="[";t>0&&(n+=h(e[0]));for(let r=1;r<t;r++)n+=", "+h(e[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}let _=0,p=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const b="function"==typeof p.encodeInto?function(e,t){return p.encodeInto(e,t)}:function(e,t){const n=p.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if(void 0===n){const n=p.encode(e),r=t(n.length,1)>>>0;return l().subarray(r,r+n.length).set(n),_=n.length,r}let r=e.length,i=t(r,1)>>>0;const s=l();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;s[i+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),i=n(i,r,r=o+3*e.length,1)>>>0;const t=l().subarray(i+o,i+r);o+=b(e,t).written}return _=o,i}let v=null;function w(){return null!==v&&0!==v.byteLength||(v=new Int32Array(r.memory.buffer)),v}function m(e,t){try{return e.apply(this,t)}catch(e){r.__wbindgen_exn_store(f(e))}}function x(e){return null==e}class y{static __wrap(e){e>>>=0;const t=Object.create(y.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();r.__wbg_colorimageconverter_free(e)}static new_with_string(e){const t=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=_,i=r.colorimageconverter_new_with_string(t,n);return y.__wrap(i)}init(){r.colorimageconverter_init(this.__wbg_ptr)}tick(){return 0!==r.colorimageconverter_tick(this.__wbg_ptr)}progress(){return r.colorimageconverter_progress(this.__wbg_ptr)}}function C(e){var t;o(t=e),function(e){e<132||(s[e]=a,a=e)}(t)}function B(e,t){return f(u(e,t))}function D(){return f(new Error)}function L(e,t){const n=g(o(t).stack,r.__wbindgen_malloc,r.__wbindgen_realloc),i=_;w()[e/4+1]=i,w()[e/4+0]=n}function E(e,t){let n,i;try{n=e,i=t}finally{r.__wbindgen_free(n,i,1)}}function T(){return m((function(e,t,n,r,i){return f(o(e).createElementNS(0===t?void 0:u(t,n),u(r,i)))}),arguments)}function S(e,t,n){const r=o(e).getElementById(u(t,n));return x(r)?0:f(r)}function P(e){let t;try{t=o(e)instanceof Window}catch(e){t=!1}return t}function N(e){const t=o(e).document;return x(t)?0:f(t)}function k(){return m((function(e,t,n,r,i){o(e).setAttribute(u(t,n),u(r,i))}),arguments)}function A(){return m((function(e,t){o(e).prepend(o(t))}),arguments)}function R(e){let t;try{t=o(e)instanceof CanvasRenderingContext2D}catch(e){t=!1}return t}function I(){return m((function(e,t,n,r,i){return f(o(e).getImageData(t,n,r,i))}),arguments)}function O(e,t,n,r){}function Y(e,t,n,r){}function z(e,t,n,r){}function M(e){}function q(e,t,n,r){}function U(e,t,n,r){}function j(e,t){const n=function(e,t){const n=t(1*e.length,1)>>>0;return l().set(e,n/1),_=e.length,n}(o(t).data,r.__wbindgen_malloc),i=_;w()[e/4+1]=i,w()[e/4+0]=n}function F(e){let t;try{t=o(e)instanceof HTMLCanvasElement}catch(e){t=!1}return t}function $(e){return o(e).width}function W(e){return o(e).height}function G(){return m((function(e,t,n){const r=o(e).getContext(u(t,n));return x(r)?0:f(r)}),arguments)}function X(e,t){return f(new Function(u(e,t)))}function H(){return m((function(e,t){return f(o(e).call(o(t)))}),arguments)}function V(e){return f(o(e))}function Q(){return m((function(){return f(self.self)}),arguments)}function Z(){return m((function(){return f(window.window)}),arguments)}function J(){return m((function(){return f(globalThis.globalThis)}),arguments)}function K(){return m((function(){return f(n.g.global)}),arguments)}function ee(e){return void 0===o(e)}function te(e,t){const n=g(h(o(t)),r.__wbindgen_malloc,r.__wbindgen_realloc),i=_;w()[e/4+1]=i,w()[e/4+0]=n}function ne(e,t){throw new Error(u(e,t))}},910:(e,t,n)=>{var r,i,s,o;({SIMDopeObjectConf:r,SIMDopeCreateConfRemove:i,SIMDopeCreateConfAdd:s}=n(911)),({SIMDopeCreate:o}=n(912));var a=o(r);e.exports={Color:a.Color,Colors:a.Colors,SIMDopeColor:a.SIMDopeColor,SIMDopeColors:a.SIMDopeColors,simdops:a.simdops,SIMDopeConfObject:Object.assign({},r),SIMDopeCreateConfRemove:i,SIMDopeCreateConfAdd:s,SIMDopeCreate:o}},911:e=>{var t={create:{new_zero:!0,new_splat:!0,new_of:!0,new_safe_of:!0,new_from:!0,new_array:!0,new_array_safe:!0,new_uint32:!0,new_uint32b:!0,new_hsla:!0,new_hex:!0,new_hex_name:!0},properties:{tail:!0,pos:!0,hilbert:!0,lebesgue:!0,moore:!0,uint32:!0,uint32b:!0,hex:!0,ycbcra:!0,laba:!0,hsla:!0,rgbaon4bits:!0,rgbaon6bits:!0,rgbaon8bits:!0,rgbaon12bits:!0,rgbaon16bits:!0,skin:!0},methods:{set:!0,set_from_array:!0,simplify:!0,set_from_simdope:!0,set_from_buffer:!0,get_tail_opacity:!0,get_tail_opacity_and_reset:!0,get_tail:!0,get_tail_and_reset:!0,reset_tail:!0,set_tail:!0,normalize:!0,set_out_of:!0,get_subarray:!0,get_slice:!0,get_buffer:!0,is_skin:!0,is_not_skin:!0,sum_rgba:!0,sum_rgb:!0,average_rgb:!0,is_dark:!0,is_fully_transparent:!0,is_fully_opaque:!0,is_not_fully_transparent:!0,is_not_fully_opaque:!0,match_with:!0,euclidean_match_with:!0,manhattan_match_with:!0,cie76_match_with:!0,set_r:!0,set_g:!0,set_b:!0,set_a:!0,to_greyscale:!0,to_greyscale_luma:!0,multiply_a_255:!0,copy:!0,get_difference_with:!0,merge_with_a_fixed:!0,blend_first_with:!0,blend_all:!0,blend_all_with_tails:!0,blend_with:!0,blend_first_with_tails:!0,get_deduplicated_sorted_uint32a:!0,get_element:!0,get_new_element:!0,get_use_element:!0}};e.exports={SIMDopeObjectConf:t,SIMDopeCreateConfRemove:function(e){var n=Object.assign({},t);return"create"in e&&Object.keys(e.create).forEach((function(e){n.create[e]=!1})),"properties"in e&&Object.keys(e.properties).forEach((function(e){n.properties[e]=!1})),"methods"in e&&Object.keys(e.methods).forEach((function(e){n.methods[e]=!1})),n},SIMDopeCreateConfAdd:function(e){var t={create:{},properties:{},methods:{}};return"create"in e&&Object.keys(e.create).forEach((function(e){t.create[e]=!0})),"properties"in e&&Object.keys(e.properties).forEach((function(e){t.properties[e]=!0})),"methods"in e&&Object.keys(e.methods).forEach((function(e){t.methods[e]=!0})),t}}},912:(e,t,n)=>{"use strict";var r;({SIMDopeObjectConf:r}=n(911)),e.exports={SIMDopeCreate:function(e){return e=void 0===e?r:e,function(e){var t={},n=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0};function r(e){return n(e=(0|e)>>>0,53216044)>>>27>>>0}function i(e,t){return((0|(e=(0|e)>>>0))>(0|(t=(0|t)>>>0))?t:0|e)>>>0}var s={multiply:function(e,t){return(e*t|0)>>>0},multiply_uint:function(e,t){return(0|n(e=(0|e)>>>0,t=(0|t)>>>0))>>>0},multiply_uint_4:function(e){return(e=(0|e)>>>0)<<2>>>0},divide_uint:function(e,t){return((e=(0|e)>>>0)/(t=(0|t)>>>0)|0)>>>0},divide_2_uint:function(e){return(e=(0|e)>>>0)>>1>>>0},divide_4_uint:function(e){return(e=(0|e)>>>0)>>2>>>0},divide_16_uint:function(e){return(e=(0|e)>>>0)>>4>>>0},divide_32_uint:function(e){return(e=(0|e)>>>0)>>5>>>0},divide_64_uint:function(e){return(e=(0|e)>>>0)>>6>>>0},divide_85_uint:r,divide_128_uint:function(e){return(e=(0|e)>>>0)>>7>>>0},abs_int:function(e){return(0|(e|=0))<0?0|-e:0|e},plus_uint:function(e,t){return((e=(0|e)>>>0)+(t=(0|t)>>>0)|0)>>>0},clamp_int:function(e,t,n){return n|=0,0|((e|=0)<(t|=0)?t:e>n?n:e)},clamp_uint8:function(e){return 255&(0|e)>>>0},inverse_255:function(e){return 255-(e=(0|e)>>>0)&255},divide_255:function(e){return 1+(e=(0|e)>>>0)+(e>>>8)>>>8|0},uint_not_equal:function(e,t){return(0|e)>>>0!=(0|t)>>>0},clamp_uint32:function(e){return(0|(e=(0|e)>>>0))>>>0>>>0},boolean_and:function(e,t){return(e|=0)&&0|t},min_num:function(e,t){return 0|((0|(e|=0))<(0|(t|=0))?e:t)},max_num:function(e,t){return 0|((0|(e|=0))>(0|(t|=0))?e:t)},modulo_int:function(e,t){return(e|=0)%(t|=0)|0},modulo_uint:function(e,t){return((e=(0|e)>>>0)%(t=(0|t)>>>0)|0)>>>0},plus_int:function(e,t){return(e|=0)+(t|=0)|0},minus_int:function(e,t){return(e|=0)-(t|=0)|0},minus_uint:function(e,t){return((e=(0|e)>>>0)-(t=(0|t)>>>0)|0)>>>0},multiply_int:function(e,t){return 0|n(0|(e|=0),0|(t|=0))},divide_int:function(e,t){return(e|=0)/(t|=0)|0},multiply_255:function(e){return((e=(0|e)>>>0)<<8)-e|0},max_int:function(e,t){return 0|((0|(e|=0))>(0|(t|=0))?e:t)},min_int:function(e,t){return 0|((0|(e|=0))>(0|(t|=0))?t:e)},max_uint:function(e,t){return((0|(e=(0|e)>>>0))>(0|(t=(0|t)>>>0))?e:0|t)>>>0},min_uint:i,int_equal:function(e,t){return(0|(e|=0))==(0|t)},int_not_equal:function(e,t){return(0|(e|=0))!=(0|t)},int_less:function(e,t){return(0|(e|=0))<(0|t)},int_less_equal:function(e,t){return(0|(e|=0))<=(0|t)},int_greater:function(e,t){return(0|(e|=0))>(0|t)},int_greater_equal:function(e,t){return(0|(e|=0))>=(0|t)},uint_equal:function(e,t){return(0|(e=(0|e)>>>0))>>>0==(0|(t=(0|t)>>>0))>>>0},uint_less:function(e,t){return(0|(e=(0|e)>>>0))>>>0<(0|(t=(0|t)>>>0))>>>0},uint_less_equal:function(e,t){return(0|(e=(0|e)>>>0))>>>0<=(0|(t=(0|t)>>>0))>>>0},uint_greater:function(e,t){return(0|(e=(0|e)>>>0))>>>0>(0|(t=(0|t)>>>0))>>>0},uint_greater_equal:function(e,t){return(0|(e=(0|e)>>>0))>>>0>=(0|(t=(0|t)>>>0))>>>0},format_int:function(e){return 0|e},format_uint:function(e){return(0|e)>>>0}},o=function(e,t){var s=e.multiply,o=e.multiply_uint,a=e.multiply_uint_4,c=e.divide_uint,d=e.divide_2_uint,l=e.divide_4_uint,u=e.divide_16_uint,f=e.divide_32_uint,h=e.divide_64_uint,_=e.divide_128_uint,p=e.abs_int,b=e.plus_uint,g=e.clamp_int,v=e.clamp_uint8,w=e.inverse_255,m=e.divide_255,x=e.plus_int,y=e.minus_int,C=e.multiply_255,B=e.max_int,D=e.min_int,L=e.uint_equal,E=e.uint_greater,T=e.format_uint,S=Math.round,P=(Math.ceil,Math.fround),N=function(e){return 0|n(0|(e|=0),0|e)},k=(Math.pow,Math.cbrt,function(e){if(!(0|(e=(0|e)>>>0))||1==(0|e))return 0|e;for(var t=1,n=1;(0|n)<=(0|e);)n=((t=(t+1|0)>>>0)*t|0)>>>0;return(t-1|0)>>>0}),A=P(.8967),R=P(1.761),I=P(.342),O=new Float32Array(3);O.set(Float32Array.of(A,R,I),0);var Y=O.subarray(0,3),z=(0|k(255*A*255+255*R*255+255*I*255|0))>>>0,M=k(N(100)+N(100)+N(100)),q=(255*A+255*R+255*I|0)>>>0,U=new Uint8Array(new ArrayBuffer(4)),j=function(e,t){return this instanceof j?(t=a(t),y(e.byteLength,t)<4?this._storage_uint8_=new Uint8Array(new ArrayBuffer(4),0,4):this._storage_uint8_=new Uint8Array(e,t,4),this.tail_=void 0,this.tail_o_=new Uint8Array(1),this):new j(e,t)};if(t.create.new_zero&&(j.new_zero=function(){return new j(new ArrayBuffer(4))}),t.create.new_splat&&(j.new_splat=function(e){return U.fill(v(e)),new j(U.slice(0,4).buffer)}),(t.create.new_of||t.methods.get_difference_with||t.methods.get_deduplicated_sorted_uint32a)&&(j.new_of=function(e,t,n,r){return U[0]=v(e),U[1]=v(t),U[2]=v(n),U[3]=v(r),new j(U.slice(0,4).buffer)}),t.create.new_safe_of&&(j.new_safe_of=function(e,t,n,r){return U[0]=g(e,0,255),U[1]=g(t,0,255),U[2]=g(n,0,255),U[3]=g(r,0,255),new j(U.slice(0,4).buffer)}),t.create.new_from&&(j.new_from=function(e){return new j(e)}),t.create.new_array&&(j.new_array=function(e){return U[0]=v(e[0]),U[1]=v(e[1]),U[2]=v(e[2]),U[3]=v(e[3]),new j(U.slice(0,4).buffer)}),(t.create.new_array_safe||t.methods.get_deduplicated_sorted_uint32a)&&(j.new_array_safe=function(e){return U[0]=v(g(e[0],0,255)),U[1]=v(g(e[1],0,255)),U[2]=v(g(e[2],0,255)),U[3]=v(g(e[3],0,255)),new j(U.slice(0,4).buffer)}),(t.create.new_uint32||t.methods.get_deduplicated_sorted_uint32a)&&(j.new_uint32=function(e){return new j(Uint32Array.of(0|e).buffer)}),(t.create.new_uint32b||t.create.new_hex||t.methods.get_deduplicated_sorted_uint32a||t.create.new_hex_name)&&(j.new_uint32b=function(e){return new j(new Uint8Array(Uint32Array.of(0|e).buffer).reverse().buffer)}),t.create.new_hex_name){var F={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Z(e){if(void 0===e)return"#00000000";if(F.hasOwnProperty(e))return F[e]+"ff";var t="",n="",r="",i="",s="#12345678";switch(0|e.length){case 9:s=e;break;case 7:s=e.concat("ff");break;case 5:t=e.charAt(1),n=e.charAt(2),r=e.charAt(3),i=e.charAt(4),s="#".concat(t,t,n,n,r,r,i,i);break;case 4:t=e.charAt(1),n=e.charAt(2),r=e.charAt(3),s="#".concat(t,t,n,n,r,r,"ff")}return s}j.new_hex=function(e){return j.new_uint32b(parseInt(Z(e).slice(1),16))}}else if(t.create.new_hex||t.methods.get_deduplicated_sorted_uint32a){function J(e){if(void 0===e)return"#00000000";var t="",n="",r="",i="",s="#12345678";switch(0|e.length){case 9:s=e;break;case 7:s=e.concat("ff");break;case 5:t=e.charAt(1),n=e.charAt(2),r=e.charAt(3),i=e.charAt(4),s="#".concat(t,t,n,n,r,r,i,i);break;case 4:t=e.charAt(1),n=e.charAt(2),r=e.charAt(3),s="#".concat(t,t,n,n,r,r,"ff")}return s}j.new_hex=function(e){return j.new_uint32b(parseInt(J(e).slice(1),16))}}if(t.create.new_hsla&&(j.new_hsla=function(e,t,n,r){var i,s,o;if(e/=360,n/=100,r/=100,0==(t/=100))i=s=o=n;else{function d(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;i=d(c,a,e+1/3),s=d(c,a,e),o=d(c,a,e-1/3)}return j.new_of(T(255*i),T(255*s),T(255*o),T(255*r))}),(t.properties.tail||t.methods.get_tail||t.methods.get_tail_and_reset||t.methods.reset_tail||t.methods.set_tail)&&Object.defineProperty(j.prototype,"tail",{get:function(){return this.tail_}}),Object.defineProperty(j.prototype,"r",{get:function(){return v(this._storage_uint8_[0])}}),Object.defineProperty(j.prototype,"g",{get:function(){return v(this._storage_uint8_[1])}}),Object.defineProperty(j.prototype,"b",{get:function(){return v(this._storage_uint8_[2])}}),Object.defineProperty(j.prototype,"a",{get:function(){return v(this._storage_uint8_[3])}}),t.properties.pos&&Object.defineProperty(j.prototype,"pos",{get:function(){var e=this.hsla;return(32*e[0]+16*e[2]+8*e[1]|0)>>>0}}),t.properties.hilbert&&Object.defineProperty(j.prototype,"hilbert",{get:function(){for(var e=Uint32Array.of(this.r,this.g,this.b),t=new Uint32Array(4),n=7;(0|n)>=0;n=n-1|0)t[1]=1<<n,t[2]=(e[0]&t[1])>0|((e[1]&t[1])>0)<<1|((e[2]&t[1])>0)<<2,0==t[2]&&(t[3]=e[0],e[0]=e[1],e[1]=t[3],e[2]=~e[2]),1==t[2]&&(t[3]=e[0],e[0]=e[1],e[1]=t[3],e[2]=~e[2]),t[0]=t[0]<<3|t[2];return t[0]}}),t.properties.lebesgue&&Object.defineProperty(j.prototype,"lebesgue",{get:function(){for(var e=Uint32Array.of(this.r,this.g,this.b),t=new Uint32Array(2),n=7;(0|n)>=0;n=n-1|0)t[1]=1<<n,t[0]=t[0]<<3|(e[0]&t[1])>0|((e[1]&t[1])>0)<<1|((e[2]&t[1])>0)<<2;return t[0]}}),t.properties.moore&&Object.defineProperty(j.prototype,"moore",{get:function(){for(var e=Uint32Array.of(this.r,this.g,this.b),t=new Uint32Array(4),n=7;(0|n)>=0;n=n-1|0)t[1]=1<<n,t[2]=(e[0]&t[1])>0|((e[1]&t[1])>0)<<1|((e[2]&t[1])>0)<<2,0==t[2]&&(t[3]=e[0],e[0]=e[2],e[2]=t[3]),t[0]=t[0]<<3|t[2];return t[0]}}),(t.properties.uint32||t.methods.match_with||t.methods.paint_uint32a)&&Object.defineProperty(j.prototype,"uint32",{get:function(){return(this._storage_uint8_[3]<<24|this._storage_uint8_[2]<<16|this._storage_uint8_[1]<<8|this._storage_uint8_[0])>>>0}}),(t.properties.uint32b||t.properties.hex)&&Object.defineProperty(j.prototype,"uint32b",{get:function(){return(this._storage_uint8_[0]<<24|this._storage_uint8_[1]<<16|this._storage_uint8_[2]<<8|this._storage_uint8_[3])>>>0}}),t.properties.hex&&Object.defineProperty(j.prototype,"hex",{get:function(){return"#".concat("00000000".concat(this.uint32b.toString(16)).slice(-8))}}),(t.properties.ycbcra||t.properties.skin||t.methods.is_skin||t.methods.is_not_skin)&&Object.defineProperty(j.prototype,"ycbcra",{get:function(){var e=.299*this.r+.587*this.g+.114*this.b+0,t=-.169*this.r+-.331*this.g+.5*this.b+128,n=.5*this.r+-.419*this.g+-.081*this.b+128,r=this.a;return Uint16Array.of(0|e,0|t,0|n,0|r)}}),t.properties.laba||t.properties.xyzaD65||t.methods.cie76_match_with){var $=Float32Array.of(.4123907992659593,.357584339383878,.1804807884018343,.2126390058715102,.715168678767756,.0721923153607337,.0193308187155918,.119194779794626,.9505321522496607);Object.defineProperty(j.prototype,"xyzaD65",{get:function(){return Float32Array.of($[0]*this.r+$[1]*this.g+$[2]*this.b,$[3]*this.r+$[4]*this.g+$[5]*this.b,$[6]*this.r+$[7]*this.g+$[8]*this.b,this.a/255)}})}if(t.properties.laba||t.methods.cie76_match_with){var W=Math.pow(29,3)/Math.pow(3,3),G=Math.pow(6,3)/Math.pow(29,3),X=function(e){return e>G?Math.cbrt(e):(W*e+16)/116},H=Float32Array.of(.3127/.329,1,.3583/.329);Object.defineProperty(j.prototype,"laba",{get:function(){var e=this.xyzaD65,t=Float32Array.of(X(e[0]/H[0]),X(e[1]/H[1]),X(e[2]/H[2]));return Float32Array.of(116*t[1]-16,500*(t[0]-t[1]),200*(t[1]-t[2]),this.a)}})}(t.properties.hsla||t.properties.pos)&&Object.defineProperty(j.prototype,"hsla",{get:function(){var e=v(this.r),t=v(this.g),n=v(this.b),r=v(this.a);e=+e/255,t=+t/255,n=+n/255,r=+r/255;var i,s,o=Math.max(e,t,n),a=Math.min(e,t,n),c=(o+a)/2;if(o==a)i=s=0;else{var d=o-a;switch(s=c>.5?d/(2-o-a):d/(o+a),o){case e:i=(t-n)/d+(t<n?6:0);break;case t:i=(n-e)/d+2;break;case n:i=(e-t)/d+4}i/=6}return Array.of(360*i|0,100*s|0,100*c|0,100*r|0)}}),t.properties.rgbaon4bits&&Object.defineProperty(j.prototype,"rgbaon4bits",{get:function(){return(_(this.r)<<3|_(this.g)<<2|_(this.b)<<1|_(this.a))>>>0}}),t.properties.rgbaon6bits&&Object.defineProperty(j.prototype,"rgbaon6bits",{get:function(){return((16^r(this.r))+(8^r(this.g))+(4^r(this.b))+(0^r(this.a))|0)>>>0}}),t.properties.rgbaon8bits&&Object.defineProperty(j.prototype,"rgbaon8bits",{get:function(){return(h(this.r)<<6|h(this.g)<<4|h(this.b)<<2|h(this.a))>>>0}}),t.properties.rgbaon12bits&&Object.defineProperty(j.prototype,"rgbaon12bits",{get:function(){return(f(this.r)<<9|f(this.g)<<6|f(this.b)<<3|f(this.a))>>>0}}),t.properties.rgbaon16bits&&Object.defineProperty(j.prototype,"rgbaon16bits",{get:function(){return(u(this.r)<<12|u(this.g)<<8|u(this.b)<<4|u(this.a))>>>0}}),(t.properties.skin||t.methods.is_skin||t.methods.is_not_skin)&&Object.defineProperty(j.prototype,"skin",{get:function(){var e=this.ycbcra,t=e[1],n=e[2];return 80<=t&&t<=120&&133<=n&&n<=173}}),Object.defineProperty(j.prototype,"offset",{get:function(){return l(this._storage_uint8_.byteOffset)}}),Object.defineProperty(j.prototype,"slice_",{get:function(){return this._storage_uint8_.slice(0,4)}}),Object.defineProperty(j.prototype,"buffer_",{get:function(){return this._storage_uint8_.buffer.slice(this._storage_uint8_.byteOffset,b(this._storage_uint8_.byteOffset,4))}}),Object.defineProperty(j.prototype,"subarray_",{get:function(){return this._storage_uint8_}}),t.methods.set&&Object.defineProperty(j.prototype,"set",{get:function(){return function(e){e instanceof j?this.set_from_simdope(e):this.set_from_array(e)}}}),(t.methods.set||t.methods.set_from_array||t.methods.blend_all||t.methods.blend_with||t.methods.merge_with_a_fixed)&&Object.defineProperty(j.prototype,"set_from_array",{get:function(){return function(e){this._storage_uint8_.set(e.subarray(0,4),0)}}}),(t.methods.set||t.methods.set_from_simdope||t.methods.blend_all_with_tails||t.methods.blend_with||t.methods.blend_first_with||t.methods.blend||t.methods.copy||t.methods.merge_with_a_fixed||t.methods.get_deduplicated_sorted_uint32a)&&Object.defineProperty(j.prototype,"set_from_simdope",{get:function(){return function(e){this._storage_uint8_[0]=e.r,this._storage_uint8_[1]=e.g,this._storage_uint8_[2]=e.b,this._storage_uint8_[3]=e.a}}}),(t.methods.set_from_buffer||t.methods.get_use_element||t.methods.get_element)&&Object.defineProperty(j.prototype,"set_from_buffer",{get:function(){return function(e,t){t=a(t),y(e.byteLength,t)<4?this._storage_uint8_=new Uint8Array(new ArrayBuffer(4),0,4):this._storage_uint8_=new Uint8Array(e,t,4)}}}),t.methods.get_tail_opacity&&Object.defineProperty(j.prototype,"get_tail_opacity",{get:function(){return function(){return this.tail_o_[0]}}}),(t.methods.get_tail_opacity_and_reset||t.methods.blend_first_with_tails||t.methods.blend_all_with_tails||t.methods.blend_all_with_tails)&&Object.defineProperty(j.prototype,"get_tail_opacity_and_reset",{get:function(){return function(){var e=this.tail_o_[0];return this.tail_o_[0]=0,0|e}}}),(t.methods.get_tail||t.methods.blend_all_with_tails)&&Object.defineProperty(j.prototype,"get_tail",{get:function(){return function(){return this.tail_}}}),(t.methods.get_tail_and_reset||t.methods.blend_first_with_tails||t.methods.blend_all_with_tails)&&Object.defineProperty(j.prototype,"get_tail_and_reset",{get:function(){return function(){var e=this.tail_;return this.tail_=void 0,e}}}),t.methods.reset_tail&&Object.defineProperty(j.prototype,"reset_tail",{get:function(){return function(){this.tail_=void 0,this.tail_o_[0]=0}}}),t.methods.set_tail&&Object.defineProperty(j.prototype,"set_tail",{get:function(){return function(e,t){this.tail_=e,this.tail_o_[0]=v(t)}}}),t.methods.simplify&&Object.defineProperty(j.prototype,"simplify",{get:function(){return function(e){e=P(e),this._storage_uint8_[0]=g(s(S(this.r/e),e),0,255),this._storage_uint8_[1]=g(s(S(this.g/e),e),0,255),this._storage_uint8_[2]=g(s(S(this.b/e),e),0,255)}}}),t.methods.normalize&&Object.defineProperty(j.prototype,"normalize",{get:function(){return function(){var e=this.r+this.g+this.b|0;this._storage_uint8_[0]=g(this.r/e*3|0,0,255),this._storage_uint8_[1]=g(this.g/e*3|0,0,255),this._storage_uint8_[2]=g(this.b/e*3|0,0,255)}}}),t.methods.set_out_of&&Object.defineProperty(j.prototype,"set_out_of",{get:function(){return function(e,t,n,r){return this._storage_uint8_[0]=v(e),this._storage_uint8_[1]=v(t),this._storage_uint8_[2]=v(n),this._storage_uint8_[3]=v(r),this}}}),(t.methods.get_subarray||t.methods.merge_with_a_fixed||t.methods.blend_first_with||t.methods.blend||t.methods.set||t.methods.set_from_simdope||t.methods.blend_all_with_tails||t.methods.copy||t.methods.merge_scale_of_255_a_fixed||t.methods.blend_with||t.methods.get_deduplicated_sorted_uint32a)&&(j.prototype.get_subarray=function(){return this.subarray_}),(t.methods.get_slice||t.methods.with_inverse||t.methods.with_r||t.methods.with_g||t.methods.with_b||t.methods.with_a)&&(j.prototype.get_slice=function(){return this.slice_}),t.methods.get_buffer&&(j.prototype.get_buffer=function(){return this.buffer_});var V=new Float32Array(2),Q=new Float64Array(4);return t.methods.blend_all&&(j.blend_all=function(e,t,n,r){V[0]=1,V[1]=1,Q[0]=e.r,Q[1]=e.g,Q[2]=e.b,Q[3]=e.a;var s,o,a=i(t.length,n.length);for(o=0;o<a;o++)s=t[o],V[1]=P(n[o]),V[0]=P(V[0]+V[1]),Q[0]+=s.r*V[1],Q[1]+=s.g*V[1],Q[2]+=s.b*V[1],Q[3]+=s.a*V[1];if(U[0]=S(Q[0]/V[0]),U[1]=S(Q[1]/V[0]),U[2]=S(Q[2]/V[0]),U[3]=S(Q[3]/V[0]),e.set_from_array(U),!r)for(o=0;o<a;o++)t[o].set_from_array(U)}),t.methods.blend_first_with_tails&&(j.prototype.blend_first_with_tails=function(e){e|=0;var t=0,n=this.get_tail(),r=this.get_tail_opacity();if(0|e)for(;void 0!==n;)r=v(m(o(n.a,r))),t=v(d(b(this.a,r))),j.merge_scale_of_255_a_fixed_light(this,m(o(this.a,c(C(w(r)),t))),n,c(C(r),t),t),r=n.get_tail_opacity(),n=n.get_tail();else for(;void 0!==n;)r=v(m(o(n.a,r))),t=v(w(m(o(w(r),w(this.a))))),j.merge_scale_of_255_a_fixed_light(this,m(o(this.a,c(C(w(r)),t))),n,c(C(r),t),t),r=n.get_tail_opacity(),n=n.get_tail()}),t.methods.blend_all_with_tails&&(j.prototype.blend_all_with_tails=function(e){e|=0;var t=0,n=this.get_tail(),r=this.get_tail_opacity_and_reset();if(0|e)for(;void 0!==n;)r=v(m(o(n.a,r))),t=v(d(b(this.a,r))),j.merge_scale_of_255_a_fixed_light(this,m(o(this.a,c(C(w(r)),t))),n,c(C(r),t),t),r=n.get_tail_opacity_and_reset(),n=n.get_tail();else for(;void 0!==n;)r=v(m(o(n.a,r))),t=v(w(m(o(w(r),w(this.a))))),j.merge_scale_of_255_a_fixed_light(this,m(o(this.a,c(C(w(r)),t))),n,c(C(r),t),t),r=n.get_tail_opacity_and_reset(),n=n.get_tail();for(n=this.get_tail_and_reset();void 0!==n;)n.set_from_simdope(this),n=n.get_tail_and_reset()}),t.methods.blend_with&&(j.prototype.blend_with=function(e,t,n,r){return n|=0,r|=0,t|=0,e.multiply_a_255(0|t),0|n?(this.is_fully_transparent()?e.set_from_simdope(e):e.is_fully_transparent()&&this.set_from_simdope(e),this):(t=v(0|r?d(b(this.a,e.a)):w(m(o(w(e.a),w(this.a))))),j.merge_scale_of_255_a_fixed(this,m(o(this.a,c(C(w(e.a)),t))),e,c(C(e.a),t),t),this)}),(t.methods.blend_first_with||t.methods.blend||t.methods.get_deduplicated_sorted_uint32a)&&(j.prototype.blend_first_with=function(e,t,n,r){n|=0,r|=0,t|=0;var i=m(o(e.a,t));return 0|n?(this.is_fully_transparent()?e.set_from_simdope(this):0|i||this.set_from_simdope(e),this):(t=v(0|r?d(b(this.a,i)):w(m(o(w(i),w(this.a))))),j.merge_scale_of_255_a_fixed_light(this,m(o(this.a,c(C(w(i)),t))),e,m(o(i,c(C(i),t))),t),this)}),t.methods.is_skin&&(j.prototype.is_skin=function(){return this.skin}),t.methods.is_not_skin&&(j.prototype.is_not_skin=function(){return!this.skin}),t.methods.sum_rgba&&(j.prototype.sum_rgba=function(){return b(b(this.r,this.g),b(this.b,this.a))}),(t.methods.sum_rgb||t.methods.average_rgb||t.methods.is_dark||t.methods.to_greyscale)&&(j.prototype.sum_rgb=function(){return b(b(this.r,this.g),this.b)}),(t.methods.average_rgb||t.methods.is_dark||t.methods.to_greyscale)&&(j.prototype.average_rgb=function(){return v(c(this.sum_rgb(),3))}),t.methods.is_dark&&(j.prototype.is_dark=function(){return E(m(o(w(this.average_rgb()),this.a)),128)}),(t.methods.is_fully_transparent||t.methods.is_not_fully_transparent||t.methods.blend_with||t.methods.blend_first_with||t.methods.blend)&&(j.prototype.is_fully_transparent=function(){return L(this.a,0)}),(t.methods.is_fully_opaque||t.methods.is_not_fully_opaque||t.methods.blend_first_with)&&(j.prototype.is_fully_opaque=function(){return L(this.a,255)}),t.methods.is_not_fully_transparent&&(j.prototype.is_not_fully_transparent=function(){return!this.is_fully_transparent()}),t.methods.is_not_fully_opaque&&(j.prototype.is_not_fully_opaque=function(){return!this.is_fully_opaque()}),(t.methods.match_with||t.methods.match)&&(j.prototype.match_with=function(e,t){return 255==(t=(0|t)>>>0)||(0===t?this.uint32==e.uint32:p(this.r-e.r|0)<(0|t)&&p(this.g-e.g|0)<(0|t)&&p(this.b-e.b|0)<(0|t)&&p(this.a-e.a|0)<(0|t))}),t.methods.euclidean_match_with&&(j.prototype.euclidean_match_with=function(e,t){t=P(void 0!==t?t:-1);var n=P(k(Y[0]*N(this.r-e.r|0)+Y[1]*N(this.g-e.g|0)+Y[2]*N(this.b-e.b|0)|0)/z*P(1-p(this.a-e.a)/255));return t<=-1?n:n<t}),t.methods.manhattan_match_with&&(j.prototype.manhattan_match_with=function(e,t){t=P(void 0!==t?t:-1);var n=P(P(Y[0]*p(this.r-e.r|0)+Y[1]*p(this.g-e.g|0)+Y[2]*p(this.b-e.b|0))/q*P(1-p(this.a-e.a)/255));return t<=-1?n:n<t}),t.methods.cie76_match_with&&(j.prototype.cie76_match_with=function(e,t){t=P(void 0!==t?t:-1);var n=this.laba,r=e.laba,i=P(P(k(N(n[0]-r[0])+N(n[1]-r[1])+N(n[2]-r[2]))/M)*P(1-p(this.a-e.a|0)/255));return t<=-1?i:i<t}),t.methods.set_r&&(j.prototype.set_r=function(e){return this.subarray_[0]=v(e),this}),t.methods.set_g&&(j.prototype.set_g=function(e){return this.subarray_[1]=v(e),this}),t.methods.set_b&&(j.prototype.set_b=function(e){return this.subarray_[2]=v(e),this}),t.methods.set_a&&(j.prototype.set_a=function(e){return this.subarray_[3]=v(e),this}),t.methods.to_greyscale&&(j.prototype.to_greyscale=function(e){var t=this.subarray_;return t[0]=t[1]=t[2]=this.average_rgb(),this}),t.methods.to_greyscale_luma&&(j.prototype.to_greyscale_luma=function(e){var t=this.subarray_;return t[0]=t[1]=t[2]=v((this.r*Y[0]+this.g*Y[1]+this.b*Y[2])/3|0),this}),(t.methods.blend_with||t.methods.multiply_a_255)&&(j.prototype.multiply_a_255=function(e){this.subarray_[3]=v(m(o(0|this.a,0|e)))}),(t.methods.copy||t.methods.blend||t.methods.get_deduplicated_sorted_uint32a)&&(j.prototype.copy=function(e){return void 0!==e&&e instanceof j?(e.set_from_simdope(this),e):new j(this.slice_.buffer)}),t.methods.with_r&&(j.with_r=function(e,t){var n=e.get_slice();return n[0]=v(t),new j(n.buffer)}),t.methods.with_g&&(j.with_g=function(e,t){var n=e.get_slice();return n[1]=v(t),new j(n.buffer)}),t.methods.with_b&&(j.with_b=function(e,t){var n=e.get_slice();return n[2]=v(t),new j(n.buffer)}),t.methods.with_a&&(j.with_a=function(e,t){var n=e.get_slice();return n[3]=v(t),new j(n.buffer)}),t.methods.with_inverse&&(j.with_inverse=function(e){var t=e.get_slice();return t[0]=w(t[0]),t[1]=w(t[1]),t[2]=w(t[2]),t[3]=w(t[3]),new j(t.buffer)}),t.methods.match&&(j.match=function(e,t,n){return e.match_with(t,n)}),t.methods.blend&&(j.blend=function(e,t,n,r,i){return e.copy().blend_first_with(t,n,r,i)}),t.methods.merge_with_a_fixed&&(j.prototype.merge_with_a_fixed=function(e,t){t=v(t);var n=this.subarray_;n[0]=b(this.r,e.r),n[1]=b(this.g,e.g),n[2]=b(this.b,e.b),n[3]=v(t),e.set_from_simdope(this)}),(t.methods.merge_scale_of_255_a_fixed||t.methods.blend_with)&&(j.merge_scale_of_255_a_fixed=function(e,t,n,r,i){t=v(t),r=v(r),i=v(i);var s=e.get_subarray(),a=n.get_subarray();s[0]=m(o(e.r,t)),s[1]=m(o(e.g,t)),s[2]=m(o(e.b,t)),a[0]=m(o(n.r,r)),a[1]=m(o(n.g,r)),a[2]=m(o(n.b,r)),s[0]=b(e.r,n.r),s[1]=b(e.g,n.g),s[2]=b(e.b,n.b),s[3]=v(i),a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3]}),(t.methods.merge_scale_of_255_a_fixed_light||t.methods.blend_first_with||t.methods.blend||t.methods.get_deduplicated_sorted_uint32a)&&(j.merge_scale_of_255_a_fixed_light=function(e,t,n,r,i){t=v(t),r=v(r),i=v(i);var s=e.get_subarray();s[0]=b(m(o(e.r,t)),m(o(n.r,r))),s[1]=b(m(o(e.g,t)),m(o(n.g,r))),s[2]=b(m(o(e.b,t)),m(o(n.b,r))),s[3]=v(i)}),t.methods.scale_rgb_of_on_255&&(j.scale_rgb_of_on_255=function(e,t,n,r){var i=e.get_subarray();i[0]=m(o(e.r,t)),i[1]=m(o(e.g,n)),i[2]=m(o(e.b,r))}),t.methods.merge_with_a_fixed&&(j.merge_with_a_fixed=function(e,t,n){var r=e.get_subarray();r[0]=b(e.r,t.r),r[1]=b(e.g,t.g),r[2]=b(e.b,t.b),r[3]=v(n),t.set_from_array(r)}),t.methods.get_difference_with&&(j.prototype.get_difference_with=function(e){return j.new_of(p(this.r,e.r),p(this.g,e.g),p(this.b,e.b),p(this.a,e.a))}),t.methods.plus&&(j.plus=function(e,t){return U[3]=v(D(255,x(e.r,t.r))),U[2]=v(D(255,x(e.g,t.g))),U[1]=v(D(255,x(e.b,t.b))),U[0]=v(D(255,x(e.a,t.a))),new j(U.slice(0,4).buffer)}),t.methods.minus&&(j.minus=function(e,t){return U[3]=v(B(0,y(e.r,t.r))),U[2]=v(B(0,y(e.g,t.g))),U[1]=v(B(0,y(e.b,t.b))),U[0]=v(B(0,y(e.a,t.a))),new j(U.slice(0,4).buffer)}),t.methods.average&&(j.average=function(e,t){return U[3]=v(d(b(e.r,t.r))),U[2]=v(d(b(e.g,t.g))),U[1]=v(d(b(e.b,t.b))),U[0]=v(d(b(e.a,t.a))),new j(U.slice(0,4).buffer)}),j}(s,e),a=function(e,t){var n=e.multiply_uint_4,r=e.divide_4_uint,i=e.plus_uint,s=e.clamp_uint8,a=e.clamp_uint32,c=function(e,t,n){return this instanceof c?(t|=0,void 0!==e?(void 0!==e.data?(n=0|n||0|e.data.buffer.byteLength,this._storage_uint8_array_=new Uint8Array(e.data.buffer,t,n),this._storage_uint32_array_=new Uint32Array(e.data.buffer,t,r(n))):e.buffer instanceof ArrayBuffer?(n=0|n||0|e.buffer.byteLength,this._storage_uint8_array_=new Uint8Array(e.buffer,t,n),this._storage_uint32_array_=new Uint32Array(e.buffer,t,r(n))):e instanceof ArrayBuffer?(n=0|n||0|e.byteLength,this._storage_uint8_array_=new Uint8Array(e,t,n),this._storage_uint32_array_=new Uint32Array(e,t,r(n))):(e=Uint32Array.from(e),n=0|n||0|e.buffer.byteLength,this._storage_uint8_array_=new Uint8Array(e.buffer,t,n),this._storage_uint32_array_=new Uint32Array(e.buffer,t,r(n))),this):null):new c(e)};return Object.defineProperty(c.prototype,"length",{get:function(){return this._storage_uint32_array_.length}}),Object.defineProperty(c.prototype,"buffer_",{get:function(){return this._storage_uint8_array_.buffer}}),Object.defineProperty(c.prototype,"buffer_setUint8",{get:function(){return function(e,t){return this._storage_uint8_array_[0|e]=s(0|t)}}}),Object.defineProperty(c.prototype,"get_deduplicated_uint32a",{get:function(){return function(e){return Uint32Array.from(new Set(this._storage_uint32_array_))}}}),Object.defineProperty(c.prototype,"get_colors_count",{get:function(){return function(e){for(var t=0,n=this._storage_uint32_array_.length,r=new Uint32Array(e.length),s=-1;(0|t)<(0|n);t=i(t,1))-1!=(0|(s=e.indexOf(this._storage_uint32_array_[0|t])))&&(r[s]=(r[s]+1|0)>>>0);return r}}}),t.methods.get_deduplicated_sorted_uint32a&&Object.defineProperty(c.prototype,"get_deduplicated_sorted_uint32a",{get:function(){return function(e,t,n){var r=this.get_deduplicated_uint32a(),i=0|r.length,s=this.get_colors_count(r),a=new Array(i).fill(null).map((function(e,t){return{color:o.new_uint32(r[0|t]),count:s[0|t]}}));e=0|e||i,t=t instanceof o?t:void 0===t?o.new_of(255,255,255,255):"string"==typeof t?o.new_hex(t):"object"==typeof t?o.new_array_safe(t):o.new_uint32(t),n=void 0===n?"hilbert":"moore"===n?"moore":"lebesgue";var c=new o(new ArrayBuffer(4));new o(new ArrayBuffer(4)),a.sort((function(e,t){return e.count-t.count|0}));var d=(a=a.slice(0,Math.min(0|e,a.length))).map((function(e){var r=t.copy(c).blend_first_with(e.color,255),i=r[n];return{color:r.uint32,index:i,originalColor:e.color.uint32}}));return d.sort((function(e,t){return e.index-t.index|0})),Uint32Array.from(d.map((function(e){return e.originalColor})))}}}),Object.defineProperty(c.prototype,"buffer_getUint8",{get:function(){return function(e){return this._storage_uint8_array_[0|e]}}}),Object.defineProperty(c.prototype,"buffer_getUint8a",{get:function(){return function(e,t){return t=i(e|=0,n(t=(t|=0)||1)),this._storage_uint8_array_.subarray(e,t)}}}),Object.defineProperty(c.prototype,"buffer_setUint32",{get:function(){return function(e,t){this._storage_uint32_array_[0|e]=a(t)}}}),Object.defineProperty(c.prototype,"buffer_getUint32",{get:function(){return function(e){return this._storage_uint32_array_[0|e]}}}),Object.defineProperty(c.prototype,"subarray_uint32",{get:function(){return function(e,t){return e|=0,t=(t|=0)||this.length,this._storage_uint32_array_.subarray(e,t)}}}),Object.defineProperty(c.prototype,"slice_uint32",{get:function(){return function(e,t){return e|=0,t=(t|=0)||this.length,this._storage_uint32_array_.slice(e,t)}}}),Object.defineProperty(c.prototype,"subarray_uint8",{get:function(){return function(e,t){return e|=0,t|=0,this._storage_uint8_array_.subarray(n(e),n(t))}}}),Object.defineProperty(c.prototype,"slice_uint8",{get:function(){return function(e,t){return e|=0,t|=0,this._storage_uint8_array_.slice(n(e),n(t))}}}),c.prototype.get_image_data=function(){return new Uint8Array(this.slice_uint32(0,this.length).buffer)},c.prototype.get_hex=function(){for(var e=new Array(this.length),t=new o(new ArrayBuffer(4)),n=0;(0|n)<(0|this.length);n=n+1|0)e[n]=this.get_use_element(n,t).hex;return e},c.prototype.get_properties=function(e){e=""+e;for(var t=new Array(this.length),n=new o(new ArrayBuffer(4)),r=0;(0|r)<(0|this.length);r=r+1|0)t[r]=this.get_use_element(r,n)[e];return t},t.methods.get_element&&(c.prototype.get_element=function(e,t){return void 0!==t?(t.set_from_buffer(this.buffer_,0|e),t):new o(this.buffer_,0|e)}),c.prototype.get_new_element=function(e){return new o(this.buffer_,0|e)},t.methods.get_use_element&&(c.prototype.get_use_element=function(e,t){return t.set_from_buffer(this.buffer_,0|e),t}),c.prototype.subarray=function(e,t){return this.buffer_getUint8a(0|e,0|t)},c.prototype.set_element=function(e,t){this.buffer_setUint32(0|e,a(t.uint32))},c.prototype.set_uint32_element=function(e,t){this.buffer_setUint32(0|e,a(t))},c.prototype.get_uint32_element=function(e){return e|=0,this.buffer_getUint32(e)},c.prototype.get_sub_uint8a=function(e,t){return e|=0,t|=0,this.buffer_getUint8a(n(e),t)},c.prototype.get_slice_uint8a=function(e,t){return e|=0,t|=0,this.buffer_getUint8a(n(e),t).slice(0,n(t||1))},c.prototype.get_buffer=function(e,t){return e|=0,t|=0,this.buffer_getUint8a(n(e),t).buffer},c}(s,e);return t.simdops=s,t.Color=o,t.SIMDopeColor=o,t.Colors=a,t.SIMDopeColors=a,t}(e=Object.assign({create:{},properties:{},methods:{}},e))}}},913:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l,q:()=>d});const r="#version 300 es\nprecision highp float;\n\nuniform sampler2D uTex;\nuniform vec2 uInputRes;\nuniform float uEqualColorTolerance;\nuniform float uSteepDirectionThreshold;\nuniform float uDominantDirectionThreshold;\n\nin vec2 vTexCoord;\nin vec4 t1, t2, t3, t4, t5, t6, t7;\nout vec4 FragColor;\n\n#define BLEND_NONE 0\n#define BLEND_NORMAL 1\n#define BLEND_DOMINANT 2\n#define LUMINANCE_WEIGHT 1.0\n\nfloat reduce(vec3 color) {\n    return dot(color, vec3(65536.0, 256.0, 1.0));\n}\n\nfloat DistYCbCr(vec4 pixA, vec4 pixB) {\n    const vec3 w = vec3(0.2627, 0.6780, 0.0593);\n    const float scaleB = 0.5 / (1.0 - w.b);\n    const float scaleR = 0.5 / (1.0 - w.r);\n    vec3 diff = pixA.rgb - pixB.rgb;\n    float Y = dot(diff, w);\n    float Cb = scaleB * (diff.b - Y);\n    float Cr = scaleR * (diff.r - Y);\n    float rgbDist = sqrt(((LUMINANCE_WEIGHT * Y) * (LUMINANCE_WEIGHT * Y)) + (Cb * Cb) + (Cr * Cr));\n    \n    // Factor in alpha difference (matching Rust implementation)\n    // Weight RGB distance by minimum alpha, add alpha difference as penalty\n    float a1 = pixA.a;\n    float a2 = pixB.a;\n    if (a1 < a2) {\n        return a1 * rgbDist + (a2 - a1);\n    } else {\n        return a2 * rgbDist + (a1 - a2);\n    }\n}\n\nbool IsPixEqual(vec4 pixA, vec4 pixB) {\n    return (DistYCbCr(pixA, pixB) < uEqualColorTolerance);\n}\n\nbool IsBlendingNeeded(ivec4 blend) {\n    return (blend.x != BLEND_NONE || blend.y != BLEND_NONE || blend.z != BLEND_NONE || blend.w != BLEND_NONE);\n}\n\n// Alpha-weighted blend matching Rust's gradient_rgba function\n// front = pixel to blend towards, back = current pixel, t = blend factor (M/N in Rust)\nvec4 alphaBlend(vec4 back, vec4 front, float t) {\n    // If no blending requested, return back unchanged\n    if (t < 0.001) {\n        return back;\n    }\n    \n    // Weight by alpha: front contributes (front.a * t), back contributes (back.a * (1-t))\n    float weight_front = front.a * t;\n    float weight_back = back.a * (1.0 - t);\n    float weight_sum = weight_front + weight_back;\n    \n    if (weight_sum < 0.001) {\n        return vec4(0.0);\n    }\n    \n    // RGB is weighted by alpha contribution\n    vec3 rgb = (front.rgb * weight_front + back.rgb * weight_back) / weight_sum;\n    // Alpha is the sum of weights (matches Rust: weight_sum / N, but we're already normalized)\n    float alpha = weight_sum;\n    \n    return vec4(rgb, alpha);\n}\n\n",i=r+"\n#define M_PI 3.1415926535897932384626433832795\n\n// ScalePixel now takes vec4 arrays to preserve Alpha\nvoid ScalePixel(ivec4 blend, vec4 k[9], inout vec4 dst[4]) {\n    float v0 = reduce(k[0].rgb); float v4 = reduce(k[4].rgb); float v5 = reduce(k[5].rgb); float v7 = reduce(k[7].rgb); float v8 = reduce(k[8].rgb);\n    // Original xBRZ: dist(f,g) and dist(h,c) for line detection\n    float fg = DistYCbCr(k[1], k[4]);  // dist(f, g)\n    float hc = DistYCbCr(k[3], k[8]);  // dist(h, c)\n    // shallow_line: neq(e,g) && neq(d,g), steep_line: neq(e,c) && neq(b,c)\n    bool haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && !IsPixEqual(k[0], k[4]) && !IsPixEqual(k[5], k[4]);\n    bool haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && !IsPixEqual(k[0], k[8]) && !IsPixEqual(k[7], k[8]);\n    bool needBlend = (blend.z != BLEND_NONE);\n    bool doLineBlend = (blend.z >= BLEND_DOMINANT ||\n        !((blend.y != BLEND_NONE && !IsPixEqual(k[0], k[4])) ||\n          (blend.w != BLEND_NONE && !IsPixEqual(k[0], k[8])) ||\n          (IsPixEqual(k[4], k[3]) && IsPixEqual(k[3], k[2]) && IsPixEqual(k[2], k[1]) && IsPixEqual(k[1], k[8]) && !IsPixEqual(k[0], k[2]))));\n\n    vec4 blendPix = (DistYCbCr(k[0], k[1]) <= DistYCbCr(k[0], k[3])) ? k[1] : k[3];\n    dst[1] = alphaBlend(dst[1], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.25 : 0.00);\n    dst[2] = alphaBlend(dst[2], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 5.0/6.0 : 0.75) : ((haveSteepLine) ? 0.75 : 0.50)) : 1.0 - (M_PI/4.0)) : 0.00);\n    dst[3] = alphaBlend(dst[3], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.25 : 0.00);\n}\n\nvoid main() {\n    vec4 src[25]; // vec4 for Alpha\n    src[21] = texture(uTex, t1.xw); src[22] = texture(uTex, t1.yw); src[23] = texture(uTex, t1.zw);\n    src[ 6] = texture(uTex, t2.xw); src[ 7] = texture(uTex, t2.yw); src[ 8] = texture(uTex, t2.zw);\n    src[ 5] = texture(uTex, t3.xw); src[ 0] = texture(uTex, t3.yw); src[ 1] = texture(uTex, t3.zw);\n    src[ 4] = texture(uTex, t4.xw); src[ 3] = texture(uTex, t4.yw); src[ 2] = texture(uTex, t4.zw);\n    src[15] = texture(uTex, t5.xw); src[14] = texture(uTex, t5.yw); src[13] = texture(uTex, t5.zw);\n    src[19] = texture(uTex, t6.xy); src[18] = texture(uTex, t6.xz); src[17] = texture(uTex, t6.xw);\n    src[ 9] = texture(uTex, t7.xy); src[10] = texture(uTex, t7.xz); src[11] = texture(uTex, t7.xw);\n\n    float v[9];\n    v[0] = reduce(src[0].rgb); v[1] = reduce(src[1].rgb); v[2] = reduce(src[2].rgb);\n    v[3] = reduce(src[3].rgb); v[4] = reduce(src[4].rgb); v[5] = reduce(src[5].rgb);\n    v[6] = reduce(src[6].rgb); v[7] = reduce(src[7].rgb); v[8] = reduce(src[8].rgb);\n\n    ivec4 blendResult = ivec4(BLEND_NONE);\n\n    // Corner Checks use full vec4 for proper alpha handling\n    if (!((v[0] == v[1] && v[3] == v[2]) || (v[0] == v[3] && v[1] == v[2]))) {\n        float d1 = DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + DistYCbCr(src[14], src[2]) + DistYCbCr(src[2], src[10]) + (4.0 * DistYCbCr(src[3], src[1]));\n        float d2 = DistYCbCr(src[5], src[3]) + DistYCbCr(src[3], src[13]) + DistYCbCr(src[7], src[1]) + DistYCbCr(src[1], src[11]) + (4.0 * DistYCbCr(src[0], src[2]));\n        blendResult.z = ((d1 < d2) && (v[0] != v[1]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    if (!((v[5] == v[0] && v[4] == v[3]) || (v[5] == v[4] && v[0] == v[3]))) {\n        float d1 = DistYCbCr(src[17], src[5]) + DistYCbCr(src[5], src[7]) + DistYCbCr(src[15], src[3]) + DistYCbCr(src[3], src[1]) + (4.0 * DistYCbCr(src[4], src[0]));\n        float d2 = DistYCbCr(src[18], src[4]) + DistYCbCr(src[4], src[14]) + DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + (4.0 * DistYCbCr(src[5], src[3]));\n        blendResult.w = ((d1 > d2) && (v[0] != v[5]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    if (!((v[7] == v[8] && v[0] == v[1]) || (v[7] == v[0] && v[8] == v[1]))) {\n        float d1 = DistYCbCr(src[5], src[7]) + DistYCbCr(src[7], src[23]) + DistYCbCr(src[3], src[1]) + DistYCbCr(src[1], src[9]) + (4.0 * DistYCbCr(src[0], src[8]));\n        float d2 = DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + DistYCbCr(src[22], src[8]) + DistYCbCr(src[8], src[10]) + (4.0 * DistYCbCr(src[7], src[1]));\n        blendResult.y = ((d1 > d2) && (v[0] != v[7]) && (v[0] != v[1])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    if (!((v[6] == v[7] && v[5] == v[0]) || (v[6] == v[5] && v[7] == v[0]))) {\n        float d1 = DistYCbCr(src[18], src[6]) + DistYCbCr(src[6], src[22]) + DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + (4.0 * DistYCbCr(src[5], src[7]));\n        float d2 = DistYCbCr(src[19], src[5]) + DistYCbCr(src[5], src[3]) + DistYCbCr(src[21], src[7]) + DistYCbCr(src[7], src[1]) + (4.0 * DistYCbCr(src[6], src[0]));\n        blendResult.x = ((d1 < d2) && (v[0] != v[5]) && (v[0] != v[7])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n\n    vec4 dst[4];\n    dst[0] = src[0]; dst[1] = src[0]; dst[2] = src[0]; dst[3] = src[0];\n\n    if (IsBlendingNeeded(blendResult)) {\n        vec4 k[9]; vec4 tempDst3;\n        // 0 deg\n        k[0]=src[0]; k[1]=src[1]; k[2]=src[2]; k[3]=src[3]; k[4]=src[4]; k[5]=src[5]; k[6]=src[6]; k[7]=src[7]; k[8]=src[8];\n        ScalePixel(blendResult, k, dst);\n        // 90 deg\n        k[1]=src[7]; k[2]=src[8]; k[3]=src[1]; k[4]=src[2]; k[5]=src[3]; k[6]=src[4]; k[7]=src[5]; k[8]=src[6];\n        tempDst3 = dst[3]; dst[3] = dst[2]; dst[2] = dst[1]; dst[1] = dst[0]; dst[0] = tempDst3;\n        ScalePixel(blendResult.wxyz, k, dst);\n        // 180 deg\n        k[1]=src[5]; k[2]=src[6]; k[3]=src[7]; k[4]=src[8]; k[5]=src[1]; k[6]=src[2]; k[7]=src[3]; k[8]=src[4];\n        tempDst3 = dst[3]; dst[3] = dst[2]; dst[2] = dst[1]; dst[1] = dst[0]; dst[0] = tempDst3;\n        ScalePixel(blendResult.zwxy, k, dst);\n        // 270 deg\n        k[1]=src[3]; k[2]=src[4]; k[3]=src[5]; k[4]=src[6]; k[5]=src[7]; k[6]=src[8]; k[7]=src[1]; k[8]=src[2];\n        tempDst3 = dst[3]; dst[3] = dst[2]; dst[2] = dst[1]; dst[1] = dst[0]; dst[0] = tempDst3;\n        ScalePixel(blendResult.yzwx, k, dst);\n        // Rotate back\n        tempDst3 = dst[3]; dst[3] = dst[2]; dst[2] = dst[1]; dst[1] = dst[0]; dst[0] = tempDst3;\n    }\n\n    vec2 f = step(0.5, fract(vTexCoord * uInputRes));\n    vec4 res = mix(mix(dst[0], dst[1], f.x), mix(dst[3], dst[2], f.x), f.y);\n    FragColor = res;\n}",s=r+"\nconst float one_third = 1.0 / 3.0;\nconst float two_third = 2.0 / 3.0;\n\nvoid ScalePixel(ivec4 blend, vec4 k[9], inout vec4 dst[9]) {\n    float v0 = reduce(k[0].rgb); float v4 = reduce(k[4].rgb); float v5 = reduce(k[5].rgb); float v7 = reduce(k[7].rgb); float v8 = reduce(k[8].rgb);\n    // Original xBRZ: dist(f,g) and dist(h,c) for line detection\n    float fg = DistYCbCr(k[1], k[4]);  // dist(f, g)\n    float hc = DistYCbCr(k[3], k[8]);  // dist(h, c)\n    // shallow_line: neq(e,g) && neq(d,g), steep_line: neq(e,c) && neq(b,c)\n    bool haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && !IsPixEqual(k[0], k[4]) && !IsPixEqual(k[5], k[4]);\n    bool haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && !IsPixEqual(k[0], k[8]) && !IsPixEqual(k[7], k[8]);\n    bool needBlend = (blend.z != BLEND_NONE);\n    bool doLineBlend = (blend.z >= BLEND_DOMINANT || !((blend.y != BLEND_NONE && !IsPixEqual(k[0], k[4])) || (blend.w != BLEND_NONE && !IsPixEqual(k[0], k[8])) || (IsPixEqual(k[4], k[3]) && IsPixEqual(k[3], k[2]) && IsPixEqual(k[2], k[1]) && IsPixEqual(k[1], k[8]) && !IsPixEqual(k[0], k[2]))));\n    \n    vec4 blendPix = (DistYCbCr(k[0], k[1]) <= DistYCbCr(k[0], k[3])) ? k[1] : k[3];\n    dst[1] = alphaBlend(dst[1], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 0.750 : ((haveShallowLine) ? 0.250 : 0.125)) : 0.000);\n    dst[2] = alphaBlend(dst[2], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.4545939598) : 0.000);\n    dst[3] = alphaBlend(dst[3], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 0.750 : ((haveSteepLine) ? 0.250 : 0.125)) : 0.000);\n    dst[4] = alphaBlend(dst[4], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n    dst[8] = alphaBlend(dst[8], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n}\n\nvoid main() {\n    vec4 src[25]; // vec4\n    src[21] = texture(uTex, t1.xw); src[22] = texture(uTex, t1.yw); src[23] = texture(uTex, t1.zw);\n    src[ 6] = texture(uTex, t2.xw); src[ 7] = texture(uTex, t2.yw); src[ 8] = texture(uTex, t2.zw);\n    src[ 5] = texture(uTex, t3.xw); src[ 0] = texture(uTex, t3.yw); src[ 1] = texture(uTex, t3.zw);\n    src[ 4] = texture(uTex, t4.xw); src[ 3] = texture(uTex, t4.yw); src[ 2] = texture(uTex, t4.zw);\n    src[15] = texture(uTex, t5.xw); src[14] = texture(uTex, t5.yw); src[13] = texture(uTex, t5.zw);\n    src[19] = texture(uTex, t6.xy); src[18] = texture(uTex, t6.xz); src[17] = texture(uTex, t6.xw);\n    src[ 9] = texture(uTex, t7.xy); src[10] = texture(uTex, t7.xz); src[11] = texture(uTex, t7.xw);\n\n    float v[9];\n    for(int i=0; i<9; i++) v[i] = reduce(src[i].rgb);\n    \n    ivec4 blendResult = ivec4(BLEND_NONE);\n\n    // Corner Check Logic\n    if (!((v[0] == v[1] && v[3] == v[2]) || (v[0] == v[3] && v[1] == v[2]))) {\n        float d1 = DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + DistYCbCr(src[14], src[2]) + DistYCbCr(src[2], src[10]) + (4.0 * DistYCbCr(src[3], src[1]));\n        float d2 = DistYCbCr(src[5], src[3]) + DistYCbCr(src[3], src[13]) + DistYCbCr(src[7], src[1]) + DistYCbCr(src[1], src[11]) + (4.0 * DistYCbCr(src[0], src[2]));\n        blendResult.z = ((d1 < d2) && (v[0] != v[1]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    if (!((v[5] == v[0] && v[4] == v[3]) || (v[5] == v[4] && v[0] == v[3]))) {\n        float d1 = DistYCbCr(src[17], src[5]) + DistYCbCr(src[5], src[7]) + DistYCbCr(src[15], src[3]) + DistYCbCr(src[3], src[1]) + (4.0 * DistYCbCr(src[4], src[0]));\n        float d2 = DistYCbCr(src[18], src[4]) + DistYCbCr(src[4], src[14]) + DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + (4.0 * DistYCbCr(src[5], src[3]));\n        blendResult.w = ((d1 > d2) && (v[0] != v[5]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    if (!((v[7] == v[8] && v[0] == v[1]) || (v[7] == v[0] && v[8] == v[1]))) {\n        float d1 = DistYCbCr(src[5], src[7]) + DistYCbCr(src[7], src[23]) + DistYCbCr(src[3], src[1]) + DistYCbCr(src[1], src[9]) + (4.0 * DistYCbCr(src[0], src[8]));\n        float d2 = DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + DistYCbCr(src[22], src[8]) + DistYCbCr(src[8], src[10]) + (4.0 * DistYCbCr(src[7], src[1]));\n        blendResult.y = ((d1 > d2) && (v[0] != v[7]) && (v[0] != v[1])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    if (!((v[6] == v[7] && v[5] == v[0]) || (v[6] == v[5] && v[7] == v[0]))) {\n        float d1 = DistYCbCr(src[18], src[6]) + DistYCbCr(src[6], src[22]) + DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + (4.0 * DistYCbCr(src[5], src[7]));\n        float d2 = DistYCbCr(src[19], src[5]) + DistYCbCr(src[5], src[3]) + DistYCbCr(src[21], src[7]) + DistYCbCr(src[7], src[1]) + (4.0 * DistYCbCr(src[6], src[0]));\n        blendResult.x = ((d1 < d2) && (v[0] != v[5]) && (v[0] != v[7])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n\n    vec4 dst[9];\n    for(int i=0; i<9; i++) dst[i] = src[0];\n\n    if (IsBlendingNeeded(blendResult)) {\n        vec4 k[9];\n        vec4 tempDst8, tempDst7;\n        \n        // 0 deg\n        k[8]=src[8]; k[7]=src[7]; k[6]=src[6]; k[5]=src[5]; k[4]=src[4]; k[3]=src[3]; k[2]=src[2]; k[1]=src[1]; k[0]=src[0];\n        ScalePixel(blendResult, k, dst);\n        // 90 deg\n        k[8]=src[6]; k[7]=src[5]; k[6]=src[4]; k[5]=src[3]; k[4]=src[2]; k[3]=src[1]; k[2]=src[8]; k[1]=src[7];\n        tempDst8=dst[8]; tempDst7=dst[7]; dst[8]=dst[6]; dst[7]=dst[5]; dst[6]=dst[4]; dst[5]=dst[3]; dst[4]=dst[2]; dst[3]=dst[1]; dst[2]=tempDst8; dst[1]=tempDst7;\n        ScalePixel(blendResult.wxyz, k, dst);\n        // 180 deg\n        k[8]=src[4]; k[7]=src[3]; k[6]=src[2]; k[5]=src[1]; k[4]=src[8]; k[3]=src[7]; k[2]=src[6]; k[1]=src[5];\n        tempDst8=dst[8]; tempDst7=dst[7]; dst[8]=dst[6]; dst[7]=dst[5]; dst[6]=dst[4]; dst[5]=dst[3]; dst[4]=dst[2]; dst[3]=dst[1]; dst[2]=tempDst8; dst[1]=tempDst7;\n        ScalePixel(blendResult.zwxy, k, dst);\n        // 270 deg\n        k[8]=src[2]; k[7]=src[1]; k[6]=src[8]; k[5]=src[7]; k[4]=src[6]; k[3]=src[5]; k[2]=src[4]; k[1]=src[3];\n        tempDst8=dst[8]; tempDst7=dst[7]; dst[8]=dst[6]; dst[7]=dst[5]; dst[6]=dst[4]; dst[5]=dst[3]; dst[4]=dst[2]; dst[3]=dst[1]; dst[2]=tempDst8; dst[1]=tempDst7;\n        ScalePixel(blendResult.yzwx, k, dst);\n        // Rotate back\n        tempDst8=dst[8]; tempDst7=dst[7]; dst[8]=dst[6]; dst[7]=dst[5]; dst[6]=dst[4]; dst[5]=dst[3]; dst[4]=dst[2]; dst[3]=dst[1]; dst[2]=tempDst8; dst[1]=tempDst7;\n    }\n\n    vec2 f = fract(vTexCoord * uInputRes);\n    vec4 res = mix(mix(dst[6], mix(dst[7], dst[8], step(two_third, f.x)), step(one_third, f.x)),\n                   mix(mix(dst[5], mix(dst[0], dst[1], step(two_third, f.x)), step(one_third, f.x)),\n                       mix(dst[4], mix(dst[3], dst[2], step(two_third, f.x)), step(one_third, f.x)), step(two_third, f.y)), step(one_third, f.y));\n\n    FragColor = res;\n}",o=r+"\nvoid main() {\n    vec2 f = fract(vTexCoord * uInputRes);\n    vec4 src[25]; // vec4\n    src[21] = texture(uTex, t1.xw); src[22] = texture(uTex, t1.yw); src[23] = texture(uTex, t1.zw);\n    src[ 6] = texture(uTex, t2.xw); src[ 7] = texture(uTex, t2.yw); src[ 8] = texture(uTex, t2.zw);\n    src[ 5] = texture(uTex, t3.xw); src[ 0] = texture(uTex, t3.yw); src[ 1] = texture(uTex, t3.zw);\n    src[ 4] = texture(uTex, t4.xw); src[ 3] = texture(uTex, t4.yw); src[ 2] = texture(uTex, t4.zw);\n    src[15] = texture(uTex, t5.xw); src[14] = texture(uTex, t5.yw); src[13] = texture(uTex, t5.zw);\n    src[19] = texture(uTex, t6.xy); src[18] = texture(uTex, t6.xz); src[17] = texture(uTex, t6.xw);\n    src[ 9] = texture(uTex, t7.xy); src[10] = texture(uTex, t7.xz); src[11] = texture(uTex, t7.xw);\n\n    float v[9];\n    for(int i=0; i<9; i++) v[i] = reduce(src[i].rgb);\n\n    ivec4 blendResult = ivec4(BLEND_NONE);\n\n    // 4 Corner Checks\n    if (!((v[0] == v[1] && v[3] == v[2]) || (v[0] == v[3] && v[1] == v[2]))) {\n        float d1 = DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + DistYCbCr(src[14], src[2]) + DistYCbCr(src[2], src[10]) + (4.0 * DistYCbCr(src[3], src[1]));\n        float d2 = DistYCbCr(src[5], src[3]) + DistYCbCr(src[3], src[13]) + DistYCbCr(src[7], src[1]) + DistYCbCr(src[1], src[11]) + (4.0 * DistYCbCr(src[0], src[2]));\n        blendResult.z = ((d1 < d2) && (v[0] != v[1]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    if (!((v[5] == v[0] && v[4] == v[3]) || (v[5] == v[4] && v[0] == v[3]))) {\n        float d1 = DistYCbCr(src[17], src[5]) + DistYCbCr(src[5], src[7]) + DistYCbCr(src[15], src[3]) + DistYCbCr(src[3], src[1]) + (4.0 * DistYCbCr(src[4], src[0]));\n        float d2 = DistYCbCr(src[18], src[4]) + DistYCbCr(src[4], src[14]) + DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + (4.0 * DistYCbCr(src[5], src[3]));\n        blendResult.w = ((d1 > d2) && (v[0] != v[5]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    if (!((v[7] == v[8] && v[0] == v[1]) || (v[7] == v[0] && v[8] == v[1]))) {\n        float d1 = DistYCbCr(src[5], src[7]) + DistYCbCr(src[7], src[23]) + DistYCbCr(src[3], src[1]) + DistYCbCr(src[1], src[9]) + (4.0 * DistYCbCr(src[0], src[8]));\n        float d2 = DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + DistYCbCr(src[22], src[8]) + DistYCbCr(src[8], src[10]) + (4.0 * DistYCbCr(src[7], src[1]));\n        blendResult.y = ((d1 > d2) && (v[0] != v[7]) && (v[0] != v[1])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    if (!((v[6] == v[7] && v[5] == v[0]) || (v[6] == v[5] && v[7] == v[0]))) {\n        float d1 = DistYCbCr(src[18], src[6]) + DistYCbCr(src[6], src[22]) + DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + (4.0 * DistYCbCr(src[5], src[7]));\n        float d2 = DistYCbCr(src[19], src[5]) + DistYCbCr(src[5], src[3]) + DistYCbCr(src[21], src[7]) + DistYCbCr(src[7], src[1]) + (4.0 * DistYCbCr(src[6], src[0]));\n        blendResult.x = ((d1 < d2) && (v[0] != v[5]) && (v[0] != v[7])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n\n    vec4 dst[16];\n    for (int i=0; i<16; i++) dst[i] = src[0];\n\n    if (IsBlendingNeeded(blendResult)) {\n        // Block 1: bottom-right corner (blendResult.z), 0 rotation\n        // Original xBRZ: dist(f,g) and dist(h,c) for line detection\n        float fg = DistYCbCr(src[1], src[4]);  // dist(f, g)\n        float hc = DistYCbCr(src[3], src[8]);  // dist(h, c)\n        // shallow_line: neq(e,g) && neq(d,g), steep_line: neq(e,c) && neq(b,c)\n        bool haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && !IsPixEqual(src[0], src[4]) && !IsPixEqual(src[5], src[4]);\n        bool haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && !IsPixEqual(src[0], src[8]) && !IsPixEqual(src[7], src[8]);\n        bool needBlend = (blendResult.z != BLEND_NONE);\n        bool doLineBlend = (blendResult.z >= BLEND_DOMINANT || !((blendResult.y != BLEND_NONE && !IsPixEqual(src[0], src[4])) || (blendResult.w != BLEND_NONE && !IsPixEqual(src[0], src[8])) || (IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && !IsPixEqual(src[0], src[2]))));\n        vec4 blendPix = (DistYCbCr(src[0], src[1]) <= DistYCbCr(src[0], src[3])) ? src[1] : src[3];\n        dst[2] = alphaBlend(dst[2], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 1.0/3.0 : 0.25) : ((haveSteepLine) ? 0.25 : 0.00)) : 0.00);\n        dst[9] = alphaBlend(dst[9], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.25 : 0.00);\n        dst[10] = alphaBlend(dst[10], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.75 : 0.00);\n        dst[11] = alphaBlend(dst[11], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.00 : ((haveShallowLine) ? 0.75 : 0.50)) : 0.08677704501) : 0.00);\n        dst[12] = alphaBlend(dst[12], blendPix, (needBlend) ? ((doLineBlend) ? 1.00 : 0.6848532563) : 0.00);\n        dst[13] = alphaBlend(dst[13], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.00 : ((haveSteepLine) ? 0.75 : 0.50)) : 0.08677704501) : 0.00);\n        dst[14] = alphaBlend(dst[14], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.75 : 0.00);\n        dst[15] = alphaBlend(dst[15], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.25 : 0.00);\n\n        // Block 2: top-right corner (blendResult.y), 90 deg CW rotation\n        // After rotation: f=src[7], g=src[2], h=src[1], c=src[6], d=src[3], b=src[5]\n        fg = DistYCbCr(src[7], src[2]);  // dist(rotated f, rotated g)\n        hc = DistYCbCr(src[1], src[6]);  // dist(rotated h, rotated c)\n        haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && !IsPixEqual(src[0], src[2]) && !IsPixEqual(src[3], src[2]);\n        haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && !IsPixEqual(src[0], src[6]) && !IsPixEqual(src[5], src[6]);\n        needBlend = (blendResult.y != BLEND_NONE);\n        doLineBlend = (blendResult.y >= BLEND_DOMINANT || !((blendResult.x != BLEND_NONE && !IsPixEqual(src[0], src[2])) || (blendResult.z != BLEND_NONE && !IsPixEqual(src[0], src[6])) || (IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && !IsPixEqual(src[0], src[8]))));\n        blendPix = (DistYCbCr(src[0], src[7]) <= DistYCbCr(src[0], src[1])) ? src[7] : src[1];\n        dst[1] = alphaBlend(dst[1], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 1.0/3.0 : 0.25) : ((haveSteepLine) ? 0.25 : 0.00)) : 0.00);\n        dst[6] = alphaBlend(dst[6], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.25 : 0.00);\n        dst[7] = alphaBlend(dst[7], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.75 : 0.00);\n        dst[8] = alphaBlend(dst[8], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.00 : ((haveShallowLine) ? 0.75 : 0.50)) : 0.08677704501) : 0.00);\n        dst[9] = alphaBlend(dst[9], blendPix, (needBlend) ? ((doLineBlend) ? 1.00 : 0.6848532563) : 0.00);\n        dst[10] = alphaBlend(dst[10], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.00 : ((haveSteepLine) ? 0.75 : 0.50)) : 0.08677704501) : 0.00);\n        dst[11] = alphaBlend(dst[11], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.75 : 0.00);\n        dst[12] = alphaBlend(dst[12], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.25 : 0.00);\n\n        // Block 3: top-left corner (blendResult.x), 180 deg rotation\n        // After rotation: f=src[5], g=src[8], h=src[7], c=src[4], d=src[1], b=src[3]\n        fg = DistYCbCr(src[5], src[8]);  // dist(rotated f, rotated g)\n        hc = DistYCbCr(src[7], src[4]);  // dist(rotated h, rotated c)\n        haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && !IsPixEqual(src[0], src[8]) && !IsPixEqual(src[1], src[8]);\n        haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && !IsPixEqual(src[0], src[4]) && !IsPixEqual(src[3], src[4]);\n        needBlend = (blendResult.x != BLEND_NONE);\n        doLineBlend = (blendResult.x >= BLEND_DOMINANT || !((blendResult.w != BLEND_NONE && !IsPixEqual(src[0], src[8])) || (blendResult.y != BLEND_NONE && !IsPixEqual(src[0], src[4])) || (IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && !IsPixEqual(src[0], src[6]))));\n        blendPix = (DistYCbCr(src[0], src[5]) <= DistYCbCr(src[0], src[7])) ? src[5] : src[7];\n        dst[0] = alphaBlend(dst[0], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 1.0/3.0 : 0.25) : ((haveSteepLine) ? 0.25 : 0.00)) : 0.00);\n        dst[15] = alphaBlend(dst[15], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.25 : 0.00);\n        dst[4] = alphaBlend(dst[4], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.75 : 0.00);\n        dst[5] = alphaBlend(dst[5], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.00 : ((haveShallowLine) ? 0.75 : 0.50)) : 0.08677704501) : 0.00);\n        dst[6] = alphaBlend(dst[6], blendPix, (needBlend) ? ((doLineBlend) ? 1.00 : 0.6848532563) : 0.00);\n        dst[7] = alphaBlend(dst[7], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.00 : ((haveSteepLine) ? 0.75 : 0.50)) : 0.08677704501) : 0.00);\n        dst[8] = alphaBlend(dst[8], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.75 : 0.00);\n        dst[9] = alphaBlend(dst[9], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.25 : 0.00);\n\n        // Block 4: bottom-left corner (blendResult.w), 270 deg rotation\n        // After rotation: f=src[3], g=src[6], h=src[5], c=src[2], d=src[7], b=src[1]\n        fg = DistYCbCr(src[3], src[6]);  // dist(rotated f, rotated g)\n        hc = DistYCbCr(src[5], src[2]);  // dist(rotated h, rotated c)\n        haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && !IsPixEqual(src[0], src[6]) && !IsPixEqual(src[7], src[6]);\n        haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && !IsPixEqual(src[0], src[2]) && !IsPixEqual(src[1], src[2]);\n        needBlend = (blendResult.w != BLEND_NONE);\n        doLineBlend = (blendResult.w >= BLEND_DOMINANT || !((blendResult.z != BLEND_NONE && !IsPixEqual(src[0], src[6])) || (blendResult.x != BLEND_NONE && !IsPixEqual(src[0], src[2])) || (IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && !IsPixEqual(src[0], src[4]))));\n        blendPix = (DistYCbCr(src[0], src[3]) <= DistYCbCr(src[0], src[5])) ? src[3] : src[5];\n        dst[3] = alphaBlend(dst[3], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 1.0/3.0 : 0.25) : ((haveSteepLine) ? 0.25 : 0.00)) : 0.00);\n        dst[12] = alphaBlend(dst[12], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.25 : 0.00);\n        dst[13] = alphaBlend(dst[13], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.75 : 0.00);\n        dst[14] = alphaBlend(dst[14], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.00 : ((haveShallowLine) ? 0.75 : 0.50)) : 0.08677704501) : 0.00);\n        dst[15] = alphaBlend(dst[15], blendPix, (needBlend) ? ((doLineBlend) ? 1.00 : 0.6848532563) : 0.00);\n        dst[4] = alphaBlend(dst[4], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.00 : ((haveSteepLine) ? 0.75 : 0.50)) : 0.08677704501) : 0.00);\n        dst[5] = alphaBlend(dst[5], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.75 : 0.00);\n        dst[6] = alphaBlend(dst[6], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.25 : 0.00);\n    }\n\n    vec4 res = mix(mix(mix(mix(dst[6], dst[7], step(0.25, f.x)), mix(dst[8], dst[9], step(0.75, f.x)), step(0.50, f.x)),\n                       mix(mix(dst[5], dst[0], step(0.25, f.x)), mix(dst[1], dst[10], step(0.75, f.x)), step(0.50, f.x)), step(0.25, f.y)),\n                   mix(mix(mix(dst[4], dst[3], step(0.25, f.x)), mix(dst[2], dst[11], step(0.75, f.x)), step(0.50, f.x)),\n                       mix(mix(dst[15], dst[14], step(0.25, f.x)), mix(dst[13], dst[12], step(0.75, f.x)), step(0.50, f.x)), step(0.75, f.y)), step(0.50, f.y));\n\n    FragColor = res;\n}",a=r+"\nconst float one_fifth = 1.0 / 5.0;\nconst float two_fifth = 2.0 / 5.0;\nconst float three_fifth = 3.0 / 5.0;\nconst float four_fifth = 4.0 / 5.0;\n\nvoid main() {\n    vec2 f = fract(vTexCoord * uInputRes);\n    vec4 src[25];\n    src[21] = texture(uTex, t1.xw); src[22] = texture(uTex, t1.yw); src[23] = texture(uTex, t1.zw);\n    src[ 6] = texture(uTex, t2.xw); src[ 7] = texture(uTex, t2.yw); src[ 8] = texture(uTex, t2.zw);\n    src[ 5] = texture(uTex, t3.xw); src[ 0] = texture(uTex, t3.yw); src[ 1] = texture(uTex, t3.zw);\n    src[ 4] = texture(uTex, t4.xw); src[ 3] = texture(uTex, t4.yw); src[ 2] = texture(uTex, t4.zw);\n    src[15] = texture(uTex, t5.xw); src[14] = texture(uTex, t5.yw); src[13] = texture(uTex, t5.zw);\n    src[19] = texture(uTex, t6.xy); src[18] = texture(uTex, t6.xz); src[17] = texture(uTex, t6.xw);\n    src[ 9] = texture(uTex, t7.xy); src[10] = texture(uTex, t7.xz); src[11] = texture(uTex, t7.xw);\n\n    float v[9];\n    for(int i=0; i<9; i++) v[i] = reduce(src[i].rgb);\n\n    ivec4 blendResult = ivec4(BLEND_NONE);\n\n    // Corner (1, 1) - bottom-right\n    if (!((v[0] == v[1] && v[3] == v[2]) || (v[0] == v[3] && v[1] == v[2]))) {\n        float d1 = DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + DistYCbCr(src[14], src[2]) + DistYCbCr(src[2], src[10]) + (4.0 * DistYCbCr(src[3], src[1]));\n        float d2 = DistYCbCr(src[5], src[3]) + DistYCbCr(src[3], src[13]) + DistYCbCr(src[7], src[1]) + DistYCbCr(src[1], src[11]) + (4.0 * DistYCbCr(src[0], src[2]));\n        blendResult.z = ((d1 < d2) && (v[0] != v[1]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    // Corner (0, 1) - bottom-left\n    if (!((v[5] == v[0] && v[4] == v[3]) || (v[5] == v[4] && v[0] == v[3]))) {\n        float d1 = DistYCbCr(src[17], src[5]) + DistYCbCr(src[5], src[7]) + DistYCbCr(src[15], src[3]) + DistYCbCr(src[3], src[1]) + (4.0 * DistYCbCr(src[4], src[0]));\n        float d2 = DistYCbCr(src[18], src[4]) + DistYCbCr(src[4], src[14]) + DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + (4.0 * DistYCbCr(src[5], src[3]));\n        blendResult.w = ((d1 > d2) && (v[0] != v[5]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    // Corner (1, 0) - top-right\n    if (!((v[7] == v[8] && v[0] == v[1]) || (v[7] == v[0] && v[8] == v[1]))) {\n        float d1 = DistYCbCr(src[5], src[7]) + DistYCbCr(src[7], src[23]) + DistYCbCr(src[3], src[1]) + DistYCbCr(src[1], src[9]) + (4.0 * DistYCbCr(src[0], src[8]));\n        float d2 = DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + DistYCbCr(src[22], src[8]) + DistYCbCr(src[8], src[10]) + (4.0 * DistYCbCr(src[7], src[1]));\n        blendResult.y = ((d1 > d2) && (v[0] != v[7]) && (v[0] != v[1])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    // Corner (0, 0) - top-left\n    if (!((v[6] == v[7] && v[5] == v[0]) || (v[6] == v[5] && v[7] == v[0]))) {\n        float d1 = DistYCbCr(src[18], src[6]) + DistYCbCr(src[6], src[22]) + DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + (4.0 * DistYCbCr(src[5], src[7]));\n        float d2 = DistYCbCr(src[19], src[5]) + DistYCbCr(src[5], src[3]) + DistYCbCr(src[21], src[7]) + DistYCbCr(src[7], src[1]) + (4.0 * DistYCbCr(src[6], src[0]));\n        blendResult.x = ((d1 < d2) && (v[0] != v[5]) && (v[0] != v[7])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n\n    vec4 dst[25];\n    for (int i = 0; i < 25; i++) dst[i] = src[0];\n\n    if (IsBlendingNeeded(blendResult)) {\n        // Block 1: bottom-right corner (blendResult.z), 0 deg rotation\n        float fg = DistYCbCr(src[1], src[4]);\n        float hc = DistYCbCr(src[3], src[8]);\n        bool haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && (v[0] != v[4]) && (v[5] != v[4]);\n        bool haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && (v[0] != v[8]) && (v[7] != v[8]);\n        bool needBlend = (blendResult.z != BLEND_NONE);\n        bool doLineBlend = (blendResult.z >= BLEND_DOMINANT || !((blendResult.y != BLEND_NONE && !IsPixEqual(src[0], src[4])) || (blendResult.w != BLEND_NONE && !IsPixEqual(src[0], src[8])) || (IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && !IsPixEqual(src[0], src[2]))));\n        vec4 blendPix = (DistYCbCr(src[0], src[1]) <= DistYCbCr(src[0], src[3])) ? src[1] : src[3];\n        dst[ 1] = alphaBlend(dst[ 1], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[ 2] = alphaBlend(dst[ 2], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 2.0/3.0 : 0.750) : ((haveSteepLine) ? 0.750 : 0.125)) : 0.000);\n        dst[ 3] = alphaBlend(dst[ 3], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[ 9] = alphaBlend(dst[ 9], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n        dst[10] = alphaBlend(dst[10], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.250 : 0.125)) : 0.000);\n        dst[11] = alphaBlend(dst[11], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n        dst[12] = alphaBlend(dst[12], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.8631434088) : 0.000);\n        dst[13] = alphaBlend(dst[13], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n        dst[14] = alphaBlend(dst[14], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.250 : 0.125)) : 0.000);\n        dst[15] = alphaBlend(dst[15], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n        dst[16] = alphaBlend(dst[16], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[24] = alphaBlend(dst[24], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n\n        // Block 2: top-right corner (blendResult.y), 90 deg rotation\n        fg = DistYCbCr(src[7], src[2]);\n        hc = DistYCbCr(src[1], src[6]);\n        haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && (v[0] != v[2]) && (v[3] != v[2]);\n        haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && (v[0] != v[6]) && (v[5] != v[6]);\n        needBlend = (blendResult.y != BLEND_NONE);\n        doLineBlend = (blendResult.y >= BLEND_DOMINANT || !((blendResult.x != BLEND_NONE && !IsPixEqual(src[0], src[2])) || (blendResult.z != BLEND_NONE && !IsPixEqual(src[0], src[6])) || (IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && !IsPixEqual(src[0], src[8]))));\n        blendPix = (DistYCbCr(src[0], src[7]) <= DistYCbCr(src[0], src[1])) ? src[7] : src[1];\n        dst[ 7] = alphaBlend(dst[ 7], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[ 8] = alphaBlend(dst[ 8], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 2.0/3.0 : 0.750) : ((haveSteepLine) ? 0.750 : 0.125)) : 0.000);\n        dst[ 1] = alphaBlend(dst[ 1], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[21] = alphaBlend(dst[21], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n        dst[22] = alphaBlend(dst[22], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.250 : 0.125)) : 0.000);\n        dst[23] = alphaBlend(dst[23], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n        dst[24] = alphaBlend(dst[24], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.8631434088) : 0.000);\n        dst[ 9] = alphaBlend(dst[ 9], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n        dst[10] = alphaBlend(dst[10], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.250 : 0.125)) : 0.000);\n        dst[11] = alphaBlend(dst[11], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n        dst[12] = alphaBlend(dst[12], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[20] = alphaBlend(dst[20], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n\n        // Block 3: top-left corner (blendResult.x), 180 deg rotation\n        fg = DistYCbCr(src[5], src[8]);\n        hc = DistYCbCr(src[7], src[4]);\n        haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && (v[0] != v[8]) && (v[1] != v[8]);\n        haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && (v[0] != v[4]) && (v[3] != v[4]);\n        needBlend = (blendResult.x != BLEND_NONE);\n        doLineBlend = (blendResult.x >= BLEND_DOMINANT || !((blendResult.w != BLEND_NONE && !IsPixEqual(src[0], src[8])) || (blendResult.y != BLEND_NONE && !IsPixEqual(src[0], src[4])) || (IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && !IsPixEqual(src[0], src[6]))));\n        blendPix = (DistYCbCr(src[0], src[5]) <= DistYCbCr(src[0], src[7])) ? src[5] : src[7];\n        dst[ 5] = alphaBlend(dst[ 5], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[ 6] = alphaBlend(dst[ 6], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 2.0/3.0 : 0.750) : ((haveSteepLine) ? 0.750 : 0.125)) : 0.000);\n        dst[ 7] = alphaBlend(dst[ 7], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[17] = alphaBlend(dst[17], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n        dst[18] = alphaBlend(dst[18], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.250 : 0.125)) : 0.000);\n        dst[19] = alphaBlend(dst[19], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n        dst[20] = alphaBlend(dst[20], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.8631434088) : 0.000);\n        dst[21] = alphaBlend(dst[21], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n        dst[22] = alphaBlend(dst[22], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.250 : 0.125)) : 0.000);\n        dst[23] = alphaBlend(dst[23], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n        dst[24] = alphaBlend(dst[24], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[16] = alphaBlend(dst[16], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n\n        // Block 4: bottom-left corner (blendResult.w), 270 deg rotation\n        fg = DistYCbCr(src[3], src[6]);\n        hc = DistYCbCr(src[5], src[2]);\n        haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && (v[0] != v[6]) && (v[7] != v[6]);\n        haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && (v[0] != v[2]) && (v[1] != v[2]);\n        needBlend = (blendResult.w != BLEND_NONE);\n        doLineBlend = (blendResult.w >= BLEND_DOMINANT || !((blendResult.z != BLEND_NONE && !IsPixEqual(src[0], src[6])) || (blendResult.x != BLEND_NONE && !IsPixEqual(src[0], src[2])) || (IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && !IsPixEqual(src[0], src[4]))));\n        blendPix = (DistYCbCr(src[0], src[3]) <= DistYCbCr(src[0], src[5])) ? src[3] : src[5];\n        dst[ 3] = alphaBlend(dst[ 3], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[ 4] = alphaBlend(dst[ 4], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 2.0/3.0 : 0.750) : ((haveSteepLine) ? 0.750 : 0.125)) : 0.000);\n        dst[ 5] = alphaBlend(dst[ 5], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[13] = alphaBlend(dst[13], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n        dst[14] = alphaBlend(dst[14], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.250 : 0.125)) : 0.000);\n        dst[15] = alphaBlend(dst[15], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n        dst[16] = alphaBlend(dst[16], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.8631434088) : 0.000);\n        dst[17] = alphaBlend(dst[17], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n        dst[18] = alphaBlend(dst[18], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.250 : 0.125)) : 0.000);\n        dst[19] = alphaBlend(dst[19], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n        dst[20] = alphaBlend(dst[20], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[12] = alphaBlend(dst[12], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n    }\n\n    // Output pixel mapping for 5x5 grid:\n    // 20|21|22|23|24\n    // 19|06|07|08|09\n    // 18|05|00|01|10\n    // 17|04|03|02|11\n    // 16|15|14|13|12\n    vec4 res = mix(\n        mix(dst[20], mix(mix(dst[21], dst[22], step(0.40, f.x)), mix(dst[23], dst[24], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x)),\n        mix(\n            mix(\n                mix(dst[19], mix(mix(dst[ 6], dst[ 7], step(0.40, f.x)), mix(dst[ 8], dst[ 9], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x)),\n                mix(dst[18], mix(mix(dst[ 5], dst[ 0], step(0.40, f.x)), mix(dst[ 1], dst[10], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x)),\n                step(0.40, f.y)\n            ),\n            mix(\n                mix(dst[17], mix(mix(dst[ 4], dst[ 3], step(0.40, f.x)), mix(dst[ 2], dst[11], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x)),\n                mix(dst[16], mix(mix(dst[15], dst[14], step(0.40, f.x)), mix(dst[13], dst[12], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x)),\n                step(0.80, f.y)\n            ),\n            step(0.60, f.y)\n        ),\n        step(0.20, f.y)\n    );\n\n    FragColor = res;\n}",c=r+"\nconst float one_sixth = 1.0 / 6.0;\nconst float two_sixth = 2.0 / 6.0;\nconst float four_sixth = 4.0 / 6.0;\nconst float five_sixth = 5.0 / 6.0;\n\nvoid main() {\n    vec2 f = fract(vTexCoord * uInputRes);\n    vec4 src[25];\n    src[21] = texture(uTex, t1.xw); src[22] = texture(uTex, t1.yw); src[23] = texture(uTex, t1.zw);\n    src[ 6] = texture(uTex, t2.xw); src[ 7] = texture(uTex, t2.yw); src[ 8] = texture(uTex, t2.zw);\n    src[ 5] = texture(uTex, t3.xw); src[ 0] = texture(uTex, t3.yw); src[ 1] = texture(uTex, t3.zw);\n    src[ 4] = texture(uTex, t4.xw); src[ 3] = texture(uTex, t4.yw); src[ 2] = texture(uTex, t4.zw);\n    src[15] = texture(uTex, t5.xw); src[14] = texture(uTex, t5.yw); src[13] = texture(uTex, t5.zw);\n    src[19] = texture(uTex, t6.xy); src[18] = texture(uTex, t6.xz); src[17] = texture(uTex, t6.xw);\n    src[ 9] = texture(uTex, t7.xy); src[10] = texture(uTex, t7.xz); src[11] = texture(uTex, t7.xw);\n\n    float v[9];\n    for(int i=0; i<9; i++) v[i] = reduce(src[i].rgb);\n\n    ivec4 blendResult = ivec4(BLEND_NONE);\n\n    // Corner (1, 1) - bottom-right\n    if (!((v[0] == v[1] && v[3] == v[2]) || (v[0] == v[3] && v[1] == v[2]))) {\n        float d1 = DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + DistYCbCr(src[14], src[2]) + DistYCbCr(src[2], src[10]) + (4.0 * DistYCbCr(src[3], src[1]));\n        float d2 = DistYCbCr(src[5], src[3]) + DistYCbCr(src[3], src[13]) + DistYCbCr(src[7], src[1]) + DistYCbCr(src[1], src[11]) + (4.0 * DistYCbCr(src[0], src[2]));\n        blendResult.z = ((d1 < d2) && (v[0] != v[1]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    // Corner (0, 1) - bottom-left\n    if (!((v[5] == v[0] && v[4] == v[3]) || (v[5] == v[4] && v[0] == v[3]))) {\n        float d1 = DistYCbCr(src[17], src[5]) + DistYCbCr(src[5], src[7]) + DistYCbCr(src[15], src[3]) + DistYCbCr(src[3], src[1]) + (4.0 * DistYCbCr(src[4], src[0]));\n        float d2 = DistYCbCr(src[18], src[4]) + DistYCbCr(src[4], src[14]) + DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + (4.0 * DistYCbCr(src[5], src[3]));\n        blendResult.w = ((d1 > d2) && (v[0] != v[5]) && (v[0] != v[3])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    // Corner (1, 0) - top-right\n    if (!((v[7] == v[8] && v[0] == v[1]) || (v[7] == v[0] && v[8] == v[1]))) {\n        float d1 = DistYCbCr(src[5], src[7]) + DistYCbCr(src[7], src[23]) + DistYCbCr(src[3], src[1]) + DistYCbCr(src[1], src[9]) + (4.0 * DistYCbCr(src[0], src[8]));\n        float d2 = DistYCbCr(src[6], src[0]) + DistYCbCr(src[0], src[2]) + DistYCbCr(src[22], src[8]) + DistYCbCr(src[8], src[10]) + (4.0 * DistYCbCr(src[7], src[1]));\n        blendResult.y = ((d1 > d2) && (v[0] != v[7]) && (v[0] != v[1])) ? (((uDominantDirectionThreshold * d2) < d1) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n    // Corner (0, 0) - top-left\n    if (!((v[6] == v[7] && v[5] == v[0]) || (v[6] == v[5] && v[7] == v[0]))) {\n        float d1 = DistYCbCr(src[18], src[6]) + DistYCbCr(src[6], src[22]) + DistYCbCr(src[4], src[0]) + DistYCbCr(src[0], src[8]) + (4.0 * DistYCbCr(src[5], src[7]));\n        float d2 = DistYCbCr(src[19], src[5]) + DistYCbCr(src[5], src[3]) + DistYCbCr(src[21], src[7]) + DistYCbCr(src[7], src[1]) + (4.0 * DistYCbCr(src[6], src[0]));\n        blendResult.x = ((d1 < d2) && (v[0] != v[5]) && (v[0] != v[7])) ? (((uDominantDirectionThreshold * d1) < d2) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n    }\n\n    vec4 dst[36];\n    for (int i = 0; i < 36; i++) dst[i] = src[0];\n\n    if (IsBlendingNeeded(blendResult)) {\n        // Block 1: bottom-right corner (blendResult.z), 0 deg rotation\n        float fg = DistYCbCr(src[1], src[4]);\n        float hc = DistYCbCr(src[3], src[8]);\n        bool haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && (v[0] != v[4]) && (v[5] != v[4]);\n        bool haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && (v[0] != v[8]) && (v[7] != v[8]);\n        bool needBlend = (blendResult.z != BLEND_NONE);\n        bool doLineBlend = (blendResult.z >= BLEND_DOMINANT || !((blendResult.y != BLEND_NONE && !IsPixEqual(src[0], src[4])) || (blendResult.w != BLEND_NONE && !IsPixEqual(src[0], src[8])) || (IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && !IsPixEqual(src[0], src[2]))));\n        vec4 blendPix = (DistYCbCr(src[0], src[1]) <= DistYCbCr(src[0], src[3])) ? src[1] : src[3];\n        dst[10] = alphaBlend(dst[10], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[11] = alphaBlend(dst[11], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 0.750 : ((haveShallowLine) ? 0.250 : 0.000)) : 0.000);\n        dst[12] = alphaBlend(dst[12], blendPix, (needBlend && doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.500 : 1.000) : 0.000);\n        dst[13] = alphaBlend(dst[13], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 0.750 : ((haveSteepLine) ? 0.250 : 0.000)) : 0.000);\n        dst[14] = alphaBlend(dst[14], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[25] = alphaBlend(dst[25], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[26] = alphaBlend(dst[26], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n        dst[27] = alphaBlend(dst[27], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 1.000 : 0.000);\n        dst[28] = alphaBlend(dst[28], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n        dst[29] = alphaBlend(dst[29], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n        dst[30] = alphaBlend(dst[30], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.9711013910) : 0.000);\n        dst[31] = alphaBlend(dst[31], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n        dst[32] = alphaBlend(dst[32], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n        dst[33] = alphaBlend(dst[33], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 1.000 : 0.000);\n        dst[34] = alphaBlend(dst[34], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n        dst[35] = alphaBlend(dst[35], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n\n        // Block 2: top-right corner (blendResult.y), 90 deg rotation\n        fg = DistYCbCr(src[7], src[2]);\n        hc = DistYCbCr(src[1], src[6]);\n        haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && (v[0] != v[2]) && (v[3] != v[2]);\n        haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && (v[0] != v[6]) && (v[5] != v[6]);\n        needBlend = (blendResult.y != BLEND_NONE);\n        doLineBlend = (blendResult.y >= BLEND_DOMINANT || !((blendResult.x != BLEND_NONE && !IsPixEqual(src[0], src[2])) || (blendResult.z != BLEND_NONE && !IsPixEqual(src[0], src[6])) || (IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && !IsPixEqual(src[0], src[8]))));\n        blendPix = (DistYCbCr(src[0], src[7]) <= DistYCbCr(src[0], src[1])) ? src[7] : src[1];\n        dst[ 7] = alphaBlend(dst[ 7], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[ 8] = alphaBlend(dst[ 8], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 0.750 : ((haveShallowLine) ? 0.250 : 0.000)) : 0.000);\n        dst[ 9] = alphaBlend(dst[ 9], blendPix, (needBlend && doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.500 : 1.000) : 0.000);\n        dst[10] = alphaBlend(dst[10], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 0.750 : ((haveSteepLine) ? 0.250 : 0.000)) : 0.000);\n        dst[11] = alphaBlend(dst[11], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[20] = alphaBlend(dst[20], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[21] = alphaBlend(dst[21], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n        dst[22] = alphaBlend(dst[22], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 1.000 : 0.000);\n        dst[23] = alphaBlend(dst[23], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n        dst[24] = alphaBlend(dst[24], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n        dst[25] = alphaBlend(dst[25], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.9711013910) : 0.000);\n        dst[26] = alphaBlend(dst[26], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n        dst[27] = alphaBlend(dst[27], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n        dst[28] = alphaBlend(dst[28], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 1.000 : 0.000);\n        dst[29] = alphaBlend(dst[29], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n        dst[30] = alphaBlend(dst[30], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n\n        // Block 3: top-left corner (blendResult.x), 180 deg rotation\n        fg = DistYCbCr(src[5], src[8]);\n        hc = DistYCbCr(src[7], src[4]);\n        haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && (v[0] != v[8]) && (v[1] != v[8]);\n        haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && (v[0] != v[4]) && (v[3] != v[4]);\n        needBlend = (blendResult.x != BLEND_NONE);\n        doLineBlend = (blendResult.x >= BLEND_DOMINANT || !((blendResult.w != BLEND_NONE && !IsPixEqual(src[0], src[8])) || (blendResult.y != BLEND_NONE && !IsPixEqual(src[0], src[4])) || (IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && !IsPixEqual(src[0], src[6]))));\n        blendPix = (DistYCbCr(src[0], src[5]) <= DistYCbCr(src[0], src[7])) ? src[5] : src[7];\n        dst[ 4] = alphaBlend(dst[ 4], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[ 5] = alphaBlend(dst[ 5], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 0.750 : ((haveShallowLine) ? 0.250 : 0.000)) : 0.000);\n        dst[ 6] = alphaBlend(dst[ 6], blendPix, (needBlend && doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.500 : 1.000) : 0.000);\n        dst[ 7] = alphaBlend(dst[ 7], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 0.750 : ((haveSteepLine) ? 0.250 : 0.000)) : 0.000);\n        dst[ 8] = alphaBlend(dst[ 8], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[35] = alphaBlend(dst[35], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[16] = alphaBlend(dst[16], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n        dst[17] = alphaBlend(dst[17], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 1.000 : 0.000);\n        dst[18] = alphaBlend(dst[18], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n        dst[19] = alphaBlend(dst[19], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n        dst[20] = alphaBlend(dst[20], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.9711013910) : 0.000);\n        dst[21] = alphaBlend(dst[21], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n        dst[22] = alphaBlend(dst[22], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n        dst[23] = alphaBlend(dst[23], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 1.000 : 0.000);\n        dst[24] = alphaBlend(dst[24], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n        dst[25] = alphaBlend(dst[25], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n\n        // Block 4: bottom-left corner (blendResult.w), 270 deg rotation\n        fg = DistYCbCr(src[3], src[6]);\n        hc = DistYCbCr(src[5], src[2]);\n        haveShallowLine = (uSteepDirectionThreshold * fg <= hc) && (v[0] != v[6]) && (v[7] != v[6]);\n        haveSteepLine   = (uSteepDirectionThreshold * hc <= fg) && (v[0] != v[2]) && (v[1] != v[2]);\n        needBlend = (blendResult.w != BLEND_NONE);\n        doLineBlend = (blendResult.w >= BLEND_DOMINANT || !((blendResult.z != BLEND_NONE && !IsPixEqual(src[0], src[6])) || (blendResult.x != BLEND_NONE && !IsPixEqual(src[0], src[2])) || (IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && !IsPixEqual(src[0], src[4]))));\n        blendPix = (DistYCbCr(src[0], src[3]) <= DistYCbCr(src[0], src[5])) ? src[3] : src[5];\n        dst[13] = alphaBlend(dst[13], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[14] = alphaBlend(dst[14], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 0.750 : ((haveShallowLine) ? 0.250 : 0.000)) : 0.000);\n        dst[15] = alphaBlend(dst[15], blendPix, (needBlend && doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.500 : 1.000) : 0.000);\n        dst[ 4] = alphaBlend(dst[ 4], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 0.750 : ((haveSteepLine) ? 0.250 : 0.000)) : 0.000);\n        dst[ 5] = alphaBlend(dst[ 5], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n        dst[30] = alphaBlend(dst[30], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n        dst[31] = alphaBlend(dst[31], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n        dst[32] = alphaBlend(dst[32], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 1.000 : 0.000);\n        dst[33] = alphaBlend(dst[33], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n        dst[34] = alphaBlend(dst[34], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n        dst[35] = alphaBlend(dst[35], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.9711013910) : 0.000);\n        dst[16] = alphaBlend(dst[16], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n        dst[17] = alphaBlend(dst[17], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n        dst[18] = alphaBlend(dst[18], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 1.000 : 0.000);\n        dst[19] = alphaBlend(dst[19], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n        dst[20] = alphaBlend(dst[20], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n    }\n\n    // Output pixel mapping for 6x6 grid:\n    // 20|21|22|23|24|25\n    // 19|06|07|08|09|26\n    // 18|05|00|01|10|27\n    // 17|04|03|02|11|28\n    // 16|15|14|13|12|29\n    // 35|34|33|32|31|30\n    vec4 res = mix(\n        mix(\n            mix(\n                mix(mix(dst[20], dst[21], step(one_sixth, f.x)), dst[22], step(two_sixth, f.x)),\n                mix(mix(dst[23], dst[24], step(four_sixth, f.x)), dst[25], step(five_sixth, f.x)),\n                step(0.50, f.x)\n            ),\n            mix(\n                mix(mix(dst[19], dst[ 6], step(one_sixth, f.x)), dst[ 7], step(two_sixth, f.x)),\n                mix(mix(dst[ 8], dst[ 9], step(four_sixth, f.x)), dst[26], step(five_sixth, f.x)),\n                step(0.50, f.x)\n            ),\n            step(one_sixth, f.y)\n        ),\n        mix(\n            mix(\n                mix(mix(dst[18], dst[ 5], step(one_sixth, f.x)), dst[ 0], step(two_sixth, f.x)),\n                mix(mix(dst[ 1], dst[10], step(four_sixth, f.x)), dst[27], step(five_sixth, f.x)),\n                step(0.50, f.x)\n            ),\n            mix(\n                mix(\n                    mix(\n                        mix(mix(dst[17], dst[ 4], step(one_sixth, f.x)), dst[ 3], step(two_sixth, f.x)),\n                        mix(mix(dst[ 2], dst[11], step(four_sixth, f.x)), dst[28], step(five_sixth, f.x)),\n                        step(0.50, f.x)\n                    ),\n                    mix(\n                        mix(mix(dst[16], dst[15], step(one_sixth, f.x)), dst[14], step(two_sixth, f.x)),\n                        mix(mix(dst[13], dst[12], step(four_sixth, f.x)), dst[29], step(five_sixth, f.x)),\n                        step(0.50, f.x)\n                    ),\n                    step(four_sixth, f.y)\n                ),\n                mix(\n                    mix(mix(dst[35], dst[34], step(one_sixth, f.x)), dst[33], step(two_sixth, f.x)),\n                    mix(mix(dst[32], dst[31], step(four_sixth, f.x)), dst[30], step(five_sixth, f.x)),\n                    step(0.50, f.x)\n                ),\n                step(five_sixth, f.y)\n            ),\n            step(0.50, f.y)\n        ),\n        step(two_sixth, f.y)\n    );\n\n    FragColor = res;\n}";class d{gl=null;canvas=null;programs=new Map;texture=null;uniforms=new Map;initialized=!1;currentCanvasSize={width:0,height:0};currentTexSize={width:0,height:0};currentScale=0;static create(){const e=new d;return e.init(),e}init(){if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");if(this.canvas=new OffscreenCanvas(1,1),this.gl=this.canvas.getContext("webgl2",{alpha:!0,premultipliedAlpha:!1,desynchronized:!0,powerPreference:"high-performance",antialias:!1}),!this.gl)throw new Error("WebGL2 not supported");const e=this.gl,t=this.createShader(e.VERTEX_SHADER,"#version 300 es\nlayout(location = 0) in vec2 position;\nuniform vec2 uInputRes;\n\nout vec2 vTexCoord;\nout vec4 t1;\nout vec4 t2;\nout vec4 t3;\nout vec4 t4;\nout vec4 t5;\nout vec4 t6;\nout vec4 t7;\n\nvoid main() {\n    vTexCoord = position * 0.5 + 0.5;\n    gl_Position = vec4(position, 0.0, 1.0);\n\n    vec2 ps = vec2(1.0) / uInputRes;\n    float dx = ps.x;\n    float dy = ps.y;\n\n    // Pre-calculate texture lookups\n    t1 = vTexCoord.xxxy + vec4(-dx, 0.0, dx, -2.0 * dy);\n    t2 = vTexCoord.xxxy + vec4(-dx, 0.0, dx, -dy);\n    t3 = vTexCoord.xxxy + vec4(-dx, 0.0, dx, 0.0);\n    t4 = vTexCoord.xxxy + vec4(-dx, 0.0, dx, dy);\n    t5 = vTexCoord.xxxy + vec4(-dx, 0.0, dx, 2.0 * dy);\n    t6 = vTexCoord.xyyy + vec4(-2.0 * dx, -dy, 0.0, dy);\n    t7 = vTexCoord.xyyy + vec4( 2.0 * dx, -dy, 0.0, dy);\n}"),n={2:i,3:s,4:o,5:a,6:c};for(const[r,i]of Object.entries(n)){const n=this.createShader(e.FRAGMENT_SHADER,i),s=e.createProgram();if(e.attachShader(s,t),e.attachShader(s,n),e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS))throw new Error(`Shader link failed for ${r}x: `+e.getProgramInfoLog(s));this.programs.set(Number(r),s),this.uniforms.set(Number(r),{uTex:e.getUniformLocation(s,"uTex"),uInputRes:e.getUniformLocation(s,"uInputRes"),uCenterDirectionBias:e.getUniformLocation(s,"uCenterDirectionBias"),uEqualColorTolerance:e.getUniformLocation(s,"uEqualColorTolerance"),uSteepDirectionThreshold:e.getUniformLocation(s,"uSteepDirectionThreshold"),uDominantDirectionThreshold:e.getUniformLocation(s,"uDominantDirectionThreshold")})}const r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.clearColor(0,0,0,0),this.initialized=!0}createShader(e,t){const n=this.gl,r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){const e=n.getShaderInfoLog(r);throw n.deleteShader(r),new Error("Shader compile failed: "+e)}return r}isReady(){return this.initialized}render(e,t={}){if(!this.initialized||!this.gl||!this.canvas)throw new Error("Renderer not initialized");const n=this.gl,r=(ImageData,e.data),i=e.width,s=e.height,o=Math.min(6,Math.max(2,t.scale??2)),a=i*o,c=s*o,d=this.programs.get(o),l=this.uniforms.get(o);if(!d||!l)throw new Error(`No program for scale ${o}`);this.currentScale!==o&&(n.useProgram(d),n.uniform1i(l.uTex,0),this.currentScale=o),this.currentCanvasSize.width===a&&this.currentCanvasSize.height===c||(this.canvas.width=a,this.canvas.height=c,this.currentCanvasSize={width:a,height:c},n.viewport(0,0,a,c)),n.uniform2f(l.uInputRes,i,s),n.uniform1f(l.uCenterDirectionBias,t.centerDirectionBias??4),n.uniform1f(l.uEqualColorTolerance,(t.equalColorTolerance??30)/255),n.uniform1f(l.uSteepDirectionThreshold,t.steepDirectionThreshold??2.2),n.uniform1f(l.uDominantDirectionThreshold,t.dominantDirectionThreshold??3.6),n.bindTexture(n.TEXTURE_2D,this.texture),this.currentTexSize.width!==i||this.currentTexSize.height!==s?(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,i,s,0,n.RGBA,n.UNSIGNED_BYTE,r),this.currentTexSize={width:i,height:s}):n.texSubImage2D(n.TEXTURE_2D,0,0,0,i,s,n.RGBA,n.UNSIGNED_BYTE,r),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLES,0,3);const u=new Uint8ClampedArray(a*c*4);return n.readPixels(0,0,a,c,n.RGBA,n.UNSIGNED_BYTE,u),{data:u,width:a,height:c}}dispose(){if(this.gl){this.texture&&this.gl.deleteTexture(this.texture);for(const e of this.programs.values())this.gl.deleteProgram(e);this.gl=null}this.canvas=null,this.programs.clear(),this.uniforms.clear(),this.initialized=!1}}const l={default:{},sharp:{centerDirectionBias:4,equalColorTolerance:20,steepDirectionThreshold:2,dominantDirectionThreshold:3.2},smooth:{centerDirectionBias:4,equalColorTolerance:40,steepDirectionThreshold:2.4,dominantDirectionThreshold:4},standard:{centerDirectionBias:4,equalColorTolerance:30,steepDirectionThreshold:2.2,dominantDirectionThreshold:3.6}}},915:(e,t,n)=>{"use strict";n.d(t,{$:()=>r});class r{static resources=null;initialized=!1;static create(){const e=new r;return e.init(),e}init(){if(!this.initialized){if(!r.resources){if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");const e=new OffscreenCanvas(256,256),t=e.getContext("webgl2",{alpha:!0,premultipliedAlpha:!1,desynchronized:!0,powerPreference:"high-performance",antialias:!1});if(!t)throw new Error("WebGL2 not supported");const n=this.createShader(t,t.VERTEX_SHADER,"#version 300 es\nlayout(location = 0) in vec2 position;\nout vec2 vUv;\n\nvoid main() {\n    vUv = position * 0.5 + 0.5;\n    gl_Position = vec4(position, 0.0, 1.0);\n}"),i=this.createShader(t,t.FRAGMENT_SHADER,"#version 300 es\nprecision highp float;\n\nuniform sampler2D uTex;\nuniform vec2 uRes;\nuniform vec2 uWarp;\nuniform float uScanHardness;\nuniform float uScanOpacity;\nuniform float uMaskOpacity;\nuniform int uEnableWarp;\nuniform int uEnableScanlines;\nuniform int uEnableMask;\n\nin vec2 vUv;\nout vec4 outColor;\n\nvec3 toLinear(vec3 c) { return c * c; }\nvec3 toSrgb(vec3 c) { return sqrt(c); }\n\nvec2 warp(vec2 uv) {\n    if (uEnableWarp == 0) return uv;\n    vec2 dc = abs(0.5 - uv);\n    vec2 dc2 = dc * dc;\n    uv.x -= 0.5; uv.x *= 1.0 + (dc2.y * (0.3 * uWarp.x)); uv.x += 0.5;\n    uv.y -= 0.5; uv.y *= 1.0 + (dc2.x * (0.4 * uWarp.y)); uv.y += 0.5;\n    return uv;\n}\n\nfloat scanline(float y, float sourceHeight) {\n    if (uEnableScanlines == 0) return 1.0;\n    float v = fract(y * sourceHeight);\n    float d = abs(v - 0.5);\n    float line = exp(d * d * uScanHardness);\n    return mix(1.0, line, uScanOpacity);\n}\n\nvec3 mask(vec2 pos) {\n    if (uEnableMask == 0) return vec3(1.0);\n    float x = fract(pos.x / 6.0);\n    vec3 m = vec3(1.0);\n    float step1 = 0.333;\n    float step2 = 0.666;\n    \n    m.r = step(0.0, x) - step(step1, x);\n    m.g = step(step1, x) - step(step2, x);\n    m.b = step(step2, x) - step(1.0, x);\n    \n    return mix(vec3(1.0), m, uMaskOpacity);\n}\n\nvoid main() {\n    vec2 uv = warp(vUv);\n    \n    if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {\n        outColor = vec4(0.0); \n        return;\n    }\n\n    vec4 texSample = texture(uTex, uv);\n    if (texSample.a == 0.0) {\n        outColor = vec4(0.0);\n        return;\n    }\n\n    vec3 linearColor = toLinear(texSample.rgb);\n    ivec2 texSize = textureSize(uTex, 0);\n    \n    float luma = dot(linearColor, vec3(0.299, 0.587, 0.114));\n    float bloom = luma * 0.7;\n\n    float scan = scanline(uv.y, float(texSize.y));\n    vec3 m = mask(gl_FragCoord.xy);\n    \n    vec3 effects = m * scan;\n    vec3 finalRGB = linearColor * mix(effects, vec3(1.0), bloom);\n\n    outColor = vec4(toSrgb(finalRGB), texSample.a);\n}"),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,i),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error("Shader program link failed: "+t.getProgramInfoLog(s));t.useProgram(s),t.deleteShader(n),t.deleteShader(i);const o={uTex:t.getUniformLocation(s,"uTex"),uRes:t.getUniformLocation(s,"uRes"),uWarp:t.getUniformLocation(s,"uWarp"),uScanHardness:t.getUniformLocation(s,"uScanHardness"),uScanOpacity:t.getUniformLocation(s,"uScanOpacity"),uMaskOpacity:t.getUniformLocation(s,"uMaskOpacity"),uEnableWarp:t.getUniformLocation(s,"uEnableWarp"),uEnableScanlines:t.getUniformLocation(s,"uEnableScanlines"),uEnableMask:t.getUniformLocation(s,"uEnableMask")},a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0);const c=t.createTexture();t.bindTexture(t.TEXTURE_2D,c),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r.resources={gl:t,canvas:e,program:s,texture:c,uniforms:o,capacity:{width:0,height:0},refCount:0}}r.resources.refCount++,this.initialized=!0}}createShader(e,t,n){const r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error("Shader compile failed: "+t)}return r}isReady(){return this.initialized&&null!==r.resources&&!r.resources.gl.isContextLost()}render(e,t={}){if(!this.initialized||!r.resources)throw new Error("Renderer not initialized");const{gl:n,canvas:i,uniforms:s,texture:o,capacity:a}=r.resources;if(n.isContextLost())throw new Error("WebGL context lost");const c=(ImageData,e.data),d=e.width,l=e.height,u=Math.min(32,Math.max(2,t.scale??3)),f=d*u,h=l*u;n.useProgram(r.resources.program),(f>a.width||h>a.height)&&(i.width=Math.max(a.width,f),i.height=Math.max(a.height,h),r.resources.capacity={width:i.width,height:i.height}),n.viewport(0,0,f,h),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,d,l,0,n.RGBA,n.UNSIGNED_BYTE,c),n.uniform2f(s.uRes,f,h),n.uniform2f(s.uWarp,t.warpX??.015,t.warpY??.02),n.uniform1f(s.uScanHardness,t.scanHardness??-4),n.uniform1f(s.uScanOpacity,t.scanOpacity??.5),n.uniform1f(s.uMaskOpacity,t.maskOpacity??.3),n.uniform1i(s.uEnableWarp,!1!==t.enableWarp?1:0),n.uniform1i(s.uEnableScanlines,!1!==t.enableScanlines?1:0),n.uniform1i(s.uEnableMask,!1!==t.enableMask?1:0),n.drawArrays(n.TRIANGLES,0,3);const _=new Uint8ClampedArray(f*h*4);return n.readPixels(0,0,f,h,n.RGBA,n.UNSIGNED_BYTE,_),{data:_,width:f,height:h}}dispose(){if(this.initialized&&r.resources){if(r.resources.refCount--,r.resources.refCount<=0){const{gl:e,texture:t,program:n}=r.resources;e.deleteTexture(t),e.deleteProgram(n),r.resources=null}this.initialized=!1}}}},942:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(215),i=n(266),s=n(237),o=n(228),a=n(943),c=n(432),d=n(454),l=n(944),u=n(452);const f=o.forwardRef((function(e,t){var n=e.actions,f=e.children,h=e.name,_=e.value,p=e.onChange,b=(0,s.A)(e,["actions","children","name","value","onChange"]),g=o.useRef(null),v=(0,d.A)({controlled:_,default:e.defaultValue,name:"RadioGroup"}),w=(0,i.A)(v,2),m=w[0],x=w[1];o.useImperativeHandle(n,(function(){return{focus:function(){var e=g.current.querySelector("input:not(:disabled):checked");e||(e=g.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var y=(0,c.A)(t,g),C=(0,u.A)(h);return o.createElement(l.A.Provider,{value:{name:C,onChange:function(e){x(e.target.value),p&&p(e,e.target.value)},value:m}},o.createElement(a.A,(0,r.A)({role:"radiogroup",ref:y},b),f))}))},943:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(215),i=n(237),s=n(228),o=n(382),a=n(235),c=s.forwardRef((function(e,t){var n=e.classes,a=e.className,c=e.row,d=void 0!==c&&c,l=(0,i.A)(e,["classes","className","row"]);return s.createElement("div",(0,r.A)({className:(0,o.default)(n.root,a,d&&n.row),ref:t},l))}));const d=(0,a.A)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(c)},944:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(228).createContext()},954:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(215),i=n(237),s=n(228),o=n(382),a=n(955),c=n(462);const d=(0,c.A)(s.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),l=(0,c.A)(s.createElement("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");var u=n(235);const f=(0,u.A)((function(e){return{root:{position:"relative",display:"flex","&$checked $layer":{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}},layer:{left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},checked:{}}}),{name:"PrivateRadioButtonIcon"})((function(e){var t=e.checked,n=e.classes,r=e.fontSize;return s.createElement("div",{className:(0,o.default)(n.root,t&&n.checked)},s.createElement(d,{fontSize:r}),s.createElement(l,{fontSize:r,className:n.layer}))}));var h=n(264),_=n(439),p=n(440),b=n(944),g=s.createElement(f,{checked:!0}),v=s.createElement(f,null),w=s.forwardRef((function(e,t){var n=e.checked,c=e.classes,d=e.color,l=void 0===d?"secondary":d,u=e.name,f=e.onChange,h=e.size,w=void 0===h?"medium":h,m=(0,i.A)(e,["checked","classes","color","name","onChange","size"]),x=s.useContext(b.A),y=n,C=(0,p.A)(f,x&&x.onChange),B=u;return x&&(void 0===y&&(y=x.value===e.value),void 0===B&&(B=x.name)),s.createElement(a.A,(0,r.A)({color:l,type:"radio",icon:s.cloneElement(v,{fontSize:"small"===w?"small":"medium"}),checkedIcon:s.cloneElement(g,{fontSize:"small"===w?"small":"medium"}),classes:{root:(0,o.default)(c.root,c["color".concat((0,_.A)(l))]),checked:c.checked,disabled:c.disabled},name:B,checked:y,onChange:C,ref:t},m))}));const m=(0,u.A)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,h.X4)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,h.X4)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiRadio"})(w)},964:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(215),i=n(237),s=n(228),o=n(382),a=n(235),c=n(264),d=n(439),l=n(955),u=s.forwardRef((function(e,t){var n=e.classes,a=e.className,c=e.color,u=void 0===c?"secondary":c,f=e.edge,h=void 0!==f&&f,_=e.size,p=void 0===_?"medium":_,b=(0,i.A)(e,["classes","className","color","edge","size"]),g=s.createElement("span",{className:n.thumb});return s.createElement("span",{className:(0,o.default)(n.root,a,{start:n.edgeStart,end:n.edgeEnd}[h],"small"===p&&n["size".concat((0,d.A)(p))])},s.createElement(l.A,(0,r.A)({type:"checkbox",icon:g,checkedIcon:g,classes:{root:(0,o.default)(n.switchBase,n["color".concat((0,d.A)(u))]),input:n.input,checked:n.checked,disabled:n.disabled},ref:t},b)),s.createElement("span",{className:n.track}))}));const f=(0,a.A)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,c.X4)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,c.X4)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(u)},975:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{U3:()=>s.U3,dW:()=>s.dW,ng:()=>s.ng});var i=n(976),s=n(977),o=e([i]);i=(o.then?(await o)():o)[0],(0,s.lI)(i),i.__wbindgen_start(),r()}catch(e){r(e)}}))},976:(e,t,n)=>{"use strict";var r=n(977);e.exports=n.v(t,e.id,"ed8aaee047f9a397540a",{"./smart_downscaler_bg.js":{__wbg_log_6b5ca2e6124b2808:r.aW,__wbg_new_3eb36ae241fe6f44:r.oF,__wbg_new_361308b2356cecd0:r.LZ,__wbg_push_8ffdcb2063340ba5:r.Yy,__wbg_set_6cb8631f80447a67:r.TS,__wbg_length_32ed9a279acd054c:r.Xm,__wbg_prototypesetcall_bdcdcc5842e4d77d:r.es,__wbg_new_dd2b680c8bf6ae29:r.V0,__wbg_new_with_length_a2c39cbe88fd8ff1:r.Gm,__wbg_new_from_slice_a3d2629dc1826784:r.Pn,__wbg_set_index_b3244a6c458021e4:r.qB,__wbg_new_from_slice_48496fd78013671b:r.DB,__wbg_new_with_length_63f2683cc2521026:r.pw,__wbg_set_index_41955224420ba3c6:r.hu,__wbg___wbindgen_throw_be289d5034ed271b:r.rm,__wbindgen_init_externref_table:r.bL,__wbindgen_cast_0000000000000001:r.NR,__wbindgen_cast_0000000000000002:r.U_}})},977:(e,t,n)=>{"use strict";n.d(t,{DB:()=>p,Gm:()=>v,LZ:()=>f,NR:()=>B,Pn:()=>b,TS:()=>x,U3:()=>a,U_:()=>D,V0:()=>_,Xm:()=>l,Yy:()=>m,aW:()=>u,bL:()=>L,dW:()=>c,es:()=>w,hu:()=>y,lI:()=>F,ng:()=>s,oF:()=>h,pw:()=>g,qB:()=>C,rm:()=>d});class r{static __wrap(e){e>>>=0;const t=Object.create(r.prototype);return t.__wbg_ptr=e,E.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,E.unregister(this),e}free(){const e=this.__destroy_into_raw();U.__wbg_coloranalysisresult_free(e,0)}get color_count(){return U.coloranalysisresult_color_count(this.__wbg_ptr)>>>0}get_color(e){const t=U.coloranalysisresult_get_color(this.__wbg_ptr,e);return 0===t?void 0:i.__wrap(t)}get_colors_flat(){return U.coloranalysisresult_get_colors_flat(this.__wbg_ptr)}get success(){return 0!==U.coloranalysisresult_success(this.__wbg_ptr)}to_json(){const e=U.coloranalysisresult_to_json(this.__wbg_ptr);if(e[2])throw O(e[1]);return O(e[0])}get total_pixels(){return U.coloranalysisresult_total_pixels(this.__wbg_ptr)>>>0}}Symbol.dispose&&(r.prototype[Symbol.dispose]=r.prototype.free);class i{static __wrap(e){e>>>=0;const t=Object.create(i.prototype);return t.__wbg_ptr=e,T.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,T.unregister(this),e}free(){const e=this.__destroy_into_raw();U.__wbg_colorentry_free(e,0)}get b(){return U.colorentry_b(this.__wbg_ptr)}get count(){return U.colorentry_count(this.__wbg_ptr)>>>0}get g(){return U.colorentry_g(this.__wbg_ptr)}get hex(){let e,t;try{const n=U.colorentry_hex(this.__wbg_ptr);return e=n[0],t=n[1],k(n[0],n[1])}finally{U.__wbindgen_free(e,t,1)}}get percentage(){return U.colorentry_percentage(this.__wbg_ptr)}get r(){return U.colorentry_r(this.__wbg_ptr)}}Symbol.dispose&&(i.prototype[Symbol.dispose]=i.prototype.free);class s{static __wrap(e){e>>>=0;const t=Object.create(s.prototype);return t.__wbg_ptr=e,S.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,S.unregister(this),e}free(){const e=this.__destroy_into_raw();U.__wbg_wasmdownscaleconfig_free(e,0)}get edge_weight(){return U.__wbg_get_wasmdownscaleconfig_edge_weight(this.__wbg_ptr)}get hierarchy_min_size(){return U.__wbg_get_wasmdownscaleconfig_hierarchy_min_size(this.__wbg_ptr)>>>0}get hierarchy_threshold(){return U.__wbg_get_wasmdownscaleconfig_hierarchy_threshold(this.__wbg_ptr)}get kmeans_iterations(){return U.__wbg_get_wasmdownscaleconfig_kmeans_iterations(this.__wbg_ptr)>>>0}get max_color_preprocess(){return U.__wbg_get_wasmdownscaleconfig_max_color_preprocess(this.__wbg_ptr)>>>0}get max_resolution_mp(){return U.__wbg_get_wasmdownscaleconfig_max_resolution_mp(this.__wbg_ptr)}get neighbor_weight(){return U.__wbg_get_wasmdownscaleconfig_neighbor_weight(this.__wbg_ptr)}get palette_size(){return U.__wbg_get_wasmdownscaleconfig_palette_size(this.__wbg_ptr)>>>0}get refinement_iterations(){return U.__wbg_get_wasmdownscaleconfig_refinement_iterations(this.__wbg_ptr)>>>0}get region_weight(){return U.__wbg_get_wasmdownscaleconfig_region_weight(this.__wbg_ptr)}get slic_compactness(){return U.__wbg_get_wasmdownscaleconfig_slic_compactness(this.__wbg_ptr)}get slic_superpixels(){return U.__wbg_get_wasmdownscaleconfig_slic_superpixels(this.__wbg_ptr)>>>0}get two_pass_refinement(){return 0!==U.__wbg_get_wasmdownscaleconfig_two_pass_refinement(this.__wbg_ptr)}set edge_weight(e){U.__wbg_set_wasmdownscaleconfig_edge_weight(this.__wbg_ptr,e)}set hierarchy_min_size(e){U.__wbg_set_wasmdownscaleconfig_hierarchy_min_size(this.__wbg_ptr,e)}set hierarchy_threshold(e){U.__wbg_set_wasmdownscaleconfig_hierarchy_threshold(this.__wbg_ptr,e)}set kmeans_iterations(e){U.__wbg_set_wasmdownscaleconfig_kmeans_iterations(this.__wbg_ptr,e)}set max_color_preprocess(e){U.__wbg_set_wasmdownscaleconfig_max_color_preprocess(this.__wbg_ptr,e)}set max_resolution_mp(e){U.__wbg_set_wasmdownscaleconfig_max_resolution_mp(this.__wbg_ptr,e)}set neighbor_weight(e){U.__wbg_set_wasmdownscaleconfig_neighbor_weight(this.__wbg_ptr,e)}set palette_size(e){U.__wbg_set_wasmdownscaleconfig_palette_size(this.__wbg_ptr,e)}set refinement_iterations(e){U.__wbg_set_wasmdownscaleconfig_refinement_iterations(this.__wbg_ptr,e)}set region_weight(e){U.__wbg_set_wasmdownscaleconfig_region_weight(this.__wbg_ptr,e)}set slic_compactness(e){U.__wbg_set_wasmdownscaleconfig_slic_compactness(this.__wbg_ptr,e)}set slic_superpixels(e){U.__wbg_set_wasmdownscaleconfig_slic_superpixels(this.__wbg_ptr,e)}set two_pass_refinement(e){U.__wbg_set_wasmdownscaleconfig_two_pass_refinement(this.__wbg_ptr,e)}static exact_colors(){const e=U.wasmdownscaleconfig_exact_colors();return s.__wrap(e)}static fast(){const e=U.wasmdownscaleconfig_fast();return s.__wrap(e)}constructor(){const e=U.wasmdownscaleconfig_new();return this.__wbg_ptr=e>>>0,S.register(this,this.__wbg_ptr,this),this}get palette_strategy(){let e,t;try{const n=U.wasmdownscaleconfig_palette_strategy(this.__wbg_ptr);return e=n[0],t=n[1],k(n[0],n[1])}finally{U.__wbindgen_free(e,t,1)}}static quality(){const e=U.wasmdownscaleconfig_quality();return s.__wrap(e)}get segmentation_method(){let e,t;try{const n=U.wasmdownscaleconfig_segmentation_method(this.__wbg_ptr);return e=n[0],t=n[1],k(n[0],n[1])}finally{U.__wbindgen_free(e,t,1)}}set palette_strategy(e){const t=I(e,U.__wbindgen_malloc,U.__wbindgen_realloc),n=j;U.wasmdownscaleconfig_set_palette_strategy(this.__wbg_ptr,t,n)}set segmentation_method(e){const t=I(e,U.__wbindgen_malloc,U.__wbindgen_realloc),n=j;U.wasmdownscaleconfig_set_segmentation_method(this.__wbg_ptr,t,n)}static vibrant(){const e=U.wasmdownscaleconfig_vibrant();return s.__wrap(e)}}Symbol.dispose&&(s.prototype[Symbol.dispose]=s.prototype.free);class o{static __wrap(e){e>>>=0;const t=Object.create(o.prototype);return t.__wbg_ptr=e,P.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,P.unregister(this),e}free(){const e=this.__destroy_into_raw();U.__wbg_wasmdownscaleresult_free(e,0)}get data(){return U.wasmdownscaleresult_data(this.__wbg_ptr)}get_palette_color(e){return U.wasmdownscaleresult_get_palette_color(this.__wbg_ptr,e)}get height(){return U.wasmdownscaleresult_height(this.__wbg_ptr)>>>0}get indices(){return U.wasmdownscaleresult_indices(this.__wbg_ptr)}get palette(){return U.wasmdownscaleresult_palette(this.__wbg_ptr)}get palette_size(){return U.wasmdownscaleresult_palette_size(this.__wbg_ptr)>>>0}rgb_data(){return U.wasmdownscaleresult_rgb_data(this.__wbg_ptr)}get width(){return U.wasmdownscaleresult_width(this.__wbg_ptr)>>>0}}function a(e,t,n){const i=I(n,U.__wbindgen_malloc,U.__wbindgen_realloc),s=j,o=U.analyze_colors(e,t,i,s);if(o[2])throw O(o[1]);return r.__wrap(o[0])}function c(e,t,n,r,i,a){let c=0;null==a||(function(e,t){if(!(e instanceof t))throw new Error(`expected instance of ${t.name}`)}(a,s),c=a.__destroy_into_raw());const d=U.downscale(e,t,n,r,i,c);if(d[2])throw O(d[1]);return o.__wrap(d[0])}function d(e,t){throw new Error(k(e,t))}function l(e){return e.length}function u(e){}function f(){return new Object}function h(){return new Array}function _(e){return new Uint8Array(e)}function p(e,t){return new Uint8ClampedArray(N(e,t))}function b(e,t){return new Uint8Array(N(e,t))}function g(e){return new Float32Array(e>>>0)}function v(e){return new Uint8Array(e>>>0)}function w(e,t,n){Uint8Array.prototype.set.call(N(e,t),n)}function m(e,t){return e.push(t)}function x(){return function(e,t){try{return function(e,t,n){return Reflect.set(e,t,n)}.apply(this,t)}catch(e){const t=function(e){const t=U.__externref_table_alloc();return U.__wbindgen_externrefs.set(t,e),t}(e);U.__wbindgen_exn_store(t)}}(0,arguments)}function y(e,t,n){e[t>>>0]=n}function C(e,t,n){e[t>>>0]=n}function B(e){return e}function D(e,t){return k(e,t)}function L(){const e=U.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}Symbol.dispose&&(o.prototype[Symbol.dispose]=o.prototype.free);const E="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>U.__wbg_coloranalysisresult_free(e>>>0,1))),T="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>U.__wbg_colorentry_free(e>>>0,1))),S="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>U.__wbg_wasmdownscaleconfig_free(e>>>0,1))),P="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>U.__wbg_wasmdownscaleresult_free(e>>>0,1)));function N(e,t){return e>>>=0,R().subarray(e/1,e/1+t)}function k(e,t){return function(e,t){return M+=t,M>=z&&(Y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),Y.decode(),M=t),Y.decode(R().subarray(e,e+t))}(e>>>=0,t)}let A=null;function R(){return null!==A&&0!==A.byteLength||(A=new Uint8Array(U.memory.buffer)),A}function I(e,t,n){if(void 0===n){const n=q.encode(e),r=t(n.length,1)>>>0;return R().subarray(r,r+n.length).set(n),j=n.length,r}let r=e.length,i=t(r,1)>>>0;const s=R();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;s[i+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),i=n(i,r,r=o+3*e.length,1)>>>0;const t=R().subarray(i+o,i+r);o+=q.encodeInto(e,t).written,i=n(i,r,o,1)>>>0}return j=o,i}function O(e){const t=U.__wbindgen_externrefs.get(e);return U.__externref_table_dealloc(e),t}let Y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Y.decode();const z=2146435072;let M=0;const q=new TextEncoder;"encodeInto"in q||(q.encodeInto=function(e,t){const n=q.encode(e);return t.set(n),{read:e.length,written:n.length}});let U,j=0;function F(e){U=e}},991:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z"}),"SubdirectoryArrowRight");t.A=o},1e3:(e,t,n)=>{"use strict";var r=n(4),i=n(336).left,s=n(105),o=n(28);r({target:"Array",proto:!0,forced:!n(159)&&o>79&&o<83||!s("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},1001:(e,t,n)=>{"use strict";var r=n(4),i=Math.hypot,s=Math.abs,o=Math.sqrt;r({target:"Math",stat:!0,arity:2,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,i=0,a=0,c=arguments.length,d=0;a<c;)d<(n=s(arguments[a++]))?(i=i*(r=d/n)*r+1,d=n):i+=n>0?(r=n/d)*r:n;return d===1/0?1/0:d*o(i)}})},1002:(e,t,n)=>{"use strict";n(1003)},1003:(e,t,n)=>{"use strict";var r=n(4),i=n(179),s=n(31),o=n(47),a=n(205),c=TypeError;r({target:"Iterator",proto:!0,real:!0},{reduce:function(e){o(this),s(e);var t=a(this),n=arguments.length<2,r=n?void 0:arguments[1],d=0;if(i(t,(function(t){n?(n=!1,r=t):r=e(r,t,d),d++}),{IS_RECORD:!0}),n)throw new c("Reduce of empty iterator with no initial value");return r}})},1007:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M5.88 4.12L13.76 12l-7.88 7.88L8 22l10-10L8 2z"}),"ArrowForwardIos");t.A=o},1008:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"Palette");t.A=o},1009:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"}),"SwapVert");t.A=o},1010:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");t.A=o},1011:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.A=o},1027:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8.29 13.29c-.39.39-1.02.39-1.41 0L5.71 12.7a.9959.9959 0 010-1.41c.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.58 7.59z"}),"CheckBoxRounded");t.A=o},1028:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"}),"CloudDownload");t.A=o},1031:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84l3.96-5.58c.25-.35.25-.81 0-1.16l-3.96-5.58z"}),"LabelRounded");t.A=o},1033:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"VisibilityRounded");t.A=o},1034:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24zM2.71 3.16c-.39.39-.39 1.02 0 1.41l1.97 1.97C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l2.72 2.72c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L4.13 3.16c-.39-.39-1.03-.39-1.42 0zM12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5zm2.97-5.33c-.15-1.4-1.25-2.49-2.64-2.64l2.64 2.64z"}),"VisibilityOffRounded");t.A=o},1062:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertRounded");t.A=o},1064:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M9.29 6.71c-.39.39-.39 1.02 0 1.41L13.17 12l-3.88 3.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z"}),"ChevronRightRounded");t.A=o},1065:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M20 6h-8l-1.41-1.41C10.21 4.21 9.7 4 9.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-3.06 10.41L15 15.28l-1.94 1.13c-.38.22-.84-.12-.74-.55l.51-2.2-1.69-1.46c-.33-.29-.16-.84.28-.88l2.23-.19.88-2.06c.17-.4.75-.4.92 0l.88 2.06 2.23.19c.44.04.62.59.28.88l-1.69 1.46.51 2.2c.11.43-.35.77-.72.55z"}),"FolderSpecialRounded");t.A=o},1066:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v4c0 1.1.9 2 2 2h2v2c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2v-2h2c1.1 0 2-.9 2-2v-4c0-1.66-1.34-3-3-3zm-4 11H9c-.55 0-1-.45-1-1v-4h8v4c0 .55-.45 1-1 1zm4-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-2-9H7c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z"}),"PrintRounded");t.A=o},1069:(e,t,n)=>{"use strict";var r=n(377),i=n(459);t.A=void 0;var s=i(n(228)),o=(0,r(n(460)).default)(s.createElement("path",{d:"M11.99 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm3.61 6.34c1.07 0 1.93.86 1.93 1.93 0 1.07-.86 1.93-1.93 1.93-1.07 0-1.93-.86-1.93-1.93-.01-1.07.86-1.93 1.93-1.93zm-6-1.58c1.3 0 2.36 1.06 2.36 2.36 0 1.3-1.06 2.36-2.36 2.36s-2.36-1.06-2.36-2.36c0-1.31 1.05-2.36 2.36-2.36zm0 9.13v3.75c-2.4-.75-4.3-2.6-5.14-4.96 1.05-1.12 3.67-1.69 5.14-1.69.53 0 1.2.08 1.9.22-1.64.87-1.9 2.02-1.9 2.68zM11.99 20c-.27 0-.53-.01-.79-.04v-4.07c0-1.42 2.94-2.13 4.4-2.13 1.07 0 2.92.39 3.84 1.15-1.17 2.97-4.06 5.09-7.45 5.09z"}),"SupervisedUserCircle");t.A=o}}]);