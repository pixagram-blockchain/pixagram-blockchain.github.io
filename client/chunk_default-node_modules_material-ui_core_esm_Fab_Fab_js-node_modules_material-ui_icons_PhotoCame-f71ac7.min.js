/*! For license information please see chunk_default-node_modules_material-ui_core_esm_Fab_Fab_js-node_modules_material-ui_icons_PhotoCame-f71ac7.min.js.LICENSE.txt */
(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["default-node_modules_material-ui_core_esm_Fab_Fab_js-node_modules_material-ui_icons_PhotoCame-f71ac7"],{24488:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(80045),a=n(58168),s=n(17402),o=n(20053),r=n(32150),l=n(47851),c=n(67515),u=s.forwardRef((function(e,t){var n=e.children,r=e.classes,u=e.className,d=e.color,p=void 0===d?"default":d,h=e.component,f=void 0===h?"button":h,_=e.disabled,m=void 0!==_&&_,g=e.disableFocusRipple,w=void 0!==g&&g,y=e.focusVisibleClassName,b=e.size,v=void 0===b?"large":b,x=e.variant,E=void 0===x?"circular":x,C=(0,i.A)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return s.createElement(l.A,(0,a.A)({className:(0,o.default)(r.root,u,"large"!==v&&r["size".concat((0,c.A)(v))],m&&r.disabled,"extended"===E&&r.extended,{primary:r.primary,secondary:r.secondary,inherit:r.colorInherit}[p]),component:f,disabled:m,focusRipple:!w,focusVisibleClassName:(0,o.default)(r.focusVisible,y),ref:t},C),s.createElement("span",{className:r.label},n))}));const d=(0,r.A)((function(e){return{root:(0,a.A)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(u)},44385:(e,t,n)=>{"use strict";var i=n(24994),a=n(6305);t.A=void 0;var s=a(n(17402)),o=(0,i(n(76447)).default)(s.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"}),"InsertDriveFileOutlined");t.A=o},9372:(e,t,n)=>{"use strict";var i=n(24994),a=n(6305);t.A=void 0;var s=a(n(17402)),o=(0,i(n(76447)).default)(s.createElement(s.Fragment,null,s.createElement("circle",{cx:"12",cy:"12",r:"3"}),s.createElement("path",{d:"M20 4h-3.17l-1.24-1.35c-.37-.41-.91-.65-1.47-.65H9.88c-.56 0-1.1.24-1.48.65L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 13c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"PhotoCameraRounded");t.A=o},32163:(e,t,n)=>{"use strict";n.d(t,{A:()=>k});n(42762),n(62953);var i=n(17402),a=n(5556),s=n.n(a),o=n(8728),r=n(7160),l=n(88016),c=n(38306),u=n(33615),d=n(79626),p=n(69312),h=n(95652),f=n(32485),_=n.n(f);const m=["allowDuplicates","alwaysShowPlaceholder","blurBehavior","children","chipRenderer","classes","className","clearInputValueOnChange","dataSource","dataSourceConfig","defaultValue","delayBeforeAdd","disabled","disableUnderline","error","filter","FormHelperTextProps","fullWidth","fullWidthInput","helperText","id","InputProps","inputRef","InputLabelProps","inputValue","label","newChipKeyCodes","newChipKeys","onBeforeAdd","onAdd","onBlur","onDelete","onChange","onFocus","onKeyDown","onKeyPress","onKeyUp","onUpdateInput","placeholder","readOnly","required","rootRef","value","variant","endAdornment"];function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g.apply(null,arguments)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v={standard:o.A,filled:r.Ay,outlined:l.A},x=8,E=46,C=37,S=39;class A extends i.default.PureComponent{constructor(e){super(e),b(this,"state",{chips:[],errorText:void 0,focusedChip:null,inputValue:"",isClean:!0,isFocused:!1,chipsUpdated:!1,prevPropsValue:[]}),b(this,"focus",(()=>{this.actualInput.focus(),null!=this.state.focusedChip&&this.setState({focusedChip:null})})),b(this,"handleInputBlur",(e=>{this.props.onBlur&&this.props.onBlur(e),this.setState({isFocused:!1}),null!=this.state.focusedChip&&this.setState({focusedChip:null});const t=e.target.value;let n;switch(this.props.blurBehavior){case"add-or-clear":n={clearInputOnFail:!0};case"add":if(this.props.delayBeforeAdd){const e=(this.props.value||this.state.chips).length;this.inputBlurTimeout=setTimeout((()=>{const i=(this.props.value||this.state.chips).length;e===i?this.handleAddChip(t,n):this.clearInput()}),150)}else this.handleAddChip(t,n);break;case"clear":this.clearInput()}})),b(this,"handleInputFocus",(e=>{this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(e)})),b(this,"handleKeyDown",(e=>{const{focusedChip:t}=this.state;if(this._keyPressed=!1,this._preventChipCreation=!1,this.props.onKeyDown&&(this.props.onKeyDown(e),e.isDefaultPrevented()))return;const n=this.props.value||this.state.chips;if(this.props.newChipKeyCodes.indexOf(e.keyCode)>=0||this.props.newChipKeys.indexOf(e.key)>=0){!1!==this.handleAddChip(e.target.value)&&e.preventDefault()}else switch(e.keyCode){case x:""===e.target.value&&(null!=t?(this.handleDeleteChip(n[t],t),t>0&&this.setState({focusedChip:t-1})):this.setState({focusedChip:n.length-1}));break;case E:""===e.target.value&&null!=t&&(this.handleDeleteChip(n[t],t),t<=n.length-1&&this.setState({focusedChip:t}));break;case C:null==t&&""===e.target.value&&n.length?this.setState({focusedChip:n.length-1}):null!=t&&t>0&&this.setState({focusedChip:t-1});break;case S:null!=t&&t<n.length-1?this.setState({focusedChip:t+1}):this.setState({focusedChip:null});break;default:this.setState({focusedChip:null})}})),b(this,"handleKeyUp",(e=>{!this._preventChipCreation&&(this.props.newChipKeyCodes.indexOf(e.keyCode)>=0||this.props.newChipKeys.indexOf(e.key)>=0)&&this._keyPressed?this.clearInput():this.updateInput(e.target.value),this.props.onKeyUp&&this.props.onKeyUp(e)})),b(this,"handleKeyPress",(e=>{this._keyPressed=!0,this.props.onKeyPress&&this.props.onKeyPress(e)})),b(this,"handleUpdateInput",(e=>{null==this.props.inputValue&&this.updateInput(e.target.value),this.props.onUpdateInput&&this.props.onUpdateInput(e)})),b(this,"setActualInputRef",(e=>{this.actualInput=e,this.props.inputRef&&this.props.inputRef(e)})),e.defaultValue&&(this.state.chips=e.defaultValue),this.labelRef=i.default.createRef(),this.input=i.default.createRef()}componentDidMount(){"outlined"===this.props.variant&&(this.labelNode=i.default.findDOMNode(this.labelRef.current),this.forceUpdate())}componentWillUnmount(){clearTimeout(this.inputBlurTimeout)}static getDerivedStateFromProps(e,t){let n=null;return e.value&&e.value.length!==t.prevPropsValue.length&&(n={prevPropsValue:e.value},e.clearInputValueOnChange&&(n.inputValue="")),e.clearInputValueOnChange&&e.value&&e.value.length!==t.prevPropsValue.length&&(n={prevPropsValue:e.value,inputValue:""}),e.disabled&&(n=y(y({},n),{},{focusedChip:null})),!t.chipsUpdated&&e.defaultValue&&(n=y(y({},n),{},{chips:e.defaultValue})),n}blur(){this.input&&this.actualInput.blur()}handleAddChip(e,t){if(this.props.onBeforeAdd&&!this.props.onBeforeAdd(e))return this._preventChipCreation=!0,null!=t&&t.clearInputOnFail&&this.clearInput(),!1;this.clearInput();const n=this.props.value||this.state.chips;return this.props.dataSourceConfig?("string"==typeof e&&(e={[this.props.dataSourceConfig.text]:e,[this.props.dataSourceConfig.value]:e}),!this.props.allowDuplicates&&n.some((t=>t[this.props.dataSourceConfig.value]===e[this.props.dataSourceConfig.value]))||(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([...this.state.chips,e])),!0):e.trim().length>0&&((this.props.allowDuplicates||-1===n.indexOf(e))&&(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([...this.state.chips,e])),!0)}handleDeleteChip(e,t){if(this.props.value)this.props.onDelete&&this.props.onDelete(e,t);else{const e=this.state.chips.slice();if(e.splice(t,1)){let n=this.state.focusedChip;this.state.focusedChip===t?n=null:this.state.focusedChip>t&&(n=this.state.focusedChip-1),this.updateChips(e,{focusedChip:n})}}}updateChips(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setState(y({chips:e,chipsUpdated:!0},t)),this.props.onChange&&this.props.onChange(e)}clearInput(){this.updateInput("")}updateInput(e){this.setState({inputValue:e})}render(){const e=this.props,{allowDuplicates:t,alwaysShowPlaceholder:n,blurBehavior:a,children:s,chipRenderer:o=O,classes:r,className:l,clearInputValueOnChange:u,dataSource:d,dataSourceConfig:f,defaultValue:w,delayBeforeAdd:y,disabled:b,disableUnderline:x,error:E,filter:C,FormHelperTextProps:S,fullWidth:A,fullWidthInput:k,helperText:P,id:D,InputProps:z={},inputRef:I,InputLabelProps:T={},inputValue:$,label:j,newChipKeyCodes:R,newChipKeys:U,onBeforeAdd:q,onAdd:B,onBlur:N,onDelete:L,onChange:F,onFocus:M,onKeyDown:W,onKeyPress:V,onKeyUp:K,onUpdateInput:H,placeholder:J,readOnly:X,required:G,rootRef:Z,value:Y,variant:Q,endAdornment:ee}=e,te=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,m),ne=Y||this.state.chips,ie=null!=$?$:this.state.inputValue,ae=(this.props.value||ie).length>0||ie.length>0,se=null!=T.shrink?T.shrink:null!=j&&(ae||this.state.isFocused||ne.length>0),oe=ne.map(((e,t)=>{const n=f?e[f.value]:e;return o({value:n,text:f?e[f.text]:e,chip:e,isDisabled:!!b,isReadOnly:X,isFocused:this.state.focusedChip===t,handleClick:()=>this.setState({focusedChip:t}),handleDelete:()=>this.handleDeleteChip(e,t),className:r.chip},t)})),re={};"outlined"===Q&&(re.notched=se,re.labelWidth=se&&this.labelNode&&this.labelNode.offsetWidth||0),"standard"!==Q?re.startAdornment=i.default.createElement(i.default.Fragment,null,oe):z.disableUnderline=!0,re.endAdornment=ee;const le=v[Q];return i.default.createElement(p.A,g({ref:Z,fullWidth:A,className:_()(l,r.root,{[r.marginDense]:"dense"===te.margin}),error:E,required:ne.length>0?void 0:G,onClick:this.focus,disabled:b,variant:Q},te),j&&i.default.createElement(c.A,g({htmlFor:D,classes:{root:_()(r[Q],r.label),shrink:r.labelShrink},shrink:se,focused:this.state.isFocused,variant:Q,ref:this.labelRef,required:G},T),j),i.default.createElement("div",{className:_()(r[Q],r.chipContainer,{[r.focused]:this.state.isFocused,[r.underline]:!x&&"standard"===Q,[r.disabled]:b,[r.labeled]:null!=j,[r.error]:E})},"standard"===Q&&oe,i.default.createElement(le,g({ref:this.input,classes:{input:_()(r.input,r[Q]),root:_()(r.inputRoot,r[Q])},id:D,value:ie,onChange:this.handleUpdateInput,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,inputRef:this.setActualInputRef,disabled:b,fullWidth:k,placeholder:!ae&&(se||null==j)||n?J:null,readOnly:X},z,re))),P&&i.default.createElement(h.A,g({},S,{className:S?_()(S.className,r.helperText):r.helperText}),P))}}A.propTypes={endAdornment:s().node,allowDuplicates:s().bool,alwaysShowPlaceholder:s().bool,blurBehavior:s().oneOf(["clear","add","add-or-clear","ignore"]),chipRenderer:s().func,clearInputValueOnChange:s().bool,dataSource:s().array,dataSourceConfig:s().shape({text:s().string.isRequired,value:s().string.isRequired}),defaultValue:s().array,delayBeforeAdd:s().bool,disabled:s().bool,disableUnderline:s().bool,FormHelperTextProps:s().object,fullWidth:s().bool,fullWidthInput:s().bool,helperText:s().node,InputLabelProps:s().object,InputProps:s().object,inputRef:s().func,inputValue:s().string,label:s().node,newChipKeyCodes:s().arrayOf(s().number),newChipKeys:s().arrayOf(s().string),onAdd:s().func,onBeforeAdd:s().func,onChange:s().func,onDelete:s().func,onUpdateInput:s().func,placeholder:s().string,readOnly:s().bool,value:s().array,variant:s().oneOf(["outlined","standard","filled"])},A.defaultProps={allowDuplicates:!1,blurBehavior:"clear",clearInputValueOnChange:!1,delayBeforeAdd:!1,disableUnderline:!1,newChipKeyCodes:[13],newChipKeys:["Enter"],variant:"standard"};const k=(0,d.default)((e=>{const t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{},inputRoot:{display:"inline-flex",flexWrap:"wrap",flex:1,marginTop:0,minWidth:70,"&$outlined,&$filled":{boxSizing:"border-box"},"&$outlined":{paddingTop:14},"&$filled":{paddingTop:28}},input:{display:"inline-block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",appearance:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",float:"left",flex:1},chipContainer:{display:"flex",flexFlow:"row wrap",cursor:"text",marginBottom:-2,minHeight:40,"&$labeled&$standard":{marginTop:18}},outlined:{"& input":{height:16,paddingTop:4,paddingBottom:12,marginTop:4,marginBottom:4}},standard:{},filled:{"& input":{height:22,marginBottom:4,marginTop:4,paddingTop:0},"$marginDense & input":{height:26}},labeled:{},label:{top:4,"&$outlined&:not($labelShrink)":{top:2,"$marginDense &":{top:5}},"&$filled&:not($labelShrink)":{top:15,"$marginDense &":{top:20}}},labelShrink:{top:0},helperText:{marginBottom:-20},focused:{},disabled:{},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary[t?"dark":"light"]),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(n)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{"&:after":{backgroundColor:e.palette.error.main,transform:"scaleX(1)"}},chip:{margin:"0 8px 8px 0",float:"left"},marginDense:{}}}),{name:"WAMuiChipInput"})(A),O=(e,t)=>{let{value:n,text:a,isFocused:s,isDisabled:o,isReadOnly:r,handleClick:l,handleDelete:c,className:d}=e;return i.default.createElement(u.A,{key:t,className:d,style:{pointerEvents:o||r?"none":void 0,backgroundColor:s?"rgb(96, 96, 96)":void 0},onClick:l,onDelete:c,label:a})}},40497:(e,t,n)=>{"use strict";n.a(e,(async(e,i)=>{try{n.d(t,{A:()=>I});n(54743),n(11745),n(21489),n(22134),n(75044),n(28845),n(373),n(62953),n(3296),n(27208),n(48408);var a=n(17402),s=n(79626),o=n(52706),r=n(65816),l=n(68016),c=n(96746),u=n(39870),d=n(54392),p=n(8728),h=n(69113),f=n(83182),_=n(69312),m=n(15776),g=n(94422),w=n(72572),y=n(44041),b=n(44385),v=n(34274),x=n(69232),E=n(32163),C=n(95834),S=n(40024),A=e([v]);function k(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=P(e,"string");return"symbol"==typeof t?t:t+""}function P(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}v=(A.then?(await A)():A)[0],await(0,S.Ay)();const D=e=>({dropZone:{width:"100%",height:"100%",minHeight:"384px",border:"2px dashed #666",textAlign:"center",verticalAlign:"middle",backgroundColor:"transparent",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 225ms"},dropZoneActive:{width:"100%",height:"100%",minHeight:"384px",border:"2px solid #666",textAlign:"center",verticalAlign:"middle",backgroundColor:"rgba(255, 255, 255, 0.07)",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 25ms"},whiteDialog:{backgroundColor:"#fff !important",color:"#000 !important",boxShadow:"0px 11px 15px -7px rgb(255 255 255 / 20%), 0px 24px 38px 3px rgb(255 255 255 / 14%), 0px 9px 46px 8px rgb(255 255 255 / 12%) !important","& .MuiButton-textPrimary":{color:"#222 !important","&:hover":{color:"#000 !important"}},"& .MuiButton-containedPrimary":{color:"#fff !important",backgroundColor:"#000 !important","&:hover":{color:"#ddd !important",backgroundColor:"#222 !important"}},"& .MuiRadio-colorPrimary.Mui-checked, & .MuiCheckbox-colorPrimary.Mui-checked, & .MuiRadio-colorSecondary.Mui-checked":{color:"#000 !important"},"& .MuiRadio-root, & .MuiFormLabel-root.Mui-focused, .MuiTypography-root":{color:"#000 !important"},"& .MuiSlider-root":{color:"#000 !important"},"& span.MuiSlider-valueLabel > span > span":{color:"#fff !important"}},inputImage:{margin:"0px 0px -4px 0px",borderRadius:"12px",width:"100%",filter:"grayscale(1) contrast(.8) brightness(0.55) opacity(0.65) blur(8px)",transition:"filter 400ms cubic-bezier(0.4, 0, 0.2, 1) 25ms !important",animationName:"$opacity-create",animationTimingFunction:"ease-in-out",animationDuration:"2400ms",animationFillMode:"both",animationDelay:"1200ms",animationDirection:"alternate",animationIterationCount:"infinite","@global":{"@keyframes opacity-create":{"0%":{opacity:"0.666"},"100%":{opacity:"1.000"}}},"&:hover":{filter:"grayscale(0.15) contrast(.8) brightness(0.6) opacity(0.7) blur(0px)"},"&::after":{content:"''",position:"absolute",left:0,top:0,width:"100%",height:"100%",background:"linear-gradient(to top, black, transparent)"}}});class z extends a.PureComponent{constructor(e){var t;super(e),t=this,k(this,"_resetProps",(()=>{try{URL.revokeObjectURL(this.state._input_file_url)}catch(e){}this.setState({_drop_ref:null,_preferred_size:"M",_title:"",_currentStep:0,_totalStep:3,_drag_file:{},_cache:{},_preview:{},_preview_kb:0,_previews:[],_canvas:{},_offscreen_canvas:{},_base64:"",_style:0,_dropzone_active:!1,_message:"We maintains privacy and doesn't store uploaded images.",_close_confirm_close_open:!1,_quantize_dialog_open:!1,_quantize_downscale:4,_quantize_colors:64,process:{name:"upload file",start:0,finish:0}},this.forceUpdate)})),k(this,"_setTags",(e=>{this.setState({_tags:e.target.value.toString()},this.forceUpdate)})),k(this,"_drop_start",(e=>{e.preventDefault(),e.stopPropagation();const t=this.state._dropzone_active;this.setState({_dropzone_active:!0},(()=>{t||this.forceUpdate()}))})),k(this,"_drop_end",(e=>{e.preventDefault(),e.stopPropagation();const t=this.state._dropzone_active;this.setState({_dropzone_active:!1},(()=>{t&&this.forceUpdate()}))})),k(this,"_trigger_message",(e=>{this.setState({_message:e},this.forceUpdate)})),k(this,"_handle_file_upload",(async e=>{"dataTransfer"in e&&e.dataTransfer.files.length>0&&(e.preventDefault(),e.stopPropagation());const t=(e.target||{}).files||(e.srcElement||{}).files||(e.currentTarget||{}).files||((e.path||[])[0]||{}).files||(e.dataTransfer||{}).files||[],n=t[0]||null;let i=null;for(let e=0;e<t.length;e++)i=t[e],i.type.startsWith("image/")&&(e=t.length);if(null===i&&null===n);else if(null!==i){Boolean("image/png"===i.type)||i.type;const e=await(0,v.E)(i,512,512,160);if(e instanceof ImageData)this._trigger_message("The image appears to be already optimized!"),this.setState({_previews:[{name:"default",imageData:e}],_title:"",_currentStep:1,process:{name:"upload file",start:0,finish:0}},(()=>{this.forceUpdate((()=>{this._set_size()}))}));else{try{URL.revokeObjectURL(this.state._input_file_url)}catch(e){}const e=URL.createObjectURL(i);this.setState({_input_file_url:e,_use_ai_open:!0,_input_file:i},this.forceUpdate)}}})),k(this,"_setTitle",(e=>{this.setState({_title:e.target.value},this.forceUpdate)})),k(this,"_set_process",((e,t,n)=>{const i=setInterval(this.forceUpdate.bind(this),250),a=setTimeout((()=>{this.state.process._interval===i&&clearInterval(this.state.process._interval)}),n-t);this.setState({process:{name:e,start:t,finish:n,_interval:i,_timout:a}},(()=>{this.forceUpdate()}))})),k(this,"_handle_size_change",(e=>{this.setState({_preferred_size:e.target.value},(()=>{this._set_size()}))})),k(this,"_handle_style_change",(e=>{this.setState({_style:parseInt(e.target.value)},(()=>{this.forceUpdate()}))})),k(this,"_set_canvas_ref",(e=>{if(void 0===e)return this._set_size();if(null==e)return this._set_size();if(void 0===e.width)return this._set_size();if(null==e.width)return this._set_size();if("function"==typeof e.getContext){var t=e;t.context=e.getContext("2d"),this.setState({_canvas:t},(()=>{this._set_size()}))}})),k(this,"_set_size",(()=>{this.state._previews.forEach((e=>{1!==this.state._previews.length&&e.name.toUpperCase()!==this.state._preferred_size.toUpperCase()||this.setState({_preview:e.imageData},(()=>{this.state._canvas.width=this.state._preview.width,this.state._canvas.height=this.state._preview.height,(0,x.A)((()=>Promise.all([n.e("default-src_js_utils_encodeImage_js"),n.e("default-src_js_utils_png_quant_js")]).then(n.bind(n,15656)))).then((e=>{let{encodeIMG:t}=e;t(this.state._preview,"WEBP",!0).then((e=>{this.setState({_base64:e},(()=>{this.forceUpdate((()=>{this.state._canvas.context.putImageData(this.state._preview,0,0)}))}))}))}))}))}))})),k(this,"download_artwork",(()=>{let e=document.createElement("a");e.download="Pixagram.webp",e.href=this.state._base64,e.click(),e.remove()})),k(this,"_set_drop_ref",(e=>{null!=e&&this.setState({_drop_ref:e},(()=>{this.state._drop_ref.addEventListener("drop",this._handle_file_upload.bind(this)),this.state._drop_ref.addEventListener("dragenter",this._drop_start.bind(this)),this.state._drop_ref.addEventListener("dragover",this._drop_start.bind(this)),this.state._drop_ref.addEventListener("dragleave",this._drop_end.bind(this)),this.state._drop_ref.addEventListener("dragend",this._drop_end.bind(this))}))})),k(this,"_backOrCancel",(e=>{parseInt(this.state._currentStep)<=1?e?this.close_confirm():this.setState({_close_confirm_close_open:!0},this.forceUpdate):this.setState({_currentStep:parseInt(this.state._currentStep)-1},this.forceUpdate)})),k(this,"request_close",(()=>{this.setState({_close_confirm_close_open:!0},this.forceUpdate)})),k(this,"_nextOrFinish",(()=>{2===parseInt(this.state._currentStep)?(this._resetProps(),this.props.onClose()):this.setState({_currentStep:parseInt(this.state._currentStep)+1},this.forceUpdate)})),k(this,"_open_link",(e=>{window.open(e,"_blank")})),k(this,"close_confirm_close",(()=>{this.setState({_close_confirm_close_open:!1},(()=>{this.forceUpdate()}))})),k(this,"close_use_ai",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({_use_ai_open:!1,_use_ai:e},(()=>{t.forceUpdate((async()=>{const n=await(0,v.z)(t.state._input_file,1028,1028,void 0,t._trigger_message,t._set_process,e);t.setState({_previews:n.artworks,_cache:n.artwork,_title:n.prompt,_currentStep:1,process:{name:"upload file",start:0,finish:0}},(()=>{t.forceUpdate((()=>{t._set_size()}))}))}))}))})),k(this,"close_confirm",(()=>{this.setState({_close_confirm_close_open:!1},(()=>{this.forceUpdate((()=>{this._resetProps(),this.props.onClose()}))}))})),k(this,"_set_quantize_preview_canvas_ref",(e=>{e&&this.state._quantize_preview_canvas!==e&&this.setState({_quantize_preview_canvas:e},(()=>{this._update_quantize_preview(),this.forceUpdate()}))})),k(this,"_open_quantize_dialog",(()=>{this.setState({_quantize_dialog_open:!0,_quantize_downscale:4,_quantize_colors:64},(()=>{this.forceUpdate()}))})),k(this,"_close_quantize_dialog",(e=>{if(e){const e=this.quantizeAndResize(this.state._preview,this.state._quantize_downscale,this.state._quantize_colors);this.setState({_preview:e,_quantize_dialog_open:!1,_currentStep:this.state._currentStep+1},(()=>{this.state._canvas&&this.state._canvas.context&&e&&(this.state._canvas.width=e.width,this.state._canvas.height=e.height,this.state._canvas.context.putImageData(e,0,0)),this.forceUpdate()}))}else this.setState({_quantize_dialog_open:!1},(()=>{this.forceUpdate()}))})),k(this,"_handle_downscale_change",((e,t)=>{this.setState({_quantize_downscale:t},(()=>{this._debounced_quantize_update(),this.forceUpdate()}))})),k(this,"_handle_colors_change",((e,t)=>{this.setState({_quantize_colors:t},(()=>{this._debounced_quantize_update(),this.forceUpdate()}))})),k(this,"_debounced_quantize_update",(()=>{this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((()=>{this._update_quantize_preview()}),300)})),k(this,"_update_quantize_preview",(()=>{const e=this.state._quantize_preview_canvas;if(!e)return;const t=this.quantizeAndResize(this.state._cache,this.state._quantize_downscale,this.state._quantize_colors);if(t&&e.getContext){e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0)}})),k(this,"quantizeAndResize",((e,t,n)=>{const i=new S.Cf(new Uint8Array(e.data),e.width,e.height),a=i.process(t,n),[s,o]=i.get_processed_dimensions(t);return new ImageData(new Uint8ClampedArray(a),parseInt(s),parseInt(o))})),this.state={classes:e.classes,keepMounted:e.keepMounted||!1,open:e.open,_drop_ref:null,_preferred_size:"M",_title:"",_currentStep:0,_totalStep:3,_drag_file:{},_cache:{},_preview:{},_preview_kb:0,_previews:[],_canvas:{},_offscreen_canvas:{},_base64:"",_style:0,_use_ai:!1,_use_ai_open:!1,_input_file:{},_input_file_url:"",_dropzone_active:!1,_tags:[],_message:"We maintains privacy and doesn't store uploaded images.",_close_confirm_close_open:!1,_quantize_dialog_open:!1,_quantize_downscale:4,_quantize_colors:64,_quantize_preview_canvas:{},_quantize_debounce_timer:null,process:{name:"upload file",start:0,finish:0}},this.debounceTimeout=null}shouldComponentUpdate(e,t,n){return!1}componentWillReceiveProps(e){this.setState(e,(()=>{this.forceUpdate()}))}render(){const{classes:e,_title:t,_preferred_size:n,_currentStep:i,_totalStep:s,open:v,keepMounted:x,_preview:S,_dropzone_active:A,process:k,_base64:O,_tags:P,_previews:D,_message:z,_close_confirm_close_open:I,_use_ai_open:T,_use_ai:$,_style:j,_input_file_url:R,_quantize_dialog_open:U,_quantize_downscale:q,_quantize_colors:B}=this.state,{name:N,start:L,finish:F}=k;Math.round(i/s*100);let M=null,W=F-L,V=Date.now()-L,K=V/W,H=W>V,J=((O||"").length||0)/1e3*3/4;switch(i.toString()){case"0":M=a.createElement("div",{ref:this._set_drop_ref},a.createElement("div",{style:{borderRadius:"12px"},className:A?e.dropZoneActive:e.dropZone},a.createElement(C.A,{in:R,timeout:300},a.createElement("img",{src:R,className:e.inputImage+" pixelated",alt:"Input Image"})),a.createElement(p.A,{onChange:this._handle_file_upload,accept:"image/*",style:{display:"none",position:"absolute"},id:"button-file-dialog-secondary",type:"file"}),a.createElement(C.A,{in:!0,timeout:600},a.createElement("div",{style:{pointerEvents:H||"upload file"!==N?"none":"auto",transform:"translate(-50%, -50%)",top:"50%",left:"50%",position:"absolute",display:"inline"}},a.createElement(C.A,{in:!0,timeout:600},a.createElement(c.A,{disabled:H||"upload file"!==N,component:"label",htmlFor:"button-file-dialog-secondary",onClick:this._handle_file_upload},a.createElement("span",{style:{fontWeight:"bold",fontSize:"24px",verticalAlign:"super",color:"#999",marginRight:"16px"}},N||"Upload Image"),H||"upload file"!==N?a.createElement(h.A,{position:"relative",display:"inline-flex"},a.createElement(f.A,{variant:H?"determinate":"indeterminate",color:"#ffffff",value:Math.round(100*K)}),a.createElement(h.A,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},a.createElement(d.A,{variant:"caption",component:"div",color:"textSecondary"},H?"".concat(Math.round(Math.min(100*K,100)),"%"):"wait"))):a.createElement(b.A,{style:{color:"#666"}}))),a.createElement(C.A,{in:!0,timeout:900},a.createElement("p",{style:{textAlign:"center",color:"#a7a7a7"}},z))))));break;case"1":M=a.createElement("div",{noValidate:!0,autoComplete:"off",style:{position:"relative"}},a.createElement(_.A,{component:"fieldset",style:{padding:"8px 16px 64px 16px",position:"absolute",background:"linear-gradient(180deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",top:"0px"}},1===(D||0).length?a.createElement(C.A,{in:!0,timeout:600},a.createElement("p",null,"Your artwork is already optimized for pixel art")):a.createElement(o.A,{row:!0,defaultValue:"top","aria-label":"size",name:"SIZE",color:"primary",value:n,onChange:this._handle_size_change},a.createElement(C.A,{in:!0,timeout:200},a.createElement(m.A,{value:"XS",control:a.createElement(g.A,null),label:"XS"})),a.createElement(C.A,{in:!0,timeout:400},a.createElement(m.A,{value:"S",control:a.createElement(g.A,null),label:"S"})),a.createElement(C.A,{in:!0,timeout:600},a.createElement(m.A,{value:"M",control:a.createElement(g.A,null),label:"M"})),a.createElement(C.A,{in:!0,timeout:800},a.createElement(m.A,{value:"L",control:a.createElement(g.A,null),label:"L"})),a.createElement(C.A,{in:!0,timeout:1e3},a.createElement(m.A,{value:"XL",control:a.createElement(g.A,null),label:"XL"})),a.createElement(C.A,{in:!0,timeout:1200},a.createElement(m.A,{value:"XXL",control:a.createElement(g.A,null),label:"XXL"})))),a.createElement("div",{className:"pixelated",style:{width:"100%"}},a.createElement("canvas",{style:{borderRadius:"12px",width:"100%"},ref:this._set_canvas_ref,width:S.width+"px",height:S.height+"px"})),a.createElement("div",{style:{padding:"64px 8px 16px 8px",textAlign:"right",position:"absolute",background:"linear-gradient(0deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",bottom:"0px"}},a.createElement(C.A,{in:!0,timeout:600},a.createElement(c.A,{variant:"text",color:"#ffffff88",onClick:this._open_quantize_dialog},"QUANTIZE")),a.createElement(C.A,{in:!0,timeout:800},a.createElement(c.A,{variant:"text",color:"#ffffff88",onClick:this.download_artwork},"DOWNLOAD (",J.toFixed(2)," kB)")),a.createElement(C.A,{in:!0,timeout:1e3},a.createElement(c.A,{variant:"text",color:"#ffffff88",onClick:()=>this._open_link("https://pixa.pics/")},"OPEN EDITOR"))));break;case"2":M=a.createElement(C.A,{in:!0,timeout:300},a.createElement("div",{noValidate:!0,autoComplete:"off"},a.createElement(w.A,{style:{marginTop:12},value:t,fullWidth:!0,label:"Title",variant:"outlined",onChange:this._setTitle}),a.createElement(w.A,{style:{marginTop:24,marginBottom:24},label:"Content",multiline:!0,rows:1,defaultValue:O,variant:"filled",disabled:!0,fullWidth:!0}),a.createElement(w.A,{style:{marginTop:24,marginBottom:24},label:"Description",multiline:!0,minRows:6,defaultValue:"",variant:"outlined",fullWidth:!0}),a.createElement(E.A,{style:{marginBottom:12},fullWidth:!0,variant:"outlined",label:"Tags",placeholder:"Tags for content classification"})))}return a.createElement(a.Fragment,null,a.createElement(u.A,{open:v,maxWidth:"sm",fullWidth:!0,disablePortal:!1,onClose:this.request_close,keepMounted:!1},a.createElement(l.A,null,a.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Publisher"),M),a.createElement(r.A,{style:{textAlign:"right"}},a.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:()=>this._backOrCancel(Boolean(!H&&"upload file"==N))},parseInt(i)>0?"Back":"Cancel"),a.createElement(c.A,{variant:"contained",color:"primary",disabled:0===parseInt(i),onClick:this._nextOrFinish},2===parseInt(i)?"Publish":"Next"))),a.createElement(u.A,{PaperProps:{classes:{root:e.whiteDialog}},open:I,maxWidth:"xs",disablePortal:!1,onClose:this.close_confirm_close,keepMounted:!1},a.createElement(l.A,null,a.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Are you sure?"),a.createElement(d.A,{variant:"body2",color:"textPrimary",component:"p"},"Your current artwork will be lost.")),a.createElement(r.A,{style:{textAlign:"right"}},a.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:this.close_confirm_close},"Cancel"),a.createElement(c.A,{variant:"contained",color:"primary",onClick:this.close_confirm},"Close"))),a.createElement(u.A,{PaperProps:{classes:{root:e.whiteDialog}},open:T,maxWidth:"xs",disablePortal:!1,onClose:()=>{this.close_use_ai(!1)},keepMounted:!1},a.createElement(l.A,null,a.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Transform with AI?"),a.createElement(d.A,{variant:"body2",color:"textPrimary",component:"p"},"It takes around 10 seconds. ",a.createElement("b",null,"#Free")," ",a.createElement("b",null,"#Anonymous"))),a.createElement(r.A,{style:{textAlign:"right"}},a.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:()=>{this.close_use_ai(!1)}},"NO"),a.createElement(c.A,{variant:"contained",color:"primary",onClick:()=>this.close_use_ai(!0)},"YES"))),a.createElement(u.A,{PaperProps:{classes:{root:e.whiteDialog}},open:U,maxWidth:"sm",fullWidth:!0,disablePortal:!1,onClose:()=>{this._close_quantize_dialog(!1)},keepMounted:!1},a.createElement(l.A,null,a.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Quantization Settings"),a.createElement(h.A,{style:{padding:"16px 0"}},a.createElement(d.A,{gutterBottom:!0},"Downscale Ratio: ",q,"x"),a.createElement(y.A,{value:q,onChange:this._handle_downscale_change,min:2,max:32,step:1,marks:[{value:2,label:"2x"},{value:8,label:"8x"},{value:16,label:"16x"},{value:32,label:"32x"}],valueLabelDisplay:"auto"})),a.createElement(h.A,{style:{padding:"16px 0"}},a.createElement(d.A,{gutterBottom:!0},"Number of Colors: ",B),a.createElement(y.A,{value:B,onChange:this._handle_colors_change,min:2,max:256,step:1,marks:[{value:2,label:"2"},{value:64,label:"64"},{value:128,label:"128"},{value:256,label:"256"}],valueLabelDisplay:"auto"})),a.createElement(h.A,{style:{marginTop:24}},a.createElement(d.A,{gutterBottom:!0,variant:"subtitle2"},"Preview:"),a.createElement("div",{className:"pixelated",style:{width:"100%",textAlign:"center"}},a.createElement("canvas",{style:{borderRadius:"12px",width:"100%"},ref:this._set_quantize_preview_canvas_ref})))),a.createElement(r.A,{style:{textAlign:"right"}},a.createElement(c.A,{variant:"text",color:"primary",onClick:()=>{this._close_quantize_dialog(!1)}},"Cancel"),a.createElement(c.A,{variant:"contained",color:"primary",onClick:()=>{this._close_quantize_dialog(!0)}},"Confirm"))))}}const I=(0,s.default)(D)(z);i()}catch(T){i(T)}}),1)},10544:(e,t,n)=>{"use strict";n.d(t,{I:()=>xe});n(54743),n(11745),n(27495),n(25440),n(42762),n(21489),n(61740),n(75044),n(28845),n(373),n(35874),n(12041),n(62953);var i=n(65606),a=(n(31546).Buffer,Object.defineProperty),s=e=>{throw TypeError(e)},o=(e,t,n)=>((e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),r=(e,t,n)=>t.has(e)||s("Cannot "+n),l=(e,t,n)=>(r(e,t,"read from private field"),n?n.call(e):t.get(e)),c=new Intl.Collator(0,{numeric:1}).compare;function u(e,t,n){return e=e.split("."),t=t.split("."),c(e[0],t[0])||c(e[1],t[1])||(t[2]=t.slice(2).join("."),(n=/[.-]/.test(e[2]=e.slice(2).join(".")))==/[.-]/.test(t[2])?c(e[2],t[2]):n?-1:1)}const d="host",p="queue/data",h="upload",f="login",_="config",m="runtime",g="sleeptime",w="This application is currently busy. Please try again. ",y="Connection errored out. ",b="Could not resolve app config. ",v="Space metadata could not be loaded. ",x="Not authorized to access this space. ",E="Invalid credentials. Could not login. ",C="Login credentials are required to access this space.",S="File system access is only available in Node.js environments",A="Root URL not found in client config";async function k(e,t,n){try{return(await(await fetch(`https://huggingface.co/api/spaces/${e}/jwt`,{headers:{Authorization:`Bearer ${t}`,...n?{Cookie:n}:{}}})).json()).token||!1}catch{return!1}}async function O(e){const t=this.options.hf_token?{Authorization:`Bearer ${this.options.hf_token}`}:{};if(t["Content-Type"]="application/json",typeof window<"u"&&window.gradio_config&&"http://localhost:9876"!==location.origin){if(window.gradio_config.current_page&&(e=e.substring(0,e.lastIndexOf("/"))),window.gradio_config.dev_mode){let n=U(e,this.deep_link?_+"?deep_link="+this.deep_link:_);const i=await this.fetch(n,{headers:t,credentials:"include"}),a=await P(i,e,!!this.options.auth);window.gradio_config={...a,current_page:window.gradio_config.current_page}}return window.gradio_config.root=e,{...window.gradio_config}}if(e){let n=U(e,this.deep_link?_+"?deep_link="+this.deep_link:_);return P(await this.fetch(n,{headers:t,credentials:"include"}),e,!!this.options.auth)}throw new Error(b)}async function P(e,t,n){var i,a;if(401===(null==e?void 0:e.status)&&!n){const t=await e.json(),n=null==(i=null==t?void 0:t.detail)?void 0:i.auth_message;throw new Error(n||C)}if(401===(null==e?void 0:e.status)&&n)throw new Error(E);if(200===(null==e?void 0:e.status)){let n=await e.json();return n.root=t,null==(a=n.dependencies)||a.forEach(((e,t)=>{void 0===e.id&&(e.id=t)})),n}if(401===(null==e?void 0:e.status))throw new Error(x);throw new Error(b)}async function D(){const{http_protocol:e,host:t}=await R(this.app_reference,this.options.hf_token);try{if(this.options.auth){const n=await z(e,t,this.options.auth,this.fetch,this.options.hf_token);n&&this.set_cookies(n)}}catch(e){throw Error(e.message)}}async function z(e,t,n,i,a){const s=new FormData;s.append("username",null==n?void 0:n[0]),s.append("password",null==n?void 0:n[1]);let o={};a&&(o.Authorization=`Bearer ${a}`);const r=await i(`${e}//${t}/${f}`,{headers:o,method:"POST",body:s,credentials:"include"});if(200===r.status)return r.headers.get("set-cookie");throw 401===r.status?new Error(E):new Error(v)}function I(e){if(e.startsWith("http")){const{protocol:t,host:n,pathname:i}=new URL(e);return{ws_protocol:"https:"===t?"wss":"ws",http_protocol:t,host:n+("/"!==i?i:"")}}return{ws_protocol:"wss",http_protocol:"https:",host:new URL(e).host}}const T=e=>{let t=[];return e.split(/,(?=\s*[^\s=;]+=[^\s=;]+)/).forEach((e=>{const[n,i]=e.split(";")[0].split("=");n&&i&&t.push(`${n.trim()}=${i.trim()}`)})),t},$=/^[a-zA-Z0-9_\-\.]+\/[a-zA-Z0-9_\-\.]+$/,j=/.*hf\.space\/{0,1}.*$/;async function R(e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);const i=e.trim().replace(/\/$/,"");if($.test(i))try{return{space_id:e,...I((await(await fetch(`https://huggingface.co/api/spaces/${i}/${d}`,{headers:n})).json()).host)}}catch{throw new Error(v)}if(j.test(i)){const{ws_protocol:e,http_protocol:t,host:n}=I(i);return{space_id:n.split("/")[0].replace(".hf.space",""),ws_protocol:e,http_protocol:t,host:n}}return{space_id:!1,...I(i)}}const U=(...e)=>{try{return e.reduce(((e,t)=>(e=e.replace(/\/+$/,""),t=t.replace(/^\/+/,""),new URL(t,e+"/").toString())))}catch{throw new Error("Invalid URL. A full URL path is required.")}};function q(e,t,n,i){if("Api"===t)return e.type;switch(null==e?void 0:e.type){case"string":return"string";case"boolean":return"boolean";case"number":return"number"}return"JSONSerializable"===n||"StringSerializable"===n?"any":"ListStringSerializable"===n?"string[]":"Image"===t?"parameter"===i?"Blob | File | Buffer":"string":"FileSerializable"===n?"array"===(null==e?void 0:e.type)?"parameter"===i?"(Blob | File | Buffer)[]":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}[]":"parameter"===i?"Blob | File | Buffer":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}":"GallerySerializable"===n?"parameter"===i?"[(Blob | File | Buffer), (string | null)][]":"[{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}, (string | null))][]":void 0}function B(e,t){return"GallerySerializable"===t?"array of [file, label] tuples":"ListStringSerializable"===t?"array of strings":"FileSerializable"===t?"array of files or single file":null==e?void 0:e.description}function N(e,t){switch(e.msg){case"send_data":return{type:"data"};case"send_hash":return{type:"hash"};case"queue_full":return{type:"update",status:{queue:!0,message:w,stage:"error",code:e.code,success:e.success}};case"heartbeat":return{type:"heartbeat"};case"unexpected_error":return{type:"unexpected_error",status:{queue:!0,message:e.message,session_not_found:e.session_not_found,stage:"error",success:!1}};case"broken_connection":return{type:"broken_connection",status:{queue:!0,message:e.message,stage:"error",success:!1}};case"estimation":return{type:"update",status:{queue:!0,stage:t||"pending",code:e.code,size:e.queue_size,position:e.rank,eta:e.rank_eta,success:e.success}};case"progress":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,progress_data:e.progress_data,success:e.success}};case"log":return{type:"log",data:e};case"process_generating":return{type:"generating",status:{queue:!0,message:e.success?null:e.output.error,stage:e.success?"generating":"error",code:e.code,progress_data:e.progress_data,eta:e.average_duration,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_streaming":return{type:"streaming",status:{queue:!0,message:e.output.error,stage:"streaming",time_limit:e.time_limit,code:e.code,progress_data:e.progress_data,eta:e.eta},data:e.output};case"process_completed":return"error"in e.output?{type:"update",status:{queue:!0,title:e.output.title,message:e.output.error,visible:e.output.visible,duration:e.output.duration,stage:"error",code:e.code,success:e.success}}:{type:"complete",status:{queue:!0,message:e.success?void 0:e.output.error,stage:e.success?"complete":"error",code:e.code,progress_data:e.progress_data,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_starts":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,size:e.rank,position:0,success:e.success,eta:e.eta},original_msg:"process_starts"}}return{type:"none",status:{stage:"error",queue:!0}}}async function L(){if(this.api_info)return this.api_info;const{hf_token:e}=this.options,{config:t}=this,n={"Content-Type":"application/json"};if(e&&(n.Authorization=`Bearer ${e}`),t)try{let e,i;if(typeof window<"u"&&window.gradio_api_info)i=window.gradio_api_info;else{if(u((null==t?void 0:t.version)||"2.0.0","3.30")<0)e=await this.fetch("https://gradio-space-api-fetcher-v2.hf.space/api",{method:"POST",body:JSON.stringify({serialize:!1,config:JSON.stringify(t)}),headers:n,credentials:"include"});else{const i=U(t.root,this.api_prefix,"info");e=await this.fetch(i,{headers:n,credentials:"include"})}if(!e.ok)throw new Error(y);i=await e.json()}return"api"in i&&(i=i.api),i.named_endpoints["/predict"]&&!i.unnamed_endpoints[0]&&(i.unnamed_endpoints[0]=i.named_endpoints["/predict"]),function(e,t,n){const i={named_endpoints:{},unnamed_endpoints:{}};return Object.keys(e).forEach((a=>{("named_endpoints"===a||"unnamed_endpoints"===a)&&(i[a]={},Object.entries(e[a]).forEach((([e,{parameters:s,returns:o}])=>{var r,l,c,u;const d=(null==(r=t.dependencies.find((t=>t.api_name===e||t.api_name===e.replace("/",""))))?void 0:r.id)||n[e.replace("/","")]||-1,p=-1!==d?null==(l=t.dependencies.find((e=>e.id==d)))?void 0:l.types:{generator:!1,cancel:!1};if(-1!==d&&(null==(u=null==(c=t.dependencies.find((e=>e.id==d)))?void 0:c.inputs)?void 0:u.length)!==s.length){const e=t.dependencies.find((e=>e.id==d)).inputs.map((e=>{var n;return null==(n=t.components.find((t=>t.id===e)))?void 0:n.type}));try{e.forEach(((e,t)=>{if("state"===e){const e={component:"state",example:null,parameter_default:null,parameter_has_default:!0,parameter_name:null,hidden:!0};s.splice(t,0,e)}}))}catch(e){}}const h=(e,t,n,i)=>({...e,description:B(null==e?void 0:e.type,n),type:q(null==e?void 0:e.type,t,n,i)||""});i[a][e]={parameters:s.map((e=>h(e,null==e?void 0:e.component,null==e?void 0:e.serializer,"parameter"))),returns:o.map((e=>h(e,null==e?void 0:e.component,null==e?void 0:e.serializer,"return"))),type:p}})))})),i}(i,t,this.api_map)}catch(e){throw new Error("Could not get API info. "+e.message)}}async function F(e,t,n){var i;const a={};null!=(i=null==this?void 0:this.options)&&i.hf_token&&(a.Authorization=`Bearer ${this.options.hf_token}`);const s=[];let o;for(let i=0;i<t.length;i+=1e3){const r=t.slice(i,i+1e3),l=new FormData;r.forEach((e=>{l.append("files",e)}));try{const t=n?`${e}${this.api_prefix}/${h}?upload_id=${n}`:`${e}${this.api_prefix}/${h}`;o=await this.fetch(t,{method:"POST",body:l,headers:a,credentials:"include"})}catch(e){throw new Error(y+e.message)}if(!o.ok){const e=await o.text();return{error:`HTTP ${o.status}: ${e}`}}const c=await o.json();c&&s.push(...c)}return{files:s}}async function M(e,t,n,i){let a=(Array.isArray(e)?e:[e]).map((e=>e.blob));const s=a.filter((e=>e.size>(i??1/0)));if(s.length)throw new Error(`File size exceeds the maximum allowed size of ${i} bytes: ${s.map((e=>e.name)).join(", ")}`);return await Promise.all(await this.upload_files(t,a,n).then((async n=>{if(n.error)throw new Error(n.error);return n.files?n.files.map(((n,i)=>new W({...e[i],path:n,url:`${t}${this.api_prefix}/file=${n}`}))):[]})))}class W{constructor({path:e,url:t,orig_name:n,size:i,blob:a,is_stream:s,mime_type:r,alt_text:l,b64:c}){o(this,"path"),o(this,"url"),o(this,"orig_name"),o(this,"size"),o(this,"blob"),o(this,"is_stream"),o(this,"mime_type"),o(this,"alt_text"),o(this,"b64"),o(this,"meta",{_type:"gradio.FileData"}),this.path=e,this.url=t,this.orig_name=n,this.size=i,this.blob=t?void 0:a,this.is_stream=s,this.mime_type=r,this.alt_text=l,this.b64=c}}class V{constructor(e,t){o(this,"type"),o(this,"command"),o(this,"meta"),o(this,"fileData"),this.type="command",this.command=e,this.meta=t}}typeof i<"u"&&i.versions&&i.versions.node;function K(e,t,n){for(;n.length>1;){const t=n.shift();if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid key type");e=e[t]}const i=n.shift();if("string"!=typeof i&&"number"!=typeof i)throw new Error("Invalid key type");e[i]=t}async function H(e,t=void 0,n=[],i=!1,a=void 0){if(Array.isArray(e)){let s=[];return await Promise.all(e.map((async(o,r)=>{var l;let c=n.slice();c.push(String(r));const u=await H(e[r],i?(null==(l=null==a?void 0:a.parameters[r])?void 0:l.component)||void 0:t,c,!1,a);s=s.concat(u)}))),s}if(globalThis.Buffer&&e instanceof globalThis.Buffer||e instanceof Blob)return[{path:n,blob:new Blob([e]),type:t}];if("object"==typeof e&&null!==e){let t=[];for(const i of Object.keys(e)){const s=[...n,i],o=e[i];t=t.concat(await H(o,void 0,s,!1,a))}return t}return[]}function J(e,t,n,i,a=!1){if("input"===i&&!a)throw new Error("Invalid code path. Cannot skip state inputs for input.");if("output"===i&&a)return e;let s=[],o=0;const r="input"===i?t.inputs:t.outputs;for(let t=0;t<r.length;t++){const i=r[t],l=n.find((e=>e.id===i));if("state"!==(null==l?void 0:l.type)){const t=e[o];s.push(t),o++}else{if(!a){o++;continue}if(e.length===r.length){const t=e[o];s.push(t),o++}else s.push(null)}}return s}async function X(e,t,n){const i=this;await async function(e,t){var n,i;if(!(null==(n=e.config)?void 0:n.root)&&!(null==(i=e.config)?void 0:i.root_url))throw new Error(A);await G(e,t)}(i,t);const a=await H(t,void 0,[],!0,n);return(await Promise.all(a.map((async({path:t,blob:n,type:a})=>{if(!n)return{path:t,type:a};const s=await i.upload_files(e,[n]);return{path:t,file_url:s.files&&s.files[0],type:a,name:typeof File<"u"&&n instanceof File?null==n?void 0:n.name:void 0}})))).forEach((({path:e,file_url:n,type:i,name:a})=>{if("Gallery"===i)K(t,n,e);else if(n){const i=new W({path:n,orig_name:a});K(t,i,e)}})),t}async function G(e,t,n=[]){for(const i in t)t[i]instanceof V?await Z(e,t,i):"object"==typeof t[i]&&null!==t[i]&&await G(e,t[i],[...n,i])}async function Z(e,t,a){var s,o;let r=t[a];const l=(null==(s=e.config)?void 0:s.root)||(null==(o=e.config)?void 0:o.root_url);if(!l)throw new Error(A);try{let s,o;if(!(typeof i<"u"&&i.versions&&i.versions.node))throw new Error(S);{const e=await n.e("node_modules_gradio_client_dist___vite-browser-external-DYxpcVy9_js").then(n.bind(n,57365));o=(await n.e("node_modules_gradio_client_dist___vite-browser-external-DYxpcVy9_js").then(n.bind(n,57365))).resolve(i.cwd(),r.meta.path),s=await e.readFile(o)}const c=new Blob([s],{type:"application/octet-stream"}),u=await e.upload_files(l,[c]),d=u.files&&u.files[0];if(d){const e=new W({path:d,orig_name:r.meta.name||""});t[a]=e}}catch(e){}}async function Y(e,t,n){const i={"Content-Type":"application/json"};this.options.hf_token&&(i.Authorization=`Bearer ${this.options.hf_token}`);try{var a=await this.fetch(e,{method:"POST",body:JSON.stringify(t),headers:{...i,...n},credentials:"include"})}catch{return[{error:y},500]}let s,o;try{s=await a.json(),o=a.status}catch(e){s={error:`Could not parse server response: ${e}`},o=500}return[s,o]}async function Q(e,t={}){let n=!1,i=!1;if(!this.config)throw new Error("Could not resolve app config");if("number"==typeof e)this.config.dependencies.find((t=>t.id==e));else{const t=e.replace(/^\//,"");this.config.dependencies.find((e=>e.id==this.api_map[t]))}return new Promise((async(a,s)=>{const o=this.submit(e,t,null,null,!0);let r;for await(const e of o)"data"===e.type&&(i&&a(r),n=!0,r=e),"status"===e.type&&("error"===e.stage&&s(e),"complete"===e.stage&&(i=!0,n&&a(r)))}))}async function ee(e,t,n){let i,a,s="subdomain"===t?`https://huggingface.co/api/spaces/by-subdomain/${e}`:`https://huggingface.co/api/spaces/${e}`;try{if(i=await fetch(s),a=i.status,200!==a)throw new Error;i=await i.json()}catch{return void n({status:"error",load_status:"error",message:"Could not get space status. ",detail:"NOT_FOUND"})}if(!i||200!==a)return;const{runtime:{stage:o},id:r}=i;switch(o){case"STOPPED":case"SLEEPING":n({status:"sleeping",load_status:"pending",message:"Space is asleep. Waking it up...",detail:o}),setTimeout((()=>{ee(e,t,n)}),1e3);break;case"PAUSED":n({status:"paused",load_status:"error",message:"This space has been paused by the author. If you would like to try this demo, consider duplicating the space.",detail:o,discussions_enabled:await ie(r)});break;case"RUNNING":case"RUNNING_BUILDING":n({status:"running",load_status:"complete",message:"Space is running.",detail:o});break;case"BUILDING":n({status:"building",load_status:"pending",message:"Space is building...",detail:o}),setTimeout((()=>{ee(e,t,n)}),1e3);break;case"APP_STARTING":n({status:"starting",load_status:"pending",message:"Space is starting...",detail:o}),setTimeout((()=>{ee(e,t,n)}),1e3);break;default:n({status:"space_error",load_status:"error",message:"This space is experiencing an issue.",detail:o,discussions_enabled:await ie(r)})}}const te=async(e,t)=>{let n=0;return new Promise((i=>{ee(e,$.test(e)?"space_name":"subdomain",(a=>{t(a),"running"===a.status||"error"===a.status||"paused"===a.status||"space_error"===a.status?i():("sleeping"===a.status||"building"===a.status)&&(n<12?(n++,setTimeout((()=>{te(e,t).then(i)}),5e3)):i())}))}))},ne=/^(?=[^]*\b[dD]iscussions{0,1}\b)(?=[^]*\b[dD]isabled\b)[^]*$/;async function ie(e){try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/discussions`,{method:"HEAD"}),n=t.headers.get("x-error-message");return!(!t.ok||n&&ne.test(n))}catch{return!1}}const ae=["cpu-basic","cpu-upgrade","cpu-xl","t4-small","t4-medium","a10g-small","a10g-large","a10g-largex2","a10g-largex4","a100-large","zero-a10g","h100","h100x8"];async function se(e,t){const{hf_token:n,private:i,hardware:a,timeout:s,auth:o}=t;if(a&&!ae.includes(a))throw new Error(`Invalid hardware type provided. Valid types are: ${ae.map((e=>`"${e}"`)).join(",")}.`);const{http_protocol:r,host:l}=await R(e,n);let c=null;if(o){const e=await z(r,l,o,fetch);e&&(c=T(e))}const u={Authorization:`Bearer ${n}`,"Content-Type":"application/json",...c?{Cookie:c.join("; ")}:{}},d=(await(await fetch("https://huggingface.co/api/whoami-v2",{headers:u})).json()).name,p=e.split("/")[1],h={repository:`${d}/${p}`};let f;i&&(h.private=!0);try{a||(f=await async function(e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/${m}`,{headers:n});if(200!==t.status)throw new Error("Space hardware could not be obtained.");const{hardware:i}=await t.json();return i.current}catch(e){throw new Error(e.message)}}(e,n))}catch(e){throw Error(v+e.message)}const _=a||f||"cpu-basic";h.hardware=_;try{const i=await fetch(`https://huggingface.co/api/spaces/${e}/duplicate`,{method:"POST",headers:u,body:JSON.stringify(h)});if(409===i.status)try{return await me.connect(`${d}/${p}`,t)}catch(e){throw e}else if(200!==i.status)throw new Error(i.statusText);const a=await i.json();return await async function(e,t,n){const i={};n&&(i.Authorization=`Bearer ${n}`);const a={seconds:t};try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/${g}`,{method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify(a)});if(200!==t.status)throw new Error("Could not set sleep timeout on duplicated Space. Please visit *ADD HF LINK TO SETTINGS* to set a timeout manually to reduce billing charges.");return await t.json()}catch(e){throw new Error(e.message)}}(`${d}/${p}`,s||300,n),await me.connect(function(e){const t=/https:\/\/huggingface.co\/spaces\/([^/]+\/[^/]+)/,n=e.match(t);if(n)return n[1]}(a.url),t)}catch(e){throw new Error(e)}}var oe;class re extends TransformStream{constructor(e={allowCR:!1}){super({transform:(t,n)=>{for(t=l(this,oe)+t;;){const i=t.indexOf("\n"),a=e.allowCR?t.indexOf("\r"):-1;if(-1!==a&&a!==t.length-1&&(-1===i||i-1>a)){n.enqueue(t.slice(0,a)),t=t.slice(a+1);continue}if(-1===i)break;const s="\r"===t[i-1]?i-1:i;n.enqueue(t.slice(0,s)),t=t.slice(i+1)}((e,t,n,i)=>{r(e,t,"write to private field"),i?i.call(e,n):t.set(e,n)})(this,oe,t)},flush:t=>{if(""===l(this,oe))return;const n=e.allowCR&&l(this,oe).endsWith("\r")?l(this,oe).slice(0,-1):l(this,oe);t.enqueue(n)}}),((e,t,n)=>{t.has(e)?s("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n)})(this,oe,"")}}function le(e){let t=/[:]\s*/.exec(e),n=t&&t.index;if(n)return[e.substring(0,n),e.substring(n+t[0].length)]}function ce(e,t,n){e.get(t)||e.set(t,n)}async function*ue(e,t){if(!e.body)return;let n,i,a=function(e){let t=new TextDecoderStream,n=new re({allowCR:!0});return e.pipeThrough(t).pipeThrough(n)}(e.body),s=a.getReader();for(;;){if(t&&t.aborted)return s.cancel();if(n=await s.read(),n.done)return;if(!n.value){i&&(yield i),i=void 0;continue}let[e,a]=le(n.value)||[];e&&("data"===e?(i||(i={}),i[e]=i[e]?i[e]+"\n"+a:a):"event"===e?(i||(i={}),i[e]=a):"id"===e?(i||(i={}),i[e]=+a||a):"retry"===e&&(i||(i={}),i[e]=+a||void 0))}}async function de(){let{event_callbacks:e,unclosed_events:t,pending_stream_messages:n,stream_status:i,config:a,jwt:s}=this;const o=this;if(!a)throw new Error("Could not resolve app config");i.open=!0;let r=null,l=new URLSearchParams({session_hash:this.session_hash}).toString(),c=new URL(`${a.root}${this.api_prefix}/${p}?${l}`);s&&c.searchParams.set("__sign",s),r=this.stream(c),r&&(r.onmessage=async function(s){let r=JSON.parse(s.data);if("close_stream"===r.msg)return void pe(i,o.abort_controller);const l=r.event_id;if(l)if(e[l]&&a){"process_completed"===r.msg&&["sse","sse_v1","sse_v2","sse_v2.1","sse_v3"].includes(a.protocol)&&t.delete(l);let n=e[l];typeof window<"u"&&typeof document<"u"?setTimeout(n,0,r):n(r)}else n[l]||(n[l]=[]),n[l].push(r);else await Promise.all(Object.keys(e).map((t=>e[t](r))))},r.onerror=async function(t){await Promise.all(Object.keys(e).map((t=>e[t]({msg:"broken_connection",message:y}))))})}function pe(e,t){e&&(e.open=!1,null==t||t.abort())}function he(e,t,n){e[t]?n.data.forEach(((i,a)=>{let s=function(e,t){return t.forEach((([t,n,i])=>{e=function(e,t,n,i){if(0===t.length){if("replace"===n)return i;if("append"===n)return e+i;throw new Error(`Unsupported action: ${n}`)}let a=e;for(let e=0;e<t.length-1;e++)a=a[t[e]];const s=t[t.length-1];switch(n){case"replace":a[s]=i;break;case"append":a[s]+=i;break;case"add":Array.isArray(a)?a.splice(Number(s),0,i):a[s]=i;break;case"delete":Array.isArray(a)?a.splice(Number(s),1):delete a[s];break;default:throw new Error(`Unknown action: ${n}`)}return e}(e,n,t,i)})),e}(e[t][a],i);e[t][a]=s,n.data[a]=s})):(e[t]=[],n.data.forEach(((n,i)=>{e[t][i]=n})))}function fe(e,t={}){const n={close:()=>{},onerror:null,onmessage:null,onopen:null,readyState:0,url:e.toString(),withCredentials:!1,CONNECTING:0,OPEN:1,CLOSED:2,addEventListener:()=>{throw new Error("Method not implemented.")},dispatchEvent:()=>{throw new Error("Method not implemented.")},removeEventListener:()=>{throw new Error("Method not implemented.")}};return async function(e,t){let n=new Request(e,t);ce(n.headers,"Accept","text/event-stream"),ce(n.headers,"Content-Type","application/json");let i=await fetch(n);if(!i.ok)throw i;return ue(i,n.signal)}(e,t).then((async e=>{n.readyState=n.OPEN;try{for await(const t of e)n.onmessage&&n.onmessage(t);n.readyState=n.CLOSED}catch(e){n.onerror&&n.onerror(e),n.readyState=n.CLOSED}})).catch((e=>{n.onerror&&n.onerror(e),n.readyState=n.CLOSED})),n}function _e(e,t={},n,i,a){var s;try{let o=function(e){(a||G[e.type])&&d(e)},r=function(){for(ee=!0;ne.length>0;)ne.shift()({value:void 0,done:!0})},l=function(e){ne.length>0?ne.shift()(e):te.push(e)},c=function(e){l(function(e){return{then:(t,n)=>n(e)}}(e)),r()},d=function(e){l({value:e,done:!1})},h=function(){return te.length>0?Promise.resolve(te.shift()):new Promise((e=>ne.push(e)))};const{hf_token:f}=this.options,{fetch:_,app_reference:m,config:g,session_hash:b,api_info:v,api_map:x,stream_status:E,pending_stream_messages:C,pending_diff_streams:S,event_callbacks:A,unclosed_events:k,post_data:O,options:P,api_prefix:D}=this,z=this;if(!v)throw new Error("No API found");if(!g)throw new Error("Could not resolve app config");let I,T,{fn_index:$,endpoint_info:j,dependency:U}=function(e,t,n,i){let a,s,o;if("number"==typeof t)a=t,s=e.unnamed_endpoints[a],o=i.dependencies.find((e=>e.id==t));else{const r=t.replace(/^\//,"");a=n[r],s=e.named_endpoints[t.trim()],o=i.dependencies.find((e=>e.id==n[r]))}if("number"!=typeof a)throw new Error("There is no endpoint matching that name of fn_index matching that number.");return{fn_index:a,endpoint_info:s,dependency:o}}(v,e,x,g),q=((e=[],t)=>{const n=t?t.parameters:[];if(Array.isArray(e))return t&&n.length>0&&(e.length,n.length),e;const i=[],a=Object.keys(e);return n.forEach(((t,n)=>{if(e.hasOwnProperty(t.parameter_name))i[n]=e[t.parameter_name];else{if(!t.parameter_has_default)throw new Error(`No value provided for required parameter: ${t.parameter_name}`);i[n]=t.parameter_default}})),a.forEach((e=>{if(!n.some((t=>t.parameter_name===e)))throw new Error(`Parameter \`${e}\` is not a valid keyword argument. Please refer to the API for usage.`)})),i.forEach(((e,t)=>{if(void 0===e&&!n[t].parameter_has_default)throw new Error(`No value provided for required parameter: ${n[t].parameter_name}`)})),i})(t,j),B=g.protocol??"ws",L="",F=()=>L;const M="number"==typeof e?"/predict":e;let W,V=null,K=!1,H={},X=typeof window<"u"&&typeof document<"u"?new URLSearchParams(window.location.search).toString():"";const G=(null==(s=null==P?void 0:P.events)?void 0:s.reduce(((e,t)=>(e[t]=!0,e)),{}))||{};async function Z(){let e={},t={};"ws"===B?(I&&0===I.readyState?I.addEventListener("open",(()=>{I.close()})):I.close(),e={fn_index:$,session_hash:b}):(e={event_id:V},t={event_id:V,session_hash:b,fn_index:$});try{if(!g)throw new Error("Could not resolve app config");"event_id"in t&&await _(`${g.root}${D}/cancel`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}),await _(`${g.root}${D}/reset`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)})}catch{}}const Y=async e=>{await this._resolve_heartbeat(e)};async function Q(e){if(!g)return;let t=e.render_id;g.components=[...g.components.filter((e=>e.props.rendered_in!==t)),...e.components],g.dependencies=[...g.dependencies.filter((e=>e.rendered_in!==t)),...e.dependencies];const n=g.components.some((e=>"state"===e.type)),i=g.dependencies.some((e=>e.targets.some((e=>"unload"===e[1]))));g.connect_heartbeat=n||i,await Y(g),o({type:"render",data:e,endpoint:M,fn_index:$})}this.handle_blob(g.root,q,j).then((async e=>{var t;if(W={data:J(e,U,g.components,"input",!0)||[],event_data:n,fn_index:$,trigger_id:i},function(e,t){var n,i;let a=null==(i=null==(n=null==t?void 0:t.dependencies)?void 0:n.find((t=>t.id==e)))?void 0:i.queue;return null!=a?!a:!t.enable_queue}($,g))o({type:"status",endpoint:M,stage:"pending",queue:!1,fn_index:$,time:new Date}),O(`${g.root}${D}/run${M.startsWith("/")?M:`/${M}`}${X?"?"+X:""}`,{...W,session_hash:b}).then((([e,t])=>{const a=e.data;200==t?(o({type:"data",endpoint:M,fn_index:$,data:J(a,U,g.components,"output",P.with_null_state),time:new Date,event_data:n,trigger_id:i}),e.render_config&&Q(e.render_config),o({type:"status",endpoint:M,fn_index:$,stage:"complete",eta:e.average_duration,queue:!1,time:new Date})):o({type:"status",stage:"error",endpoint:M,fn_index:$,message:e.error,queue:!1,time:new Date})})).catch((e=>{o({type:"status",stage:"error",message:e.message,endpoint:M,fn_index:$,queue:!1,time:new Date})}));else if("ws"==B){const{ws_protocol:e,host:t}=await R(m,f);o({type:"status",stage:"pending",queue:!0,endpoint:M,fn_index:$,time:new Date});let a=new URL(`${e}://${function(e,t,n){return t.startsWith("http://")||t.startsWith("https://")?n?e:t:e+t}(t,g.root,!0)}/queue/join${X?"?"+X:""}`);this.jwt&&a.searchParams.set("__sign",this.jwt),I=new WebSocket(a),I.onclose=e=>{e.wasClean||o({type:"status",stage:"error",broken:!0,message:y,queue:!0,endpoint:M,fn_index:$,time:new Date})},I.onmessage=function(e){const t=JSON.parse(e.data),{type:a,status:s,data:r}=N(t,H[$]);if("update"===a&&s&&!K)o({type:"status",endpoint:M,fn_index:$,time:new Date,...s}),"error"===s.stage&&I.close();else{if("hash"===a)return void I.send(JSON.stringify({fn_index:$,session_hash:b}));"data"===a?I.send(JSON.stringify({...W,session_hash:b})):"complete"===a?K=s:"log"===a?o({type:"log",title:r.title,log:r.log,level:r.level,endpoint:M,duration:r.duration,visible:r.visible,fn_index:$}):"generating"===a&&o({type:"status",time:new Date,...s,stage:null==s?void 0:s.stage,queue:!0,endpoint:M,fn_index:$})}r&&(o({type:"data",time:new Date,data:J(r.data,U,g.components,"output",P.with_null_state),endpoint:M,fn_index:$,event_data:n,trigger_id:i}),K&&(o({type:"status",time:new Date,...K,stage:null==s?void 0:s.stage,queue:!0,endpoint:M,fn_index:$}),I.close()))},u(g.version||"2.0.0","3.6")<0&&addEventListener("open",(()=>I.send(JSON.stringify({hash:b}))))}else if("sse"==B){o({type:"status",stage:"pending",queue:!0,endpoint:M,fn_index:$,time:new Date});var a=new URLSearchParams({fn_index:$.toString(),session_hash:b}).toString();let e=new URL(`${g.root}${D}/${p}?${X?X+"&":""}${a}`);if(this.jwt&&e.searchParams.set("__sign",this.jwt),T=this.stream(e),!T)return Promise.reject(new Error("Cannot connect to SSE endpoint: "+e.toString()));T.onmessage=async function(e){const t=JSON.parse(e.data),{type:a,status:s,data:l}=N(t,H[$]);if("update"===a&&s&&!K)o({type:"status",endpoint:M,fn_index:$,time:new Date,...s}),"error"===s.stage&&(null==T||T.close(),r());else if("data"===a){let[e,t]=await O(`${g.root}${D}/queue/data`,{...W,session_hash:b,event_id:V});200!==t&&(o({type:"status",stage:"error",message:y,queue:!0,endpoint:M,fn_index:$,time:new Date}),null==T||T.close(),r())}else"complete"===a?K=s:"log"===a?o({type:"log",title:l.title,log:l.log,level:l.level,endpoint:M,duration:l.duration,visible:l.visible,fn_index:$}):("generating"===a||"streaming"===a)&&o({type:"status",time:new Date,...s,stage:null==s?void 0:s.stage,queue:!0,endpoint:M,fn_index:$});l&&(o({type:"data",time:new Date,data:J(l.data,U,g.components,"output",P.with_null_state),endpoint:M,fn_index:$,event_data:n,trigger_id:i}),K&&(o({type:"status",time:new Date,...K,stage:null==s?void 0:s.stage,queue:!0,endpoint:M,fn_index:$}),null==T||T.close(),r()))}}else if("sse_v1"==B||"sse_v2"==B||"sse_v2.1"==B||"sse_v3"==B){o({type:"status",stage:"pending",queue:!0,endpoint:M,fn_index:$,time:new Date});let e="";typeof window<"u"&&typeof document<"u"&&(e=null==(t=null==window?void 0:window.location)?void 0:t.hostname);const n=e.includes(".dev.")?`https://moon-${e.split(".")[1]}.dev.spaces.huggingface.tech`:"https://huggingface.co";(typeof window<"u"&&typeof document<"u"&&window.parent!=window&&window.supports_zerogpu_headers?function(e,t){return new Promise(((n,i)=>{const a=new MessageChannel;a.port1.onmessage=({data:e})=>{a.port1.close(),n(e)},window.parent.postMessage(e,t,[a.port2])}))}("zerogpu-headers",n):Promise.resolve(null)).then((e=>O(`${g.root}${D}/queue/join?${X}`,{...W,session_hash:b},e))).then((async([e,t])=>{if(503===t)o({type:"status",stage:"error",message:w,queue:!0,endpoint:M,fn_index:$,time:new Date});else if(422===t)o({type:"status",stage:"error",message:e.detail,queue:!0,endpoint:M,fn_index:$,code:"validation_error",time:new Date}),r();else if(200!==t)o({type:"status",stage:"error",broken:!1,message:e.detail,queue:!0,endpoint:M,fn_index:$,time:new Date});else{V=e.event_id,L=V;let t=async function(e){try{const{type:t,status:n,data:i,original_msg:a}=N(e,H[$]);if("heartbeat"==t)return;if("update"===t&&n&&!K)o({type:"status",endpoint:M,fn_index:$,time:new Date,original_msg:a,...n});else if("complete"===t)K=n;else if("unexpected_error"==t||"broken_connection"==t){const e="broken_connection"===t;o({type:"status",stage:"error",message:(null==n?void 0:n.message)||"An Unexpected Error Occurred!",queue:!0,endpoint:M,broken:e,session_not_found:null==n?void 0:n.session_not_found,fn_index:$,time:new Date})}else{if("log"===t)return void o({type:"log",title:i.title,log:i.log,level:i.level,endpoint:M,duration:i.duration,visible:i.visible,fn_index:$});("generating"===t||"streaming"===t)&&(o({type:"status",time:new Date,...n,stage:null==n?void 0:n.stage,queue:!0,endpoint:M,fn_index:$}),i&&"stream"!==U.connection&&["sse_v2","sse_v2.1","sse_v3"].includes(B)&&he(S,V,i))}i&&(o({type:"data",time:new Date,data:J(i.data,U,g.components,"output",P.with_null_state),endpoint:M,fn_index:$}),i.render_config&&await Q(i.render_config),K&&(o({type:"status",time:new Date,...K,stage:null==n?void 0:n.stage,queue:!0,endpoint:M,fn_index:$}),r())),("complete"===(null==n?void 0:n.stage)||"error"===(null==n?void 0:n.stage))&&(A[V]&&delete A[V],V in S&&delete S[V])}catch(e){o({type:"status",stage:"error",message:"An Unexpected Error Occurred!",queue:!0,endpoint:M,fn_index:$,time:new Date}),["sse_v2","sse_v2.1","sse_v3"].includes(B)&&(pe(E,z.abort_controller),E.open=!1,r())}};V in C&&(C[V].forEach((e=>t(e))),delete C[V]),A[V]=t,k.add(V),E.open||await this.open_stream()}}))}}));let ee=!1;const te=[],ne=[],ie={[Symbol.asyncIterator]:()=>ie,next:h,throw:async e=>(c(e),h()),return:async()=>(r(),h()),cancel:Z,event_id:F};return ie}catch(ae){throw ae}}oe=new WeakMap;class me{constructor(e,t={events:["data"]}){var n;o(this,"app_reference"),o(this,"options"),o(this,"deep_link",null),o(this,"config"),o(this,"api_prefix",""),o(this,"api_info"),o(this,"api_map",{}),o(this,"session_hash",Math.random().toString(36).substring(2)),o(this,"jwt",!1),o(this,"last_status",{}),o(this,"cookies",null),o(this,"stream_status",{open:!1}),o(this,"closed",!1),o(this,"pending_stream_messages",{}),o(this,"pending_diff_streams",{}),o(this,"event_callbacks",{}),o(this,"unclosed_events",new Set),o(this,"heartbeat_event",null),o(this,"abort_controller",null),o(this,"stream_instance",null),o(this,"current_payload"),o(this,"ws_map",{}),o(this,"view_api"),o(this,"upload_files"),o(this,"upload"),o(this,"handle_blob"),o(this,"post_data"),o(this,"submit"),o(this,"predict"),o(this,"open_stream"),o(this,"resolve_config"),o(this,"resolve_cookies"),this.app_reference=e,this.deep_link=(null==(n=t.query_params)?void 0:n.deep_link)||null,t.events||(t.events=["data"]),this.options=t,this.current_payload={},this.view_api=L.bind(this),this.upload_files=F.bind(this),this.handle_blob=X.bind(this),this.post_data=Y.bind(this),this.submit=_e.bind(this),this.predict=Q.bind(this),this.open_stream=de.bind(this),this.resolve_config=O.bind(this),this.resolve_cookies=D.bind(this),this.upload=M.bind(this),this.fetch=this.fetch.bind(this),this.handle_space_success=this.handle_space_success.bind(this),this.stream=this.stream.bind(this)}get_url_config(e=null){if(!this.config)throw new Error(b);null===e&&(e=window.location.href);const t=e=>e.replace(/^\/+|\/+$/g,"");let n,i=t(new URL(this.config.root).pathname),a=t(new URL(e).pathname);return n=a.startsWith(i)?t(a.substring(i.length)):"",this.get_page_config(n)}get_page_config(e){if(!this.config)throw new Error(b);let t=this.config;return e in t.page||(e=""),{...t,current_page:e,layout:t.page[e].layout,components:t.components.filter((n=>t.page[e].components.includes(n.id))),dependencies:this.config.dependencies.filter((n=>t.page[e].dependencies.includes(n.id)))}}fetch(e,t){const n=new Headers((null==t?void 0:t.headers)||{});if(this&&this.cookies&&n.append("Cookie",this.cookies),this&&this.options.headers)for(const e in this.options.headers)n.append(e,this.options.headers[e]);return fetch(e,{...t,headers:n})}stream(e){const t=new Headers;if(this&&this.cookies&&t.append("Cookie",this.cookies),this&&this.options.headers)for(const e in this.options.headers)t.append(e,this.options.headers[e]);return this&&this.options.hf_token&&t.append("Authorization",`Bearer ${this.options.hf_token}`),this.abort_controller=new AbortController,this.stream_instance=fe(e.toString(),{credentials:"include",headers:t,signal:this.abort_controller.signal}),this.stream_instance}async init(){var e;this.options.auth&&await this.resolve_cookies(),await this._resolve_config().then((({config:e})=>this._resolve_heartbeat(e))),this.api_info=await this.view_api(),this.api_map=function(e){let t={};return e.forEach((({api_name:e,id:n})=>{e&&(t[e]=n)})),t}((null==(e=this.config)?void 0:e.dependencies)||[])}async _resolve_heartbeat(e){if(e&&(this.config=e,this.api_prefix=e.api_prefix||"",this.config&&this.config.connect_heartbeat&&this.config.space_id&&this.options.hf_token&&(this.jwt=await k(this.config.space_id,this.options.hf_token,this.cookies))),e.space_id&&this.options.hf_token&&(this.jwt=await k(e.space_id,this.options.hf_token)),this.config&&this.config.connect_heartbeat){const e=new URL(`${this.config.root}${this.api_prefix}/heartbeat/${this.session_hash}`);this.jwt&&e.searchParams.set("__sign",this.jwt),this.heartbeat_event||(this.heartbeat_event=this.stream(e))}}static async connect(e,t={events:["data"]}){const n=new this(e,t);return t.session_hash&&(n.session_hash=t.session_hash),await n.init(),n}async reconnect(){const e=new URL(`${this.config.root}${this.api_prefix}/app_id`);let t;try{const n=await this.fetch(e);if(!n.ok)throw new Error;t=(await n.json()).app_id}catch{return"broken"}return t!==this.config.app_id?"changed":"connected"}close(){this.closed=!0,pe(this.stream_status,this.abort_controller)}set_current_payload(e){this.current_payload=e}static async duplicate(e,t={events:["data"]}){return se(e,t)}async _resolve_config(){const{http_protocol:e,host:t,space_id:n}=await R(this.app_reference,this.options.hf_token),{status_callback:i}=this.options;let a;n&&i&&await te(n,i);try{let n=`${e}//${t}`;if(a=await this.resolve_config(n),!a)throw new Error(b);return this.config_success(a)}catch(e){if(!n||!i)throw i&&i({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),Error(e);ee(n,$.test(n)?"space_name":"subdomain",this.handle_space_success)}}async config_success(e){if(this.config=e,this.api_prefix=e.api_prefix||"",this.config.auth_required)return this.prepare_return_obj();try{this.api_info=await this.view_api()}catch(e){}return this.prepare_return_obj()}async handle_space_success(e){var t;if(!this)throw new Error(b);const{status_callback:n}=this.options;if(n&&n(e),"running"===e.status)try{if(this.config=await this._resolve_config(),this.api_prefix=(null==(t=null==this?void 0:this.config)?void 0:t.api_prefix)||"",!this.config)throw new Error(b);return await this.config_success(this.config)}catch(e){throw n&&n({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),e}}async component_server(e,t,n){var i;if(!this.config)throw new Error(b);const a={},{hf_token:s}=this.options,{session_hash:o}=this;s&&(a.Authorization=`Bearer ${this.options.hf_token}`);let r,l,c=this.config.components.find((t=>t.id===e));if(r=null!=(i=null==c?void 0:c.props)&&i.root_url?c.props.root_url:this.config.root,"binary"in n){l=new FormData;for(const e in n.data)"binary"!==e&&l.append(e,n.data[e]);l.set("component_id",e.toString()),l.set("fn_name",t),l.set("session_hash",o)}else l=JSON.stringify({data:n,component_id:e,fn_name:t,session_hash:o}),a["Content-Type"]="application/json";s&&(a.Authorization=`Bearer ${s}`);try{const e=await this.fetch(`${r}${this.api_prefix}/component_server/`,{method:"POST",body:l,headers:a,credentials:"include"});if(!e.ok)throw new Error("Could not connect to component server: "+e.statusText);return await e.json()}catch(e){}}set_cookies(e){this.cookies=T(e).join("; ")}prepare_return_obj(){return{config:this.config,predict:this.predict,submit:this.submit,view_api:this.view_api,component_server:this.component_server}}async connect_ws(e){return new Promise(((t,n)=>{let i;try{i=new WebSocket(e)}catch{return void(this.ws_map[e]="failed")}this.ws_map[e]="pending",i.onopen=()=>{this.ws_map[e]=i,t()},i.onerror=n=>{this.close_ws(e),this.ws_map[e]="failed",t()},i.onclose=()=>{this.ws_map[e]="closed"},i.onmessage=e=>{}}))}async send_ws_message(e,t){if(e in this.ws_map){if("pending"===this.ws_map[e]||"closed"===this.ws_map[e]||"failed"===this.ws_map[e])return}else await this.connect_ws(e);const n=this.ws_map[e];n instanceof WebSocket?n.send(JSON.stringify(t)):this.post_data(e,t)}async close_ws(e){if(e in this.ws_map){const t=this.ws_map[e];t instanceof WebSocket&&(t.close(),delete this.ws_map[e])}}}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const be={prompt:" ",negative_prompt:" ",steps:10,guidance_scale:1.5,depth_control_scale:.8,identity_control_scale:.9,lora_scale:1.2,identity_preservation:1.3,strength:.6,enable_color_matching:!0},ve={prompt:" ",negative_prompt:" ",steps:12,guidance_scale:1.4,controlnet_scale:.7,lora_scale:1.1,identity_preservation:.95,strength:.6},xe=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};return new Promise((async function(i,a){t("AI CONVERT"),n("COMPUTE",Date.now(),Date.now()+12e3);try{(await me.connect("primerz/pixagram")).predict("/process_image",we({image:e},be)).then((async e=>{i(await(await fetch(e.data[0].url)).blob())})).catch((e=>{a(e.message)}))}catch(e){a("Please Try Again Later")}})).catch((async function(i,a){t("AI CONVERT"),n("COMPUTE",Date.now(),Date.now()+12e3);try{(await me.connect("primerz/pixagram-stable")).predict("/process_image",we({image:e},ve)).then((async e=>{i(await(await fetch(e.data[0].url)).blob())})).catch((e=>{a(e.message)}))}catch(e){a("Please Try Again Later")}}))}},34274:(e,t,n)=>{"use strict";n.a(e,(async(e,i)=>{try{n.d(t,{E:()=>u,z:()=>d});n(54743),n(11745),n(22134),n(61740),n(75044),n(28845),n(373);var a=n(10544),s=n(2232);function o(e){const{width:t,height:n,data:i}=e,a=new Uint32Array(i.buffer);function s(e,t,n,i){return n[t*i+e|0]}function o(e,t,n,i,a){i[t*a+e|0]=n>>>0}let r=0,l={},c=new Uint32Array(8),u=0;for(let e=1;e<n-1;e=e+1|0)for(let n=1;n<t-1;n=n+1|0){l={},r=s(n,e,a,t),c[0]=s(n-1,e-1,a,t),c[1]=s(n,e-1,a,t),c[2]=s(n+1,e-1,a,t),c[3]=s(n-1,e,a,t),c[4]=s(n+1,e,a,t),c[5]=s(n-1,e+1,a,t),c[6]=s(n,e+1,a,t),c[7]=s(n+1,e+1,a,t);for(var d=0;d<8;d++)u=c[d],l[u]=(l[u]||0)+1,d>=5&&l[u]>=6&&o(n,e,u,a,t)}const p=new Uint8ClampedArray(a.buffer);return new ImageData(p,t,n)}function r(e,t,n){const i=e*t;let a=Math.sqrt(n/i);return Math.min(a,1)}function l(e,t){let n;try{if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");n=new OffscreenCanvas(e,t)}catch(i){n=document.createElement("canvas"),n.width=e,n.height=t}return n}function c(e){e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1}await(0,s.Ay)();const u=async function(e,t,n,i){const a=(t=parseInt(t))*(n=parseInt(n)),o=await createImageBitmap(e),u=r(o.width,o.height,a),d=l(o.width,o.height),p=d.getContext("2d");c(p),p.drawImage(o,0,0,o.width,o.height),o.close();const h=p.getImageData(0,0,d.width,d.height),f=await(0,s.U3)(h.data,256,"frequency");return!!Boolean(u<=1&&f.colors.length<i)&&h},d=async function(e,t,n,i,u,d,p){let h;if(t=parseInt(t),n=parseInt(n),p)try{h=await(0,a.I)(e,u,d)}catch(e){}const f=t*n,_=await createImageBitmap(h||e,{resizeQuality:"pixelated"}),m=r(_.width,_.height,f),g=parseInt(Math.round(_.width*m)),w=parseInt(Math.round(_.height*m)),y=l(_.width,_.height),b=l(g,w),v=y.getContext("2d"),x=b.getContext("2d");c(v),c(x),v.drawImage(_,0,0,_.width,_.height),x.drawImage(y,0,0,b.width,b.height),_.close();const E=v.getImageData(0,0,y.width,y.height);x.getImageData(0,0,b.height,b.height);c(l(1,1).getContext("2d",{willReadFrequently:!0}));const C=function(e,t,n){const i=r(t.width,t.height,e.size*e.size),a=t.width,o=t.height,l=Math.round(a*i),c=Math.round(o*i),u=(0,s.Ws)(n,a,o,l,c,6,6);return function(e,t){const n=(0,s.TF)(e.data,e.width,e.height,t,!1);return new ImageData(new Uint8ClampedArray(n.data),n.width,n.height)}(new ImageData(new Uint8ClampedArray(u.data),u.width,u.height),e.colors)};return{artwork:E,artworks:[{name:"XS",size:90,colors:50},{name:"S",size:120,colors:60},{name:"M",size:150,colors:70},{name:"L",size:180,colors:80},{name:"XL",size:210,colors:90},{name:"XXL",size:240,colors:100}].map((function(e){return e.imageData=o(C(e,b,x.getImageData(0,0,b.width,b.height).data)),e})),prompt:prompt||""}};i()}catch(p){i(p)}}),1)},32485:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===s){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var r in n)i.call(n,r)&&n[r]&&e.push(r)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},9051:(e,t,n)=>{"use strict";e.exports=n.p+"a2d17757db0a58b35766.wasm"},84215:(e,t,n)=>{"use strict";var i=n(44576),a=n(82839),s=n(22195),o=function(e){return a.slice(0,e.length)===e};e.exports=o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==typeof Deno.version?"DENO":"process"===s(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"},72652:(e,t,n)=>{"use strict";var i=n(76080),a=n(69565),s=n(28551),o=n(16823),r=n(44209),l=n(26198),c=n(1625),u=n(70081),d=n(50851),p=n(9539),h=TypeError,f=function(e,t){this.stopped=e,this.result=t},_=f.prototype;e.exports=function(e,t,n){var m,g,w,y,b,v,x,E=n&&n.that,C=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_RECORD),A=!(!n||!n.IS_ITERATOR),k=!(!n||!n.INTERRUPTED),O=i(t,E),P=function(e){return m&&p(m,"normal",e),new f(!0,e)},D=function(e){return C?(s(e),k?O(e[0],e[1],P):O(e[0],e[1])):k?O(e,P):O(e)};if(S)m=e.iterator;else if(A)m=e;else{if(!(g=d(e)))throw new h(o(e)+" is not iterable");if(r(g)){for(w=0,y=l(e);y>w;w++)if((b=D(e[w]))&&c(_,b))return b;return new f(!1)}m=u(e,g)}for(v=S?e.next:m.next;!(x=a(v,m)).done;){try{b=D(x.value)}catch(e){p(m,"throw",e)}if("object"==typeof b&&b&&c(_,b))return b}return new f(!1)}},36043:(e,t,n)=>{"use strict";var i=n(79306),a=TypeError,s=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw new a("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new s(e)}},1103:e=>{"use strict";e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},10916:(e,t,n)=>{"use strict";var i=n(44576),a=n(80550),s=n(94901),o=n(92796),r=n(33706),l=n(78227),c=n(84215),u=n(96395),d=n(39519),p=a&&a.prototype,h=l("species"),f=!1,_=s(i.PromiseRejectionEvent),m=o("Promise",(function(){var e=r(a),t=e!==String(a);if(!t&&66===d)return!0;if(u&&(!p.catch||!p.finally))return!0;if(!d||d<51||!/native code/.test(e)){var n=new a((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};if((n.constructor={})[h]=i,!(f=n.then((function(){}))instanceof i))return!0}return!(t||"BROWSER"!==c&&"DENO"!==c||_)}));e.exports={CONSTRUCTOR:m,REJECTION_EVENT:_,SUBCLASSING:f}},80550:(e,t,n)=>{"use strict";var i=n(44576);e.exports=i.Promise},90537:(e,t,n)=>{"use strict";var i=n(80550),a=n(84428),s=n(10916).CONSTRUCTOR;e.exports=s||!a((function(e){i.all(e).then(void 0,(function(){}))}))},96167:(e,t,n)=>{"use strict";var i=n(46518),a=n(69565),s=n(79306),o=n(36043),r=n(1103),l=n(72652);i({target:"Promise",stat:!0,forced:n(90537)},{allSettled:function(e){var t=this,n=o.f(t),i=n.resolve,c=n.reject,u=r((function(){var n=s(t.resolve),o=[],r=0,c=1;l(e,(function(e){var s=r++,l=!1;c++,a(n,t,e).then((function(e){l||(l=!0,o[s]={status:"fulfilled",value:e},--c||i(o))}),(function(e){l||(l=!0,o[s]={status:"rejected",reason:e},--c||i(o))}))})),--c||i(o)}));return u.error&&c(u.value),n.promise}})},35874:(e,t,n)=>{"use strict";n(96167)},40024:(e,t,n)=>{"use strict";let i;n.d(t,{Ay:()=>y,Cf:()=>f});let a=null;function s(){return null!==a&&0!==a.byteLength||(a=new Uint8Array(i.memory.buffer)),a}let o=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();const r=2146435072;let l=0;function c(e,t){return function(e,t){return l+=t,l>=r&&(o=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),o.decode(),l=t),o.decode(s().subarray(e,e+t))}(e>>>=0,t)}let u=0;let d=null;function p(e,t){return e>>>=0,(null!==d&&0!==d.byteLength||(d=new Uint32Array(i.memory.buffer)),d).subarray(e/4,e/4+t)}const h="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>i.__wbg_imageprocessor_free(e>>>0,1)));class f{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,h.unregister(this),e}free(){const e=this.__destroy_into_raw();i.__wbg_imageprocessor_free(e,0)}constructor(e,t,n){const a=function(e,t){const n=t(1*e.length,1)>>>0;return s().set(e,n/1),u=e.length,n}(e,i.__wbindgen_malloc),o=u,r=i.imageprocessor_new(a,o,t,n);return this.__wbg_ptr=r>>>0,h.register(this,this.__wbg_ptr,this),this}process(e,t){const n=i.imageprocessor_process(this.__wbg_ptr,e,t);var a,o,r=(a=n[0],o=n[1],a>>>=0,s().subarray(a/1,a/1+o)).slice();return i.__wbindgen_free(n[0],1*n[1],1),r}get_processed_dimensions(e){const t=i.imageprocessor_get_processed_dimensions(this.__wbg_ptr,e);var n=p(t[0],t[1]).slice();return i.__wbindgen_free(t[0],4*t[1],4),n}}Symbol.dispose&&(f.prototype[Symbol.dispose]=f.prototype.free);const _=new Set(["basic","cors","default"]);function m(){const e={wbg:{}};return e.wbg.__wbg_wbindgenthrow_451ec1a8469d7eb6=function(e,t){throw new Error(c(e,t))},e.wbg.__wbindgen_init_externref_table=function(){const e=i.__wbindgen_export_0,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e}function g(e,t){return i=e.exports,w.__wbindgen_wasm_module=t,d=null,a=null,i.__wbindgen_start(),i}async function w(e){if(void 0!==i)return i;void 0!==e&&Object.getPrototypeOf(e)===Object.prototype&&({module_or_path:e}=e),void 0===e&&(e=new URL(n(9051),n.b));const t=m();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:a,module:s}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if(!e.ok||!_.has(e.type)||"application/wasm"===e.headers.get("Content-Type"))throw t}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return g(a,s)}const y=w}}]);