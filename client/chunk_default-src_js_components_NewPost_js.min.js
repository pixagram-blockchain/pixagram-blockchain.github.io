"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["default-src_js_components_NewPost_js"],{40497:(e,t,i)=>{i.a(e,(async(e,r)=>{try{i.d(t,{A:()=>z});i(62953),i(3296),i(27208),i(48408);var n=i(17402),s=i(79626),a=i(52706),o=i(65816),l=i(68016),_=i(96746),c=i(39870),p=i(54392),u=i(8728),h=i(69113),d=i(83182),g=i(69312),m=i(15776),f=i(94422),y=i(72572),x=i(44385),b=i(34274),w=i(69232),v=i(32163),A=i(95834),E=e([b]);function k(e,t,i){return(t=P(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function P(e){var t=S(e,"string");return"symbol"==typeof t?t:t+""}function S(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}b=(E.then?(await E)():E)[0];const C=e=>({dropZone:{width:"100%",height:"100%",minHeight:"384px",border:"2px dashed #666",textAlign:"center",verticalAlign:"middle",backgroundColor:"transparent",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 225ms"},dropZoneActive:{width:"100%",height:"100%",minHeight:"384px",border:"2px solid #666",textAlign:"center",verticalAlign:"middle",backgroundColor:"rgba(255, 255, 255, 0.07)",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 25ms"},whiteDialog:{backgroundColor:"#fff !important",color:"#000 !important",boxShadow:"0px 11px 15px -7px rgb(255 255 255 / 20%), 0px 24px 38px 3px rgb(255 255 255 / 14%), 0px 9px 46px 8px rgb(255 255 255 / 12%) !important","& .MuiButton-textPrimary":{color:"#222 !important","&:hover":{color:"#000 !important"}},"& .MuiButton-containedPrimary":{color:"#fff !important",backgroundColor:"#000 !important","&:hover":{color:"#ddd !important",backgroundColor:"#222 !important"}},"& .MuiRadio-colorPrimary.Mui-checked, & .MuiCheckbox-colorPrimary.Mui-checked, & .MuiRadio-colorSecondary.Mui-checked":{color:"#000 !important"},"& .MuiRadio-root, & .MuiFormLabel-root.Mui-focused, .MuiTypography-root":{color:"#000 !important"}},inputImage:{margin:"0px 0px -4px 0px",borderRadius:"12px",width:"100%",filter:"grayscale(1) contrast(.8) brightness(0.55) opacity(0.65) blur(8px)",transition:"filter 400ms cubic-bezier(0.4, 0, 0.2, 1) 25ms !important",animationName:"$opacity-create",animationTimingFunction:"ease-in-out",animationDuration:"2400ms",animationFillMode:"both",animationDelay:"1200ms",animationDirection:"alternate",animationIterationCount:"infinite","@global":{"@keyframes opacity-create":{"0%":{opacity:"0.666"},"100%":{opacity:"1.000"}}},"&:hover":{filter:"grayscale(0.15) contrast(.8) brightness(0.6) opacity(0.7) blur(0px)"},"&::after":{content:"''",position:"absolute",left:0,top:0,width:"100%",height:"100%",background:"linear-gradient(to top, black, transparent)"}}});class O extends n.PureComponent{constructor(e){var t;super(e),t=this,k(this,"_resetProps",(()=>{try{URL.revokeObjectURL(this.state._input_file_url)}catch(e){}this.setState({_drop_ref:null,_preferred_size:"M",_title:"",_currentStep:0,_totalStep:3,_drag_file:{},_preview:{},_preview_kb:0,_previews:[],_canvas:{},_offscreen_canvas:{},_base64:"",_style:0,_dropzone_active:!1,_message:"We maintains privacy and doesn't store uploaded images.",_close_confirm_close_open:!1,process:{name:"upload file",start:0,finish:0}},this.forceUpdate)})),k(this,"_setTags",(e=>{this.setState({_tags:e.target.value.toString()},this.forceUpdate)})),k(this,"_drop_start",(e=>{e.preventDefault(),e.stopPropagation();const t=this.state._dropzone_active;this.setState({_dropzone_active:!0},(()=>{t||this.forceUpdate()}))})),k(this,"_drop_end",(e=>{e.preventDefault(),e.stopPropagation();const t=this.state._dropzone_active;this.setState({_dropzone_active:!1},(()=>{t&&this.forceUpdate()}))})),k(this,"_trigger_message",(e=>{this.setState({_message:e},this.forceUpdate)})),k(this,"_handle_file_upload",(async e=>{"dataTransfer"in e&&e.dataTransfer.files.length>0&&(e.preventDefault(),e.stopPropagation());const t=(e.target||{}).files||(e.srcElement||{}).files||(e.currentTarget||{}).files||((e.path||[])[0]||{}).files||(e.dataTransfer||{}).files||[],i=t[0]||null;let r=null;for(let e=0;e<t.length;e++)r=t[e],r.type.startsWith("image/")&&(e=t.length);if(null===r&&null===i);else if(null!==r){Boolean("image/png"===r.type)||r.type;const e=await(0,b.E)(r,512,512,160);if(e instanceof ImageData)this._trigger_message("The image appears to be already optimized!"),this.setState({_previews:[{name:"default",imageData:e}],_title:"",_currentStep:1,process:{name:"upload file",start:0,finish:0}},(()=>{this.forceUpdate((()=>{this._set_size()}))}));else{try{URL.revokeObjectURL(this.state._input_file_url)}catch(e){}const e=URL.createObjectURL(r);this.setState({_input_file_url:e,_use_ai_open:!0,_input_file:r},this.forceUpdate)}}})),k(this,"_setTitle",(e=>{this.setState({_title:e.target.value},this.forceUpdate)})),k(this,"_set_process",((e,t,i)=>{const r=setInterval(this.forceUpdate.bind(this),250),n=setTimeout((()=>{this.state.process._interval===r&&clearInterval(this.state.process._interval)}),i-t);this.setState({process:{name:e,start:t,finish:i,_interval:r,_timout:n}},(()=>{this.forceUpdate()}))})),k(this,"_handle_size_change",(e=>{this.setState({_preferred_size:e.target.value},(()=>{this._set_size()}))})),k(this,"_handle_style_change",(e=>{this.setState({_style:parseInt(e.target.value)},(()=>{this.forceUpdate()}))})),k(this,"_set_canvas_ref",(e=>{if(void 0===e)return this._set_size();if(null==e)return this._set_size();if(void 0===e.width)return this._set_size();if(null==e.width)return this._set_size();if("function"==typeof e.getContext){var t=e;t.context=e.getContext("2d"),this.setState({_canvas:t},(()=>{this._set_size()}))}})),k(this,"_set_size",(()=>{this.state._previews.forEach((e=>{1!==this.state._previews.length&&e.name.toUpperCase()!==this.state._preferred_size.toUpperCase()||this.setState({_preview:e.imageData},(()=>{this.state._canvas.width=this.state._preview.width,this.state._canvas.height=this.state._preview.height,(0,w.A)((()=>Promise.all([i.e("default-src_js_utils_encodeImage_js"),i.e("default-src_js_utils_png_quant_js")]).then(i.bind(i,15656)))).then((e=>{let{encodeIMG:t}=e;t(this.state._preview,"WEBP",!0).then((e=>{this.setState({_base64:e},(()=>{this.forceUpdate((()=>{this.state._canvas.context.putImageData(this.state._preview,0,0)}))}))}))}))}))}))})),k(this,"download_artwork",(()=>{let e=document.createElement("a");e.download="Pixagram.webp",e.href=this.state._base64,e.click(),e.remove()})),k(this,"_set_drop_ref",(e=>{null!=e&&this.setState({_drop_ref:e},(()=>{this.state._drop_ref.addEventListener("drop",this._handle_file_upload.bind(this)),this.state._drop_ref.addEventListener("dragenter",this._drop_start.bind(this)),this.state._drop_ref.addEventListener("dragover",this._drop_start.bind(this)),this.state._drop_ref.addEventListener("dragleave",this._drop_end.bind(this)),this.state._drop_ref.addEventListener("dragend",this._drop_end.bind(this))}))})),k(this,"_backOrCancel",(e=>{parseInt(this.state._currentStep)<=1?e?this.close_confirm():this.setState({_close_confirm_close_open:!0},this.forceUpdate):this.setState({_currentStep:parseInt(this.state._currentStep)-1},this.forceUpdate)})),k(this,"request_close",(()=>{this.setState({_close_confirm_close_open:!0},this.forceUpdate)})),k(this,"_nextOrFinish",(()=>{2===parseInt(this.state._currentStep)?(this._resetProps(),this.props.onClose()):this.setState({_currentStep:parseInt(this.state._currentStep)+1},this.forceUpdate)})),k(this,"_open_link",(e=>{window.open(e,"_blank")})),k(this,"close_confirm_close",(()=>{this.setState({_close_confirm_close_open:!1},(()=>{this.forceUpdate()}))})),k(this,"close_use_ai",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({_use_ai_open:!1,_use_ai:e},(()=>{t.forceUpdate((async()=>{const i=await(0,b.z)(t.state._input_file,512,512,void 0,t._trigger_message,t._set_process,e,t.state._style);t.setState({_previews:i.artworks,_title:i.prompt,_currentStep:1,process:{name:"upload file",start:0,finish:0}},(()=>{t.forceUpdate((()=>{t._set_size()}))}))}))}))})),k(this,"close_confirm",(()=>{this.setState({_close_confirm_close_open:!1},(()=>{this.forceUpdate((()=>{this._resetProps(),this.props.onClose()}))}))})),this.state={classes:e.classes,keepMounted:e.keepMounted||!1,open:e.open,_drop_ref:null,_preferred_size:"M",_title:"",_currentStep:0,_totalStep:3,_drag_file:{},_preview:{},_preview_kb:0,_previews:[],_canvas:{},_offscreen_canvas:{},_base64:"",_style:0,_use_ai:!1,_use_ai_open:!1,_input_file:{},_input_file_url:"",_dropzone_active:!1,_tags:[],_message:"We maintains privacy and doesn't store uploaded images.",_close_confirm_close_open:!1,process:{name:"upload file",start:0,finish:0}}}shouldComponentUpdate(e,t,i){return!1}componentWillReceiveProps(e){this.setState(e,(()=>{this.forceUpdate()}))}render(){const{classes:e,_title:t,_preferred_size:i,_currentStep:r,_totalStep:s,open:b,keepMounted:w,_preview:E,_dropzone_active:k,process:P,_base64:S,_tags:C,_previews:O,_message:z,_close_confirm_close_open:j,_use_ai_open:U,_use_ai:I,_style:M,_input_file_url:D}=this.state,{name:T,start:L,finish:R}=P;Math.round(r/s*100);let B=null,F=R-L,q=Date.now()-L,W=q/F,N=F>q,X=((S||"").length||0)/1e3*3/4;switch(r.toString()){case"0":B=n.createElement("div",{ref:this._set_drop_ref},n.createElement("div",{style:{borderRadius:"12px"},className:k?e.dropZoneActive:e.dropZone},n.createElement(A.A,{in:D,timeout:300},n.createElement("img",{src:D,className:e.inputImage+" pixelated",alt:"Input Image"})),n.createElement(u.A,{onChange:this._handle_file_upload,accept:"image/*",style:{display:"none",position:"absolute"},id:"button-file-dialog-secondary",type:"file"}),n.createElement(A.A,{in:!0,timeout:600},n.createElement("div",{style:{pointerEvents:N||"upload file"!==T?"none":"auto",transform:"translate(-50%, -50%)",top:"50%",left:"50%",position:"absolute",display:"inline"}},n.createElement(A.A,{in:!0,timeout:600},n.createElement(_.A,{disabled:N||"upload file"!==T,component:"label",htmlFor:"button-file-dialog-secondary",onClick:this._handle_file_upload},n.createElement("span",{style:{fontWeight:"bold",fontSize:"24px",verticalAlign:"super",color:"#999",marginRight:"16px"}},T||"Upload Image"),N||"upload file"!==T?n.createElement(h.A,{position:"relative",display:"inline-flex"},n.createElement(d.A,{variant:N?"determinate":"indeterminate",color:"#ffffff",value:Math.round(100*W)}),n.createElement(h.A,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},n.createElement(p.A,{variant:"caption",component:"div",color:"textSecondary"},N?"".concat(Math.round(Math.min(100*W,100)),"%"):"wait"))):n.createElement(x.A,{style:{color:"#666"}}))),n.createElement(A.A,{in:!0,timeout:900},n.createElement("p",{style:{textAlign:"center",color:"#a7a7a7"}},z))))));break;case"1":B=n.createElement("div",{noValidate:!0,autoComplete:"off",style:{position:"relative"}},n.createElement(g.A,{component:"fieldset",style:{padding:"8px 16px 64px 16px",position:"absolute",background:"linear-gradient(180deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",top:"0px"}},1===(O||0).length?n.createElement(A.A,{in:!0,timeout:600},n.createElement("p",null,"Your artwork is already optimized for pixel art")):n.createElement(a.A,{row:!0,defaultValue:"top","aria-label":"size",name:"SIZE",color:"primary",value:i,onChange:this._handle_size_change},n.createElement(A.A,{in:!0,timeout:200},n.createElement(m.A,{value:"XS",control:n.createElement(f.A,null),label:"XS"})),n.createElement(A.A,{in:!0,timeout:400},n.createElement(m.A,{value:"S",control:n.createElement(f.A,null),label:"S"})),n.createElement(A.A,{in:!0,timeout:600},n.createElement(m.A,{value:"M",control:n.createElement(f.A,null),label:"M"})),n.createElement(A.A,{in:!0,timeout:800},n.createElement(m.A,{value:"L",control:n.createElement(f.A,null),label:"L"})),n.createElement(A.A,{in:!0,timeout:1e3},n.createElement(m.A,{value:"XL",control:n.createElement(f.A,null),label:"XL"})),n.createElement(A.A,{in:!0,timeout:1200},n.createElement(m.A,{value:"XXL",control:n.createElement(f.A,null),label:"XXL"})))),n.createElement("div",{className:"pixelated",style:{width:"100%"}},n.createElement("canvas",{style:{borderRadius:"12px",width:"100%"},ref:this._set_canvas_ref,width:E.width+"px",height:E.height+"px"})),n.createElement("div",{style:{padding:"64px 8px 16px 8px",textAlign:"right",position:"absolute",background:"linear-gradient(0deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",bottom:"0px"}},n.createElement(A.A,{in:!0,timeout:800},n.createElement(_.A,{variant:"text",color:"#ffffff88",onClick:this.download_artwork},"DOWNLOAD (",X.toFixed(2)," kB)")),n.createElement(A.A,{in:!0,timeout:1e3},n.createElement(_.A,{variant:"text",color:"#ffffff88",onClick:()=>this._open_link("https://pixa.pics/")},"OPEN EDITOR"))));break;case"2":B=n.createElement(A.A,{in:!0,timeout:300},n.createElement("div",{noValidate:!0,autoComplete:"off"},n.createElement(y.A,{style:{marginTop:12},value:t,fullWidth:!0,label:"Title",variant:"outlined",onChange:this._setTitle}),n.createElement(y.A,{style:{marginTop:24,marginBottom:24},label:"Content",multiline:!0,rows:1,defaultValue:S,variant:"filled",disabled:!0,fullWidth:!0}),n.createElement(y.A,{style:{marginTop:24,marginBottom:24},label:"Description",multiline:!0,minRows:6,defaultValue:"",variant:"outlined",fullWidth:!0}),n.createElement(v.A,{style:{marginBottom:12},fullWidth:!0,variant:"outlined",label:"Tags",placeholder:"Tags for content classification"})))}return n.createElement(n.Fragment,null,n.createElement(c.A,{open:b,maxWidth:"sm",fullWidth:!0,disablePortal:!1,onClose:this.request_close,keepMounted:!1},n.createElement(l.A,null,n.createElement(p.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Publisher"),B),n.createElement(o.A,{style:{textAlign:"right"}},n.createElement(_.A,{variant:"text",color:"primary",autoFocus:!0,onClick:()=>this._backOrCancel(Boolean(!N&&"upload file"==T))},parseInt(r)>0?"Back":"Cancel"),n.createElement(_.A,{variant:"contained",color:"primary",disabled:0===parseInt(r),onClick:this._nextOrFinish},2===parseInt(r)?"Publish":"Next"))),n.createElement(c.A,{PaperProps:{classes:{root:e.whiteDialog}},open:j,maxWidth:"xs",disablePortal:!1,onClose:this.close_confirm_close,keepMounted:!1},n.createElement(l.A,null,n.createElement(p.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Are you sure?"),n.createElement(p.A,{variant:"body2",color:"textPrimary",component:"p"},"Your current artwork will be lost.")),n.createElement(o.A,{style:{textAlign:"right"}},n.createElement(_.A,{variant:"text",color:"primary",autoFocus:!0,onClick:this.close_confirm_close},"Cancel"),n.createElement(_.A,{variant:"contained",color:"primary",onClick:this.close_confirm},"Close"))),n.createElement(c.A,{PaperProps:{classes:{root:e.whiteDialog}},open:U,maxWidth:"xs",disablePortal:!1,onClose:()=>{this.close_use_ai(!0)},keepMounted:!1},n.createElement(l.A,null,n.createElement(p.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Choose Your Style (AI)"),n.createElement(g.A,{component:"fieldset"},n.createElement(a.A,{"aria-label":"style",name:"style",value:M.toString(),onChange:this._handle_style_change},n.createElement(m.A,{value:"3",control:n.createElement(f.A,null),label:"No Special Style"}),n.createElement(m.A,{value:"0",control:n.createElement(f.A,null),label:"Beautiful (AI)"}),n.createElement(m.A,{value:"1",control:n.createElement(f.A,null),label:"Natural (AI)"}),n.createElement(m.A,{value:"2",control:n.createElement(f.A,null),label:"Flat (AI)"}))),n.createElement(p.A,{variant:"body2",color:"textPrimary",component:"p"},"It takes around 100 seconds. ",n.createElement("b",null,"#Free")," ",n.createElement("b",null,"#Anonymous"))),n.createElement(o.A,{style:{textAlign:"right"}},n.createElement(_.A,{variant:"text",color:"primary",autoFocus:!0,onClick:()=>{this.close_use_ai(!1)}},"IGNORE"),n.createElement(_.A,{variant:"contained",color:"primary",onClick:()=>{"3"===M.toString()?this.close_use_ai(!1):this.close_use_ai(!0)}},"ACCEPT"))))}}const z=(0,s.default)(C)(O);r()}catch(j){r(j)}}))},23138:(e,t,i)=>{i(54743),i(11745),i(22134),i(61740),i(75044),i(48345),i(28845),i(373),i(62953);var r=i(82803),n=i(4826),s=(0,n.SIMDopeCreateConfAdd)({create:{new_of:!0},properties:{uint32:!0,laba:!0,rgbaon4bits:!0,rgbaon6bits:!0,rgbaon8bits:!0,rgbaon12bits:!0,rgbaon16bits:!0,skin:!0},methods:{simplify:!0,get_new_element:!0,get_use_element:!0,set_tail:!0,is_dark:!0,blend_first_with:!0,blend_first_with_tails:!0,blend_all:!0,euclidean_match_with:!0,manhattan_match_with:!0,cie76_match_with:!0,copy:!0}}),a=Math.fround,o=a(100),l=a(2);const{simdops:_,Color:c,Colors:p}=(0,n.SIMDopeCreate)(s),{minus_int:u,int_not_equal:h,plus_int:d,plus_uint:g,minus_uint:m,multiply_int:f,multiply_uint:y,multiply_uint_4:x,divide_uint:b,clamp_uint8:w,clamp_uint32:v,int_equal:A,uint_less:E,int_less:k,int_greater_equal:P,uint_not_equal:S,uint_less_equal:C,min_uint:O}=_;var z=function(e){if(e=e||{},!(this instanceof z))return new z(e);e.pxl_colors=e.pxl_colors||new Uint32Array(0),e.pxls=e.pxls||new Uint32Array(0),this.speed=e.speed||"auto",this.new_pxls_="buffer"in e.pxls?new Uint32Array(e.pxls.buffer):Uint32Array.from(e.pxls),this.new_pxl_colors_="buffer"in e.pxl_colors?new p(e.pxl_colors.buffer):new p(Uint32Array.from(e.pxl_colors).buffer);var t=0|this.new_pxl_colors_.length;this.new_pxl_colors_is_skin_mask_=new r.SetFixed(0|t),this.set_new_pxl_skin_mask(),this.best_color_number_=e.number_of_color,this.max_cluster_=t>65536?65537:t>16384?4097:t>4096?257:t>256?17:1,this.index_clusters_=new Array(this.max_cluster_),this.length_clusters_=new Uint32Array(this.max_cluster_),this.pxl_colors_usage_=new Uint32Array(t),this.all_index_clusters_=new Uint32Array(t),this.clean_pxl_colors_=new Uint32Array(t),this.clean_pxl_colors_lookup_={},this.t=0,this.is_skin_ops_=0,this.match_ops_=0,this.blend_ops_=0,this.remove_duplicate_ops_=0,this.simplify_ops_=0,this.classify_on_x_bits_ops_=0};Object.defineProperty(z.prototype,"set_is_skin_ops",{get:function(){return function(e){this.is_skin_ops_=(0|e)>>>0}}}),Object.defineProperty(z.prototype,"set_match_ops",{get:function(){return function(e){this.match_ops_=(0|e)>>>0}}}),Object.defineProperty(z.prototype,"set_blend_ops",{get:function(){return function(e){this.blend_ops_=(0|e)>>>0}}}),Object.defineProperty(z.prototype,"set_remove_duplicate_ops",{get:function(){return function(e){this.remove_duplicate_ops_=(0|e)>>>0}}}),Object.defineProperty(z.prototype,"set_simplify_ops",{get:function(){return function(e){this.simplify_ops_=e}}}),Object.defineProperty(z.prototype,"set_classify_on_x_bits_ops",{get:function(){return function(e){this.classify_on_x_bits_ops_=e}}}),Object.defineProperty(z.prototype,"get_is_skin_ops",{get:function(){return function(){return 0|this.is_skin_ops_}}}),Object.defineProperty(z.prototype,"get_match_ops",{get:function(){return function(){return 0|this.match_ops_}}}),Object.defineProperty(z.prototype,"get_blend_ops",{get:function(){return function(){return 0|this.blend_ops_}}}),Object.defineProperty(z.prototype,"get_remove_duplicate_ops",{get:function(){return function(){return 0|this.remove_duplicate_ops_}}}),Object.defineProperty(z.prototype,"get_simplify_ops",{get:function(){return function(){return this.simplify_ops_}}}),Object.defineProperty(z.prototype,"get_classify_on_x_bits_ops",{get:function(){return function(){return this.classify_on_x_bits_ops_}}}),Object.defineProperty(z.prototype,"reset_deduplicate",{get:function(){return function(e){this.clean_pxl_colors_lookup_={},this.pxl_colors_usage_.fill(0,0,0|e),this.clean_pxl_colors_.fill(0,0,0|e)}}}),Object.defineProperty(z.prototype,"index_of_color_within_cleaned",{get:function(){return function(e){return(0|this.clean_pxl_colors_lookup_[(0|e)>>>0])-1|0}}}),Object.defineProperty(z.prototype,"set_cleaned_pxl_colors",{get:function(){return function(e,t){this.clean_pxl_colors_[(0|e)>>>0]=(0|t)>>>0,this.clean_pxl_colors_lookup_[(0|t)>>>0]=(e+1|0)>>>0}}}),Object.defineProperty(z.prototype,"increase_color_usage",{get:function(){return function(e){this.pxl_colors_usage_[(0|e)>>>0]=(this.pxl_colors_usage_[(0|e)>>>0]+1|0)>>>0}}}),Object.defineProperty(z.prototype,"set_new_pxls",{get:function(){return function(e,t){this.new_pxls_[(0|e)>>>0]=(0|t)>>>0}}}),Object.defineProperty(z.prototype,"set_new_pxl_colors",{get:function(){return function(e){this.new_pxl_colors_=new p(this.clean_pxl_colors_.buffer.slice(0,x(0|e))),this.set_new_pxl_skin_mask()}}}),Object.defineProperty(z.prototype,"set_new_pxl_skin_mask",{get:function(){return function(){var e=new c(new ArrayBuffer(4)),t=0|this.new_pxl_colors_.length,i=0;for(this.new_pxl_colors_is_skin_mask_=new r.SetFixed(0|t);(0|i)<(0|t);i=i+1|0)this.new_pxl_colors_.get_use_element(0|i,e).skin&&this.new_pxl_colors_is_skin_mask_.add(0|i);this.set_is_skin_ops(this.get_is_skin_ops()+i|0)}}}),Object.defineProperty(z.prototype,"get_a_new_pxl_color_from_pxl_index",{get:function(){return function(e){return 4294967295&this.new_pxl_colors_.buffer_getUint32(this.new_pxls_[0|e])}}}),Object.defineProperty(z.prototype,"reset_cluster",{get:function(){return function(){var e=this.new_pxl_colors_.length;this.max_cluster_=e>65536?65537:e>16384?4097:e>4096?257:e>256?17:1,this.length_clusters_.fill(0,0,0|this.max_cluster);for(var t=0;(0|t)<(0|this.max_cluster);t=(t+1|0)>>>0)this.index_clusters_[0|t]=[]}}}),Object.defineProperty(z.prototype,"add_in_indexes_cluster",{get:function(){return function(e,t){this.index_clusters_[(0|e)>>>0].push((0|t)>>>0)}}}),Object.defineProperty(z.prototype,"set_all_cluster_indexes",{get:function(){return function(){for(var e=0,t=0;(0|e)<(0|this.max_cluster);e=(e+1|0)>>>0)this.all_index_clusters_.set(this.index_clusters_[(0|e)>>>0],(0|t)>>>0),t=(t+this.get_length_in_index_clusters(0|e)|0)>>>0}}}),Object.defineProperty(z.prototype,"get_length_in_index_clusters",{get:function(){return function(e){return(0|this.index_clusters_[(0|e)>>>0].length)>>>0}}}),Object.defineProperty(z.prototype,"get_in_cluster_lengths",{get:function(){return function(e){return(0|this.length_clusters_[(0|e)>>>0])>>>0}}}),Object.defineProperty(z.prototype,"get_an_index_in_clusters",{get:function(){return function(e){return(0|this.all_index_clusters_[0|e])>>>0}}}),Object.defineProperty(z.prototype,"get_a_color_usage",{get:function(){return function(e){return(0|this.pxl_colors_usage_[0|e])>>>0}}}),Object.defineProperty(z.prototype,"set_a_color_usage",{get:function(){return function(e,t){return this.pxl_colors_usage_[0|e]=(0|t)>>>0}}}),Object.defineProperty(z.prototype,"get_a_color_usage_percent",{get:function(){return function(e){return this.pxl_colors_usage_[0|e]/this.new_pxls_.length}}}),Object.defineProperty(z.prototype,"get_average_color_usage_percent",{get:function(){return function(e,t){t=0|((t|=0)<(e|=0)?this.pxl_colors_usage_.length:t);var i=0,r=0,n=0;for(r=0|e;(0|r)<(0|t);r=(r+1|0)>>>0)n=(0|this.get_an_index_in_clusters((0|r)>>>0))>>>0,i+=this.pxl_colors_usage_[0|n]/this.new_pxls_.length;return i/(t-e|0)}}}),Object.defineProperty(z.prototype,"get_a_new_pxl_color",{get:function(){return function(e){return this.new_pxl_colors_.get_new_element(0|e)}}}),Object.defineProperty(z.prototype,"is_pxl_color_skin",{get:function(){return function(e){return this.new_pxl_colors_is_skin_mask_.has(0|e)}}}),Object.defineProperty(z.prototype,"max_cluster",{get:function(){return 0|this.max_cluster_}}),Object.defineProperty(z.prototype,"new_pxls_length",{get:function(){return 0|this.new_pxls_.length}}),Object.defineProperty(z.prototype,"new_pxl_colors_length",{get:function(){return 0|this.new_pxl_colors_.length}}),Object.defineProperty(z.prototype,"best_color_number",{get:function(){return 0|this.best_color_number_}}),Object.defineProperty(z.prototype,"get_data",{get:function(){return function(){return Array.of(this.new_pxls_,this.new_pxl_colors_.subarray_uint32(0,this.new_pxl_colors_.length),{deduplicate:this.get_remove_duplicate_ops(),simplify:this.get_simplify_ops(),classify:this.get_classify_on_x_bits_ops(),skin:this.get_is_skin_ops(),blend:this.get_blend_ops(),match:this.get_match_ops()})}}}),z.prototype.output=function(e){e=e||"heap";var t=this.get_data();if("heap"==e){var i=new Uint32Array(2+t[0].length+t[1].length);return i[0]=0|t[0].length,i[1]=0|t[1].length,i.set(t[0],2),i.set(t[1],2+t[0].length),i.buffer}return t},z.prototype.deduplicate=function(){this.set_remove_duplicate_ops(this.get_remove_duplicate_ops()+1|0),this.reset_deduplicate(0|this.new_pxl_colors_length);for(var e=0,t=0,i=0,r=0,n=0|this.new_pxls_length;(0|r)<(0|n);r=(r+1|0)>>>0)t=0|this.get_a_new_pxl_color_from_pxl_index(0|r),-1==(0|(i=0|this.index_of_color_within_cleaned(0|t)))&&(this.set_cleaned_pxl_colors(0|e,0|t),i=0|e,e=e+1|0),this.increase_color_usage(0|i),this.set_new_pxls(0|r,0|i);this.set_new_pxl_colors(e)},z.prototype.clusterize=function(){this.reset_cluster();var e=0;if(65537===this.max_cluster)for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|e)>>>0).rgbaon16bits)>>>0,(0|e)>>>0);else if(4097===this.max_cluster)for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|e)>>>0).rgbaon12bits)>>>0,(0|e)>>>0);else if(257===this.max_cluster)for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|e)>>>0).rgbaon8bits)>>>0,(0|e)>>>0);else if(17===this.max_cluster)for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|e)>>>0).rgbaon4bits)>>>0,(0|e)>>>0);else for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster(0,(0|e)>>>0);this.max_cluster>1&&this.set_classify_on_x_bits_ops(this.get_classify_on_x_bits_ops()+this.new_pxl_colors_length),this.set_all_cluster_indexes()},z.prototype.process_threshold=function(e,t,i){var r,n,s,_,p=!1,u=[],h=[],d=0,g=0,m=!1,f=!1,y=0,x=0,b=0,w=0,v=0,A=0,E=function(e){return 1-(1-e)*(1-e)}((e=(0|e)>>>0)/(i=(0|i)>>>0)),k=0,P=0,S=0,C=0,O=0,z=0;for(_=a(E*l),s=a(E*o);(0|O)<(0|this.max_cluster);O=(O+1|0)>>>0){for(g=(d+((0|this.get_length_in_index_clusters(0|O))>>>0)|0)>>>0,v=this.get_average_color_usage_percent(0|d,0|g),S=0|d;(0|S)<(0|g);S=(S+1|0)>>>0){if(k=(0|this.get_an_index_in_clusters((0|S)>>>0))>>>0,r=this.get_a_new_pxl_color((0|k)>>>0),m=this.is_pxl_color_skin((0|k)>>>0),(0|(y=(0|this.get_a_color_usage((0|k)>>>0))>>>0))>0)for(u=[],C=0|d;(0|C)<(0|g);C=(C+1|0)>>>0)P=(0|this.get_an_index_in_clusters((0|C)>>>0))>>>0,n=this.get_a_new_pxl_color((0|P)>>>0),f=this.is_pxl_color_skin((0|P)>>>0),0|(x=(0|this.get_a_color_usage((0|P)>>>0))>>>0)&&(0|k)!=(0|P)&&(0|m)==(0|f)&&(b=this.get_a_color_usage_percent((0|k)>>>0)/v,w=this.get_a_color_usage_percent((0|P)>>>0)/v,z=a((z=m&&f?_:m||f?s:E)*(.15*Math.abs(b-w)+.3*(2-(b+w))+.55)/1),r[t](n,z)&&(A=a(x/y),p=!0,this.set_a_color_usage(0|P,0),u.push(n),h.push(A)));(0|u.length)>0&&(c.blend_all(r,u,h),u=[],h=[])}d=0|g}return p},z.prototype.round=function(){if(this.new_pxl_colors_length>1024){for(var e=0|(this.new_pxl_colors_length>32768?4:this.new_pxl_colors_length>32768?3:this.new_pxl_colors_length>16384?2.5:this.new_pxl_colors_length>8192?2:this.new_pxl_colors_length>2048?1.5:(this.new_pxl_colors_length,1)),t=0;(0|t)<(0|this.new_pxl_colors_length);t=(t+1|0)>>>0)this.get_a_new_pxl_color((0|t)>>>0).simplify(e);this.set_simplify_ops(this.get_simplify_ops()+this.new_pxl_colors_length)}},z.prototype.init=function(){return this.round(),this.deduplicate(),this.clusterize(),this},z.prototype.run=function(){var e=0;if(this.new_pxl_colors_length<=this.best_color_number)return this.deduplicate(),this.clusterize(),this;for(var t=["euclidean_match_with","euclidean_match_with","euclidean_match_with"],i=this.speed=this.new_pxl_colors_length>32768?t[0]:this.new_pxl_colors_length>1024?t[1]:t[2];this.new_pxl_colors_length>this.best_color_number;)e=e+1|0,this.process_threshold(e,i,256)&&(this.deduplicate(),this.clusterize());return this},z.split_image_data=function(e){for(var t=new Uint32Array(e.data.buffer),i=Uint32Array.from(new Set(t)),r={},n=i.length,s=new Uint32Array(t.length),a=0,o=0|n;(0|a)<(0|o);a=(a+1|0)>>>0)r[i[0|a]]=(0|a)>>>0;for(a=0,o=0|t.length;(0|a)<(0|o);a=(a+1|0)>>>0)s[0|a]=(0|r[t[0|a]])>>>0;return[s,i,t,n]}},90010:(e,t,i)=>{i.d(t,{I:()=>n});i(54743),i(11745),i(27495),i(25440),i(42762),i(21489),i(61740),i(75044),i(28845),i(373),i(35874),i(12041),i(62953);var r=i(60987);const n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};return new Promise((async function(s,a){i("AI CONVERT"),n("COMPUTE",Date.now(),Date.now()+8e4);try{const i=await r.Kj.connect("primerz/face-to-all-777");0===t?i.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasart"}).then((()=>{i.predict("/run_lora",{face_image:e,prompt:"In lucasarts style : a precise illustration of ('A person':0.35) (in lucasarts style). Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 3D, detailed illustration, natural color. lucasarts style.",negative:"Photography, too simple, photo, picture, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.925,face_strength:.95,image_strength:.25,guidance_scale:9.25,depth_control_scale:.75}).then((async e=>{s(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{a(e.message)}))})).catch((e=>{a(e.message)})):1===t?i.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/pixl"}).then((()=>{i.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.9,face_strength:.95,image_strength:.2,guidance_scale:9,depth_control_scale:.8}).then((async e=>{s(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{a(e.message)}))})).catch((e=>{a(e.message)})):2===t&&i.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasartsxbrz2"}).then((()=>{i.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.9,face_strength:.95,image_strength:.18,guidance_scale:9,depth_control_scale:.8}).then((async e=>{s(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{a(e.message)}))})).catch((e=>{a(e.message)}))}catch(e){a("Please Try Again Later")}})).catch((async function(s,a){i("AI CONVERT"),n("COMPUTE",Date.now(),Date.now()+8e4);try{const i=await r.Kj.connect("primerz/face-to-all-666");0===t?i.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasart"}).then((()=>{i.predict("/run_lora",{face_image:e,prompt:"In lucasarts style : a precise illustration of ('A person':0.35) (in lucasarts style). Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 3D, detailed illustration, natural color. lucasarts style.",negative:"Photography, too simple, photo, picture, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.925,face_strength:.95,image_strength:.25,guidance_scale:9.25,depth_control_scale:.75}).then((async e=>{s(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{a(e.message)}))})).catch((e=>{a(e.message)})):1===t?i.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/pixl"}).then((()=>{i.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.9,face_strength:.95,image_strength:.2,guidance_scale:9,depth_control_scale:.8}).then((async e=>{s(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{a(e.message)}))})).catch((e=>{a(e.message)})):2===t&&i.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasartsxbrz2"}).then((()=>{i.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.9,face_strength:.95,image_strength:.18,guidance_scale:9,depth_control_scale:.8}).then((async e=>{s(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{a(e.message)}))})).catch((e=>{a(e.message)}))}catch(e){a("Please Try Again Later")}}))}},34274:(e,t,i)=>{i.a(e,(async(e,r)=>{try{i.d(t,{E:()=>_,z:()=>c});i(54743),i(11745),i(22134),i(61740),i(75044),i(48345),i(28845),i(373),i(62953),i(22774),i(23138);var n=i(90010),s=i(2232);function a(e,t,i){const r=e*t;let n=Math.sqrt(i/r);return Math.min(n,1)}function o(e,t){let i;try{if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");i=new OffscreenCanvas(e,t)}catch(r){i=document.createElement("canvas"),i.width=e,i.height=t}return i}function l(e){e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1}await(0,s.Ay)();const _=async function(e,t,i,r){const n=t*i,s=await createImageBitmap(e),_=a(s.width,s.height,n),c=o(s.width,s.height),p=c.getContext("2d");l(p),p.drawImage(s,0,0,s.width,s.height),s.close();const u=p.getImageData(0,0,c.width,c.height),h=new Uint32Array(u.data.buffer),d=Uint32Array.from(new Set(h));return!!Boolean(_<=1&&d.length<r)&&u},c=async function(e,t,i,r,_,c,p,u){if(p)try{e=await(0,n.I)(e,u,_,c)}catch(e){}const h=t*i,d=await createImageBitmap(e,{resizeQuality:"pixelated"}),g=a(d.width,d.height,h),m=Math.round(d.width*g),f=Math.round(d.height*g),y=o(m,f),x=y.getContext("2d");l(x),x.drawImage(d,0,0,m,f),d.close();const b=x.getImageData(0,0,m,f);x.putImageData(b,0,0);l(o(1,1).getContext("2d",{willReadFrequently:!0}));const w=function(e,t,i){const r=a(t.width,t.height,e.size*e.size),n=t.width,o=t.height,l=Math.round(n*r),_=Math.round(o*r),c=(0,s.Ws)(i,n,o,l,_,4,24);return function(e,t){const i=(0,s.TF)(e.data,e.width,e.height,t,!1);return new ImageData(new Uint8ClampedArray(i.data),i.width,i.height)}(new ImageData(new Uint8ClampedArray(c.data),c.width,c.height),e.colors)};return{artworks:[{name:"XS",size:90,colors:50},{name:"S",size:120,colors:60},{name:"M",size:150,colors:70},{name:"L",size:180,colors:80},{name:"XL",size:210,colors:90},{name:"XXL",size:240,colors:100}].map((function(e){return e.imageData=w(e,y,x.getImageData(0,0,y.width,y.height).data),e})),prompt:prompt||""}};r()}catch(p){r(p)}}),1)}}]);