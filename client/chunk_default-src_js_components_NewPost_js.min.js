"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["default-src_js_components_NewPost_js"],{32163:(e,t,a)=>{a.d(t,{A:()=>k});a(42762),a(62953);var i=a(17402),n=a(5556),r=a.n(n),s=a(8728),o=a(7160),l=a(88016),c=a(38306),p=a(33615),d=a(79626),u=a(69312),h=a(95652),m=a(32485),f=a.n(m);const g=["allowDuplicates","alwaysShowPlaceholder","blurBehavior","children","chipRenderer","classes","className","clearInputValueOnChange","dataSource","dataSourceConfig","defaultValue","delayBeforeAdd","disabled","disableUnderline","error","filter","FormHelperTextProps","fullWidth","fullWidthInput","helperText","id","InputProps","inputRef","InputLabelProps","inputValue","label","newChipKeyCodes","newChipKeys","onBeforeAdd","onAdd","onBlur","onDelete","onChange","onFocus","onKeyDown","onKeyPress","onKeyUp","onUpdateInput","placeholder","readOnly","required","rootRef","value","variant","endAdornment"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},_.apply(null,arguments)}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w={standard:s.A,filled:o.Ay,outlined:l.A},x=8,A=46,C=37,E=39;class S extends i.default.PureComponent{constructor(e){super(e),v(this,"state",{chips:[],errorText:void 0,focusedChip:null,inputValue:"",isClean:!0,isFocused:!1,chipsUpdated:!1,prevPropsValue:[]}),v(this,"focus",(()=>{this.actualInput.focus(),null!=this.state.focusedChip&&this.setState({focusedChip:null})})),v(this,"handleInputBlur",(e=>{this.props.onBlur&&this.props.onBlur(e),this.setState({isFocused:!1}),null!=this.state.focusedChip&&this.setState({focusedChip:null});const t=e.target.value;let a;switch(this.props.blurBehavior){case"add-or-clear":a={clearInputOnFail:!0};case"add":if(this.props.delayBeforeAdd){const e=(this.props.value||this.state.chips).length;this.inputBlurTimeout=setTimeout((()=>{const i=(this.props.value||this.state.chips).length;e===i?this.handleAddChip(t,a):this.clearInput()}),150)}else this.handleAddChip(t,a);break;case"clear":this.clearInput()}})),v(this,"handleInputFocus",(e=>{this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(e)})),v(this,"handleKeyDown",(e=>{const{focusedChip:t}=this.state;if(this._keyPressed=!1,this._preventChipCreation=!1,this.props.onKeyDown&&(this.props.onKeyDown(e),e.isDefaultPrevented()))return;const a=this.props.value||this.state.chips;if(this.props.newChipKeyCodes.indexOf(e.keyCode)>=0||this.props.newChipKeys.indexOf(e.key)>=0){!1!==this.handleAddChip(e.target.value)&&e.preventDefault()}else switch(e.keyCode){case x:""===e.target.value&&(null!=t?(this.handleDeleteChip(a[t],t),t>0&&this.setState({focusedChip:t-1})):this.setState({focusedChip:a.length-1}));break;case A:""===e.target.value&&null!=t&&(this.handleDeleteChip(a[t],t),t<=a.length-1&&this.setState({focusedChip:t}));break;case C:null==t&&""===e.target.value&&a.length?this.setState({focusedChip:a.length-1}):null!=t&&t>0&&this.setState({focusedChip:t-1});break;case E:null!=t&&t<a.length-1?this.setState({focusedChip:t+1}):this.setState({focusedChip:null});break;default:this.setState({focusedChip:null})}})),v(this,"handleKeyUp",(e=>{!this._preventChipCreation&&(this.props.newChipKeyCodes.indexOf(e.keyCode)>=0||this.props.newChipKeys.indexOf(e.key)>=0)&&this._keyPressed?this.clearInput():this.updateInput(e.target.value),this.props.onKeyUp&&this.props.onKeyUp(e)})),v(this,"handleKeyPress",(e=>{this._keyPressed=!0,this.props.onKeyPress&&this.props.onKeyPress(e)})),v(this,"handleUpdateInput",(e=>{null==this.props.inputValue&&this.updateInput(e.target.value),this.props.onUpdateInput&&this.props.onUpdateInput(e)})),v(this,"setActualInputRef",(e=>{this.actualInput=e,this.props.inputRef&&this.props.inputRef(e)})),e.defaultValue&&(this.state.chips=e.defaultValue),this.labelRef=i.default.createRef(),this.input=i.default.createRef()}componentDidMount(){"outlined"===this.props.variant&&(this.labelNode=i.default.findDOMNode(this.labelRef.current),this.forceUpdate())}componentWillUnmount(){clearTimeout(this.inputBlurTimeout)}static getDerivedStateFromProps(e,t){let a=null;return e.value&&e.value.length!==t.prevPropsValue.length&&(a={prevPropsValue:e.value},e.clearInputValueOnChange&&(a.inputValue="")),e.clearInputValueOnChange&&e.value&&e.value.length!==t.prevPropsValue.length&&(a={prevPropsValue:e.value,inputValue:""}),e.disabled&&(a=y(y({},a),{},{focusedChip:null})),!t.chipsUpdated&&e.defaultValue&&(a=y(y({},a),{},{chips:e.defaultValue})),a}blur(){this.input&&this.actualInput.blur()}handleAddChip(e,t){if(this.props.onBeforeAdd&&!this.props.onBeforeAdd(e))return this._preventChipCreation=!0,null!=t&&t.clearInputOnFail&&this.clearInput(),!1;this.clearInput();const a=this.props.value||this.state.chips;return this.props.dataSourceConfig?("string"==typeof e&&(e={[this.props.dataSourceConfig.text]:e,[this.props.dataSourceConfig.value]:e}),!this.props.allowDuplicates&&a.some((t=>t[this.props.dataSourceConfig.value]===e[this.props.dataSourceConfig.value]))||(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([...this.state.chips,e])),!0):e.trim().length>0&&((this.props.allowDuplicates||-1===a.indexOf(e))&&(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([...this.state.chips,e])),!0)}handleDeleteChip(e,t){if(this.props.value)this.props.onDelete&&this.props.onDelete(e,t);else{const e=this.state.chips.slice();if(e.splice(t,1)){let a=this.state.focusedChip;this.state.focusedChip===t?a=null:this.state.focusedChip>t&&(a=this.state.focusedChip-1),this.updateChips(e,{focusedChip:a})}}}updateChips(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setState(y({chips:e,chipsUpdated:!0},t)),this.props.onChange&&this.props.onChange(e)}clearInput(){this.updateInput("")}updateInput(e){this.setState({inputValue:e})}render(){const e=this.props,{allowDuplicates:t,alwaysShowPlaceholder:a,blurBehavior:n,children:r,chipRenderer:s=I,classes:o,className:l,clearInputValueOnChange:p,dataSource:d,dataSourceConfig:m,defaultValue:b,delayBeforeAdd:y,disabled:v,disableUnderline:x,error:A,filter:C,FormHelperTextProps:E,fullWidth:S,fullWidthInput:k,helperText:z,id:P,InputProps:D={},inputRef:O,InputLabelProps:U={},inputValue:T,label:q,newChipKeyCodes:B,newChipKeys:R,onBeforeAdd:M,onAdd:F,onBlur:j,onDelete:K,onChange:V,onFocus:W,onKeyDown:N,onKeyPress:L,onKeyUp:$,onUpdateInput:X,placeholder:H,readOnly:Z,required:Q,rootRef:Y,value:G,variant:J,endAdornment:ee}=e,te=function(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;a[i]=e[i]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,g),ae=G||this.state.chips,ie=null!=T?T:this.state.inputValue,ne=(this.props.value||ie).length>0||ie.length>0,re=null!=U.shrink?U.shrink:null!=q&&(ne||this.state.isFocused||ae.length>0),se=ae.map(((e,t)=>{const a=m?e[m.value]:e;return s({value:a,text:m?e[m.text]:e,chip:e,isDisabled:!!v,isReadOnly:Z,isFocused:this.state.focusedChip===t,handleClick:()=>this.setState({focusedChip:t}),handleDelete:()=>this.handleDeleteChip(e,t),className:o.chip},t)})),oe={};"outlined"===J&&(oe.notched=re,oe.labelWidth=re&&this.labelNode&&this.labelNode.offsetWidth||0),"standard"!==J?oe.startAdornment=i.default.createElement(i.default.Fragment,null,se):D.disableUnderline=!0,oe.endAdornment=ee;const le=w[J];return i.default.createElement(u.A,_({ref:Y,fullWidth:S,className:f()(l,o.root,{[o.marginDense]:"dense"===te.margin}),error:A,required:ae.length>0?void 0:Q,onClick:this.focus,disabled:v,variant:J},te),q&&i.default.createElement(c.A,_({htmlFor:P,classes:{root:f()(o[J],o.label),shrink:o.labelShrink},shrink:re,focused:this.state.isFocused,variant:J,ref:this.labelRef,required:Q},U),q),i.default.createElement("div",{className:f()(o[J],o.chipContainer,{[o.focused]:this.state.isFocused,[o.underline]:!x&&"standard"===J,[o.disabled]:v,[o.labeled]:null!=q,[o.error]:A})},"standard"===J&&se,i.default.createElement(le,_({ref:this.input,classes:{input:f()(o.input,o[J]),root:f()(o.inputRoot,o[J])},id:P,value:ie,onChange:this.handleUpdateInput,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,inputRef:this.setActualInputRef,disabled:v,fullWidth:k,placeholder:!ne&&(re||null==q)||a?H:null,readOnly:Z},D,oe))),z&&i.default.createElement(h.A,_({},E,{className:E?f()(E.className,o.helperText):o.helperText}),z))}}S.propTypes={endAdornment:r().node,allowDuplicates:r().bool,alwaysShowPlaceholder:r().bool,blurBehavior:r().oneOf(["clear","add","add-or-clear","ignore"]),chipRenderer:r().func,clearInputValueOnChange:r().bool,dataSource:r().array,dataSourceConfig:r().shape({text:r().string.isRequired,value:r().string.isRequired}),defaultValue:r().array,delayBeforeAdd:r().bool,disabled:r().bool,disableUnderline:r().bool,FormHelperTextProps:r().object,fullWidth:r().bool,fullWidthInput:r().bool,helperText:r().node,InputLabelProps:r().object,InputProps:r().object,inputRef:r().func,inputValue:r().string,label:r().node,newChipKeyCodes:r().arrayOf(r().number),newChipKeys:r().arrayOf(r().string),onAdd:r().func,onBeforeAdd:r().func,onChange:r().func,onDelete:r().func,onUpdateInput:r().func,placeholder:r().string,readOnly:r().bool,value:r().array,variant:r().oneOf(["outlined","standard","filled"])},S.defaultProps={allowDuplicates:!1,blurBehavior:"clear",clearInputValueOnChange:!1,delayBeforeAdd:!1,disableUnderline:!1,newChipKeyCodes:[13],newChipKeys:["Enter"],variant:"standard"};const k=(0,d.default)((e=>{const t="light"===e.palette.type,a=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{},inputRoot:{display:"inline-flex",flexWrap:"wrap",flex:1,marginTop:0,minWidth:70,"&$outlined,&$filled":{boxSizing:"border-box"},"&$outlined":{paddingTop:14},"&$filled":{paddingTop:28}},input:{display:"inline-block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",appearance:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",float:"left",flex:1},chipContainer:{display:"flex",flexFlow:"row wrap",cursor:"text",marginBottom:-2,minHeight:40,"&$labeled&$standard":{marginTop:18}},outlined:{"& input":{height:16,paddingTop:4,paddingBottom:12,marginTop:4,marginBottom:4}},standard:{},filled:{"& input":{height:22,marginBottom:4,marginTop:4,paddingTop:0},"$marginDense & input":{height:26}},labeled:{},label:{top:4,"&$outlined&:not($labelShrink)":{top:2,"$marginDense &":{top:5}},"&$filled&:not($labelShrink)":{top:15,"$marginDense &":{top:20}}},labelShrink:{top:0},helperText:{marginBottom:-20},focused:{},disabled:{},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary[t?"dark":"light"]),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(a)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{"&:after":{backgroundColor:e.palette.error.main,transform:"scaleX(1)"}},chip:{margin:"0 8px 8px 0",float:"left"},marginDense:{}}}),{name:"WAMuiChipInput"})(S),I=(e,t)=>{let{value:a,text:n,isFocused:r,isDisabled:s,isReadOnly:o,handleClick:l,handleDelete:c,className:d}=e;return i.default.createElement(p.A,{key:t,className:d,style:{pointerEvents:s||o?"none":void 0,backgroundColor:r?"rgb(96, 96, 96)":void 0},onClick:l,onDelete:c,label:n})}},40497:(e,t,a)=>{a.a(e,(async(e,i)=>{try{a.d(t,{A:()=>O});a(54743),a(11745),a(21489),a(22134),a(75044),a(28845),a(373),a(62953),a(3296),a(27208),a(48408);var n=a(17402),r=a(79626),s=a(52706),o=a(65816),l=a(68016),c=a(96746),p=a(39870),d=a(54392),u=a(8728),h=a(69113),m=a(83182),f=a(69312),g=a(15776),_=a(94422),b=a(72572),y=a(44041),v=a(44385),w=a(34274),x=a(69232),A=a(32163),C=a(95834),E=a(40024),S=e([w]);function k(e,t,a){return(t=I(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(e){var t=z(e,"string");return"symbol"==typeof t?t:t+""}function z(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}w=(S.then?(await S)():S)[0],await(0,E.Ay)();const P=e=>({dropZone:{width:"100%",height:"100%",minHeight:"384px",border:"2px dashed #666",textAlign:"center",verticalAlign:"middle",backgroundColor:"transparent",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 225ms"},dropZoneActive:{width:"100%",height:"100%",minHeight:"384px",border:"2px solid #666",textAlign:"center",verticalAlign:"middle",backgroundColor:"rgba(255, 255, 255, 0.07)",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 25ms"},whiteDialog:{backgroundColor:"#fff !important",color:"#000 !important",boxShadow:"0px 11px 15px -7px rgb(255 255 255 / 20%), 0px 24px 38px 3px rgb(255 255 255 / 14%), 0px 9px 46px 8px rgb(255 255 255 / 12%) !important","& .MuiButton-textPrimary":{color:"#222 !important","&:hover":{color:"#000 !important"}},"& .MuiButton-containedPrimary":{color:"#fff !important",backgroundColor:"#000 !important","&:hover":{color:"#ddd !important",backgroundColor:"#222 !important"}},"& .MuiRadio-colorPrimary.Mui-checked, & .MuiCheckbox-colorPrimary.Mui-checked, & .MuiRadio-colorSecondary.Mui-checked":{color:"#000 !important"},"& .MuiRadio-root, & .MuiFormLabel-root.Mui-focused, .MuiTypography-root":{color:"#000 !important"},"& .MuiSlider-root":{color:"#000 !important"},"& span.MuiSlider-valueLabel > span > span":{color:"#fff !important"}},inputImage:{margin:"0px 0px -4px 0px",borderRadius:"12px",width:"100%",filter:"grayscale(1) contrast(.8) brightness(0.55) opacity(0.65) blur(8px)",transition:"filter 400ms cubic-bezier(0.4, 0, 0.2, 1) 25ms !important",animationName:"$opacity-create",animationTimingFunction:"ease-in-out",animationDuration:"2400ms",animationFillMode:"both",animationDelay:"1200ms",animationDirection:"alternate",animationIterationCount:"infinite","@global":{"@keyframes opacity-create":{"0%":{opacity:"0.666"},"100%":{opacity:"1.000"}}},"&:hover":{filter:"grayscale(0.15) contrast(.8) brightness(0.6) opacity(0.7) blur(0px)"},"&::after":{content:"''",position:"absolute",left:0,top:0,width:"100%",height:"100%",background:"linear-gradient(to top, black, transparent)"}}});class D extends n.PureComponent{constructor(e){var t;super(e),t=this,k(this,"_resetProps",(()=>{try{URL.revokeObjectURL(this.state._input_file_url)}catch(e){}this.setState({_drop_ref:null,_preferred_size:"M",_title:"",_currentStep:0,_totalStep:3,_drag_file:{},_cache:{},_preview:{},_preview_kb:0,_previews:[],_canvas:{},_offscreen_canvas:{},_base64:"",_style:0,_dropzone_active:!1,_message:"We maintains privacy and doesn't store uploaded images.",_close_confirm_close_open:!1,_quantize_dialog_open:!1,_quantize_downscale:4,_quantize_colors:64,process:{name:"upload file",start:0,finish:0}},this.forceUpdate)})),k(this,"_setTags",(e=>{this.setState({_tags:e.target.value.toString()},this.forceUpdate)})),k(this,"_drop_start",(e=>{e.preventDefault(),e.stopPropagation();const t=this.state._dropzone_active;this.setState({_dropzone_active:!0},(()=>{t||this.forceUpdate()}))})),k(this,"_drop_end",(e=>{e.preventDefault(),e.stopPropagation();const t=this.state._dropzone_active;this.setState({_dropzone_active:!1},(()=>{t&&this.forceUpdate()}))})),k(this,"_trigger_message",(e=>{this.setState({_message:e},this.forceUpdate)})),k(this,"_handle_file_upload",(async e=>{"dataTransfer"in e&&e.dataTransfer.files.length>0&&(e.preventDefault(),e.stopPropagation());const t=(e.target||{}).files||(e.srcElement||{}).files||(e.currentTarget||{}).files||((e.path||[])[0]||{}).files||(e.dataTransfer||{}).files||[],a=t[0]||null;let i=null;for(let e=0;e<t.length;e++)i=t[e],i.type.startsWith("image/")&&(e=t.length);if(null===i&&null===a);else if(null!==i){Boolean("image/png"===i.type)||i.type;const e=await(0,w.E)(i,512,512,160);if(e instanceof ImageData)this._trigger_message("The image appears to be already optimized!"),this.setState({_previews:[{name:"default",imageData:e}],_title:"",_currentStep:1,process:{name:"upload file",start:0,finish:0}},(()=>{this.forceUpdate((()=>{this._set_size()}))}));else{try{URL.revokeObjectURL(this.state._input_file_url)}catch(e){}const e=URL.createObjectURL(i);this.setState({_input_file_url:e,_use_ai_open:!0,_input_file:i},this.forceUpdate)}}})),k(this,"_setTitle",(e=>{this.setState({_title:e.target.value},this.forceUpdate)})),k(this,"_set_process",((e,t,a)=>{const i=setInterval(this.forceUpdate.bind(this),250),n=setTimeout((()=>{this.state.process._interval===i&&clearInterval(this.state.process._interval)}),a-t);this.setState({process:{name:e,start:t,finish:a,_interval:i,_timout:n}},(()=>{this.forceUpdate()}))})),k(this,"_handle_size_change",(e=>{this.setState({_preferred_size:e.target.value},(()=>{this._set_size()}))})),k(this,"_handle_style_change",(e=>{this.setState({_style:parseInt(e.target.value)},(()=>{this.forceUpdate()}))})),k(this,"_set_canvas_ref",(e=>{if(void 0===e)return this._set_size();if(null==e)return this._set_size();if(void 0===e.width)return this._set_size();if(null==e.width)return this._set_size();if("function"==typeof e.getContext){var t=e;t.context=e.getContext("2d"),this.setState({_canvas:t},(()=>{this._set_size()}))}})),k(this,"_set_size",(()=>{this.state._previews.forEach((e=>{1!==this.state._previews.length&&e.name.toUpperCase()!==this.state._preferred_size.toUpperCase()||this.setState({_preview:e.imageData},(()=>{this.state._canvas.width=this.state._preview.width,this.state._canvas.height=this.state._preview.height,(0,x.A)((()=>Promise.all([a.e("default-src_js_utils_encodeImage_js"),a.e("default-src_js_utils_png_quant_js")]).then(a.bind(a,15656)))).then((e=>{let{encodeIMG:t}=e;t(this.state._preview,"WEBP",!0).then((e=>{this.setState({_base64:e},(()=>{this.forceUpdate((()=>{this.state._canvas.context.putImageData(this.state._preview,0,0)}))}))}))}))}))}))})),k(this,"download_artwork",(()=>{let e=document.createElement("a");e.download="Pixagram.webp",e.href=this.state._base64,e.click(),e.remove()})),k(this,"_set_drop_ref",(e=>{null!=e&&this.setState({_drop_ref:e},(()=>{this.state._drop_ref.addEventListener("drop",this._handle_file_upload.bind(this)),this.state._drop_ref.addEventListener("dragenter",this._drop_start.bind(this)),this.state._drop_ref.addEventListener("dragover",this._drop_start.bind(this)),this.state._drop_ref.addEventListener("dragleave",this._drop_end.bind(this)),this.state._drop_ref.addEventListener("dragend",this._drop_end.bind(this))}))})),k(this,"_backOrCancel",(e=>{parseInt(this.state._currentStep)<=1?e?this.close_confirm():this.setState({_close_confirm_close_open:!0},this.forceUpdate):this.setState({_currentStep:parseInt(this.state._currentStep)-1},this.forceUpdate)})),k(this,"request_close",(()=>{this.setState({_close_confirm_close_open:!0},this.forceUpdate)})),k(this,"_nextOrFinish",(()=>{2===parseInt(this.state._currentStep)?(this._resetProps(),this.props.onClose()):this.setState({_currentStep:parseInt(this.state._currentStep)+1},this.forceUpdate)})),k(this,"_open_link",(e=>{window.open(e,"_blank")})),k(this,"close_confirm_close",(()=>{this.setState({_close_confirm_close_open:!1},(()=>{this.forceUpdate()}))})),k(this,"close_use_ai",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({_use_ai_open:!1,_use_ai:e},(()=>{t.forceUpdate((async()=>{const a=await(0,w.z)(t.state._input_file,4096,4096,void 0,t._trigger_message,t._set_process,e,t.state._style);t.setState({_previews:a.artworks,_cache:a.artwork,_title:a.prompt,_currentStep:1,process:{name:"upload file",start:0,finish:0}},(()=>{t.forceUpdate((()=>{t._set_size()}))}))}))}))})),k(this,"close_confirm",(()=>{this.setState({_close_confirm_close_open:!1},(()=>{this.forceUpdate((()=>{this._resetProps(),this.props.onClose()}))}))})),k(this,"_set_quantize_preview_canvas_ref",(e=>{e&&this.state._quantize_preview_canvas!==e&&this.setState({_quantize_preview_canvas:e},(()=>{this._update_quantize_preview(),this.forceUpdate()}))})),k(this,"_open_quantize_dialog",(()=>{this.setState({_quantize_dialog_open:!0,_quantize_downscale:4,_quantize_colors:64},(()=>{this.forceUpdate()}))})),k(this,"_close_quantize_dialog",(e=>{if(e){const e=this.quantizeAndResize(this.state._preview,this.state._quantize_downscale,this.state._quantize_colors);this.setState({_preview:e,_quantize_dialog_open:!1,_currentStep:this.state._currentStep+1},(()=>{this.state._canvas&&this.state._canvas.context&&e&&(this.state._canvas.width=e.width,this.state._canvas.height=e.height,this.state._canvas.context.putImageData(e,0,0)),this.forceUpdate()}))}else this.setState({_quantize_dialog_open:!1},(()=>{this.forceUpdate()}))})),k(this,"_handle_downscale_change",((e,t)=>{this.setState({_quantize_downscale:t},(()=>{this._debounced_quantize_update(),this.forceUpdate()}))})),k(this,"_handle_colors_change",((e,t)=>{this.setState({_quantize_colors:t},(()=>{this._debounced_quantize_update(),this.forceUpdate()}))})),k(this,"_debounced_quantize_update",(()=>{this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((()=>{this._update_quantize_preview()}),300)})),k(this,"_update_quantize_preview",(()=>{const e=this.state._quantize_preview_canvas;if(!e)return;const t=this.quantizeAndResize(this.state._cache,this.state._quantize_downscale,this.state._quantize_colors);if(t&&e.getContext){e.width=t.width,e.height=t.height;const a=e.getContext("2d");a.clearRect(0,0,t.width,t.height),a.putImageData(t,0,0)}})),k(this,"quantizeAndResize",((e,t,a)=>{const i=new E.Cf(new Uint8Array(e.data),e.width,e.height),n=i.process(t,a),[r,s]=i.get_processed_dimensions(t);return new ImageData(new Uint8ClampedArray(n),parseInt(r),parseInt(s))})),this.state={classes:e.classes,keepMounted:e.keepMounted||!1,open:e.open,_drop_ref:null,_preferred_size:"M",_title:"",_currentStep:0,_totalStep:3,_drag_file:{},_cache:{},_preview:{},_preview_kb:0,_previews:[],_canvas:{},_offscreen_canvas:{},_base64:"",_style:0,_use_ai:!1,_use_ai_open:!1,_input_file:{},_input_file_url:"",_dropzone_active:!1,_tags:[],_message:"We maintains privacy and doesn't store uploaded images.",_close_confirm_close_open:!1,_quantize_dialog_open:!1,_quantize_downscale:4,_quantize_colors:64,_quantize_preview_canvas:{},_quantize_debounce_timer:null,process:{name:"upload file",start:0,finish:0}},this.debounceTimeout=null}shouldComponentUpdate(e,t,a){return!1}componentWillReceiveProps(e){this.setState(e,(()=>{this.forceUpdate()}))}render(){const{classes:e,_title:t,_preferred_size:a,_currentStep:i,_totalStep:r,open:w,keepMounted:x,_preview:E,_dropzone_active:S,process:k,_base64:I,_tags:z,_previews:P,_message:D,_close_confirm_close_open:O,_use_ai_open:U,_use_ai:T,_style:q,_input_file_url:B,_quantize_dialog_open:R,_quantize_downscale:M,_quantize_colors:F}=this.state,{name:j,start:K,finish:V}=k;Math.round(i/r*100);let W=null,N=V-K,L=Date.now()-K,$=L/N,X=N>L,H=((I||"").length||0)/1e3*3/4;switch(i.toString()){case"0":W=n.createElement("div",{ref:this._set_drop_ref},n.createElement("div",{style:{borderRadius:"12px"},className:S?e.dropZoneActive:e.dropZone},n.createElement(C.A,{in:B,timeout:300},n.createElement("img",{src:B,className:e.inputImage+" pixelated",alt:"Input Image"})),n.createElement(u.A,{onChange:this._handle_file_upload,accept:"image/*",style:{display:"none",position:"absolute"},id:"button-file-dialog-secondary",type:"file"}),n.createElement(C.A,{in:!0,timeout:600},n.createElement("div",{style:{pointerEvents:X||"upload file"!==j?"none":"auto",transform:"translate(-50%, -50%)",top:"50%",left:"50%",position:"absolute",display:"inline"}},n.createElement(C.A,{in:!0,timeout:600},n.createElement(c.A,{disabled:X||"upload file"!==j,component:"label",htmlFor:"button-file-dialog-secondary",onClick:this._handle_file_upload},n.createElement("span",{style:{fontWeight:"bold",fontSize:"24px",verticalAlign:"super",color:"#999",marginRight:"16px"}},j||"Upload Image"),X||"upload file"!==j?n.createElement(h.A,{position:"relative",display:"inline-flex"},n.createElement(m.A,{variant:X?"determinate":"indeterminate",color:"#ffffff",value:Math.round(100*$)}),n.createElement(h.A,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},n.createElement(d.A,{variant:"caption",component:"div",color:"textSecondary"},X?"".concat(Math.round(Math.min(100*$,100)),"%"):"wait"))):n.createElement(v.A,{style:{color:"#666"}}))),n.createElement(C.A,{in:!0,timeout:900},n.createElement("p",{style:{textAlign:"center",color:"#a7a7a7"}},D))))));break;case"1":W=n.createElement("div",{noValidate:!0,autoComplete:"off",style:{position:"relative"}},n.createElement(f.A,{component:"fieldset",style:{padding:"8px 16px 64px 16px",position:"absolute",background:"linear-gradient(180deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",top:"0px"}},1===(P||0).length?n.createElement(C.A,{in:!0,timeout:600},n.createElement("p",null,"Your artwork is already optimized for pixel art")):n.createElement(s.A,{row:!0,defaultValue:"top","aria-label":"size",name:"SIZE",color:"primary",value:a,onChange:this._handle_size_change},n.createElement(C.A,{in:!0,timeout:200},n.createElement(g.A,{value:"XS",control:n.createElement(_.A,null),label:"XS"})),n.createElement(C.A,{in:!0,timeout:400},n.createElement(g.A,{value:"S",control:n.createElement(_.A,null),label:"S"})),n.createElement(C.A,{in:!0,timeout:600},n.createElement(g.A,{value:"M",control:n.createElement(_.A,null),label:"M"})),n.createElement(C.A,{in:!0,timeout:800},n.createElement(g.A,{value:"L",control:n.createElement(_.A,null),label:"L"})),n.createElement(C.A,{in:!0,timeout:1e3},n.createElement(g.A,{value:"XL",control:n.createElement(_.A,null),label:"XL"})),n.createElement(C.A,{in:!0,timeout:1200},n.createElement(g.A,{value:"XXL",control:n.createElement(_.A,null),label:"XXL"})))),n.createElement("div",{className:"pixelated",style:{width:"100%"}},n.createElement("canvas",{style:{borderRadius:"12px",width:"100%"},ref:this._set_canvas_ref,width:E.width+"px",height:E.height+"px"})),n.createElement("div",{style:{padding:"64px 8px 16px 8px",textAlign:"right",position:"absolute",background:"linear-gradient(0deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",bottom:"0px"}},n.createElement(C.A,{in:!0,timeout:600},n.createElement(c.A,{variant:"text",color:"#ffffff88",onClick:this._open_quantize_dialog},"QUANTIZE")),n.createElement(C.A,{in:!0,timeout:800},n.createElement(c.A,{variant:"text",color:"#ffffff88",onClick:this.download_artwork},"DOWNLOAD (",H.toFixed(2)," kB)")),n.createElement(C.A,{in:!0,timeout:1e3},n.createElement(c.A,{variant:"text",color:"#ffffff88",onClick:()=>this._open_link("https://pixa.pics/")},"OPEN EDITOR"))));break;case"2":W=n.createElement(C.A,{in:!0,timeout:300},n.createElement("div",{noValidate:!0,autoComplete:"off"},n.createElement(b.A,{style:{marginTop:12},value:t,fullWidth:!0,label:"Title",variant:"outlined",onChange:this._setTitle}),n.createElement(b.A,{style:{marginTop:24,marginBottom:24},label:"Content",multiline:!0,rows:1,defaultValue:I,variant:"filled",disabled:!0,fullWidth:!0}),n.createElement(b.A,{style:{marginTop:24,marginBottom:24},label:"Description",multiline:!0,minRows:6,defaultValue:"",variant:"outlined",fullWidth:!0}),n.createElement(A.A,{style:{marginBottom:12},fullWidth:!0,variant:"outlined",label:"Tags",placeholder:"Tags for content classification"})))}return n.createElement(n.Fragment,null,n.createElement(p.A,{open:w,maxWidth:"sm",fullWidth:!0,disablePortal:!1,onClose:this.request_close,keepMounted:!1},n.createElement(l.A,null,n.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Publisher"),W),n.createElement(o.A,{style:{textAlign:"right"}},n.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:()=>this._backOrCancel(Boolean(!X&&"upload file"==j))},parseInt(i)>0?"Back":"Cancel"),n.createElement(c.A,{variant:"contained",color:"primary",disabled:0===parseInt(i),onClick:this._nextOrFinish},2===parseInt(i)?"Publish":"Next"))),n.createElement(p.A,{PaperProps:{classes:{root:e.whiteDialog}},open:O,maxWidth:"xs",disablePortal:!1,onClose:this.close_confirm_close,keepMounted:!1},n.createElement(l.A,null,n.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Are you sure?"),n.createElement(d.A,{variant:"body2",color:"textPrimary",component:"p"},"Your current artwork will be lost.")),n.createElement(o.A,{style:{textAlign:"right"}},n.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:this.close_confirm_close},"Cancel"),n.createElement(c.A,{variant:"contained",color:"primary",onClick:this.close_confirm},"Close"))),n.createElement(p.A,{PaperProps:{classes:{root:e.whiteDialog}},open:U,maxWidth:"xs",disablePortal:!1,onClose:()=>{this.close_use_ai(!0)},keepMounted:!1},n.createElement(l.A,null,n.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Choose Your Style (AI)"),n.createElement(f.A,{component:"fieldset"},n.createElement(s.A,{"aria-label":"style",name:"style",value:q.toString(),onChange:this._handle_style_change},n.createElement(g.A,{value:"3",control:n.createElement(_.A,null),label:"No Special Style"}),n.createElement(g.A,{value:"0",control:n.createElement(_.A,null),label:"Beautiful (AI)"}),n.createElement(g.A,{value:"1",control:n.createElement(_.A,null),label:"Natural (AI)"}),n.createElement(g.A,{value:"2",control:n.createElement(_.A,null),label:"Flat (AI)"}))),n.createElement(d.A,{variant:"body2",color:"textPrimary",component:"p"},"It takes around 100 seconds. ",n.createElement("b",null,"#Free")," ",n.createElement("b",null,"#Anonymous"))),n.createElement(o.A,{style:{textAlign:"right"}},n.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:()=>{this.close_use_ai(!1)}},"IGNORE"),n.createElement(c.A,{variant:"contained",color:"primary",onClick:()=>{"3"===q.toString()?this.close_use_ai(!1):this.close_use_ai(!0)}},"ACCEPT"))),n.createElement(p.A,{PaperProps:{classes:{root:e.whiteDialog}},open:R,maxWidth:"sm",fullWidth:!0,disablePortal:!1,onClose:()=>{this._close_quantize_dialog(!1)},keepMounted:!1},n.createElement(l.A,null,n.createElement(d.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Quantization Settings"),n.createElement(h.A,{style:{padding:"16px 0"}},n.createElement(d.A,{gutterBottom:!0},"Downscale Ratio: ",M,"x"),n.createElement(y.A,{value:M,onChange:this._handle_downscale_change,min:2,max:32,step:1,marks:[{value:2,label:"2x"},{value:8,label:"8x"},{value:16,label:"16x"},{value:32,label:"32x"}],valueLabelDisplay:"auto"})),n.createElement(h.A,{style:{padding:"16px 0"}},n.createElement(d.A,{gutterBottom:!0},"Number of Colors: ",F),n.createElement(y.A,{value:F,onChange:this._handle_colors_change,min:2,max:256,step:1,marks:[{value:2,label:"2"},{value:64,label:"64"},{value:128,label:"128"},{value:256,label:"256"}],valueLabelDisplay:"auto"})),n.createElement(h.A,{style:{marginTop:24}},n.createElement(d.A,{gutterBottom:!0,variant:"subtitle2"},"Preview:"),n.createElement("div",{className:"pixelated",style:{width:"100%",textAlign:"center"}},n.createElement("canvas",{style:{borderRadius:"12px",width:"100%"},ref:this._set_quantize_preview_canvas_ref})))),n.createElement(o.A,{style:{textAlign:"right"}},n.createElement(c.A,{variant:"text",color:"primary",onClick:()=>{this._close_quantize_dialog(!1)}},"Cancel"),n.createElement(c.A,{variant:"contained",color:"primary",onClick:()=>{this._close_quantize_dialog(!0)}},"Confirm"))))}}const O=(0,r.default)(P)(D);i()}catch(U){i(U)}}),1)},90010:(e,t,a)=>{a.d(t,{I:()=>n});a(54743),a(11745),a(27495),a(25440),a(42762),a(21489),a(61740),a(75044),a(28845),a(373),a(35874),a(12041),a(62953);var i=a(30687);const n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};return new Promise((async function(r,s){a("AI CONVERT"),n("COMPUTE",Date.now(),Date.now()+8e4);try{const a=await i.Kj.connect("primerz/face-to-all-777");0===t?a.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasart"}).then((()=>{a.predict("/run_lora",{face_image:e,prompt:"In lucasarts style : a very high quality yet detailed illustration of ('One person or some people with a homogeneous skin's tone':0.44) (in lucasarts style). Artwork, uniform skin tone, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 3D, detailed illustration, natural color. lucasarts style.",negative:"Photography, photo, picture, photo-realistic, bad quality, ugly, text, bad result, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed toes, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.925,face_strength:.95,image_strength:.25,guidance_scale:9.25,depth_control_scale:.75}).then((async e=>{r(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{s(e.message)}))})).catch((e=>{s(e.message)})):1===t?a.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/pixl"}).then((()=>{a.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.9,face_strength:.95,image_strength:.2,guidance_scale:9,depth_control_scale:.8}).then((async e=>{r(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{s(e.message)}))})).catch((e=>{s(e.message)})):2===t&&a.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasartsxbrz2"}).then((()=>{a.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.9,face_strength:.95,image_strength:.18,guidance_scale:9,depth_control_scale:.8}).then((async e=>{r(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{s(e.message)}))})).catch((e=>{s(e.message)}))}catch(e){s("Please Try Again Later")}})).catch((async function(r,s){a("AI CONVERT"),n("COMPUTE",Date.now(),Date.now()+8e4);try{const a=await i.Kj.connect("primerz/face-to-all-666");0===t?a.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasart"}).then((()=>{a.predict("/run_lora",{face_image:e,prompt:"In lucasarts style : a precise illustration of ('A person':0.35) (in lucasarts style). Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 3D, detailed illustration, natural color. lucasarts style.",negative:"Photography, too simple, photo, picture, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.925,face_strength:.95,image_strength:.25,guidance_scale:9.25,depth_control_scale:.75}).then((async e=>{r(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{s(e.message)}))})).catch((e=>{s(e.message)})):1===t?a.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/pixl"}).then((()=>{a.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.9,face_strength:.95,image_strength:.2,guidance_scale:9,depth_control_scale:.8}).then((async e=>{r(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{s(e.message)}))})).catch((e=>{s(e.message)})):2===t&&a.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasartsxbrz2"}).then((()=>{a.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.9,face_strength:.95,image_strength:.18,guidance_scale:9,depth_control_scale:.8}).then((async e=>{r(await(await fetch(e.data[0][1].url)).blob())})).catch((e=>{s(e.message)}))})).catch((e=>{s(e.message)}))}catch(e){s("Please Try Again Later")}}))}},34274:(e,t,a)=>{a.a(e,(async(e,i)=>{try{a.d(t,{E:()=>c,z:()=>p});a(54743),a(11745),a(22134),a(61740),a(75044),a(48345),a(28845),a(373),a(62953);var n=a(90010),r=a(2232);function s(e,t,a){const i=e*t;let n=Math.sqrt(a/i);return Math.min(n,1)}function o(e,t){let a;try{if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");a=new OffscreenCanvas(e,t)}catch(i){a=document.createElement("canvas"),a.width=e,a.height=t}return a}function l(e){e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1}await(0,r.Ay)();const c=async function(e,t,a,i){const n=(t=parseInt(t))*(a=parseInt(a)),r=await createImageBitmap(e),c=s(r.width,r.height,n),p=o(r.width,r.height),d=p.getContext("2d");l(d),d.drawImage(r,0,0,r.width,r.height),r.close();const u=d.getImageData(0,0,p.width,p.height),h=new Uint32Array(u.data.buffer),m=Uint32Array.from(new Set(h));return!!Boolean(c<=1&&m.length<i)&&u},p=async function(e,t,a,i,c,p,d,u){if(t=parseInt(t),a=parseInt(a),d)try{e=await(0,n.I)(e,u,c,p)}catch(e){}const h=t*a,m=await createImageBitmap(e,{resizeQuality:"pixelated"}),f=s(m.width,m.height,h),g=parseInt(Math.round(m.width*f)),_=parseInt(Math.round(m.height*f)),b=o(g,_),y=b.getContext("2d");l(y),y.drawImage(m,0,0,g,_),m.close();const v=y.getImageData(0,0,parseInt(g),parseInt(_));y.putImageData(v,0,0);l(o(1,1).getContext("2d",{willReadFrequently:!0}));const w=function(e,t,a){const i=s(t.width,t.height,e.size*e.size),n=t.width,o=t.height,l=Math.round(n*i),c=Math.round(o*i),p=(0,r.Ws)(a,n,o,l,c,4,24);return function(e,t){const a=(0,r.TF)(e.data,e.width,e.height,t,!1);return new ImageData(new Uint8ClampedArray(a.data),a.width,a.height)}(new ImageData(new Uint8ClampedArray(p.data),p.width,p.height),e.colors)};return{artwork:v,artworks:[{name:"XS",size:90,colors:50},{name:"S",size:120,colors:60},{name:"M",size:150,colors:70},{name:"L",size:180,colors:80},{name:"XL",size:210,colors:90},{name:"XXL",size:240,colors:100}].map((function(e){return e.imageData=w(e,b,y.getImageData(0,0,b.width,b.height).data),e})),prompt:prompt||""}};i()}catch(d){i(d)}}),1)}}]);