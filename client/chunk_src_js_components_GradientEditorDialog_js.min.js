"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_components_GradientEditorDialog_js"],{1626:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var i=r(17402),n=r(79626),a=r(39870),o=r(65816),s=r(68016),l=r(5696),h=r(96746),c=r(54392),d=r(27606),u=r(72572),m=r(44041),p=r(40827),g=r(84630),y=r(69312),b=r(38306),x=r(69440),f=r(69113),v=r(10819),C=r(46845),A=r(42460),M=r(96232),w=r(74616),E=r(86280),S=r(14944),_=r(91024),T=r(42561),P=r(23078),$=r(44122),R=r(48085),k=r(7612),z=r(19231);const H=e=>new Float32Array(0|e),L=e=>new Int32Array(0|e);function N(e){return(e=Math.round(e))<0?0:0|(e>255?255:e)}function F(e,t,r){return e<t?t:e>r?r:e}function G(e){return e*e}function B(e,t,r){return e+(t-e)*r}class I{static rgbToXyz(e,t,r){return t/=255,r/=255,{x:.4124564*(e=(e/=255)>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3575761*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.2126729*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92),y:.2126729*e+.7151522*t+.072175*r,z:.0193339*e+.119192*t+.9503041*r}}static xyzToLab(e,t,r){t/=1,r/=1.08883;const i=(e/=.95047)>.008856?Math.cbrt(e):7.787*e+16/116,n=t>.008856?Math.cbrt(t):7.787*t+16/116;return{l:116*n-16,a:500*(i-n),b:200*(n-(r>.008856?Math.cbrt(r):7.787*r+16/116))}}static labToLch(e,t,r){const i=Math.hypot(t,r);let n=180*Math.atan2(r,t)/Math.PI;return n<0&&(n+=360),{l:e,c:i,h:n}}static rgbToLch(e,t,r){const i=this.rgbToXyz(e,t,r),n=this.xyzToLab(i.x,i.y,i.z);return this.labToLch(n.l,n.a,n.b)}static lchToLab(e,t,r){const i=r*Math.PI/180;return{l:e,a:t*Math.cos(i),b:t*Math.sin(i)}}static labToXyz(e,t,r){const i=(e+16)/116,n=t/500+i,a=i-r/200,o=n*n*n,s=i*i*i,l=a*a*a;return{x:.95047*(o>.008856?o:(n-16/116)/7.787),y:1*(s>.008856?s:(i-16/116)/7.787),z:1.08883*(l>.008856?l:(a-16/116)/7.787)}}static xyzToRgb(e,t,r){let i=3.2404542*e-1.5371385*t-.4985314*r,n=.969266*-e+1.8760108*t+.041556*r,a=.0556434*e-.2040259*t+1.0572252*r;const o=e=>e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e;return i=o(i),n=o(n),a=o(a),{r:N(255*i),g:N(255*n),b:N(255*a)}}static lchToRgb(e,t,r){const i=this.lchToLab(e,t,r),n=this.labToXyz(i.l,i.a,i.b);return this.xyzToRgb(n.x,n.y,n.z)}static hexToRgb(e){return{r:0|parseInt(e.slice(1,3),16),g:0|parseInt(e.slice(3,5),16),b:0|parseInt(e.slice(5,7),16)}}static rgbToHex(e,t,r){const i=e=>{const t=(0|e).toString(16);return 1===t.length?"0"+t:t};return"#"+i(e)+i(t)+i(r)}}class W{constructor(e=null){null===e||""===e||"random"===e?(this.seed=2147483647*Math.random()>>>0,this.originalSeed="random"):"string"==typeof e?(this.seed=this.stringToSeed(e)>>>0,this.originalSeed=e):(this.seed=e>>>0,this.originalSeed=String(e)),this._initialSeed=this.seed>>>0}stringToSeed(e){let t=2166136261,r=0,i=0|e.length;for(r=0;r<i;r=r+1|0)t^=0|e.charCodeAt(r),t=0|Math.imul(t,16777619);return t>>>0}random(){return this.seed=(Math.imul(1664525,0|this.seed)+1013904223|0)>>>0,(this.seed>>>0)/4294967296}range(e,t){return e+this.random()*(t-e)}cloneWithSalt(e){const t=new W;return t.seed=(this._initialSeed^this.stringToSeed(String(e)))>>>0,t._initialSeed=t.seed>>>0,t}getSeed(){return this.originalSeed}}class O{constructor(e){this.rng=new W(e),this.permutation=this._genPerm()}_genPerm(){const e=new Uint8Array(0|512);for(let t=0;t<256;t=t+1|0)e[t]=t;for(let t=255;t>0;t=t-1|0){const r=this.rng.random()*(t+1)|0,i=e[t];e[t]=e[r],e[r]=i}for(let t=0;t<256;t=t+1|0)e[256+t]=e[t];return e}fade(e){return e*e*e*(e*(6*e-15)+10)}lerp(e,t,r){return t+e*(r-t)}grad(e,t,r){const i=(e&=3)<2?t:r,n=e<2?r:t;return(1&e?-i:i)+(2&e?-n:n)}noise(e,t){const r=this.permutation,i=255&Math.floor(e),n=255&Math.floor(t);e-=Math.floor(e),t-=Math.floor(t);const a=this.fade(e),o=this.fade(t),s=r[i]+n|0,l=r[i+1]+n|0;return this.lerp(o,this.lerp(a,this.grad(r[s],e,t),this.grad(r[l],e-1,t)),this.lerp(a,this.grad(r[s+1],e,t-1),this.grad(r[l+1],e-1,t-1)))}}class U{static configure(e={}){var t,r,i,n;U._config={paletteHex:null!==(t=null!==(r=e.paletteHex)&&void 0!==r?r:U._config.paletteHex)&&void 0!==t?t:[],coverage:+e.coverage||.32,paddingPx:null==e.paddingPx?null:+e.paddingPx,minRadiusPx:null==e.minRadiusPx?null:+e.minRadiusPx,maxRadiusPx:null==e.maxRadiusPx?null:+e.maxRadiusPx,radiusFrom:null!==(i=e.radiusFrom)&&void 0!==i?i:"dark-big",gamma:+e.gamma||1,kCandidates:0|e.kCandidates||48,ringBias:+e.ringBias||.72,perlinJitter:+e.perlinJitter||.12,zOrder:null!==(n=e.zOrder)&&void 0!==n?n:"lightness-front"}}static _config={paletteHex:[],coverage:.32,paddingPx:null,minRadiusPx:null,maxRadiusPx:null,radiusFrom:"dark-big",gamma:1,kCandidates:48,ringBias:.72,perlinJitter:.12,zOrder:"lightness-front"};constructor(e,t,r){this.width=+e,this.height=+t,this.rng=new W(r),this._perlin=new O(r),this._smartCache=new Map}_computeRadii(e){e|=0;const t=U._config,r=this.width<this.height?this.width:this.height,i=null!=t.minRadiusPx?+t.minRadiusPx:Math.max(2,.02*r),n=null!=t.maxRadiusPx?+t.maxRadiusPx:Math.max(6,.12*r*Math.pow(200/Math.max(30,e),.35)),a=H(e),o=H(e),s=this.rng.cloneWithSalt("smart-radii"),l=t.paletteHex||[];let h=0;if((0|l.length)>0){const r=0|l.length;for(h=0;h<e;h=h+1|0){const{r:e,g:i,b:n}=I.hexToRgb(l[h%r|0]),c=+I.rgbToLch(0|e,0|i,0|n).l;o[h]=c;const d=c/100,u="light-big"===t.radiusFrom?Math.pow(d,t.gamma):Math.pow(1-d,t.gamma),m=.85+.3*s.random(),p=Math.max(.05,u)*m;a[h]=p}}else for(h=0;h<e;h=h+1|0){const e=20+70*s.random();o[h]=e;const r=e/100,i="light-big"===t.radiusFrom?Math.pow(r,t.gamma):Math.pow(1-r,t.gamma),n=.85+.3*s.random();a[h]=Math.max(.05,i)*n}let c=0;for(h=0;h<e;h=h+1|0){const e=a[h];c+=e*e}const d=this.width*this.height,u=Math.sqrt(t.coverage*d/(Math.PI*c)),m=H(e);for(h=0;h<e;h=h+1|0){const e=u*a[h];m[h]=F(e,i,n)}return{radii:m,Ls:o}}_clamp(e,t,r,i){const n=r+i,a=this.width-r-i,o=r+i,s=this.height-r-i;return e<n?e=n:e>a&&(e=a),t<o?t=o:t>s&&(t=s),{x:e,y:t}}_placeOne(e,t,r,i,n,a,o,s,l){const h=.5*this.width,c=.5*this.height;let d=0,u=0,m=-1e30,p=!1;const g=(e,s)=>{const l=this._clamp(e,s,t,o);e=l.x,s=l.y;let g=1e30,y=!0;for(let l=0;l<r.length;l=l+1|0){const h=0|r[l],c=e-i[h],d=s-n[h],u=c*c+d*d,m=t+a[h]+o;u<m*m&&(y=!1);const p=Math.sqrt(u)-m;p<g&&(g=p)}const b=Math.min(e-(t+o),this.width-(t+o)-e,s-(t+o),this.height-(t+o)-s),x=e-h,f=s-c,v=(y?1e3:0)+10*g+2*b+1/(1+Math.sqrt(x*x+f*f));v>m&&(m=v,d=e,u=s,p=y)},y=Math.max(1,s*l|0);for(let s=0;s<y&&r.length;s=s+1|0){const s=0|r[e.random()*r.length|0],l=t+a[s]+o,h=e.range(0,2*Math.PI);g(i[s]+Math.cos(h)*l,n[s]+Math.sin(h)*l)}const b=s-y,x=t+o,f=this.width-t-o,v=this.height-t-o;for(let t=0;t<b;t=t+1|0)g(e.range(x,f),e.range(x,v));return{x:d,y:u,ok:p}}_relax(e,t,r,i,n,a=6){const o=0|n;for(let n=0;n<a;n=n+1|0)for(let n=0;n<o;n=n+1|0){const a=e[n],s=t[n],l=r[n];for(let h=n+1;h<o;h=h+1|0){const o=e[h]-a,c=t[h]-s,d=o*o+c*c;if(0===d)continue;const u=l+r[h]+i;if(d<u*u){const a=Math.sqrt(d),s=o/a,m=c/a,p=.5*(.55*(u-a));e[n]-=s*p,t[n]-=m*p,e[h]+=s*p,t[h]+=m*p;const g=this._clamp(e[n],t[n],l,i);e[n]=g.x,t[n]=g.y;const y=this._clamp(e[h],t[h],r[h],i);e[h]=y.x,t[h]=y.y}}}}_ensureSmart(e){const t=(e|=0)>>>0;if(this._smartCache.has(t))return;const r=U._config,i=this.rng.cloneWithSalt("smart-pack"),n=null!=r.paddingPx?+r.paddingPx:Math.max(.5,.01*Math.min(this.width,this.height)),{radii:a,Ls:o}=this._computeRadii(e),s=H(e),l=H(e),h=H(e),c=H(e);for(let t=0;t<e;t=t+1|0)h[t]=a[t],c[t]=o[t];const d=L(e);for(let t=0;t<e;t=t+1|0)d[t]=t;d.sort(((e,t)=>h[t]-h[e]));const u=[];for(let t=0;t<e;t=t+1|0){const e=0|d[t];let a=h[e],o=0,c=!1,m=0,p=0;for(;(0|o)<5&&!c;){const e=this._placeOne(i,a,u,s,l,h,n,0|r.kCandidates,+r.ringBias);if(e.ok){m=e.x,p=e.y,c=!0;break}a*=.93,o=o+1|0}if(!c){const e=.5*this.width,t=.5*this.height,r=this._clamp(e+i.range(-a,a),t+i.range(-a,a),a,n);m=r.x,p=r.y}const g=.006,y=2*this._perlin.noise(m*g,p*g)-1,b=2*this._perlin.noise((m+1e3)*g,(p+1e3)*g)-1;m+=y*r.perlinJitter*a,p+=b*r.perlinJitter*a;const x=this._clamp(m,p,a,n);s[e]=x.x,l[e]=x.y,h[e]=a,u.push(e)}let m;if(this._relax(s,l,h,n,e,7),"function"==typeof r.zOrder){const t=new Array(e);for(let r=0;r<e;r=r+1|0)t[r]={x:s[r],y:l[r],r:h[r],L:c[r]};m=r.zOrder(t)}else{const t=L(e);for(let r=0;r<e;r=r+1|0)t[r]=r;const i=Array.from(t).sort(((e,t)=>{var r,i;return(null!==(r=c[e])&&void 0!==r?r:50)-(null!==(i=c[t])&&void 0!==i?i:50)})),n=[...i].reverse(),a=Array.from(t).sort(((e,t)=>h[e]-h[t])),o=.5*this.width,d=.5*this.height,u=Array.from(t).sort(((e,t)=>G(s[e]-o)+G(l[e]-d)-(G(s[t]-o)+G(l[t]-d))));m="lightness-front"===r.zOrder?i:"lightness-back"===r.zOrder?n:"radius-big-front"===r.zOrder?a:"center-front"===r.zOrder?u:i}this._smartCache.set(t,{xF32:s,yF32:l,rF32:h,LF32:c,orderI32:Int32Array.from(m)})}getSmartZOrder(e){return this._ensureSmart(e),Array.from(this._smartCache.get(e>>>0).orderI32)}getPackedRadius(e,t){return this._ensureSmart(t),+this._smartCache.get(t>>>0).rF32[0|e]}goldenRatio(e,t){const r=(1+Math.sqrt(5))/2,i=2*Math.PI*(e/r),n=.3*Math.min(this.width,this.height)*Math.sqrt((e+.5)/(t+1)),a=.5*this.width+Math.cos(i)*n,o=.5*this.height+Math.sin(i)*n;return this._clamp(a,o,0,0)}voronoi(e,t){const r=Math.ceil(Math.sqrt(t)),i=this.width/r,n=this.height/r,a=e/r|0,o=(e%r+.5)*i+this.rng.range(-.25,.25)*i,s=(a+.5)*n+this.rng.range(-.25,.25)*n;return this._clamp(o,s,0,0)}forceDirected(e,t){const r=new Array(e+1);for(let t=0;t<=e;t=t+1|0)r[t]={x:this.rng.range(0,this.width),y:this.rng.range(0,this.height)};const i=.3*this.width;for(let t=0;t<10;t=t+1|0)for(let t=0;t<=e;t=t+1|0){let n=0,a=0;for(let o=0;o<=e;o=o+1|0)if(t!==o){const e=r[t].x-r[o].x,s=r[t].y-r[o].y,l=Math.hypot(e,s)+.1;n+=e/l*(i/l),a+=s/l*(i/l)}r[t].x=F(r[t].x+.1*n,0,this.width),r[t].y=F(r[t].y+.1*a,0,this.height)}return r[e]}perlin(e,t){const r=.01,i=100*e|0,n=this._perlin.noise(i*r,i*r),a=this._perlin.noise((i+1e3)*r,(i+1e3)*r),o=.5*this.width+n*this.width*.4,s=.5*this.height+a*this.height*.4;return this._clamp(o,s,0,0)}lSystem(e,t){let r="FX";const i={X:"X+YF+",Y:"-FX-Y"},n=Math.min(4,t/3|0);for(let e=0;e<n;e=e+1|0){let e="";for(const t of r)e+=i[t]||t;r=e}let a=.5*this.width,o=.5*this.height,s=e*(360/t),l=.1*Math.min(this.width,this.height),h=0;for(const t of r){if(h>=e)break;"F"===t?(a+=Math.cos(s*Math.PI/180)*l,o+=Math.sin(s*Math.PI/180)*l,h++):"+"===t?s+=90:"-"===t&&(s-=90)}return this._clamp(a,o,0,0)}spiral(e,t){const r=Math.PI*(3-Math.sqrt(5)),i=.45*Math.min(this.width,this.height),n=e*r,a=Math.sqrt(e/Math.max(1,t-1))*i,o=.5*this.width+Math.cos(n)*a,s=.5*this.height+Math.sin(n)*a;return this._clamp(o,s,0,0)}grid(e,t){const r=Math.ceil(Math.sqrt(t*(this.width/this.height))),i=Math.ceil(t/r),n=e%r,a=e/r|0,o=this.width/r,s=this.height/i,l=(n+.5)*o+this.rng.range(-.25,.25)*o,h=(a+.5)*s+this.rng.range(-.25,.25)*s;return this._clamp(l,h,0,0)}random(e,t){return{x:this.rng.range(0,this.width),y:this.rng.range(0,this.height)}}getPosition(e,t,r){const i={"golden-ratio":()=>this.goldenRatio(t,r),voronoi:()=>this.voronoi(t,r),"force-directed":()=>this.forceDirected(t,r),perlin:()=>this.perlin(t,r),"l-system":()=>this.lSystem(t,r),spiral:()=>this.spiral(t,r),grid:()=>this.grid(t,r),random:()=>this.random(t,r),smart:()=>{this._ensureSmart(r);const e=this._smartCache.get(r>>>0);return{x:e.xF32[0|t],y:e.yF32[0|t]}}},n=(i[e]||i["golden-ratio"])();return this._clamp(n.x,n.y,0,0)}}class D{constructor(e,t,r="rgb",i="long"){this.primaryColor=this._norm(e),this.secondaryColor=this._norm(t),this.interpolationMode=r,this.hueDirection=i}_norm(e){return"#"===e[0]?e:"#"+e}_wrapHue(e){return(e%=360)<0?e+360:e}_withinSRGB({r:e,g:t,b:r}){return e>=0&&e<=255&&t>=0&&t<=255&&r>=0&&r<=255}_hexToLCH(e){const{r:t,g:r,b:i}=I.hexToRgb(e);return I.rgbToLch(0|t,0|r,0|i)}_hueAvg(e,t){const r=(e-t+540)%360-180;return this._wrapHue(t+.5*r)}_gamutMapLchToSrgb(e,t,r,i=18){let n=0,a=Math.max(0,t),o=0,s=0;for(s=0;s<i;s=s+1|0){const t=.5*(n+a),i=I.lchToRgb(e,t,r);this._withinSRGB(i)?(o=t,n=t):a=t}const l=I.lchToRgb(e,o,r);return I.rgbToHex(l.r,l.g,l.b)}_relLum(e){const{r:t,g:r,b:i}=I.hexToRgb(e);return.2126*(t/255<=.03928?t/255/12.92:Math.pow((t/255+.055)/1.055,2.4))+.7152*(r/255<=.03928?r/255/12.92:Math.pow((r/255+.055)/1.055,2.4))+.0722*(i/255<=.03928?i/255/12.92:Math.pow((i/255+.055)/1.055,2.4))}_contrastRatio(e,t){const r=this._relLum(e),i=this._relLum(t);return((r>=i?r:i)+.05)/((r>=i?i:r)+.05)}_recommendText(e,t=4.5){const r=this._contrastRatio(e,"#000000"),i=this._contrastRatio(e,"#FFFFFF");return r>=t&&r>=i?"#000000":i>=t&&i>r||i>=r?"#FFFFFF":"#000000"}interpolateColors(e,t,r,i){if(r=function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}(r),"lch"===i||"jch"===i||"oklab"===i){const i=this._hexToLCH(e),n=this._hexToLCH(t),a=B(i.l,n.l,r),o=B(i.c,n.c,r);let s=i.h,l=n.h,h=l-s;("long"===this.hueDirection?Math.abs(h)<=180:Math.abs(h)>180)&&(s+=h>0?360:-360);const c=this._wrapHue(s+(l-s)*r);return this._gamutMapLchToSrgb(a,Math.max(0,o),c)}if("lab"===i){const i=I.rgbToXyz(...Object.values(I.hexToRgb(e))),n=I.rgbToXyz(...Object.values(I.hexToRgb(t))),a=I.xyzToLab(i.x,i.y,i.z),o=I.xyzToLab(n.x,n.y,n.z),s=B(a.l,o.l,r),l=B(a.a,o.a,r),h=B(a.b,o.b,r),c=I.xyzToRgb(...Object.values(I.labToXyz(s,l,h)));return I.rgbToHex(c.r,c.g,c.b)}if("hsl"===i){const i=this.hexToHSL(e),n=this.hexToHSL(t);let a=i.h,o=n.h,s=o-a;("long"===this.hueDirection?Math.abs(s)<=180:Math.abs(s)>180)&&(a+=s>0?360:-360);const l=this._wrapHue(a+(o-a)*r),h=B(i.s,n.s,r),c=B(i.l,n.l,r);return this.hslToHex(l,h,c)}const n=I.hexToRgb(e),a=I.hexToRgb(t);return I.rgbToHex(Math.round(B(n.r,a.r,r)),Math.round(B(n.g,a.g,r)),Math.round(B(n.b,a.b,r)))}hexToHSL(e){const t=parseInt(e.slice(1,3),16)/255,r=parseInt(e.slice(3,5),16)/255,i=parseInt(e.slice(5,7),16)/255,n=Math.max(t,r,i),a=Math.min(t,r,i);let o=0,s=0,l=(n+a)/2;if(n!==a){const e=n-a;switch(s=l>.5?e/(2-n-a):e/(n+a),n){case t:o=((r-i)/e+(r<i?6:0))/6;break;case r:o=((i-t)/e+2)/6;break;default:o=((t-r)/e+4)/6}}return{h:Math.round(360*o),s:Math.round(100*s),l:Math.round(100*l)}}hslToHex(e,t,r){let i,n,a;if(e/=360,r/=100,0===(t/=100))i=n=a=r;else{const o=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e),s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;i=o(l,s,e+1/3),n=o(l,s,e),a=o(l,s,e-1/3)}const o=e=>{const t=(0|Math.round(255*e)).toString(16);return 1===t.length?"0"+t:t};return"#"+o(i)+o(n)+o(a)}deriveThirdColor(){const e=this._hexToLCH(this.primaryColor),t=this._hexToLCH(this.secondaryColor),r=this._hueAvg(e.h,t.h),i=this._wrapHue(r+120),n=(e.l+t.l)/2,a=Math.min(80,.5*(e.c+t.c)*.9);return this._gamutMapLchToSrgb(n,a,i)}_toneScaleFromHue(e,t,r=[98,92,86,78,70,62,54,46,38,30]){const i=new Array(r.length);for(let n=0;n<r.length;n=n+1|0){const a=r[n],o=t*(.9-.4*Math.abs((a-64)/64));i[n]=this._gamutMapLchToSrgb(a,Math.max(0,o),this._wrapHue(e))}return i}_duotone(e,t,r=!1,i=10){const n=this._hexToLCH(e),a=this._hexToLCH(t);let o=n.h,s=a.h,l=s-o;(r?Math.abs(l)<=180:Math.abs(l)>180)&&(o+=l>0?360:-360);const h=new Array(0|i);for(let e=0;e<i;e=e+1|0){const t=1===i?.5:e/(i-1),r=B(n.l,a.l,t),l=B(n.c,a.c,t),c=this._wrapHue(o+(s-o)*t);h[e]=this._gamutMapLchToSrgb(r,Math.max(0,l),c)}return h}_analogous(e,t=28){const{l:r,c:i,h:n}=this._hexToLCH(e);return[...[-t,.5*-t,0,.5*t,t].map((e=>this._wrapHue(n+e))).map((e=>this._gamutMapLchToSrgb(r,i,e))),...this._toneScaleFromHue(n,Math.min(i,80),[96,90,84,76,68,60,52,44,36]).slice(2,8)]}_splitComplement(e,t=30){const{l:r,c:i,h:n}=this._hexToLCH(e);return[...[n,this._wrapHue(n+180-t),this._wrapHue(n+180+t)].map((e=>this._gamutMapLchToSrgb(r,i,e))),...this._toneScaleFromHue(n,Math.min(i,72)).slice(3,9)]}_triadic(e){const{l:t,c:r,h:i}=this._hexToLCH(e);return[...[i,this._wrapHue(i+120),this._wrapHue(i+240)].map((e=>this._gamutMapLchToSrgb(t,r,e))),...this._toneScaleFromHue(i,Math.min(r,75)).slice(2,8)]}_tetradic(e){const{l:t,c:r,h:i}=this._hexToLCH(e);return[...[i,this._wrapHue(i+90),this._wrapHue(i+180),this._wrapHue(i+270)].map((e=>this._gamutMapLchToSrgb(t,.9*r,e))),...this._toneScaleFromHue(i,Math.min(r,70)).slice(4,10)]}_neutralAccent(e){const{h:t}=this._hexToLCH(e);return[...this._toneScaleFromHue(0,0,[96,90,84,76,68,60,52,44,36,28]),...this._toneScaleFromHue(t,64,[70,62,54,46]).slice(0,3)]}_deltaE76(e,t){const r=I.xyzToLab(...Object.values(I.rgbToXyz(...Object.values(I.hexToRgb(e))))),i=I.xyzToLab(...Object.values(I.rgbToXyz(...Object.values(I.hexToRgb(t))))),n=r.l-i.l,a=r.a-i.a,o=r.b-i.b;return Math.sqrt(n*n+a*a+o*o)}_scorePalette(e){let t=0,r=0,i=Math.max(1,Math.ceil(e.length/6));for(let n=0;n<e.length-1;n=n+i|0)for(let a=n+1;a<e.length;a=a+i|0)t+=Math.min(100,this._deltaE76(e[n],e[a])),r++;const n=t/Math.max(1,r),a=(o=e.length,new Float64Array(0|o));var o;for(let t=0;t<e.length;t=t+1|0)a[t]=this._relLum(e[t]);let s=1e9,l=-1e9,h=0;for(let t=0;t<e.length;t=t+1|0){const r=a[t];r<s&&(s=r),r>l&&(l=r);(this._contrastRatio(e[t],"#000")>=4.5||this._contrastRatio(e[t],"#fff")>=4.5)&&(h=h+1|0)}return.45*n+.3*(100*(l-s))+.25*(100*h/e.length)}rankedOptions(e={}){var t;const r=this.primaryColor,i=this.secondaryColor,n=this.deriveThirdColor(),a=null!==(t=e.duotoneN)&&void 0!==t?t:12,o=[{name:"Duotone · Short-Arc",colors:this._duotone(r,i,!1,a),explain:"Shortest hue path; silky gradients.",roles:{background:0,accents:[3,8,11]}},{name:"Duotone · Long-Arc",colors:this._duotone(r,i,!0,a),explain:"Long way round; vivid mids.",roles:{background:0,accents:[4,7,10]}},{name:"Analogous Crest",colors:this._analogous(r,28),explain:"Tight harmony + tone ladder.",roles:{background:5,accents:[0,2,8]}},{name:"Split-Complement",colors:this._splitComplement(r,30),explain:"Energy + balance, no clash.",roles:{background:6,accents:[0,1,2]}},{name:"Triadic League (auto-3rd)",colors:this._triadic(n),explain:`Three anchors using ${n}.`,roles:{background:6,accents:[0,1,2]}},{name:"Tetradic Grid",colors:this._tetradic(r),explain:"Max flexibility, 4-corner set.",roles:{background:5,accents:[0,1,2,3]}},{name:"Neutral + Accent",colors:this._neutralAccent(r),explain:"Sober surfaces + disciplined pop.",roles:{background:2,accents:[10,11,12]}}];for(let t=0;t<o.length;t=t+1|0){const r=o[t];r.text=r.colors.map((t=>{var r;return this._recommendText(t,null!==(r=e.targetContrast)&&void 0!==r?r:4.5)})),r.score=this._scorePalette(r.colors)}return o.sort(((e,t)=>t.score-e.score)),o}interpolate(e){const t=new Array(0|e);for(let r=0;r<e;r=r+1|0){const i=1===e?.5:r/(e-1),n=this.interpolateColors(this.primaryColor,this.secondaryColor,i,this.interpolationMode);t[r]={color:n,source:i<.33?"primary":i>.66?"secondary":"mixed"}}return t}alternate(e){const t=new Array(0|e);for(let r=0;r<e;r=r+1|0){const e=!(1&r),i=e?this.primaryColor:this.secondaryColor,n=this.hexToHSL(i),a=20*(Math.random()-.5),o=20*(Math.random()-.5),s=20*(Math.random()-.5);t[r]={color:this.hslToHex(this._wrapHue(n.h+a),F(n.s+o,0,100),F(n.l+s,10,90)),source:e?"primary":"secondary"}}return t}primaryFocused(e){const t=new Array(0|e),r=Math.ceil(.7*e);for(let i=0;i<e;i=i+1|0)if(i<r){const e=i/r;t[i]={color:this.interpolateColors(this.primaryColor,this.secondaryColor,.3*e,this.interpolationMode),source:"primary"}}else{const n=(i-r)/Math.max(1,e-r);t[i]={color:this.interpolateColors(this.secondaryColor,this.primaryColor,.3*n,this.interpolationMode),source:"secondary"}}return t}secondaryFocused(e){const t=new Array(0|e),r=Math.ceil(.7*e);for(let i=0;i<e;i=i+1|0)if(i<r){const e=i/r;t[i]={color:this.interpolateColors(this.secondaryColor,this.primaryColor,.3*e,this.interpolationMode),source:"secondary"}}else{const n=(i-r)/Math.max(1,e-r);t[i]={color:this.interpolateColors(this.primaryColor,this.secondaryColor,.3*n,this.interpolationMode),source:"primary"}}return t}complementaryMix(e){const t=new Array(0|e),r=this.hexToHSL(this.primaryColor),i=this.hexToHSL(this.secondaryColor),n=this.hslToHex((r.h+180)%360,r.s,r.l),a=this.hslToHex((i.h+180)%360,i.s,i.l),o=[[this.primaryColor,n],[this.secondaryColor,a],[this.primaryColor,this.secondaryColor],[n,a]];for(let r=0;r<e;r=r+1|0){const e=o[r%o.length],i=r%2*.5+.25,n=this.interpolateColors(e[0],e[1],i,this.interpolationMode);t[r]={color:n,source:1&r?"secondary":"primary"}}return t}triadicBlend(e){const t=this.deriveThirdColor(),r=[this.primaryColor,this.secondaryColor,t],i=new Array(0|e);for(let t=0;t<e;t=t+1|0){const e=t%3;i[t]={color:r[e],source:0===e?"primary":1===e?"secondary":"mixed"}}return i}generate(e="interpolate",t=5){const r={interpolate:()=>this.interpolate(t),alternate:()=>this.alternate(t),"primary-focused":()=>this.primaryFocused(t),"secondary-focused":()=>this.secondaryFocused(t),"complementary-mix":()=>this.complementaryMix(t),"triadic-blend":()=>this.triadicBlend(t),"duotone-short":()=>this._duotone(this.primaryColor,this.secondaryColor,!1,t).map(((e,t)=>({color:e,source:t<2?"primary":"mixed"}))),"duotone-long":()=>this._duotone(this.primaryColor,this.secondaryColor,!0,t).map(((e,t)=>({color:e,source:t<2?"primary":"mixed"}))),analogous:()=>this._analogous(this.primaryColor).slice(0,t).map((e=>({color:e,source:"mixed"}))),"split-complement":()=>this._splitComplement(this.primaryColor).slice(0,t).map((e=>({color:e,source:"mixed"}))),tetradic:()=>this._tetradic(this.primaryColor).slice(0,t).map((e=>({color:e,source:"mixed"}))),"neutral-accent":()=>this._neutralAccent(this.primaryColor).slice(0,t).map((e=>({color:e,source:"mixed"})))};return(r[e]||r.interpolate)()}}class j{constructor(e=1e3,t=500,r={}){this.width=e,this.height=t,this.options={blurAmount:r.blurAmount||120,seed:r.seed||null,sizeAdaptation:r.sizeAdaptation||"varied",algorithm:r.algorithm||"golden-ratio",animation:r.animation||"none",animationSpeed:r.animationSpeed||20,animationEasing:r.animationEasing||"ease-in-out",saturate:"number"==typeof r.saturate?r.saturate:1,contrast:"number"==typeof r.contrast?r.contrast:1,brightness:"number"==typeof r.brightness?r.brightness:1,...r},this.rng=new W(this.options.seed),this.positioning=new U(e,t,this.options.seed),this.customPositions=[]}_buildFilterId(){var e;return`fx-${String(null!==(e=this.options.seed)&&void 0!==e?e:"0").replace(/[^a-z0-9_-]/gi,"")}`}_buildFilterDef(){const e=this._buildFilterId(),t=Math.max(0,+this.options.blurAmount||0),r=Math.max(0,+this.options.saturate||0),i=Math.max(0,+this.options.contrast||0),n=Math.max(0,+this.options.brightness||0),a=i*n,o=.5*(1-i),s=[];let l="SourceGraphic";return t>0&&(s.push(`<feGaussianBlur in="${l}" stdDeviation="${t}" result="f_blur"/>`),l="f_blur"),1!==r&&(s.push(`<feColorMatrix in="${l}" type="saturate" values="${r}" result="f_sat"/>`),l="f_sat"),1===i&&1===n||(s.push(`\n<feComponentTransfer in="${l}" color-interpolation-filters="sRGB" result="f_cb">\n  <feFuncR type="linear" slope="${a}" intercept="${o}"/>\n  <feFuncG type="linear" slope="${a}" intercept="${o}"/>\n  <feFuncB type="linear" slope="${a}" intercept="${o}"/>\n  <feFuncA type="identity"/>\n</feComponentTransfer>`.trim()),l="f_cb"),0===s.length&&(s.push(`<feComponentTransfer in="${l}" result="noop"><feFuncA type="identity"/></feComponentTransfer>`),l="noop"),{id:e,body:s.join("\n"),lastResult:l}}getAdaptiveSizeMultiplier(e){const t=this.options.sizeAdaptation;return"large"===t?1.5:"medium"===t?1:"small"===t?.75:"varied"===t?.5+1.5*this.rng.random():1.5-e/10}generateCircleData(e,t,r){var i;let n;this.customPositions[t]?n=this.customPositions[t]:(n=this.positioning.getPosition("smart"===this.options.algorithm?"smart":this.options.algorithm,t,r),this.customPositions[t]={x:0|n.x,y:0|n.y});const a=this.getAdaptiveSizeMultiplier(r),o=1.5-t/r*.5,s=Math.min(this.width,this.height);let l=null===(i=this.customPositions[t])||void 0===i?void 0:i.r;return l||(l=Math.round(this.rng.range(.25*s,.7*s)*a*o),this.customPositions[t].r=0|l),{cx:0|n.x,cy:0|n.y,r:0|l,color:e.color,source:e.source,index:0|t}}updateCirclePosition(e,t,r){this.customPositions[e]||(this.customPositions[e]={}),this.customPositions[e].x=0|Math.round(t),this.customPositions[e].y=0|Math.round(r)}updateCircleSize(e,t){this.customPositions[e]||(this.customPositions[e]={}),this.customPositions[e].r=0|Math.round(t)}generateAnimation(e,t){const r=+this.options.animationSpeed,i=t.index/5*2,n={float:()=>`<animateTransform attributeName="transform" type="translate" values="0,0; ${Math.round(this.rng.range(-40,40))},${Math.round(this.rng.range(-40,40))}; 0,0" dur="${r}s" begin="${i}s" repeatCount="indefinite" calcMode="spline" keyTimes="0; 0.5; 1" keySplines="0.42 0 0.58 1; 0.42 0 0.58 1"/>`,morph:()=>{const e=Math.round(.7*t.r),n=Math.round(1.3*t.r);return`<animate attributeName="r" values="${t.r}; ${n}; ${e}; ${t.r}" dur="${r}s" begin="${i}s" repeatCount="indefinite" calcMode="spline" keyTimes="0; 0.33; 0.66; 1" keySplines="0.37 0 0.63 1; 0.37 0 0.63 1; 0.37 0 0.63 1"/>`},rotate:()=>{const e=this.width/2|0,t=this.height/2|0;return`<animateTransform attributeName="transform" type="rotate" from="0 ${e} ${t}" to="360 ${e} ${t}" dur="${2*r}s" begin="${i}s" repeatCount="indefinite"/>`},pulse:()=>`<animate attributeName="opacity" values="0.4; 0.9; 0.4" dur="${.4*r}s" begin="${i}s" repeatCount="indefinite" calcMode="spline" keyTimes="0; 0.5; 1" keySplines="0.42 0 0.58 1; 0.42 0 0.58 1"/>`,wave:()=>{const e=Math.round(.1*this.height),n=t.cy;return`<animate attributeName="cy" values="${n}; ${n-e|0}; ${n}; ${n+e|0}; ${n}" dur="${r}s" begin="${i}s" repeatCount="indefinite" calcMode="spline" keyTimes="0; 0.25; 0.5; 0.75; 1" keySplines="0.42 0 0.58 1; 0.42 0 0.58 1; 0.42 0 0.58 1; 0.42 0 0.58 1"/>`},orbit:()=>{const e=Math.round(.15*Math.min(this.width,this.height)),n=t.cx,a=t.cy,o=[];for(let t=0;t<=360;t+=30){const r=t*Math.PI/180;o.push(`${n+Math.cos(r)*e|0},${a+Math.sin(r)*e|0}`)}return`<animateMotion path="M ${o.join(" L ")} Z" dur="${r}s" begin="${i}s" repeatCount="indefinite"/>`},breathe:()=>{const e=Math.round(.85*t.r),n=Math.round(1.15*t.r);return`<animate attributeName="r" values="${t.r}; ${n}; ${t.r}; ${e}; ${t.r}" dur="${.8*r}s" begin="${i}s" repeatCount="indefinite" calcMode="spline" keyTimes="0; 0.25; 0.5; 0.75; 1" keySplines="0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1"/>\n<animate attributeName="opacity" values="0.7; 1; 0.7; 1; 0.7" dur="${.8*r}s" begin="${i}s" repeatCount="indefinite" calcMode="spline" keyTimes="0; 0.25; 0.5; 0.75; 1" keySplines="0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1"/>`}};return n[e]?n[e]():""}_optimizeSVG(e){return(0,z.ky)(e,{multipass:!0,plugins:[{name:"cleanupNumericValues",params:{floatPrecision:1,transformPrecision:0}}],js2svg:{indent:0,pretty:!1}}).data}generate(e){if(!e||0===e.length)throw new Error("Color data array is required");const t="none"!==this.options.animation,r=0|e.length,i=new Array(0|r);for(let n=0;n<r;n=n+1|0){const a=this.generateCircleData(e[n],n,r),o=t?this.generateAnimation(this.options.animation,a):"";i[n]=`<circle cx="${a.cx}" cy="${a.cy}" r="${a.r}" fill="${a.color}">${o}</circle>`}const{id:n,body:a}=this._buildFilterDef();return{svg:this._optimizeSVG(`<svg xmlns="http://www.w3.org/2000/svg" id="mesh-gradient" width="${this.width}" height="${this.height}" viewBox="0 0 ${this.width} ${this.height}">\n  <defs>\n    <filter id="${n}" filterUnits="userSpaceOnUse" x="-50%" y="-50%" width="200%" height="200%">\n      ${a}\n    </filter>\n  </defs>\n  <rect id="background" width="100%" height="100%" fill="${e[0].color}" />\n  <g id="circles" filter="url(#${n})">${i.join("")}</g>\n</svg>`),circles:this.customPositions.map(((t,r)=>{var i,n;return{cx:0|t.x,cy:0|t.y,r:0|t.r||0,color:null===(i=e[r])||void 0===i?void 0:i.color,source:null===(n=e[r])||void 0===n?void 0:n.source,index:0|r}}))}}toBase64(e){return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}applyAsBackground(e,t){const r=this.toBase64(t);e.style.backgroundImage=`url('${r}')`,e.style.backgroundSize="cover",e.style.backgroundPosition="center"}}class X extends i.PureComponent{constructor(e){super(e),this.state={classes:e.classes,open:e.open,size:e.size||!1,editMode:!1,interpolation:"rgb",rangeMode:"long",hueDirection:"long",primaryColor:"#70f1ff",primaryAlpha:1,secondaryColor:"#48ff5f",secondaryAlpha:1,colorScheme:"auto-best",positioningAlgorithm:"smart",circleCount:5,seed:"369",blurAmount:120,saturate:1,contrast:1,brightness:1,sizeAdaptation:"varied",canvasWidth:1280,canvasHeight:720,animation:"none",animationSpeed:20,animationEasing:"ease-in-out",colorMenuWhich:null,colorMenuAnchor:null,stats:{svgSizeText:"0 KB"}},this.defaultEffectValues={saturate:1,contrast:1,brightness:1,blurAmount:120},this.currentGradient="",this.currentCircles=[],this.currentColorData=[],this.gradientInstance=null,this.scaleX=1,this.scaleY=1,this.previewRef=i.createRef(),this.ro=null,this.overlayEl=null,this._regenTimer=null}shouldComponentUpdate(){return!1}UNSAFE_componentWillReceiveProps(e){e.open&&!1===this.state.open?(setTimeout((()=>{this.newSeed()}),100),this.setState(e,this.forceUpdate)):e.size!==this.state.size&&this.setState(e,this.forceUpdate)}componentDidMount(){this.setupOverlay(),this.ro=new ResizeObserver((()=>this.syncPreviewSize()));const e=this.getPreviewWrap();e&&this.ro.observe(e),window.addEventListener("resize",this.updateOverlayRect),window.addEventListener("scroll",this.updateOverlayRect,!0),this.generateNewGradient()}componentWillUnmount(){var e;this.ro&&this.ro.disconnect(),window.removeEventListener("resize",this.updateOverlayRect),window.removeEventListener("scroll",this.updateOverlayRect,!0),null!==(e=this.overlayEl)&&void 0!==e&&e.parentNode&&this.overlayEl.parentNode.removeChild(this.overlayEl),this._regenTimer&&clearTimeout(this._regenTimer)}setupOverlay=()=>{this.overlayEl||(this.overlayEl=document.createElement("div"),Object.assign(this.overlayEl.style,{position:"fixed",left:"0px",top:"0px",width:"0px",height:"0px",zIndex:1e5,pointerEvents:"none",overflow:"visible"}),document.body.appendChild(this.overlayEl))};updateOverlayRect=()=>{const e=this.getPreview();if(!e||!this.overlayEl)return;const t=e.getBoundingClientRect();Object.assign(this.overlayEl.style,{left:`${t.left}px`,top:`${t.top}px`,width:`${t.width}px`,height:`${t.height}px`})};getPreview=()=>this.previewRef.current;getPreviewWrap=()=>{var e;return(null===(e=this.previewRef.current)||void 0===e?void 0:e.parentElement)||null};syncPreviewSize=()=>{const e=this.getPreview(),t=this.getPreviewWrap();if(!e||!t)return;const{canvasWidth:r,canvasHeight:i}=this.state,n=Number(i)/Number(r||1),a=t.clientWidth,o=Math.max(1,Math.round(a*n));e.style.height=`${o}px`,this.scaleX=a/Number(r||1),this.scaleY=o/Number(i||1),this.updateOverlayRect()};hexToRgb=e=>{let t=String(e||"").trim();if("#"===t[0]&&(t=t.slice(1)),3===t.length&&(t=t.split("").map((e=>e+e)).join("")),!/^[0-9a-fA-F]{6}$/.test(t))return{r:0,g:0,b:0};const r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:255&r}};rgbToHex=({r:e,g:t,b:r})=>{const i=e=>Math.max(0,Math.min(255,Math.round(e))).toString(16).padStart(2,"0");return("#"+i(e)+i(t)+i(r)).toUpperCase()};rgbToCss=({r:e,g:t,b:r,a:i=1})=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(r)}, ${Math.max(0,Math.min(1,i)).toFixed(3)})`;luminance=({r:e,g:t,b:r})=>{const i=[e,t,r].map((e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)));return.2126*i[0]+.7152*i[1]+.0722*i[2]};mix=(e,t,r)=>({r:e.r+(t.r-e.r)*r,g:e.g+(t.g-e.g)*r,b:e.b+(t.b-e.b)*r});averageHex=(e,t,r)=>{const i=e&&e.length?e:[t,r];let n={r:0,g:0,b:0},a=0;for(const e of i){const t=this.hexToRgb(e);n.r+=t.r,n.g+=t.g,n.b+=t.b,a++}return{r:n.r/a,g:n.g/a,b:n.b/a}};applyColorRange=(e,t,r,i)=>{if("long"===t)return e.slice();const n=this.averageHex(e,r,i);return e.map((e=>this.rgbToHex(this.mix(this.hexToRgb(e),n,.45))))};scheduleRegen=()=>{this._regenTimer&&clearTimeout(this._regenTimer),this._regenTimer=setTimeout((()=>{this.generateNewGradient()}),120)};generateNewGradient=()=>{const e=this.state,t=String(e.seed||"47722"),r="short"===e.rangeMode?"short":"long",i=new D(e.primaryColor,e.secondaryColor,e.interpolation,r);let n=[];if("auto-best"===e.colorScheme){let t=i.rankedOptions({duotoneN:Number(e.circleCount),targetContrast:2.25})[0].colors.slice(0,Number(e.circleCount));t=this.applyColorRange(t,e.rangeMode,e.primaryColor,e.secondaryColor),n=t.map(((e,t)=>({color:e,source:t<3?"primary":"mixed"})))}else{const t=i.generate(e.colorScheme,Number(e.circleCount));let r=t.map((e=>e.color));r=this.applyColorRange(r,e.rangeMode,e.primaryColor,e.secondaryColor),n=r.map(((e,r)=>{var i;return{color:e,source:(null===(i=t[r])||void 0===i?void 0:i.source)||"mixed"}}))}try{U.configure({paletteHex:n.map((e=>e.color))})}catch(e){}this.currentColorData=n,this.gradientInstance=new j(Number(e.canvasWidth),Number(e.canvasHeight),{blurAmount:Number(e.blurAmount),seed:t,sizeAdaptation:e.sizeAdaptation,algorithm:e.positioningAlgorithm,animation:e.animation,animationSpeed:Number(e.animationSpeed),animationEasing:e.animationEasing,layering:!0,filterTuning:!0,depthEffect:!0,saturate:Number(e.saturate),contrast:Number(e.contrast),brightness:Number(e.brightness)});const a=this.gradientInstance.generate(this.currentColorData);this.currentGradient=a.svg,this.currentCircles=a.circles,this.updatePreview(),this.updateStats(),this.syncPreviewSize(),this.forceUpdate()};regenerateWithCurrentColors=()=>{if(!this.gradientInstance)return this.generateNewGradient();const e=this.gradientInstance.generate(this.currentColorData);this.currentGradient=e.svg,this.currentCircles=e.circles,this.updatePreview(),this.updateStats(),this.syncPreviewSize(),this.forceUpdate()};updatePreview=()=>{const e=this.getPreview();e&&this.gradientInstance&&this.gradientInstance.applyAsBackground(e,this.currentGradient)};updateStats=()=>{const e=(new Blob([this.currentGradient]).size/1024).toFixed(2)+" KB";this.setState({stats:{svgSizeText:e}},this.forceUpdate)};handleChangeGenerate=e=>t=>{var r,i;const n=null!==(r=null==t||null===(i=t.target)||void 0===i?void 0:i.value)&&void 0!==r?r:t;this.setState({[e]:n},(()=>{"canvasWidth"!==e&&"canvasHeight"!==e||this.syncPreviewSize(),this.generateNewGradient(),this.forceUpdate()}))};handleChangeRegenerate=e=>t=>{var r,i;const n=null!==(r=null==t||null===(i=t.target)||void 0===i?void 0:i.value)&&void 0!==r?r:t;this.setState({[e]:n},(()=>{"canvasWidth"!==e&&"canvasHeight"!==e||this.syncPreviewSize(),this.regenerateWithCurrentColors(),this.forceUpdate()}))};handleSliderGenerate=e=>(t,r)=>{this.setState({[e]:r},(()=>{this.generateNewGradient(),this.forceUpdate()}))};handlePrimaryChange=e=>{this.setState({primaryColor:e.target.value})};handleSecondaryChange=e=>{this.setState({secondaryColor:e.target.value})};handlePrimaryBlur=()=>{this.generateNewGradient()};handleSecondaryBlur=()=>{this.generateNewGradient()};newSeed=()=>{const e=String(Math.floor(1e4+9e4*Math.random()));this.setState({seed:e},this.generateNewGradient)};downloadSVG=()=>{const e=new Blob([this.currentGradient||""],{type:"image/svg+xml"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`gradient-${this.state.seed}.svg`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)};openColorMenu=e=>t=>{this.setState({colorMenuWhich:e,colorMenuAnchor:t.currentTarget},this.forceUpdate)};closeColorMenu=()=>{this.setState({colorMenuWhich:null,colorMenuAnchor:null},(()=>{this.generateNewGradient(),this.forceUpdate()}))};onPickerChange=e=>{const{colorMenuWhich:t}=this.state;if(!t)return;const r=this.rgbToHex(e);var i,n;"primary"===t?this.setState({primaryColor:r,primaryAlpha:null!==(i=e.a)&&void 0!==i?i:1},(()=>{this.scheduleRegen(),this.forceUpdate()})):this.setState({secondaryColor:r,secondaryAlpha:null!==(n=e.a)&&void 0!==n?n:1},(()=>{this.scheduleRegen(),this.forceUpdate()}))};resetEffect=e=>()=>{const t=this.defaultEffectValues[e];void 0!==t&&this.setState({[e]:t},(()=>{this.generateNewGradient(),this.forceUpdate()}))};resetAllEffects=()=>{const e=this.defaultEffectValues;this.setState({saturate:e.saturate,contrast:e.contrast,brightness:e.brightness,blurAmount:e.blurAmount},(()=>{this.generateNewGradient(),this.forceUpdate()}))};render(){const{classes:e}=this.state,t=this.state,r=this.hexToRgb(t.primaryColor),n=this.hexToRgb(t.secondaryColor),z=this.luminance(r)<.45?"white":"black",H=this.luminance(n)<.45?"white":"black",L=`0px 2px 4px -1px rgba(${r.r},${r.g},${r.b},0.20), 0px 4px 5px 0px rgba(${r.r},${r.g},${r.b},0.14), 0px 1px 10px 0px rgba(${r.r},${r.g},${r.b},0.12)`,N=`0px 2px 4px -1px rgba(${n.r},${n.g},${n.b},0.20), 0px 4px 5px 0px rgba(${n.r},${n.g},${n.b},0.14), 0px 1px 10px 0px rgba(${n.r},${n.g},${n.b},0.12)`,F={r:r.r,g:r.g,b:r.b,a:t.primaryAlpha},G={r:n.r,g:n.g,b:n.b,a:t.secondaryAlpha};return i.createElement(a.A,{className:e.dialog,open:t.open,maxWidth:"md",fullWidth:!0,disablePortal:!1,onClose:e=>{var t,r;return null===(t=(r=this.props).onClose)||void 0===t?void 0:t.call(r,e)},keepMounted:!1},i.createElement(l.A,{style:{display:"flex",margin:"0 0 16px 0"}},i.createElement(c.A,{component:"h1",variant:"h4",style:{width:"100%",margin:0}},"Create A New Gradient")),i.createElement(s.A,{scroll:"paper",className:e.dialogContent},i.createElement(d.A,{container:!0,spacing:2},i.createElement(d.A,{item:!0,xs:12,md:8},i.createElement("div",{className:e.previewPanel},i.createElement("div",{className:e.gradientPreviewWrap},i.createElement("div",{className:e.gradientPreview,ref:this.previewRef}),i.createElement("div",{style:{width:"100%",position:"absolute",bottom:0,left:0,height:128,background:"linear-gradient(to top, #000000cb 5%, #0000007d 35%, transparent)"}},i.createElement("span",{style:{position:"absolute",bottom:12,left:12}},t.stats.svgSizeText))),i.createElement(d.A,{container:!0,spacing:1},i.createElement(d.A,{item:!0,xs:12,md:6},i.createElement(h.A,{fullWidth:!0,variant:"text",onClick:this.newSeed,startIcon:i.createElement(v.A,null)},"New Seed")),i.createElement(d.A,{item:!0,xs:12,md:6},i.createElement(h.A,{fullWidth:!0,variant:"text",onClick:this.downloadSVG,startIcon:i.createElement(C.A,null)},"Download"))))),i.createElement(d.A,{item:!0,xs:12,md:4},i.createElement("div",{className:e.controlsPanel},i.createElement(E.A,{defaultExpanded:!0},i.createElement(S.A,{expandIcon:i.createElement(T.A,null)},i.createElement(c.A,{className:e.sectionTitle},"Colors")),i.createElement(_.A,{style:{display:"block"}},i.createElement(d.A,{container:!0,spacing:1,alignItems:"left"},i.createElement(d.A,{item:!0,xs:6},i.createElement(h.A,{variant:"contained",className:e.colorButton,style:{color:z,boxShadow:L,background:this.rgbToCss({...r,a:t.primaryAlpha})},onClick:this.openColorMenu("primary")},"Primary")),i.createElement(d.A,{item:!0,xs:6},i.createElement(h.A,{variant:"contained",className:e.colorButton,style:{color:H,boxShadow:N,background:this.rgbToCss({...n,a:t.secondaryAlpha})},onClick:this.openColorMenu("secondary")},"Secondary")),i.createElement(d.A,{item:!0,xs:12},i.createElement(f.A,{mt:2},i.createElement(y.A,{variant:"outlined",fullWidth:!0},i.createElement(b.A,null,"Color Scheme"),i.createElement(p.A,{label:"Color Scheme",value:t.colorScheme,onChange:this.handleChangeGenerate("colorScheme")},i.createElement(g.A,{value:"auto-best"},"Auto (Best)"),i.createElement(g.A,{value:"interpolate"},"Interpolate"),i.createElement(g.A,{value:"alternate"},"Alternate"),i.createElement(g.A,{value:"primary-focused"},"Primary Focused"),i.createElement(g.A,{value:"secondary-focused"},"Secondary Focused"),i.createElement(g.A,{value:"triadic-blend"},"Triadic Blend"),i.createElement(g.A,{value:"duotone-short"},"Duotone · Short-Arc"),i.createElement(g.A,{value:"duotone-long"},"Duotone · Long-Arc"),i.createElement(g.A,{value:"analogous"},"Analogous"),i.createElement(g.A,{value:"split-complement"},"Split-Complement"),i.createElement(g.A,{value:"tetradic"},"Tetradic"),i.createElement(g.A,{value:"neutral-accent"},"Neutral + Accent"))))),i.createElement(x.A,{in:Boolean("interpolate"===t.colorScheme)},i.createElement(d.A,{item:!0,xs:12},i.createElement(f.A,{mt:2},i.createElement($.A,{size:"small",fullWidth:!0,exclusive:!0,value:t.interpolation,onChange:(e,t)=>{t&&this.setState({interpolation:t},(()=>{this.generateNewGradient(),this.forceUpdate()}))}},i.createElement(P.A,{value:"rgb"},"RGB"),i.createElement(P.A,{value:"hsl"},"HSL"),i.createElement(P.A,{value:"lch"},"LCH"),i.createElement(P.A,{value:"lab"},"LAB"),i.createElement(P.A,{value:"oklab"},"OKLab*"))))),i.createElement(d.A,{item:!0,xs:12},i.createElement(f.A,{mt:2},i.createElement(c.A,{variant:"caption",style:{display:"block",marginBottom:6}},"Hue Path"),i.createElement($.A,{size:"small",exclusive:!0,value:t.rangeMode,onChange:(e,t)=>{t&&this.setState({rangeMode:t},(()=>{this.generateNewGradient(),this.forceUpdate()}))}},i.createElement(P.A,{value:"short"},"Short"),i.createElement(P.A,{value:"long"},"Long"))))))),i.createElement(E.A,{defaultExpanded:!0},i.createElement(S.A,{expandIcon:i.createElement(T.A,null)},i.createElement(c.A,{className:e.sectionTitle},"Positioning")),i.createElement(_.A,{style:{display:"block"}},i.createElement(y.A,{variant:"outlined",fullWidth:!0},i.createElement(b.A,null,"Algorithm"),i.createElement(p.A,{label:"Algorithm",value:t.positioningAlgorithm,onChange:this.handleChangeGenerate("positioningAlgorithm")},i.createElement(g.A,{value:"golden-ratio"},"Golden Ratio"),i.createElement(g.A,{value:"voronoi"},"Voronoi Cells"),i.createElement(g.A,{value:"force-directed"},"Force-Directed"),i.createElement(g.A,{value:"perlin"},"Perlin Noise"),i.createElement(g.A,{value:"l-system"},"L-System"),i.createElement(g.A,{value:"spiral"},"Fibonacci Spiral"),i.createElement(g.A,{value:"grid"},"Grid Layout"),i.createElement(g.A,{value:"random"},"Random"),i.createElement(g.A,{value:"smart"},"Smart"))),i.createElement(f.A,{mt:2},i.createElement(c.A,{gutterBottom:!0,variant:"caption"},"Shapes: ",t.circleCount),i.createElement(m.A,{min:1,max:6,value:t.circleCount,onChange:this.handleSliderGenerate("circleCount")})),i.createElement(f.A,{mt:1},i.createElement(u.A,{label:"Seed",variant:"outlined",fullWidth:!0,value:t.seed,onChange:this.handleChangeGenerate("seed")})))),i.createElement(E.A,{defaultExpanded:!0},i.createElement(S.A,{expandIcon:i.createElement(T.A,null)},i.createElement(c.A,{className:e.sectionTitle},"Effects")),i.createElement(_.A,{style:{display:"block"}},i.createElement(f.A,{mt:1},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.createElement(c.A,{variant:"caption"},"Saturation: ",this.state.saturate.toFixed(2),"×"),i.createElement(M.Ay,{title:"Reset"},i.createElement(A.A,{size:"small",className:e.iconButtonSmallGrey,onClick:this.resetEffect("saturate")},i.createElement(w.A,{fontSize:"small"})))),i.createElement(m.A,{min:0,max:3,step:.01,value:this.state.saturate,onChange:this.handleSliderGenerate("saturate")})),i.createElement(f.A,{mt:1},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.createElement(c.A,{variant:"caption"},"Contrast: ",this.state.contrast.toFixed(2),"×"),i.createElement(M.Ay,{title:"Reset"},i.createElement(A.A,{size:"small",className:e.iconButtonSmallGrey,onClick:this.resetEffect("contrast")},i.createElement(w.A,{fontSize:"small"})))),i.createElement(m.A,{min:0,max:3,step:.01,value:this.state.contrast,onChange:this.handleSliderGenerate("contrast")})),i.createElement(f.A,{mt:1},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.createElement(c.A,{variant:"caption"},"Brightness: ",this.state.brightness.toFixed(2),"×"),i.createElement(M.Ay,{title:"Reset"},i.createElement(A.A,{size:"small",className:e.iconButtonSmallGrey,onClick:this.resetEffect("brightness")},i.createElement(w.A,{fontSize:"small"})))),i.createElement(m.A,{min:0,max:3,step:.01,value:this.state.brightness,onChange:this.handleSliderGenerate("brightness")})),i.createElement(f.A,{mt:1},i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.createElement(c.A,{variant:"caption"},"Blur: ",this.state.blurAmount,"px"),i.createElement(M.Ay,{title:"Reset"},i.createElement(A.A,{size:"small",className:e.iconButtonSmallGrey,onClick:this.resetEffect("blurAmount")},i.createElement(w.A,{fontSize:"small"})))),i.createElement(m.A,{min:0,max:240,step:1,value:this.state.blurAmount,onChange:this.handleSliderGenerate("blurAmount")})))),t.size?i.createElement(E.A,null,i.createElement(S.A,{expandIcon:i.createElement(T.A,null)},i.createElement(c.A,{className:e.sectionTitle},"Canvas")),i.createElement(_.A,{style:{display:"block"}},i.createElement(d.A,{container:!0,spacing:1},i.createElement(d.A,{item:!0,xs:6},i.createElement(u.A,{label:"Width",type:"number",variant:"outlined",fullWidth:!0,value:t.canvasWidth,onChange:this.handleChangeRegenerate("canvasWidth"),onBlur:()=>{this.syncPreviewSize(),this.regenerateWithCurrentColors()}})),i.createElement(d.A,{item:!0,xs:6},i.createElement(u.A,{label:"Height",type:"number",variant:"outlined",fullWidth:!0,value:t.canvasHeight,onChange:this.handleChangeRegenerate("canvasHeight"),onBlur:()=>{this.syncPreviewSize(),this.regenerateWithCurrentColors()}}))))):null)))),i.createElement(o.A,null,i.createElement(h.A,{onClick:e=>{var t,r;return null===(t=(r=this.props).onClose)||void 0===t?void 0:t.call(r,e)},autoFocus:!0,variant:"contained",color:"primary"},"Close")),i.createElement(R.A,{className:e.menu,anchorEl:t.colorMenuAnchor,open:Boolean(t.colorMenuAnchor),onClose:this.closeColorMenu,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},style:{padding:0}},i.createElement("div",{style:{padding:4}},i.createElement(c.A,{variant:"caption",style:{display:"block",margin:"4px 8px 8px 8px",color:"#bbb"}},"secondary"===t.colorMenuWhich?"Secondary":"Primary"," Color"),i.createElement(k.YJ,{className:e.materialPicker,color:"secondary"===t.colorMenuWhich?G:F,onChange:this.onPickerChange}),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"8px 4px 0 4px"}},i.createElement(h.A,{size:"small",onClick:this.closeColorMenu},"Done"),i.createElement(c.A,{variant:"caption",style:{opacity:.8,alignSelf:"center"}},"secondary"===t.colorMenuWhich?t.secondaryColor:t.primaryColor)))))}}const q=(0,n.default)((e=>({dialog:{"& .MuiDialog-paperScrollPaper":{[e.breakpoints.down("sm")]:{maxHeight:"100%"}},"& .MuiDialog-paperFullWidth":{[e.breakpoints.down("sm")]:{width:"100% !important"}}},dialogContent:{margin:"12px 0 24px 0"},previewPanel:{backgroundColor:"#101010",borderRadius:"21px",paddingBottom:"16px"},gradientPreviewWrap:{position:"relative",marginBottom:"16px"},gradientPreview:{position:"relative",width:"100%",height:405,borderRadius:21,overflow:"hidden",background:"#000"},controlsPanel:{maxHeight:"calc(80vh - 120px)",overflowY:"auto","& div.MuiPaper-rounded":{borderRadius:"21px",backgroundColor:"#101010"},"& .MuiExpansionPanel-root:before":{opacity:0},"& .MuiExpansionPanel-root":{margin:"8px 0"},"& .MuiExpansionPanel-rounded:first-child":{borderTopLeftRadius:"21px",borderTopRightRadius:"21px"},"& .MuiExpansionPanel-rounded:last-child":{borderBottomLeftRadius:"21px",borderBottomRightRadius:"21px"}},sectionTitle:{fontSize:12,fontWeight:600,color:"#999",letterSpacing:.5},menu:{"& .MuiPaper-root":{background:"#121212",padding:12,borderRadius:12,boxShadow:"0 10px 30px rgba(0,0,0,0.35)"}},materialPicker:{width:228,height:"auto",margin:4},colorButton:{fontWeight:"bold",borderRadius:"21px !important",height:56,width:"100%",textTransform:"none"},iconButtonSmallGrey:{"&.MuiIconButton-root":{color:"#666"},"&.MuiIconButton-root:hover":{color:"#999"}},circleList:{width:"100%"},circleRow:{display:"grid",gridTemplateColumns:"minmax(0,1fr) 90px 110px",gap:8,alignItems:"center",marginBottom:6},colorSwatch:{width:20,height:20,borderRadius:"50%",border:"1px solid #444",display:"inline-block"}})))(X)}}]);