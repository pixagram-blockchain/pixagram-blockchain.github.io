/*! For license information please see chunk_src_js_components_TextEditorDialog_js.min.js.LICENSE.txt */
"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_components_TextEditorDialog_js"],{32163:(e,t,r)=>{r.d(t,{A:()=>L});r(52675),r(89463),r(2259),r(51629),r(23418),r(74423),r(64346),r(23792),r(23288),r(94170),r(62010),r(69085),r(59904),r(67945),r(84185),r(83851),r(81278),r(40875),r(79432),r(10287),r(60825),r(27495),r(38781),r(21699),r(47764),r(23500),r(62953),r(45700),r(28706),r(2008),r(25276),r(62062),r(34782),r(15086),r(54554),r(89572),r(2892),r(26099),r(42762),r(76031);var n=r(17402),a=r(5556),o=r.n(a),i=r(8728),l=r(7160),s=r(88016),c=r(38306),u=r(33615),d=r(79626),f=r(69312),p=r(95652),h=r(32485),m=r.n(h),g=["allowDuplicates","alwaysShowPlaceholder","blurBehavior","children","chipRenderer","classes","className","clearInputValueOnChange","dataSource","dataSourceConfig","defaultValue","delayBeforeAdd","disabled","disableUnderline","error","filter","FormHelperTextProps","fullWidth","fullWidthInput","helperText","id","InputProps","inputRef","InputLabelProps","inputValue","label","newChipKeyCodes","newChipKeys","onBeforeAdd","onAdd","onBlur","onDelete","onChange","onFocus","onKeyDown","onKeyPress","onKeyUp","onUpdateInput","placeholder","readOnly","required","rootRef","value","variant","endAdornment"];function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(null,arguments)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function D(e,t,r){return t=E(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function I(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}var T={standard:i.A,filled:l.Ay,outlined:s.A},M=8,B=46,N=37,P=39,j=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I(r=D(this,t,[e]),"state",{chips:[],errorText:void 0,focusedChip:null,inputValue:"",isClean:!0,isFocused:!1,chipsUpdated:!1,prevPropsValue:[]}),I(r,"focus",(function(){r.actualInput.focus(),null!=r.state.focusedChip&&r.setState({focusedChip:null})})),I(r,"handleInputBlur",(function(e){r.props.onBlur&&r.props.onBlur(e),r.setState({isFocused:!1}),null!=r.state.focusedChip&&r.setState({focusedChip:null});var t,n=e.target.value;switch(r.props.blurBehavior){case"add-or-clear":t={clearInputOnFail:!0};case"add":if(r.props.delayBeforeAdd){var a=(r.props.value||r.state.chips).length;r.inputBlurTimeout=setTimeout((function(){var e=(r.props.value||r.state.chips).length;a===e?r.handleAddChip(n,t):r.clearInput()}),150)}else r.handleAddChip(n,t);break;case"clear":r.clearInput()}})),I(r,"handleInputFocus",(function(e){r.setState({isFocused:!0}),r.props.onFocus&&r.props.onFocus(e)})),I(r,"handleKeyDown",(function(e){var t=r.state.focusedChip;if(r._keyPressed=!1,r._preventChipCreation=!1,!r.props.onKeyDown||(r.props.onKeyDown(e),!e.isDefaultPrevented())){var n=r.props.value||r.state.chips;if(r.props.newChipKeyCodes.indexOf(e.keyCode)>=0||r.props.newChipKeys.indexOf(e.key)>=0)!1!==r.handleAddChip(e.target.value)&&e.preventDefault();else switch(e.keyCode){case M:""===e.target.value&&(null!=t?(r.handleDeleteChip(n[t],t),t>0&&r.setState({focusedChip:t-1})):r.setState({focusedChip:n.length-1}));break;case B:""===e.target.value&&null!=t&&(r.handleDeleteChip(n[t],t),t<=n.length-1&&r.setState({focusedChip:t}));break;case N:null==t&&""===e.target.value&&n.length?r.setState({focusedChip:n.length-1}):null!=t&&t>0&&r.setState({focusedChip:t-1});break;case P:null!=t&&t<n.length-1?r.setState({focusedChip:t+1}):r.setState({focusedChip:null});break;default:r.setState({focusedChip:null})}}})),I(r,"handleKeyUp",(function(e){!r._preventChipCreation&&(r.props.newChipKeyCodes.indexOf(e.keyCode)>=0||r.props.newChipKeys.indexOf(e.key)>=0)&&r._keyPressed?r.clearInput():r.updateInput(e.target.value),r.props.onKeyUp&&r.props.onKeyUp(e)})),I(r,"handleKeyPress",(function(e){r._keyPressed=!0,r.props.onKeyPress&&r.props.onKeyPress(e)})),I(r,"handleUpdateInput",(function(e){null==r.props.inputValue&&r.updateInput(e.target.value),r.props.onUpdateInput&&r.props.onUpdateInput(e)})),I(r,"setActualInputRef",(function(e){r.actualInput=e,r.props.inputRef&&r.props.inputRef(e)})),e.defaultValue&&(r.state.chips=e.defaultValue),r.labelRef=n.default.createRef(),r.input=n.default.createRef(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),r=t,a=[{key:"componentDidMount",value:function(){"outlined"===this.props.variant&&(this.labelNode=n.default.findDOMNode(this.labelRef.current),this.forceUpdate())}},{key:"componentWillUnmount",value:function(){clearTimeout(this.inputBlurTimeout)}},{key:"blur",value:function(){this.input&&this.actualInput.blur()}},{key:"handleAddChip",value:function(e,t){var r=this;if(this.props.onBeforeAdd&&!this.props.onBeforeAdd(e))return this._preventChipCreation=!0,null!=t&&t.clearInputOnFail&&this.clearInput(),!1;this.clearInput();var n=this.props.value||this.state.chips;return this.props.dataSourceConfig?("string"==typeof e&&(e=I(I({},this.props.dataSourceConfig.text,e),this.props.dataSourceConfig.value,e)),!this.props.allowDuplicates&&n.some((function(t){return t[r.props.dataSourceConfig.value]===e[r.props.dataSourceConfig.value]}))||(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([].concat(k(this.state.chips),[e]))),!0):e.trim().length>0&&((this.props.allowDuplicates||-1===n.indexOf(e))&&(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([].concat(k(this.state.chips),[e]))),!0)}},{key:"handleDeleteChip",value:function(e,t){if(this.props.value)this.props.onDelete&&this.props.onDelete(e,t);else{var r=this.state.chips.slice();if(r.splice(t,1)){var n=this.state.focusedChip;this.state.focusedChip===t?n=null:this.state.focusedChip>t&&(n=this.state.focusedChip-1),this.updateChips(r,{focusedChip:n})}}}},{key:"updateChips",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setState(w({chips:e,chipsUpdated:!0},t)),this.props.onChange&&this.props.onChange(e)}},{key:"clearInput",value:function(){this.updateInput("")}},{key:"updateInput",value:function(e){this.setState({inputValue:e})}},{key:"render",value:function(){var e=this,t=this.props,r=(t.allowDuplicates,t.alwaysShowPlaceholder),a=(t.blurBehavior,t.children,t.chipRenderer),o=void 0===a?R:a,i=t.classes,l=t.className,s=(t.clearInputValueOnChange,t.dataSource,t.dataSourceConfig),u=(t.defaultValue,t.delayBeforeAdd,t.disabled),d=t.disableUnderline,h=t.error,v=(t.filter,t.FormHelperTextProps),y=t.fullWidth,w=t.fullWidthInput,k=t.helperText,x=t.id,C=t.InputProps,D=void 0===C?{}:C,S=(t.inputRef,t.InputLabelProps),E=void 0===S?{}:S,A=t.inputValue,O=t.label,M=(t.newChipKeyCodes,t.newChipKeys,t.onBeforeAdd,t.onAdd,t.onBlur,t.onDelete,t.onChange,t.onFocus,t.onKeyDown,t.onKeyPress,t.onKeyUp,t.onUpdateInput,t.placeholder),B=t.readOnly,N=t.required,P=t.rootRef,j=t.value,L=t.variant,U=t.endAdornment,z=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(t,g),F=j||this.state.chips,_=null!=A?A:this.state.inputValue,W=(this.props.value||_).length>0||_.length>0,H=null!=E.shrink?E.shrink:null!=O&&(W||this.state.isFocused||F.length>0),K=F.map((function(t,r){var n=s?t[s.value]:t;return o({value:n,text:s?t[s.text]:t,chip:t,isDisabled:!!u,isReadOnly:B,isFocused:e.state.focusedChip===r,handleClick:function(){return e.setState({focusedChip:r})},handleDelete:function(){return e.handleDeleteChip(t,r)},className:i.chip},r)})),V={};"outlined"===L&&(V.notched=H,V.labelWidth=H&&this.labelNode&&this.labelNode.offsetWidth||0),"standard"!==L?V.startAdornment=n.default.createElement(n.default.Fragment,null,K):D.disableUnderline=!0,V.endAdornment=U;var $=T[L];return n.default.createElement(f.A,b({ref:P,fullWidth:y,className:m()(l,i.root,I({},i.marginDense,"dense"===z.margin)),error:h,required:F.length>0?void 0:N,onClick:this.focus,disabled:u,variant:L},z),O&&n.default.createElement(c.A,b({htmlFor:x,classes:{root:m()(i[L],i.label),shrink:i.labelShrink},shrink:H,focused:this.state.isFocused,variant:L,ref:this.labelRef,required:N},E),O),n.default.createElement("div",{className:m()(i[L],i.chipContainer,I(I(I(I(I({},i.focused,this.state.isFocused),i.underline,!d&&"standard"===L),i.disabled,u),i.labeled,null!=O),i.error,h))},"standard"===L&&K,n.default.createElement($,b({ref:this.input,classes:{input:m()(i.input,i[L]),root:m()(i.inputRoot,i[L])},id:x,value:_,onChange:this.handleUpdateInput,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,inputRef:this.setActualInputRef,disabled:u,fullWidth:w,placeholder:!W&&(H||null==O)||r?M:null,readOnly:B},D,V))),k&&n.default.createElement(p.A,b({},v,{className:v?m()(v.className,i.helperText):i.helperText}),k))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){var r=null;return e.value&&e.value.length!==t.prevPropsValue.length&&(r={prevPropsValue:e.value},e.clearInputValueOnChange&&(r.inputValue="")),e.clearInputValueOnChange&&e.value&&e.value.length!==t.prevPropsValue.length&&(r={prevPropsValue:e.value,inputValue:""}),e.disabled&&(r=w(w({},r),{},{focusedChip:null})),!t.chipsUpdated&&e.defaultValue&&(r=w(w({},r),{},{chips:e.defaultValue})),r}}],a&&C(r.prototype,a),o&&C(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(n.default.PureComponent);j.propTypes={endAdornment:o().node,allowDuplicates:o().bool,alwaysShowPlaceholder:o().bool,blurBehavior:o().oneOf(["clear","add","add-or-clear","ignore"]),chipRenderer:o().func,clearInputValueOnChange:o().bool,dataSource:o().array,dataSourceConfig:o().shape({text:o().string.isRequired,value:o().string.isRequired}),defaultValue:o().array,delayBeforeAdd:o().bool,disabled:o().bool,disableUnderline:o().bool,FormHelperTextProps:o().object,fullWidth:o().bool,fullWidthInput:o().bool,helperText:o().node,InputLabelProps:o().object,InputProps:o().object,inputRef:o().func,inputValue:o().string,label:o().node,newChipKeyCodes:o().arrayOf(o().number),newChipKeys:o().arrayOf(o().string),onAdd:o().func,onBeforeAdd:o().func,onChange:o().func,onDelete:o().func,onUpdateInput:o().func,placeholder:o().string,readOnly:o().bool,value:o().array,variant:o().oneOf(["outlined","standard","filled"])},j.defaultProps={allowDuplicates:!1,blurBehavior:"clear",clearInputValueOnChange:!1,delayBeforeAdd:!1,disableUnderline:!1,newChipKeyCodes:[13],newChipKeys:["Enter"],variant:"standard"};const L=(0,d.default)((function(e){var t="light"===e.palette.type,r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{},inputRoot:{display:"inline-flex",flexWrap:"wrap",flex:1,marginTop:0,minWidth:70,"&$outlined,&$filled":{boxSizing:"border-box"},"&$outlined":{paddingTop:14},"&$filled":{paddingTop:28}},input:{display:"inline-block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",appearance:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",float:"left",flex:1},chipContainer:{display:"flex",flexFlow:"row wrap",cursor:"text",marginBottom:-2,minHeight:40,"&$labeled&$standard":{marginTop:18}},outlined:{"& input":{height:16,paddingTop:4,paddingBottom:12,marginTop:4,marginBottom:4}},standard:{},filled:{"& input":{height:22,marginBottom:4,marginTop:4,paddingTop:0},"$marginDense & input":{height:26}},labeled:{},label:{top:4,"&$outlined&:not($labelShrink)":{top:2,"$marginDense &":{top:5}},"&$filled&:not($labelShrink)":{top:15,"$marginDense &":{top:20}}},labelShrink:{top:0},helperText:{marginBottom:-20},focused:{},disabled:{},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary[t?"dark":"light"]),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{"&:after":{backgroundColor:e.palette.error.main,transform:"scaleX(1)"}},chip:{margin:"0 8px 8px 0",float:"left"},marginDense:{}}}),{name:"WAMuiChipInput"})(j);var R=function(e,t){e.value;var r=e.text,a=e.isFocused,o=e.isDisabled,i=e.isReadOnly,l=e.handleClick,s=e.handleDelete,c=e.className;return n.default.createElement(u.A,{key:t,className:c,style:{pointerEvents:o||i?"none":void 0,backgroundColor:a?"rgb(96, 96, 96)":void 0},onClick:l,onDelete:s,label:r})}},58363:(e,t,r)=>{r.r(t),r.d(t,{default:()=>je});r(52675),r(89463),r(66412),r(2259),r(45700),r(78125),r(28706),r(2008),r(51629),r(74423),r(25276),r(23792),r(48598),r(62062),r(94490),r(34782),r(15086),r(59089),r(1688),r(60739),r(89572),r(23288),r(94170),r(62010),r(4731),r(60479),r(2892),r(59904),r(67945),r(84185),r(83851),r(81278),r(40875),r(79432),r(10287),r(26099),r(58940),r(3362),r(60825),r(27495),r(38781),r(21699),r(47764),r(90744),r(42762),r(23500),r(62953),r(76031),r(3296),r(27208),r(48408);var n=r(17402),a=r(79626),o=r(92614),i=r(35143),l=r(5124),s=r(64151),c=r(39870),u=r(32163),d=r(68016),f=r(65816),p=r(61434),h=r(35376),m=r(42460),g=r(96746),v=r(72572),b=r(54392),y=r(96232),w=r(69113),k=r(48085),x=r(84630),C=r(61466),D=r(77430),S=r(95834),E=r(69312),A=r(40827),I=r(5696),O=r(33615),T=r(83182),M=r(89002),B=r(13118),N=r(20426),P=r(6272),j=r(91004),L=r(69205),R=r(73546),U=r(92421),z=r(98039),F=r(29067),_=r(50915),W=r(78295),H=r(13565),K=r(12636),V=r(23119),$=r(89806),G=r(65595),q=r(66424),Q=r(84022),J=r(66324),Y=r(24711),X=r(11903),Z=r(77649),ee=r(86848),te=r(32580),re=r(64054),ne=r(50020),ae=r(9159),oe=r(3280),ie=r(19948),le=r(7400),se=r(64061),ce=r(78896),ue=r(17807),de=r(40693),fe=r(31334),pe=r(49974);function he(e,t,r){return t=ge(t),function(e,t){if(t&&("object"==ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,me()?Reflect.construct(t,r||[],ge(e).constructor):t.apply(e,r))}function me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(me=function(){return!!e})()}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return(t=Oe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(){Ce=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),l=new T(n||[]);return a(i,"_invoke",{value:E(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};c(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==r&&n.call(x,i)&&(w=x);var C=y.prototype=v.prototype=Object.create(w);function D(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(a,o,i,l){var s=d(e[a],e,o);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==ye(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,l)}))}l(s.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function E(t,r,n){var a=f;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===m){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var s=A(l,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var c=d(t,r,n);if("normal"===c.type){if(a=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(ye(t)+" is not iterable")}return b.prototype=y,a(C,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},D(S.prototype),c(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new S(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},D(C),c(C,s,"Generator"),c(C,i,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return l.type="throw",l.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function De(e,t,r,n,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,a)}function Se(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){De(o,n,a,i,l,"next",e)}function l(e){De(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Oe(n.key),n)}}function Ie(e,t,r){return t&&Ae(e.prototype,t),r&&Ae(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oe(e){var t=function(e,t){if("object"!=ye(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ye(t)?t:t+""}var Te=function(){return Ie((function e(){Ee(this,e),this.lacerta=null,this.db=null,this.draftsCollection=null,this.initialized=!1,this.currentDraftId=null,this.lastSaveHash=null,this.autoSaveInterval=null,this.autoSaveEnabled=!0}),[{key:"initialize",value:(y=Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initialized){e.next=2;break}return e.abrupt("return",{success:!0,message:"Already initialized"});case 2:return e.prev=2,this.lacerta=new o.N4,this.lacerta.performanceMonitor.startMonitoring(),e.next=7,this.lacerta.getDatabase("editorDrafts");case 7:return this.db=e.sent,e.next=10,this.db.createCollection("drafts");case 10:return this.draftsCollection=e.sent,e.next=13,this.setupIndexes();case 13:return e.next=15,this.draftsCollection.configureCacheStrategy({type:"lru",maxSize:50,ttl:3e5});case 15:return this.initialized=!0,e.next=18,this.loadSession();case 18:return console.log("DraftManager initialized with LacertaDB v5.0.0"),console.log("Performance monitoring enabled"),e.next=22,this.getStats();case 22:return e.t0=e.sent,e.abrupt("return",{success:!0,message:"DraftManager initialized successfully",stats:e.t0});case 26:return e.prev=26,e.t1=e.catch(2),console.error("Failed to initialize DraftManager:",e.t1),e.abrupt("return",{success:!1,error:e.t1.message||"Initialization failed"});case 30:case"end":return e.stop()}}),e,this,[[2,26]])}))),function(){return y.apply(this,arguments)})},{key:"setupIndexes",value:(b=Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.draftsCollection.createIndex("title",{type:"text",sparse:!0});case 3:return e.next=5,this.draftsCollection.createIndex("tags",{type:"hash"});case 5:return e.next=7,this.draftsCollection.createIndex("lastSaved",{type:"btree"});case 7:return e.next=9,this.draftsCollection.createIndex("wordCount",{type:"btree"});case 9:console.log("Indexes created for optimized queries"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Some indexes may already exist:",e.t0.message);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return b.apply(this,arguments)})},{key:"generateHash",value:function(e){for(var t=JSON.stringify(e),r=0,n=0;n<t.length;n++){r=(r<<5)-r+t.charCodeAt(n),r|=0}return r.toString()}},{key:"saveDraft",value:(v=Se(Ce().mark((function e(t){var r,n,a,o,i,l,s,c,u,d,f,p,h,m,g,v,b,y,w,k,x,C,D,S,E,A,I,O,T,M,B,N,P,j,L,R=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=R.length>1&&void 0!==R[1]?R[1]:{},this.initialized){e.next=7;break}return e.next=4,this.initialize();case 4:if((a=e.sent).success){e.next=7;break}return e.abrupt("return",a);case 7:if(o=t.title,i=void 0===o?"":o,l=t.description,s=void 0===l?"":l,c=t.content,u=void 0===c?"":c,d=t.tags,f=void 0===d?[]:d,p=t.settings,h=void 0===p?{}:p,m=t.gradient,g=void 0===m?null:m,v=t.metadata,b=void 0===v?{}:v,y=t.forceNew,w=void 0!==y&&y,k=t.encrypted,x=void 0!==k&&k,C=t.password,D=void 0===C?null:C,S="string"==typeof u?u:(null==u||null===(r=u.blocks)||void 0===r?void 0:r.map((function(e){return e.text||""})).join(" "))||"",i.trim()||S.trim()){e.next=11;break}return e.abrupt("return",{success:!1,error:"Cannot save empty draft"});case 11:if(E=this.generateHash({title:i,content:u,description:s,tags:f}),w||n.force||E!==this.lastSaveHash){e.next=14;break}return e.abrupt("return",{success:!1,error:"No changes detected",data:{id:this.currentDraftId}});case 14:if(e.prev=14,A=S.split(/\s+/).filter(Boolean),I=A.length,O=Math.ceil(I/200),T=S.length,M={title:i||"Untitled Draft",description:s||"",content:"string"==typeof u?u:JSON.stringify(u),plainText:S.substring(0,1e3),tags:f||[],settings:h||{},gradient:g,metadata:ke(ke({},b),{},{wordCount:I,readingTime:O,charCount:T,contentHash:E,version:1,device:navigator.userAgent,language:navigator.language}),lastSaved:Date.now(),status:"draft"},!this.currentDraftId||w){e.next=56;break}return e.prev=21,e.next=24,this.draftsCollection.get(this.currentDraftId);case 24:if(!(P=e.sent)){e.next=37;break}return M.metadata.version=((null===(j=P.metadata)||void 0===j?void 0:j.version)||0)+1,M.createdAt=P.createdAt||P._created,M.revisions=P.revisions||[],M.revisions.push({content:P.content,savedAt:P.lastSaved,version:(null===(L=P.metadata)||void 0===L?void 0:L.version)||0}),M.revisions.length>5&&(M.revisions=M.revisions.slice(-5)),e.next=33,this.draftsCollection.update(this.currentDraftId,M,{encrypted:x,password:D,compressed:S.length>1e4});case 33:N=e.sent,B={success:!0,id:N},e.next=43;break;case 37:return M.createdAt=Date.now(),e.next=40,this.draftsCollection.add(M,{encrypted:x,password:D,compressed:S.length>1e4});case 40:N=e.sent,this.currentDraftId=N,B={success:!0,id:N};case 43:e.next=54;break;case 45:return e.prev=45,e.t0=e.catch(21),console.error("Update failed, creating new draft:",e.t0),M.createdAt=Date.now(),e.next=51,this.draftsCollection.add(M,{encrypted:x,password:D,compressed:S.length>1e4});case 51:N=e.sent,this.currentDraftId=N,B={success:!0,id:N};case 54:e.next=63;break;case 56:return M.createdAt=Date.now(),M.revisions=[],e.next=60,this.draftsCollection.add(M,{id:w?void 0:this.currentDraftId,encrypted:x,password:D,compressed:S.length>1e4,permanent:n.permanent||!1});case 60:N=e.sent,this.currentDraftId=N,B={success:!0,id:N};case 63:if(!B.success){e.next=70;break}return this.lastSaveHash=E,e.next=67,this.saveSession(N);case 67:return e.abrupt("return",{success:!0,data:{id:N,lastSaved:M.lastSaved,version:M.metadata.version,wordCount:M.metadata.wordCount,readingTime:M.metadata.readingTime}});case 70:return e.abrupt("return",{success:!1,error:"Failed to save draft"});case 71:e.next=77;break;case 73:return e.prev=73,e.t1=e.catch(14),console.error("Error saving draft:",e.t1),e.abrupt("return",{success:!1,error:e.t1.message||"Save failed"});case 77:case"end":return e.stop()}}),e,this,[[14,73],[21,45]])}))),function(e){return v.apply(this,arguments)})},{key:"getDraft",value:(g=Se(Ce().mark((function e(t){var r,n,a,o,i=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:null,this.initialized){e.next=7;break}return e.next=4,this.initialize();case 4:if((n=e.sent).success){e.next=7;break}return e.abrupt("return",n);case 7:return e.prev=7,e.next=10,this.draftsCollection.get(t,{password:r});case 10:if(!(a=e.sent)){e.next=17;break}if(a.content&&"string"==typeof a.content)try{o=JSON.parse(a.content),a.content=o}catch(e){}return this.setCurrentDraftId(t),e.abrupt("return",{success:!0,data:a});case 17:return e.abrupt("return",{success:!1,error:"Draft not found"});case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(7),console.error("Error loading draft:",e.t0),e.abrupt("return",{success:!1,error:e.t0.message||"Load failed"});case 24:case"end":return e.stop()}}),e,this,[[7,20]])}))),function(e){return g.apply(this,arguments)})},{key:"getAllDrafts",value:(m=Se(Ce().mark((function e(){var t,r,n,a,o,i,l,s,c,u,d,f,p,h,m,g,v,b,y=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:{},this.initialized){e.next=7;break}return e.next=4,this.initialize();case 4:if((r=e.sent).success){e.next=7;break}return e.abrupt("return",r);case 7:return n=t.searchQuery,a=void 0===n?"":n,o=t.tags,i=void 0===o?[]:o,l=t.status,s=void 0===l?null:l,c=t.sortBy,u=void 0===c?"lastSaved":c,d=t.sortOrder,f=void 0===d?-1:d,p=t.limit,h=void 0===p?100:p,m=t.skip,g=void 0===m?0:m,e.prev=8,v={},a&&(v.$or=[{title:{$regex:a}},{description:{$regex:a}},{plainText:{$text:a}}]),i.length>0&&(v.tags={$in:i}),s&&(v.status=s),e.next=15,this.draftsCollection.query(v,{sort:xe({},u,f),limit:h,skip:g,projection:{title:1,description:1,tags:1,lastSaved:1,metadata:1,status:1,_id:1,_created:1,_modified:1}});case 15:return b=e.sent,e.abrupt("return",{success:!0,data:b,total:b.length});case 19:return e.prev=19,e.t0=e.catch(8),console.error("Error loading drafts:",e.t0),e.abrupt("return",{success:!1,error:e.t0.message||"Query failed"});case 23:case"end":return e.stop()}}),e,this,[[8,19]])}))),function(){return m.apply(this,arguments)})},{key:"deleteDraft",value:(h=Se(Ce().mark((function e(t){var r,n,a=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},this.initialized){e.next=7;break}return e.next=4,this.initialize();case 4:if((n=e.sent).success){e.next=7;break}return e.abrupt("return",n);case 7:return e.prev=7,e.next=10,this.draftsCollection.delete(t,{force:r.force||!1});case 10:if(this.currentDraftId!==t){e.next=14;break}return this.currentDraftId=null,e.next=14,this.clearSession();case 14:return e.abrupt("return",{success:!0});case 17:return e.prev=17,e.t0=e.catch(7),console.error("Error deleting draft:",e.t0),e.abrupt("return",{success:!1,error:e.t0.message||"Delete failed"});case 21:case"end":return e.stop()}}),e,this,[[7,17]])}))),function(e){return h.apply(this,arguments)})},{key:"batchDelete",value:(p=Se(Ce().mark((function e(t){var r,n,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized){e.next=6;break}return e.next=3,this.initialize();case 3:if((r=e.sent).success){e.next=6;break}return e.abrupt("return",r);case 6:return e.prev=6,e.next=9,this.draftsCollection.batchDelete(t);case 9:if(n=e.sent,!t.includes(this.currentDraftId)){e.next=14;break}return this.currentDraftId=null,e.next=14,this.clearSession();case 14:return a=n.filter((function(e){return e.success})).length,o=n.filter((function(e){return!e.success})).length,e.abrupt("return",{success:!0,data:{successful:a,failed:o,results:n}});case 19:return e.prev=19,e.t0=e.catch(6),console.error("Error in batch delete:",e.t0),e.abrupt("return",{success:!1,error:e.t0.message||"Batch delete failed"});case 23:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(e){return p.apply(this,arguments)})},{key:"getLastDraft",value:(f=Se(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllDrafts({sortBy:"_modified",sortOrder:-1,limit:1});case 2:if(!((t=e.sent).success&&t.data.length>0)){e.next=7;break}return e.abrupt("return",{success:!0,data:t.data[0]});case 7:return e.abrupt("return",{success:!1,error:"No drafts found"});case 8:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getStats",value:(d=Se(Ce().mark((function e(){var t,r,n,a,o,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized){e.next=6;break}return e.next=3,this.initialize();case 3:if((t=e.sent).success){e.next=6;break}return e.abrupt("return",t);case 6:return e.prev=6,r=this.db.getStats(),e.next=10,this.draftsCollection.getIndexes();case 10:return n=e.sent,a=this.lacerta.performanceMonitor.getStats(),o=[{$group:{_id:null,totalDrafts:{$count:{}},avgWordCount:{$avg:"$metadata.wordCount"},totalWords:{$sum:"$metadata.wordCount"}}}],e.next=15,this.draftsCollection.aggregate(o);case 15:return i=e.sent,e.abrupt("return",{success:!0,data:{database:r,indexes:Object.keys(n).length,performance:a,drafts:i[0]||{totalDrafts:0,avgWordCount:0,totalWords:0}}});case 19:return e.prev=19,e.t0=e.catch(6),console.error("Error getting stats:",e.t0),e.abrupt("return",{success:!1,error:e.t0.message||"Stats failed"});case 23:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(){return d.apply(this,arguments)})},{key:"saveSession",value:(u=Se(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.currentDraftId=t,this.db.quickStore.add("current_session",{draftId:t,timestamp:Date.now(),lastSaveHash:this.lastSaveHash});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"loadSession",value:(c=Se(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.db.quickStore.get("current_session"))||!t.draftId){e.next=12;break}if(!(Date.now()-(t.timestamp||0)<36e5)){e.next=10;break}return this.currentDraftId=t.draftId,this.lastSaveHash=t.lastSaveHash,console.log("Restored session draft:",t.draftId),e.abrupt("return",{success:!0,draftId:t.draftId});case 10:return e.next=12,this.clearSession();case 12:return e.abrupt("return",{success:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"clearSession",value:(s=Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.currentDraftId=null,this.lastSaveHash=null,this.db.quickStore.delete("current_session");case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"startNewDraft",value:function(){return this.currentDraftId=null,this.lastSaveHash=null,{success:!0}}},{key:"getCurrentDraftId",value:function(){return this.currentDraftId}},{key:"setCurrentDraftId",value:function(e){this.currentDraftId=e,this.lastSaveHash=null,e&&this.saveSession(e)}},{key:"enableAutoSave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.autoSaveEnabled=!0,this.autoSaveInterval=setInterval(Se(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.currentDraftId&&e.autoSaveEnabled&&console.log("Auto-saving draft...");case 1:case"end":return t.stop()}}),t)}))),t)}},{key:"disableAutoSave",value:function(){this.autoSaveEnabled=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)}},{key:"exportDraft",value:(l=Se(Ce().mark((function e(t){var r,n,a,o,i,l,s=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:null,e.prev=1,e.next=4,this.draftsCollection.get(t,{password:r});case 4:if(!(n=e.sent)){e.next=11;break}return a={version:"1.0",exported:(new Date).toISOString(),draft:n},o=JSON.stringify(a,null,2),i=new Blob([o],{type:"application/json"}),l=URL.createObjectURL(i),e.abrupt("return",{success:!0,data:{url:l,filename:"draft-".concat(t,"-").concat(Date.now(),".json")}});case 11:return e.abrupt("return",{success:!1,error:"Draft not found"});case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",{success:!1,error:e.t0.message});case 17:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return l.apply(this,arguments)})},{key:"importDraft",value:(i=Se(Ce().mark((function e(t){var r,n,a,o=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},e.prev=1,(n="string"==typeof t?JSON.parse(t):t).draft){e.next=5;break}return e.abrupt("return",{success:!1,error:"Invalid import format"});case 5:return e.next=7,this.saveDraft(ke(ke({},n.draft),{},{forceNew:!0}),r);case 7:return a=e.sent,e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",{success:!1,error:e.t0.message});case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e){return i.apply(this,arguments)})},{key:"createBackup",value:(a=Se(Ce().mark((function e(){var t,r,n=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:null,e.prev=1,e.next=4,this.db.export("json",t);case 4:return r=e.sent,e.abrupt("return",{success:!0,data:r});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{success:!1,error:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return a.apply(this,arguments)})},{key:"restoreBackup",value:(n=Se(Ce().mark((function e(t){var r,n,a=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:null,e.prev=1,e.next=4,this.db.import(t,"json",r);case 4:return n=e.sent,e.abrupt("return",{success:!0,data:n});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{success:!1,error:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return n.apply(this,arguments)})},{key:"close",value:(r=Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.disableAutoSave(),this.lacerta&&this.lacerta.performanceMonitor.stopMonitoring(),this.db&&(this.db=null),this.initialized=!1,this.draftsCollection=null,this.currentDraftId=null,this.lastSaveHash=null;case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"reset",value:(t=Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.disableAutoSave(),!this.lacerta||!this.db){e.next=4;break}return e.next=4,this.lacerta.dropDatabase("editorDrafts");case 4:this.initialized=!1,this.db=null,this.draftsCollection=null,this.currentDraftId=null,this.lastSaveHash=null;case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getOptimizationTips",value:(e=Se(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lacerta){e.next=2;break}return e.abrupt("return",{success:!1,error:"Not initialized"});case 2:return t=this.lacerta.performanceMonitor.getOptimizationTips(),e.abrupt("return",{success:!0,data:t});case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t,r,n,a,i,l,s,c,u,d,f,p,h,m,g,v,b,y}(),Me=function(e,t,r){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"LINK"===r.getEntity(t).getType()}),t)},Be=function(e){var t=e.contentState.getEntity(e.entityKey).getData().url;return n.default.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:{color:"#90caf9"}},e.children)},Ne=function(e){function t(e){var r,a,o;Ee(this,t),xe(r=he(this,t,[e]),"showConfirmDialog",(function(e,t,n){r.setState({confirmDialogOpen:!0,confirmDialogTitle:e,confirmDialogMessage:t,confirmDialogAction:n})})),xe(r,"closeConfirmDialog",(function(){r.setState({confirmDialogOpen:!1,confirmDialogAction:null})})),xe(r,"handleConfirmAction",(function(){r.state.confirmDialogAction&&r.state.confirmDialogAction(),r.closeConfirmDialog()})),xe(r,"showPasswordDialog",(function(e,t){r.setState({passwordDialogOpen:!0,passwordDialogTitle:e,passwordDialogValue:"",passwordDialogAction:t})})),xe(r,"closePasswordDialog",(function(){r.setState({passwordDialogOpen:!1,passwordDialogAction:null,passwordDialogValue:""})})),xe(r,"handlePasswordAction",(function(){r.state.passwordDialogAction&&r.state.passwordDialogAction(r.state.passwordDialogValue),r.closePasswordDialog()})),xe(r,"showImageUrlDialog",(function(){r.setState({imageUrlDialogOpen:!0,imageUrlDialogValue:"https://"})})),xe(r,"closeImageUrlDialog",(function(){r.setState({imageUrlDialogOpen:!1,imageUrlDialogValue:""})})),xe(r,"handleImageUrlInsert",(function(){var e=r.state.imageUrlDialogValue;e&&e.trim()&&"https://"!==e&&r.insertImageUrl(e),r.closeImageUrlDialog()})),xe(r,"saveDraft",Se(Ce().mark((function e(){var t,n,a,o,i,s,c,u,d,f,p,h,m,g,v,b,y=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]&&y[0],n=y.length>1&&void 0!==y[1]&&y[1],a=y.length>2&&void 0!==y[2]?y[2]:{},o=r.state,i=o.editorState,s=o.title,c=o.description,u=o.tags,d=o.payout,f=o.enableComments,p=o.enableMonetization,h=r.props.gradient,m=i.getCurrentContent(),g=(0,l.u)(m),s.trim()||g.trim()){e.next=10;break}return t&&r.showSnackbar("Cannot save empty draft","warning"),e.abrupt("return",null);case 10:return e.prev=10,e.next=13,r.draftManager.saveDraft(ke({title:s||"Untitled",description:c,content:g,tags:u,settings:{payout:d,enableComments:f,enableMonetization:p},gradient:h,metadata:{editorVersion:"2.0",platform:"web",browser:navigator.userAgent},forceNew:n},a),{permanent:!1!==a.permanent,force:a.force||!1});case 13:if(!(v=e.sent).success){e.next=21;break}return b=v.data.id,r.setState({currentDraftId:b,lastSaved:v.data.lastSaved,draftVersion:v.data.version,wordCount:v.data.wordCount||r.state.wordCount,readingTime:v.data.readingTime||r.state.readingTime}),t&&r.showSnackbar("Draft saved (v".concat(v.data.version,") - ").concat(v.data.wordCount," words"),"success"),e.abrupt("return",b);case 21:return"No changes detected"===v.error?t&&r.showSnackbar("Draft is up to date","info"):r.showSnackbar(v.error||"Failed to save draft","error"),e.abrupt("return",null);case 23:e.next=30;break;case 25:return e.prev=25,e.t0=e.catch(10),console.error("Save draft error:",e.t0),r.showSnackbar("Failed to save draft","error"),e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,null,[[10,25]])})))),xe(r,"loadDraft",function(){var e=Se(Ce().mark((function e(t){var n,a,o,l,c,u,d,f,p,h,m,g,v,b,y,w,k,x=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.length>1&&void 0!==x[1]?x[1]:null,e.prev=1,e.next=4,r.draftManager.getDraft(t,n);case 4:if((g=e.sent).success){e.next=8;break}return r.showSnackbar(g.error||"Draft not found","error"),e.abrupt("return",!1);case 8:return v=g.data,r.draftManager.setCurrentDraftId(t),b=(0,s.N)(v.content||""),y=new i.CompositeDecorator([{strategy:Me,component:Be}]),w=i.EditorState.createWithContent(b,y),r.setState({editorState:w,title:v.title||"",description:v.description||"",tags:v.tags||[],payout:(null===(a=v.settings)||void 0===a?void 0:a.payout)||"everyone",enableComments:null===(o=null===(l=v.settings)||void 0===l?void 0:l.enableComments)||void 0===o||o,enableMonetization:null!==(c=null===(u=v.settings)||void 0===u?void 0:u.enableMonetization)&&void 0!==c&&c,currentDraftId:t,lastSaved:v.lastSaved,draftVersion:(null===(d=v.metadata)||void 0===d?void 0:d.version)||1,wordCount:(null===(f=v.metadata)||void 0===f?void 0:f.wordCount)||0,readingTime:(null===(p=v.metadata)||void 0===p?void 0:p.readingTime)||0,draftsDialogOpen:!1}),v.gradient&&r.props.setGradient&&r.props.setGradient(v.gradient),k=(null===(h=v.revisions)||void 0===h?void 0:h.length)||0,r.showSnackbar("Draft loaded (v".concat((null===(m=v.metadata)||void 0===m?void 0:m.version)||1,", ").concat(k," revisions)"),"success"),e.abrupt("return",!0);case 20:return e.prev=20,e.t0=e.catch(1),console.error("Error loading draft:",e.t0),r.showSnackbar("Failed to load draft content","error"),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}()),xe(r,"createNewDraft",Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.state.currentDraftId&&r.state.editorState.getCurrentContent().hasText()?r.showConfirmDialog("Create New Draft","Save current draft before creating a new one?",Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.saveDraft(!0);case 2:r.proceedWithNewDraft();case 3:case"end":return e.stop()}}),e)})))):r.proceedWithNewDraft();case 1:case"end":return e.stop()}}),e)})))),xe(r,"proceedWithNewDraft",Se(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.draftManager.startNewDraft(),t=new i.CompositeDecorator([{strategy:Me,component:Be}]),r.setState({editorState:i.EditorState.createEmpty(t),title:"",description:"",tags:[],currentDraftId:null,lastSaved:null,draftVersion:1,wordCount:0,readingTime:0,draftsDialogOpen:!1}),r.props.setGradient&&r.props.setGradient(null),r.showSnackbar("New draft created","info");case 5:case"end":return e.stop()}}),e)})))),xe(r,"deleteDraft",function(){var e=Se(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.showConfirmDialog("Delete Draft","Are you sure you want to delete this draft? This action cannot be undone.",Se(Ce().mark((function e(){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.draftManager.deleteDraft(t,{force:!0});case 3:if(!(n=e.sent).success){e.next=13;break}if(r.state.currentDraftId!==t){e.next=8;break}return e.next=8,r.proceedWithNewDraft();case 8:return e.next=10,r.loadDrafts();case 10:r.showSnackbar("Draft deleted successfully","success"),e.next=14;break;case 13:r.showSnackbar(n.error||"Failed to delete draft","error");case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Delete draft error:",e.t0),r.showSnackbar("Failed to delete draft","error");case 20:case"end":return e.stop()}}),e,null,[[0,16]])}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xe(r,"batchDeleteDrafts",function(){var e=Se(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.showConfirmDialog("Delete Multiple Drafts","Are you sure you want to delete ".concat(t.length," drafts?"),Se(Ce().mark((function e(){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.draftManager.batchDelete(t);case 3:if(!(n=e.sent).success){e.next=11;break}return r.showSnackbar("Deleted ".concat(n.data.successful," drafts successfully"),"success"),n.data.failed>0&&console.warn("Failed to delete ".concat(n.data.failed," drafts")),e.next=9,r.loadDrafts();case 9:e.next=12;break;case 11:r.showSnackbar(n.error||"Batch delete failed","error");case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Batch delete error:",e.t0),r.showSnackbar("Batch delete failed","error");case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xe(r,"loadDrafts",Se(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({draftsLoading:!0}),e.prev=1,e.next=4,r.draftManager.getAllDrafts({searchQuery:r.state.draftsSearchQuery,tags:r.state.filterTags||[],status:r.state.filterStatus||null,sortBy:r.state.sortBy||"lastSaved",sortOrder:r.state.sortOrder||-1,limit:50});case 4:(t=e.sent).success?r.setState({drafts:t.data,totalDrafts:t.total,draftsLoading:!1}):(r.setState({draftsLoading:!1,drafts:[]}),r.showSnackbar(t.error||"Failed to load drafts","error")),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Load drafts error:",e.t0),r.setState({draftsLoading:!1,drafts:[]}),r.showSnackbar("Failed to load drafts","error");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))),xe(r,"exportDraft",Se(Ce().mark((function e(){var t,n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.state.currentDraftId){e.next=3;break}return r.showSnackbar("No draft to export","warning"),e.abrupt("return");case 3:return e.prev=3,e.next=6,r.draftManager.exportDraft(r.state.currentDraftId);case 6:(t=e.sent).success?((n=document.createElement("a")).href=t.data.url,n.download=t.data.filename,n.click(),URL.revokeObjectURL(t.data.url),r.showSnackbar("Draft exported successfully","success")):r.showSnackbar(t.error||"Export failed","error"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Export error:",e.t0),r.showSnackbar("Export failed","error");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))),xe(r,"importDraft",function(){var e=Se(Ce().mark((function e(t){var n,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.text();case 3:return n=e.sent,e.next=6,r.draftManager.importDraft(n);case 6:if(!(a=e.sent).success){e.next=13;break}return e.next=10,r.loadDraft(a.data.id);case 10:r.showSnackbar("Draft imported successfully","success"),e.next=14;break;case 13:r.showSnackbar(a.error||"Import failed","error");case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Import error:",e.t0),r.showSnackbar("Import failed","error");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()),xe(r,"createBackup",Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.showPasswordDialog("Enter password for backup (optional)",function(){var e=Se(Ce().mark((function e(t){var n,a,o,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.draftManager.createBackup(t||null);case 3:(n=e.sent).success?(a=new Blob([n.data],{type:"application/json"}),o=URL.createObjectURL(a),(i=document.createElement("a")).href=o,i.download="drafts-backup-".concat(Date.now(),".json"),i.click(),URL.revokeObjectURL(o),r.showSnackbar("Backup created successfully","success")):r.showSnackbar(n.error||"Backup failed","error"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Backup error:",e.t0),r.showSnackbar("Backup failed","error");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))),xe(r,"updateDraftStats",Se(Ce().mark((function e(){var t,n,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.draftManager.getStats();case 3:(t=e.sent).success&&(console.log("Draft statistics:",t.data),r.setState({totalDrafts:(null===(n=t.data.drafts)||void 0===n?void 0:n.totalDrafts)||0,totalWords:(null===(a=t.data.drafts)||void 0===a?void 0:a.totalWords)||0,avgWordCount:Math.round((null===(o=t.data.drafts)||void 0===o?void 0:o.avgWordCount)||0)})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to get stats:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),xe(r,"getOptimizationTips",Se(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.draftManager.getOptimizationTips();case 3:(t=e.sent).success&&t.data.length>0&&(console.log("Optimization tips:",t.data),r.showSnackbar(t.data[0],"info")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to get optimization tips:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),xe(r,"checkIfSensitive",(function(){var e=r.state,t=e.tags,n=e.title,a=e.description,o="".concat(n," ").concat(a," ").concat(t.join(" ")).toLowerCase();return["private","personal","confidential","secret"].some((function(e){return o.includes(e)}))})),xe(r,"generateSessionPassword",(function(){return"".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))})),xe(r,"debouncedSave",(o=0,function(){a&&clearTimeout(a);var e=Date.now()-o<2e3?2e3:1e3;a=setTimeout(Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Date.now(),e.next=3,r.saveDraft(!1);case 3:case"end":return e.stop()}}),e)}))),e)})),xe(r,"openDraftsDialog",Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.saveDraft(!1);case 2:return r.setState({draftsDialogOpen:!0}),e.next=5,r.loadDrafts();case 5:return e.next=7,r.updateDraftStats();case 7:case"end":return e.stop()}}),e)})))),xe(r,"closeDraftsDialog",(function(){r.setState({draftsDialogOpen:!1,draftsSearchQuery:"",filterTags:[],filterStatus:null})})),xe(r,"handleDraftsSearch",(function(e){r.setState({draftsSearchQuery:e.target.value},(function(){clearTimeout(r.searchTimeout),r.searchTimeout=setTimeout((function(){r.loadDrafts()}),300)}))})),xe(r,"handleSortChange",(function(e){r.setState({sortBy:e,sortOrder:"title"===e?1:-1},(function(){r.loadDrafts()}))})),xe(r,"handleFilterChange",(function(e,t){r.setState(xe({},e,t),(function(){r.loadDrafts()}))})),xe(r,"showSnackbar",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";r.setState({snackbarOpen:!0,snackbarMessage:e,snackbarSeverity:t})})),xe(r,"closeSnackbar",(function(){r.setState({snackbarOpen:!1})})),xe(r,"formatDate",(function(e){var t=new Date(e),r=new Date-t;if(r<6e4)return"Just now";if(r<36e5){var n=Math.floor(r/6e4);return"".concat(n," minute").concat(n>1?"s":""," ago")}if(r<864e5){var a=Math.floor(r/36e5);return"".concat(a," hour").concat(a>1?"s":""," ago")}if(r<6048e5){var o=Math.floor(r/864e5);return"".concat(o," day").concat(o>1?"s":""," ago")}return t.toLocaleDateString()})),xe(r,"onChange",(function(e){r.mounted&&r.setState({editorState:e},(function(){r.updateStats(),r.debouncedSave()}))})),xe(r,"focus",(function(){r.editorRef.current&&r.editorRef.current.focus()})),xe(r,"handleKeyCommand",(function(e){var t=r.state.editorState,n=i.RichUtils.handleKeyCommand(t,e);return n?(r.onChange(n),"handled"):"save"===e?(r.handleSave(),"handled"):"not-handled"})),xe(r,"keyBindingFn",(function(e){return(e.metaKey||e.ctrlKey)&&"s"===e.key?(e.preventDefault(),"save"):(e.metaKey||e.ctrlKey)&&"k"===e.key?(e.preventDefault(),r.openLinkDialog(),"handled"):(e.metaKey||e.ctrlKey)&&"e"===e.key?(e.preventDefault(),r.exportDraft(),"handled"):(0,i.getDefaultKeyBinding)(e)})),xe(r,"toggleInlineStyle",(function(e){r.onChange(i.RichUtils.toggleInlineStyle(r.state.editorState,e))})),xe(r,"toggleBlockType",(function(e){r.onChange(i.RichUtils.toggleBlockType(r.state.editorState,e))})),xe(r,"hasInlineStyle",(function(e){return r.state.editorState.getCurrentInlineStyle().has(e)})),xe(r,"hasBlockType",(function(e){var t=r.state.editorState.getSelection();return r.state.editorState.getCurrentContent().getBlockForKey(t.getStartKey()).getType()===e})),xe(r,"openLinkDialog",(function(){var e=r.state.editorState,t=e.getSelection(),n=e.getCurrentContent(),a=t.getStartKey(),o=t.getStartOffset(),i=t.getEndOffset(),l=n.getBlockForKey(a).getText().slice(o,i);r.setState({linkDialogOpen:!0,linkText:l,linkUrl:""})})),xe(r,"closeLinkDialog",(function(){r.setState({linkDialogOpen:!1,linkUrl:"",linkText:""})})),xe(r,"insertLink",(function(){var e,t=r.state,n=t.editorState,a=t.linkUrl,o=t.linkText,l=n.getCurrentContent().createEntity("LINK","MUTABLE",{url:a}),s=l.getLastCreatedEntityKey(),c=n.getSelection();e=c.isCollapsed()?o?i.Modifier.insertText(l,c,o,null,s):i.Modifier.insertText(l,c,a,null,s):i.Modifier.applyEntity(l,c,s);var u=i.EditorState.push(n,e,"apply-entity");r.onChange(u),r.closeLinkDialog()})),xe(r,"insertImage",(function(){r.showImageUrlDialog()})),xe(r,"insertImageUrl",(function(e){if(e){var t=r.state.editorState,n=t.getCurrentContent().createEntity("IMAGE","IMMUTABLE",{src:e}).getLastCreatedEntityKey(),a=i.AtomicBlockUtils.insertAtomicBlock(t,n," ");r.onChange(a)}})),xe(r,"handleImageUpload",(function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){var a=new FileReader;a.onload=function(e){r.props.setGradient(e.target.result)},a.readAsDataURL(n)}})),xe(r,"removeCoverImage",(function(){r.props.setGradient(null)})),xe(r,"openGradientEditor",(function(e){e.stopImmediatePropagation(),L.Zx()})),xe(r,"handleSave",Se(Ce().mark((function e(){var t,n,a,o,s,c,u,d,f,p,h,m;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.saveDraft(!0);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:n=r.props.gradient,a=r.state,o=a.editorState,s=a.title,c=a.description,u=a.tags,d=a.payout,f=a.enableComments,p=a.enableMonetization,h=o.getCurrentContent(),(0,i.convertToRaw)(h),m=(0,l.u)(h),r.props.onSave&&r.props.onSave({title:s,description:c,tags:u.map((function(e){return e.trim()})).filter(Boolean),content:m,gradient:n,settings:{payout:d,enableComments:f,enableMonetization:p},draftId:t});case 11:case"end":return e.stop()}}),e)})))),xe(r,"handlePublish",Se(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.handleSave();case 2:if(!r.state.currentDraftId){e.next=5;break}return e.next=5,r.draftManager.saveDraft({status:"published"});case 5:r.props.onPublish&&r.props.onPublish();case 6:case"end":return e.stop()}}),e)})))),xe(r,"updateStats",(function(){var e=r.state.editorState.getCurrentContent().getPlainText(),t=e.trim()?e.trim().split(/\s+/).length:0,n=Math.ceil(t/200);r.setState({wordCount:t,readingTime:n})})),xe(r,"openFormatMenu",(function(e){return r.setState({formatMenuAnchor:e.currentTarget})})),xe(r,"closeFormatMenu",(function(){return r.setState({formatMenuAnchor:null})})),xe(r,"openHeadingMenu",(function(e){return r.setState({headingMenuAnchor:e.currentTarget})})),xe(r,"closeHeadingMenu",(function(){return r.setState({headingMenuAnchor:null})})),xe(r,"openListMenu",(function(e){return r.setState({listMenuAnchor:e.currentTarget})})),xe(r,"closeListMenu",(function(){return r.setState({listMenuAnchor:null})})),xe(r,"toggleEditMenu",(function(){return r.setState({editOpened:!r.state.editOpened})})),xe(r,"resetEditMenu",(function(){return r.setState({editOpened:!1})})),xe(r,"getBlockStyle",(function(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";case"code-block":return"RichEditor-codeblock";default:return null}})),xe(r,"blockRendererFn",(function(e){return"atomic"===e.getType()?{component:Pe,editable:!1}:null})),xe(r,"_handleTabChange",(function(e,t){r.setState({tab:t},(function(){r.swipeableViewScrollTop(),1===parseInt(t)&&r.resetEditMenu()}))})),xe(r,"swipeableViewScrollTop",(function(){var e=document.getElementsByClassName("react-swipeable-view-container").item(0).children.item(0);e.style.scrollBehavior="smooth",e.scrollTop=0}));var c=new i.CompositeDecorator([{strategy:Me,component:Be}]);return r.state={editorState:i.EditorState.createEmpty(c),title:"",description:"",tags:[],tab:0,currentDraftId:null,payout:"everyone",enableComments:!0,enableMonetization:!1,editOpened:!1,formatMenuAnchor:null,headingMenuAnchor:null,listMenuAnchor:null,linkDialogOpen:!1,linkUrl:"",linkText:"",draftsDialogOpen:!1,drafts:[],draftsLoading:!1,draftsSearchQuery:"",confirmDialogOpen:!1,confirmDialogTitle:"",confirmDialogMessage:"",confirmDialogAction:null,passwordDialogOpen:!1,passwordDialogTitle:"",passwordDialogValue:"",passwordDialogAction:null,imageUrlDialogOpen:!1,imageUrlDialogValue:"",snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"success",wordCount:0,readingTime:0},r.editorRef=n.default.createRef(),r.fileInputRef=n.default.createRef(),r.saveTimer=null,r.draftManager=new Te,r}return ve(t,e),Ie(t,[{key:"componentDidMount",value:(a=Se(Ce().mark((function e(){var t,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mounted=!0,e.prev=1,e.next=4,this.draftManager.initialize();case 4:if((t=e.sent).success){e.next=8;break}return this.showSnackbar("Failed to initialize draft storage","error"),e.abrupt("return");case 8:return t.stats&&console.log("Draft storage initialized:",t.stats),this.draftManager.enableAutoSave(3e4),e.next=12,this.draftManager.loadSession();case 12:if(!(r=e.sent).success||!r.draftId){e.next=26;break}return e.next=16,this.draftManager.getDraft(r.draftId);case 16:if(!e.sent.success){e.next=23;break}return e.next=20,this.loadDraft(r.draftId);case 20:this.showSnackbar("Session restored","info"),e.next=26;break;case 23:return console.warn("Session draft not found, starting fresh"),e.next=26,this.draftManager.clearSession();case 26:return e.next=28,this.updateDraftStats();case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(1),console.error("Initialization error:",e.t0),this.showSnackbar("Draft storage initialization failed","error");case 34:case"end":return e.stop()}}),e,this,[[1,30]])}))),function(){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:(r=Se(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mounted=!1,this.saveTimer&&clearTimeout(this.saveTimer),this.draftManager.disableAutoSave(),e.prev=3,t=this.checkIfSensitive(),e.next=7,this.saveDraft(!1,!1,{encrypted:t,password:t?this.generateSessionPassword():null});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.warn("Failed to save draft on unmount:",e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,r=t.classes,a=t.open,o=t.gradient,l=t.onClose,s=this.state,L=s.editorState,he=s.title,me=s.description,ge=s.tags,ve=s.payout,be=(s.enableComments,s.enableMonetization,s.editOpened),ye=s.formatMenuAnchor,we=s.headingMenuAnchor,ke=s.listMenuAnchor,xe=s.linkDialogOpen,Ce=s.linkUrl,De=s.linkText,Se=s.wordCount,Ee=s.readingTime,Ae=s.tab,Ie=s.currentDraftId,Oe=s.draftsDialogOpen,Te=s.drafts,Me=s.draftsLoading,Be=s.draftsSearchQuery,Ne=s.snackbarOpen,Pe=s.snackbarMessage,je=s.snackbarSeverity,Le=s.confirmDialogOpen,Re=s.confirmDialogTitle,Ue=s.confirmDialogMessage,ze=s.passwordDialogOpen,Fe=s.passwordDialogTitle,_e=s.passwordDialogValue,We=s.imageUrlDialogOpen,He=s.imageUrlDialogValue,Ke=window.innerWidth<=960,Ve=Ke?n.default.createElement("div",{className:r.settingsActions},n.default.createElement(g.A,{variant:"text",color:"inherit",startIcon:n.default.createElement(ne.A,null),onClick:this.openDraftsDialog},"Drafts"),0===parseInt(Ae)?n.default.createElement(S.A,{in:0===parseInt(Ae)},n.default.createElement(g.A,{variant:"contained",startIcon:n.default.createElement(se.A,null),onClick:function(){return e.setState({tab:1},e.resetEditMenu)},style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Finish")):n.default.createElement(S.A,{in:1===parseInt(Ae)},n.default.createElement(g.A,{variant:"contained",startIcon:n.default.createElement(U.A,null),onClick:this.handlePublish,style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Publish"))):n.default.createElement("div",{className:r.settingsActions},n.default.createElement(g.A,{variant:"text",color:"inherit",startIcon:n.default.createElement(ne.A,null),onClick:this.openDraftsDialog},"Drafts"),n.default.createElement(g.A,{variant:"contained",startIcon:n.default.createElement(U.A,null),onClick:this.handlePublish,style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Publish")),$e=n.default.createElement("div",{className:r.editorSection},n.default.createElement("div",{className:r.editorHeader},n.default.createElement(v.A,{className:r.titleInput,placeholder:"Title",value:he,onChange:function(t){return e.setState({title:t.target.value})},fullWidth:!0}),n.default.createElement(v.A,{className:r.descriptionInput,placeholder:"Short Description",value:me,onChange:function(t){return e.setState({description:t.target.value})},fullWidth:!0,multiline:!0,rows:2})),n.default.createElement("div",{className:r.editorWrapper,onClick:this.focus},n.default.createElement(i.Editor,{ref:this.editorRef,editorState:L,onChange:this.onChange,handleKeyCommand:this.handleKeyCommand,keyBindingFn:this.keyBindingFn,blockStyleFn:this.getBlockStyle,blockRendererFn:this.blockRendererFn,placeholder:"Tell your story...",spellCheck:!0}))),Ge=n.default.createElement("div",{className:r.settingsPanel},n.default.createElement("div",{className:r.settingsContent},n.default.createElement("div",{className:r.settingsSection},n.default.createElement(b.A,{variant:"subtitle2",gutterBottom:!0},"Cover Image"),n.default.createElement("div",{className:r.imageUploadArea},n.default.createElement("input",{ref:this.fileInputRef,type:"file",accept:"image/*",style:{display:"none"},onChange:this.handleImageUpload}),o?n.default.createElement("div",null,n.default.createElement("img",{src:o,alt:"Cover",className:r.uploadedImage}),n.default.createElement("div",{className:r.imageOverlay},n.default.createElement(g.A,{size:"small",startIcon:n.default.createElement(Y.A,null),onClick:this.removeCoverImage,style:{color:"#fff"}},"Remove"))):n.default.createElement(w.A,{textAlign:"center",onClick:function(){var t;return null===(t=e.fileInputRef.current)||void 0===t?void 0:t.click()},style:{cursor:"pointer"}},n.default.createElement(X.A,{style:{fontSize:48,color:"#666"}}),n.default.createElement(b.A,{variant:"body2",style:{color:"#999",marginTop:8}},"Click to upload"),n.default.createElement("div",{className:r.imageOverlay},n.default.createElement(g.A,{size:"small",startIcon:n.default.createElement(ue.A,null),onClick:this.openGradientEditor,style:{color:"#fff"}},"Generate"))))),n.default.createElement(b.A,{variant:"subtitle2",gutterBottom:!0},"Classification"),n.default.createElement("div",{className:r.settingsSection},n.default.createElement(u.A,{fullWidth:!0,variant:"outlined",label:"Tags",placeholder:"Tags for content classification",value:ge,inputProps:{style:{minWidth:"64px"}},onBeforeAdd:function(){return!0},onAdd:function(t){return e.setState({tags:ge.concat(t)})},onDelete:function(t){return e.setState({tags:ge.filter((function(e){return-1===t.indexOf(e)}))})}})),n.default.createElement("div",{className:r.settingsSection},n.default.createElement(b.A,{variant:"subtitle2",gutterBottom:!0},"Payout"),n.default.createElement(E.A,{variant:"outlined",fullWidth:!0,size:"small"},n.default.createElement(A.A,{value:ve,onChange:function(t){return e.setState({payout:t.target.value})},style:{color:"#fff"}},n.default.createElement(x.A,{value:"author"},"100% Author"),n.default.createElement(x.A,{value:"everyone"},"50% / 50%"),n.default.createElement(x.A,{value:"curators"},"100% Curators")))),Ie&&n.default.createElement("div",{className:r.settingsSection},n.default.createElement(b.A,{variant:"caption",style:{color:"rgba(255,255,255,0.5)"}},"Draft ID: ",Ie.substring(0,8),"..."))),Ke?null:Ve),qe=Ke?n.default.createElement(n.default.Fragment,null,n.default.createElement(le.Ay,{axis:"y",ignoreNativeScroll:!1,containerStyle:{minHeight:"100%",height:"100%",position:"relative"},animateHeight:!1,animateTransitions:!0,disableLazyLoading:!0,resistance:!0,springConfig:{tension:450,friction:60,duration:"120ms",easeFunction:"cubic-bezier(0.280, 0.840, 0.420, 1)",delay:"5ms"},index:Ae,onChangeIndex:function(t){return e._handleTabChange({},t)},disabled:!1,key:"swipe-able-view"},$e,Ge),Ve):[$e,Ge];return n.default.createElement(n.default.Fragment,null,n.default.createElement(c.A,{className:r.dialog,open:a,maxWidth:!1,onClose:l},n.default.createElement(p.A,{position:"sticky",className:r.appBar},n.default.createElement(h.A,null,n.default.createElement(w.A,{flexGrow:1,ml:2},n.default.createElement(b.A,{variant:"h6",style:{fontWeight:500}},"Write a New Blog Post"),n.default.createElement(b.A,{variant:"caption",style:{color:"rgba(255,255,255,0.6)"}},Se," words  ",Ee," min read",Ie&&"  Draft saved")),n.default.createElement(m.A,{color:"inherit",onClick:l},n.default.createElement(R.A,null)))),n.default.createElement(d.A,{className:r.contentArea},n.default.createElement("div",{className:r.mainContainer},qe)),n.default.createElement(ce.A,{in:0===parseInt(Ae)||!Ke,out:1===parseInt(Ae)},n.default.createElement("div",{className:"".concat(r.fixedSidebar," ").concat(be?"opened":"")},!be&&n.default.createElement(y.Ay,{title:"Expand",placement:"right"},n.default.createElement(m.A,{className:"edit "+r.menuIconButton,onClick:this.toggleEditMenu},n.default.createElement(ee.A,null))),n.default.createElement(y.Ay,{title:"Bold (Ctrl+B)",placement:"right"},n.default.createElement(m.A,{className:"".concat(r.menuIconButton," ").concat(this.hasInlineStyle("BOLD")?"active":""),onMouseDown:function(t){t.preventDefault(),e.toggleInlineStyle("BOLD")}},n.default.createElement(z.A,null))),n.default.createElement(y.Ay,{title:"Italic (Ctrl+I)",placement:"right"},n.default.createElement(m.A,{className:"".concat(r.menuIconButton," ").concat(this.hasInlineStyle("ITALIC")?"active":""),onMouseDown:function(t){t.preventDefault(),e.toggleInlineStyle("ITALIC")}},n.default.createElement(F.A,null))),n.default.createElement(y.Ay,{title:"More",placement:"right"},n.default.createElement(m.A,{className:r.menuIconButton,onClick:this.openFormatMenu},n.default.createElement(_.A,null))),n.default.createElement("div",{className:r.menuDivider}),n.default.createElement(y.Ay,{title:"Heading",placement:"right"},n.default.createElement(m.A,{className:r.menuIconButton,onClick:this.openHeadingMenu},n.default.createElement(q.A,null))),n.default.createElement(y.Ay,{title:"Lists",placement:"right"},n.default.createElement(m.A,{className:r.menuIconButton,onClick:this.openListMenu},n.default.createElement($.A,null))),n.default.createElement(y.Ay,{title:"Quote",placement:"right"},n.default.createElement(m.A,{className:"".concat(r.menuIconButton," ").concat(this.hasBlockType("blockquote")?"active":""),onMouseDown:function(t){t.preventDefault(),e.toggleBlockType("blockquote")}},n.default.createElement(W.A,null))),n.default.createElement("div",{className:r.menuDivider}),n.default.createElement(y.Ay,{title:"Link (Ctrl+K)",placement:"right"},n.default.createElement(m.A,{className:r.menuIconButton,onClick:this.openLinkDialog},n.default.createElement(K.A,null))),n.default.createElement(y.Ay,{title:"Image",placement:"right"},n.default.createElement(m.A,{className:r.menuIconButton,onClick:this.insertImage},n.default.createElement(V.A,null))),n.default.createElement("div",{className:r.menuDivider}),n.default.createElement(y.Ay,{title:"Undo",placement:"right"},n.default.createElement(m.A,{className:r.menuIconButton,onClick:function(){return e.onChange(i.EditorState.undo(L))}},n.default.createElement(Q.A,null))),n.default.createElement(y.Ay,{title:"Redo",placement:"right"},n.default.createElement(m.A,{className:r.menuIconButton,onClick:function(){return e.onChange(i.EditorState.redo(L))}},n.default.createElement(J.A,null))),be&&n.default.createElement(y.Ay,{title:"Collapse",placement:"right"},n.default.createElement(m.A,{className:"close "+r.menuIconButton,style:{backgroundColor:"#000",color:"#fff",marginTop:8},onClick:this.toggleEditMenu},n.default.createElement(Z.A,null)))))),n.default.createElement(c.A,{className:r.draftsDialog,open:Oe,onClose:this.closeDraftsDialog,maxWidth:"md",fullWidth:!0},n.default.createElement("div",{className:r.draftsDialogTitle},n.default.createElement(w.A,{display:"flex",alignItems:"center"},n.default.createElement(j.A,{className:r.draftAvatar},n.default.createElement(ne.A,null)),n.default.createElement(b.A,{variant:"h5",style:{marginLeft:16,fontWeight:600}},"Your Drafts")),n.default.createElement(w.A,null,n.default.createElement(g.A,{color:"inherit",startIcon:n.default.createElement(ie.A,null),onClick:this.createNewDraft,style:{marginRight:8,backgroundColor:"rgba(255,255,255,0.1)",borderRadius:16}},"New Draft"),n.default.createElement(m.A,{color:"inherit",onClick:this.closeDraftsDialog},n.default.createElement(R.A,null)))),n.default.createElement(d.A,{className:r.draftsDialogContent},n.default.createElement(v.A,{className:r.searchField,variant:"outlined",placeholder:"Search drafts...",value:Be,onChange:this.handleDraftsSearch,size:"small",InputProps:{startAdornment:n.default.createElement(re.A,{position:"start"},n.default.createElement(oe.A,null))}}),Me?n.default.createElement("div",{className:r.loadingState},n.default.createElement(T.A,null)):0===Te.length?n.default.createElement("div",{className:r.emptyState},n.default.createElement(de.A,{className:r.emptyStateIcon}),n.default.createElement(b.A,{variant:"h5",gutterBottom:!0,style:{fontWeight:500}},Be?"No drafts found":"No drafts yet"),n.default.createElement(b.A,{variant:"body1",style:{color:"rgba(255,255,255,0.6)"}},Be?"Try a different search query":"Start writing to save your first draft automatically")):n.default.createElement("div",{className:r.draftsList},Te.map((function(t){var a,o;return n.default.createElement(N.A,{key:t._id,className:r.draftCard,onClick:function(){return e.loadDraft(t._id)}},n.default.createElement(P.A,{className:r.draftCardContent},n.default.createElement("div",{className:r.draftHeader},n.default.createElement(w.A,{flex:1},n.default.createElement(b.A,{className:r.draftTitle},t.title||"Untitled Draft"),t.description&&n.default.createElement(b.A,{className:r.draftDescription},t.description)),n.default.createElement(m.A,{className:r.deleteButton,onClick:function(r){r.stopPropagation(),e.deleteDraft(t._id)}},n.default.createElement(Y.A,null))),n.default.createElement("div",{className:r.draftMeta},n.default.createElement("div",{className:r.draftMetaItem},n.default.createElement(ae.A,{fontSize:"small"}),n.default.createElement("span",null,e.formatDate(t.lastSaved))),n.default.createElement("div",{className:r.draftMetaItem},n.default.createElement("span",null,(null===(a=t.metadata)||void 0===a?void 0:a.wordCount)||0," words")),n.default.createElement("div",{className:r.draftMetaItem},n.default.createElement("span",null,(null===(o=t.metadata)||void 0===o?void 0:o.readingTime)||0," min read"))),t.tags&&t.tags.length>0&&n.default.createElement("div",{className:r.draftTags},t.tags.slice(0,3).map((function(e,t){return n.default.createElement(O.A,{key:t,label:e,size:"small",className:r.draftTag})})),t.tags.length>3&&n.default.createElement(O.A,{label:"+".concat(t.tags.length-3),size:"small",className:r.draftTag}))))}))))),n.default.createElement(c.A,{className:r.confirmDialog,open:Le,onClose:this.closeConfirmDialog},n.default.createElement(I.A,null,n.default.createElement(w.A,{display:"flex",alignItems:"center"},n.default.createElement(fe.A,{style:{marginRight:8,color:"#ff9800"}}),Re)),n.default.createElement(d.A,null,n.default.createElement(b.A,null,Ue)),n.default.createElement(f.A,null,n.default.createElement(g.A,{onClick:this.closeConfirmDialog,color:"inherit"},"Cancel"),n.default.createElement(g.A,{onClick:this.handleConfirmAction,variant:"contained",color:"primary"},"Confirm"))),n.default.createElement(c.A,{className:r.passwordDialog,open:ze,onClose:this.closePasswordDialog},n.default.createElement(I.A,null,n.default.createElement(w.A,{display:"flex",alignItems:"center"},n.default.createElement(pe.A,{style:{marginRight:8,color:"#4caf50"}}),Fe)),n.default.createElement(d.A,null,n.default.createElement(v.A,{className:r.darkInput,variant:"outlined",type:"password",label:"Password",value:_e,onChange:function(t){return e.setState({passwordDialogValue:t.target.value})},fullWidth:!0,autoFocus:!0,margin:"normal"})),n.default.createElement(f.A,null,n.default.createElement(g.A,{onClick:this.closePasswordDialog,color:"inherit"},"Cancel"),n.default.createElement(g.A,{onClick:this.handlePasswordAction,variant:"contained",color:"primary"},"Continue"))),n.default.createElement(c.A,{className:r.imageUrlDialog,open:We,onClose:this.closeImageUrlDialog},n.default.createElement(I.A,null,"Insert Image"),n.default.createElement(d.A,null,n.default.createElement(v.A,{className:r.darkInput,variant:"outlined",label:"Image URL",value:He,onChange:function(t){return e.setState({imageUrlDialogValue:t.target.value})},fullWidth:!0,autoFocus:!0,margin:"normal"})),n.default.createElement(f.A,null,n.default.createElement(g.A,{onClick:this.closeImageUrlDialog,color:"inherit"},"Cancel"),n.default.createElement(g.A,{onClick:this.handleImageUrlInsert,variant:"contained",color:"primary"},"Insert"))),n.default.createElement(k.A,{className:r.formatMenu,anchorEl:ye,open:Boolean(ye),onClose:this.closeFormatMenu},n.default.createElement(x.A,{onClick:function(){e.toggleInlineStyle("UNDERLINE"),e.closeFormatMenu()}},n.default.createElement(C.A,null,n.default.createElement(_.A,null)),n.default.createElement(D.A,{primary:"Underline"})),n.default.createElement(x.A,{onClick:function(){e.toggleInlineStyle("STRIKETHROUGH"),e.closeFormatMenu()}},n.default.createElement(C.A,null,n.default.createElement(te.A,null)),n.default.createElement(D.A,{primary:"Strikethrough"})),n.default.createElement(x.A,{onClick:function(){e.toggleInlineStyle("CODE"),e.closeFormatMenu()}},n.default.createElement(C.A,null,n.default.createElement(H.A,null)),n.default.createElement(D.A,{primary:"Code"}))),n.default.createElement(k.A,{className:r.formatMenu,anchorEl:we,open:Boolean(we),onClose:this.closeHeadingMenu},n.default.createElement(x.A,{onClick:function(){e.toggleBlockType("header-one"),e.closeHeadingMenu()}},n.default.createElement(D.A,{primary:"Heading 1"})),n.default.createElement(x.A,{onClick:function(){e.toggleBlockType("header-two"),e.closeHeadingMenu()}},n.default.createElement(D.A,{primary:"Heading 2"})),n.default.createElement(x.A,{onClick:function(){e.toggleBlockType("header-three"),e.closeHeadingMenu()}},n.default.createElement(D.A,{primary:"Heading 3"}))),n.default.createElement(k.A,{className:r.formatMenu,anchorEl:ke,open:Boolean(ke),onClose:this.closeListMenu},n.default.createElement(x.A,{onClick:function(){e.toggleBlockType("unordered-list-item"),e.closeListMenu()}},n.default.createElement(C.A,null,n.default.createElement($.A,null)),n.default.createElement(D.A,{primary:"Bullet List"})),n.default.createElement(x.A,{onClick:function(){e.toggleBlockType("ordered-list-item"),e.closeListMenu()}},n.default.createElement(C.A,null,n.default.createElement(G.A,null)),n.default.createElement(D.A,{primary:"Numbered List"}))),n.default.createElement(c.A,{PaperProps:{classes:{root:r.darkDialog}},open:xe,maxWidth:"xs",fullWidth:!0,onClose:this.closeLinkDialog},n.default.createElement(d.A,{className:r.darkDialogContent},n.default.createElement(b.A,{variant:"h6",gutterBottom:!0},"Insert Link"),n.default.createElement(v.A,{className:r.darkInput,variant:"outlined",label:"Link Text",value:De,onChange:function(t){return e.setState({linkText:t.target.value})},fullWidth:!0,style:{marginBottom:16}}),n.default.createElement(v.A,{className:r.darkInput,variant:"outlined",label:"URL",placeholder:"https://...",value:Ce,onChange:function(t){return e.setState({linkUrl:t.target.value})},fullWidth:!0,autoFocus:!0})),n.default.createElement(f.A,{className:r.darkDialogActions},n.default.createElement(g.A,{onClick:this.closeLinkDialog},"Cancel"),n.default.createElement(g.A,{variant:"contained",onClick:this.insertLink,style:{backgroundColor:"#fff",color:"#000"}},"Insert"))),n.default.createElement(M.A,{open:Ne,autoHideDuration:3e3,onClose:this.closeSnackbar,anchorOrigin:{vertical:"bottom",horizontal:"left"}},n.default.createElement(B.A,{onClose:this.closeSnackbar,severity:je},Pe)))}}]);var r,a}(n.PureComponent),Pe=function(e){function t(){return Ee(this,t),he(this,t,arguments)}return ve(t,e),Ie(t,[{key:"render",value:function(){var e=this.props.contentState.getEntity(this.props.block.getEntityAt(0)),t=e.getData().src;return"IMAGE"===e.getType()?n.default.createElement("div",{style:{textAlign:"center",margin:"16px 0"}},n.default.createElement("img",{src:t,alt:"",style:{maxWidth:"100%",height:"auto",borderRadius:8}})):null}}])}(n.PureComponent);const je=(0,a.default)((function(e){var t;return{dialog:{"& .MuiDialog-paper":xe(xe({zIndex:e.zIndex.drawer+10,backgroundColor:"#0c0c0c",color:"#fff",borderRadius:21},e.breakpoints.down("sm"),{margin:0,maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%",borderRadius:0}),e.breakpoints.up("md"),{maxWidth:"90vw",width:1200,height:"85vh"}),"& .MuiBackdrop-root":{zIndex:e.zIndex.drawer+1,backdropFilter:"blur(9px) grayscale(1)",overflow:"hidden",userSelect:"none"}},appBar:{backgroundColor:"transparent",boxShadow:"none","& .MuiToolbar-root":{minHeight:64,padding:"0 24px"}},contentArea:{display:"flex",flexDirection:"column",height:"100%",position:"relative",padding:0,overflow:"hidden",backgroundColor:"#0a0a0a"},mainContainer:xe({display:"flex",flex:1,overflow:"hidden",position:"relative"},e.breakpoints.down("sm"),{flexDirection:"column",overflow:"auto","& div.react-swipeable-view-container > div":{minHeight:"100%",maxHeight:"100%"},"& > div:first-child":{height:"100%"}}),fixedSidebar:xe({position:"fixed",top:"50%",transform:"translateY(-50%) !important",width:48,backgroundColor:"#ffffff",boxShadow:"2px 0 12px rgba(0,0,0,0.1)",zIndex:1100,display:"flex",flexDirection:"column",alignItems:"center",padding:"8px 0",borderRadius:"24px",marginLeft:"-24px",gap:2,"& .close, & .edit":{display:"none"}},e.breakpoints.down("sm"),{right:8,width:40,padding:4,height:40,overflow:"hidden",transform:"translateY(-50%) !important",transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important","&.opened":{padding:8,transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important",height:"375px"},"& .close, & .edit":{display:"flex"}}),menuIconButton:xe(xe(xe({color:"#616161",padding:6,margin:0,width:36,height:36},e.breakpoints.down("sm"),{width:32,height:32,padding:4}),"&:hover",{backgroundColor:"rgba(0,0,0,0.08)",color:"#212121"}),"&.active",{backgroundColor:"#000",color:"#fff"}),menuDivider:{width:"calc(100% - 16px)",height:1,backgroundColor:"#999",margin:"2px 0px"},editorSection:xe({flex:1,display:"flex",flexDirection:"column",overflow:"hidden",backgroundColor:"#171717",paddingLeft:32,paddingRight:16,borderRadius:"0px 32px 0px 0px"},e.breakpoints.down("sm"),{paddingLeft:8,paddingRight:8,borderRadius:"0px",overflow:"overlay",minHeight:"100%",maxHeight:"100%",position:"relative"}),editorHeader:{padding:e.spacing(3,3,2,3)},titleInput:{"& .MuiInputBase-root":{color:"#fff",fontSize:"2rem",fontWeight:600,padding:0,"&:before":{borderBottom:"none"},"&:hover:before":{borderBottom:"none"},"&:after":{borderBottom:"2px solid rgba(255,255,255,0.2)"}},"& .MuiInputBase-input":{padding:"8px 0"}},descriptionInput:{marginTop:16,"& .MuiInputBase-root":{color:"#ccc",fontSize:"1rem","&:before":{borderBottom:"1px solid rgba(255,255,255,0.1)"}}},editorWrapper:(t={flex:1,overflow:"auto",margin:"16px 24px 0px 24px",padding:24,backgroundColor:"#0a0a0a",borderRadius:"32px 32px 0px 0px",cursor:"text"},xe(xe(xe(xe(xe(xe(xe(xe(xe(xe(t,e.breakpoints.down("sm"),{borderRadius:"24px 24px 0px 0px",margin:"16px 24px 0px 24px"}),"& .DraftEditor-root",{minHeight:"100%",color:"#e0e0e0",fontSize:16,lineHeight:1.6}),"& .DraftEditor-editorContainer",{minHeight:"100%"}),"& .public-DraftEditor-content",{minHeight:"100%"}),"& .public-DraftStyleDefault-block",{marginBottom:"1em"}),"& h1",{fontSize:"2.5em",fontWeight:600,color:"#fff",margin:"0.5em 0"}),"& h2",{fontSize:"2em",fontWeight:600,color:"#fff",margin:"0.5em 0"}),"& h3",{fontSize:"1.5em",fontWeight:600,color:"#fff",margin:"0.5em 0"}),"& blockquote",{borderLeft:"3px solid rgba(255,255,255,0.2)",paddingLeft:16,margin:"1em 0",color:"rgba(255,255,255,0.8)"}),"& pre",{backgroundColor:"rgba(255,255,255,0.05)",padding:16,borderRadius:8,overflow:"auto",fontFamily:"monospace"}),xe(t,"& a",{color:"#ffffff",textDecoration:"underline"})),settingsPanel:xe({width:360,display:"flex",flexDirection:"column",backgroundColor:"transparent",overflow:"auto"},e.breakpoints.down("sm"),{width:"100%"}),settingsContent:xe({padding:"0px 24px",flex:1,overflow:"auto"},e.breakpoints.down("sm"),{padding:"24px"}),settingsActions:{padding:e.spacing(2,3),display:"flex",justifyContent:"space-between"},settingsSection:{marginBottom:e.spacing(3)},imageUploadArea:{position:"relative",width:"100%",height:200,border:"2px dashed rgba(255,255,255,0.2)",borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",overflow:"hidden","&:hover":{borderColor:"rgba(255,255,255,0.4)",backgroundColor:"rgba(255,255,255,0.02)"}},uploadedImage:{position:"absolute",width:"100%",height:"100%",objectFit:"cover",top:0,left:0,right:0,bottom:0},imageOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 50%)",display:"flex",alignItems:"flex-end",padding:e.spacing(2),opacity:.5,transition:"opacity 0.3s","&:hover":{opacity:1}},formatMenu:{"& .MuiPaper-root":{backgroundColor:"#e3e3e3",borderRadius:16,boxShadow:"0 4px 24px rgba(0,0,0,0.12)"},"& .MuiListItemText-root":{color:"#171717"},"& .MuiListItemIcon-root":{color:"#0c0c0c"}},tagsInput:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(255,255,255,0.24)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.48)"}},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.7)"}},darkDialog:{backgroundColor:"#212121",color:"#fff",borderRadius:16},darkDialogContent:{padding:24},darkDialogActions:{padding:"8px 16px 16px",display:"flex",justifyContent:"flex-end"},darkInput:{"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.8)"},"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(255,255,255,0.24)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.48)"},"&.Mui-focused fieldset":{borderColor:"#fff"}}},draftsDialog:{"& .MuiDialog-paper":{backgroundColor:"#1a1a1a",color:"#fff",borderRadius:24,maxWidth:900,width:"95%",maxHeight:"85vh",overflow:"hidden"}},draftsDialogTitle:{background:"#1a1a1a",padding:e.spacing(3,4),display:"flex",justifyContent:"space-between",alignItems:"center"},draftsDialogContent:{padding:0,backgroundColor:"#1a1a1a",display:"flex",flexDirection:"column"},searchField:{margin:e.spacing(3,4,2,4),maxWidth:400,"& .MuiOutlinedInput-root":{color:"#fff",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:16,"& fieldset":{borderColor:"rgba(255,255,255,0.15)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.25)"},"&.Mui-focused fieldset":{borderColor:"rgba(255,255,255,0.4)"}},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.6)"},"& .MuiInputAdornment-root svg":{color:"rgba(255,255,255,0.4)"}},draftsList:{padding:0,flex:1,overflow:"auto"},draftCard:{backgroundColor:"#0c0c0c",borderRadius:16,margin:e.spacing(1,4,2,4),cursor:"pointer",transition:"background-color 0.2s ease","&:hover":{backgroundColor:"#000000"}},draftCardContent:{padding:e.spacing(3),"&:last-child":{paddingBottom:e.spacing(3)}},draftHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:e.spacing(2)},draftTitle:{fontSize:"1.25rem",fontWeight:600,color:"#fff",marginBottom:e.spacing(1),lineHeight:1.3},draftDescription:{color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:1.5,marginBottom:e.spacing(2)},draftMeta:{display:"flex",flexWrap:"wrap",gap:e.spacing(2),alignItems:"center",color:"rgba(255,255,255,0.5)",fontSize:"0.85rem"},draftMetaItem:{display:"flex",alignItems:"center",gap:e.spacing(.5)},draftTags:{display:"flex",gap:e.spacing(.5),flexWrap:"wrap",marginTop:e.spacing(1)},draftTag:{backgroundColor:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.8)",borderRadius:12,fontSize:"0.75rem",height:24},emptyState:{padding:e.spacing(8,4),textAlign:"center",color:"rgba(255,255,255,0.5)",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},emptyStateIcon:{fontSize:80,marginBottom:e.spacing(3),color:"rgba(255,255,255,0.3)"},loadingState:{padding:e.spacing(8),display:"flex",justifyContent:"center",alignItems:"center",flex:1},draftAvatar:{backgroundColor:"rgba(255,255,255,0.1)",color:"#fff",width:40,height:40},deleteButton:{color:"rgba(255,255,255,0.4)","&:hover":{color:"#ffffff",backgroundColor:"rgba(255,255,255,0.1)"}},confirmDialog:{"& .MuiDialog-paper":{backgroundColor:"#2a2a2a",color:"#fff",borderRadius:16,maxWidth:400}},passwordDialog:{"& .MuiDialog-paper":{backgroundColor:"#2a2a2a",color:"#fff",borderRadius:16,maxWidth:400}},imageUrlDialog:{"& .MuiDialog-paper":{backgroundColor:"#2a2a2a",color:"#fff",borderRadius:16,maxWidth:400}}}}))(Ne)},19948:(e,t,r)=>{r.d(t,{A:()=>h});r(52675),r(89463),r(2259),r(45700),r(23792),r(89572),r(94170),r(2892),r(59904),r(84185),r(40875),r(10287),r(26099),r(60825),r(47764),r(62953);var n=r(17402),a=r(41728),o=r(32150);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function c(e,t,r){return t=d(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){return n.default.createElement(a.A,this.props,n.default.createElement("path",{d:"M17 17H14V19H17V22H19V19H22V17H19V14H17V17M12 18C12 14.69 14.69 12 18 12C18.77 12 19.5 12.15 20.17 12.41C21.63 7.9 20.7 3.3 20.7 3.3S19.3 3 17.2 3C11.7 3 1.6 5.1 3.2 20.8C4.3 20.9 5.4 21 6.4 21C8.76 21 10.74 20.69 12.41 20.15C12.15 19.5 12 18.76 12 18M7 17C7 17 7 7 17 7C17 7 11 9 7 17Z"}))}}])&&l(r.prototype,o),i&&l(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(n.default.PureComponent);const h=(0,o.A)((function(e){return{}}))(p)}}]);