"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_components_TextEditorDialog_js"],{32163:(e,t,a)=>{a.d(t,{A:()=>S});a(42762),a(62953);var n=a(17402),r=a(5556),l=a.n(r),o=a(8728),i=a(7160),s=a(88016),c=a(38306),d=a(33615),u=a(79626),h=a(69312),p=a(95652),f=a(32485),m=a.n(f);const g=["allowDuplicates","alwaysShowPlaceholder","blurBehavior","children","chipRenderer","classes","className","clearInputValueOnChange","dataSource","dataSourceConfig","defaultValue","delayBeforeAdd","disabled","disableUnderline","error","filter","FormHelperTextProps","fullWidth","fullWidthInput","helperText","id","InputProps","inputRef","InputLabelProps","inputValue","label","newChipKeyCodes","newChipKeys","onBeforeAdd","onAdd","onBlur","onDelete","onChange","onFocus","onKeyDown","onKeyPress","onKeyUp","onUpdateInput","placeholder","readOnly","required","rootRef","value","variant","endAdornment"];function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},b.apply(null,arguments)}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){C(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const E={standard:o.A,filled:i.Ay,outlined:s.A},k=8,w=46,A=37,D=39;class x extends n.default.PureComponent{constructor(e){super(e),C(this,"state",{chips:[],errorText:void 0,focusedChip:null,inputValue:"",isClean:!0,isFocused:!1,chipsUpdated:!1,prevPropsValue:[]}),C(this,"focus",(()=>{this.actualInput.focus(),null!=this.state.focusedChip&&this.setState({focusedChip:null})})),C(this,"handleInputBlur",(e=>{this.props.onBlur&&this.props.onBlur(e),this.setState({isFocused:!1}),null!=this.state.focusedChip&&this.setState({focusedChip:null});const t=e.target.value;let a;switch(this.props.blurBehavior){case"add-or-clear":a={clearInputOnFail:!0};case"add":if(this.props.delayBeforeAdd){const e=(this.props.value||this.state.chips).length;this.inputBlurTimeout=setTimeout((()=>{const n=(this.props.value||this.state.chips).length;e===n?this.handleAddChip(t,a):this.clearInput()}),150)}else this.handleAddChip(t,a);break;case"clear":this.clearInput()}})),C(this,"handleInputFocus",(e=>{this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(e)})),C(this,"handleKeyDown",(e=>{const{focusedChip:t}=this.state;if(this._keyPressed=!1,this._preventChipCreation=!1,this.props.onKeyDown&&(this.props.onKeyDown(e),e.isDefaultPrevented()))return;const a=this.props.value||this.state.chips;if(this.props.newChipKeyCodes.indexOf(e.keyCode)>=0||this.props.newChipKeys.indexOf(e.key)>=0){!1!==this.handleAddChip(e.target.value)&&e.preventDefault()}else switch(e.keyCode){case k:""===e.target.value&&(null!=t?(this.handleDeleteChip(a[t],t),t>0&&this.setState({focusedChip:t-1})):this.setState({focusedChip:a.length-1}));break;case w:""===e.target.value&&null!=t&&(this.handleDeleteChip(a[t],t),t<=a.length-1&&this.setState({focusedChip:t}));break;case A:null==t&&""===e.target.value&&a.length?this.setState({focusedChip:a.length-1}):null!=t&&t>0&&this.setState({focusedChip:t-1});break;case D:null!=t&&t<a.length-1?this.setState({focusedChip:t+1}):this.setState({focusedChip:null});break;default:this.setState({focusedChip:null})}})),C(this,"handleKeyUp",(e=>{!this._preventChipCreation&&(this.props.newChipKeyCodes.indexOf(e.keyCode)>=0||this.props.newChipKeys.indexOf(e.key)>=0)&&this._keyPressed?this.clearInput():this.updateInput(e.target.value),this.props.onKeyUp&&this.props.onKeyUp(e)})),C(this,"handleKeyPress",(e=>{this._keyPressed=!0,this.props.onKeyPress&&this.props.onKeyPress(e)})),C(this,"handleUpdateInput",(e=>{null==this.props.inputValue&&this.updateInput(e.target.value),this.props.onUpdateInput&&this.props.onUpdateInput(e)})),C(this,"setActualInputRef",(e=>{this.actualInput=e,this.props.inputRef&&this.props.inputRef(e)})),e.defaultValue&&(this.state.chips=e.defaultValue),this.labelRef=n.default.createRef(),this.input=n.default.createRef()}componentDidMount(){"outlined"===this.props.variant&&(this.labelNode=n.default.findDOMNode(this.labelRef.current),this.forceUpdate())}componentWillUnmount(){clearTimeout(this.inputBlurTimeout)}static getDerivedStateFromProps(e,t){let a=null;return e.value&&e.value.length!==t.prevPropsValue.length&&(a={prevPropsValue:e.value},e.clearInputValueOnChange&&(a.inputValue="")),e.clearInputValueOnChange&&e.value&&e.value.length!==t.prevPropsValue.length&&(a={prevPropsValue:e.value,inputValue:""}),e.disabled&&(a=v(v({},a),{},{focusedChip:null})),!t.chipsUpdated&&e.defaultValue&&(a=v(v({},a),{},{chips:e.defaultValue})),a}blur(){this.input&&this.actualInput.blur()}handleAddChip(e,t){if(this.props.onBeforeAdd&&!this.props.onBeforeAdd(e))return this._preventChipCreation=!0,null!=t&&t.clearInputOnFail&&this.clearInput(),!1;this.clearInput();const a=this.props.value||this.state.chips;return this.props.dataSourceConfig?("string"==typeof e&&(e={[this.props.dataSourceConfig.text]:e,[this.props.dataSourceConfig.value]:e}),!this.props.allowDuplicates&&a.some((t=>t[this.props.dataSourceConfig.value]===e[this.props.dataSourceConfig.value]))||(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([...this.state.chips,e])),!0):e.trim().length>0&&((this.props.allowDuplicates||-1===a.indexOf(e))&&(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([...this.state.chips,e])),!0)}handleDeleteChip(e,t){if(this.props.value)this.props.onDelete&&this.props.onDelete(e,t);else{const e=this.state.chips.slice();if(e.splice(t,1)){let a=this.state.focusedChip;this.state.focusedChip===t?a=null:this.state.focusedChip>t&&(a=this.state.focusedChip-1),this.updateChips(e,{focusedChip:a})}}}updateChips(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setState(v({chips:e,chipsUpdated:!0},t)),this.props.onChange&&this.props.onChange(e)}clearInput(){this.updateInput("")}updateInput(e){this.setState({inputValue:e})}render(){const e=this.props,{allowDuplicates:t,alwaysShowPlaceholder:a,blurBehavior:r,children:l,chipRenderer:o=I,classes:i,className:s,clearInputValueOnChange:d,dataSource:u,dataSourceConfig:f,defaultValue:y,delayBeforeAdd:v,disabled:C,disableUnderline:k,error:w,filter:A,FormHelperTextProps:D,fullWidth:x,fullWidthInput:S,helperText:B,id:T,InputProps:M={},inputRef:O,InputLabelProps:R={},inputValue:L,label:N,newChipKeyCodes:P,newChipKeys:H,onBeforeAdd:V,onAdd:W,onBlur:U,onDelete:j,onChange:F,onFocus:z,onKeyDown:K,onKeyPress:_,onKeyUp:$,onUpdateInput:G,placeholder:q,readOnly:Q,required:Y,rootRef:X,value:Z,variant:J,endAdornment:ee}=e,te=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;a[n]=e[n]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,g),ae=Z||this.state.chips,ne=null!=L?L:this.state.inputValue,re=(this.props.value||ne).length>0||ne.length>0,le=null!=R.shrink?R.shrink:null!=N&&(re||this.state.isFocused||ae.length>0),oe=ae.map(((e,t)=>{const a=f?e[f.value]:e;return o({value:a,text:f?e[f.text]:e,chip:e,isDisabled:!!C,isReadOnly:Q,isFocused:this.state.focusedChip===t,handleClick:()=>this.setState({focusedChip:t}),handleDelete:()=>this.handleDeleteChip(e,t),className:i.chip},t)})),ie={};"outlined"===J&&(ie.notched=le,ie.labelWidth=le&&this.labelNode&&this.labelNode.offsetWidth||0),"standard"!==J?ie.startAdornment=n.default.createElement(n.default.Fragment,null,oe):M.disableUnderline=!0,ie.endAdornment=ee;const se=E[J];return n.default.createElement(h.A,b({ref:X,fullWidth:x,className:m()(s,i.root,{[i.marginDense]:"dense"===te.margin}),error:w,required:ae.length>0?void 0:Y,onClick:this.focus,disabled:C,variant:J},te),N&&n.default.createElement(c.A,b({htmlFor:T,classes:{root:m()(i[J],i.label),shrink:i.labelShrink},shrink:le,focused:this.state.isFocused,variant:J,ref:this.labelRef,required:Y},R),N),n.default.createElement("div",{className:m()(i[J],i.chipContainer,{[i.focused]:this.state.isFocused,[i.underline]:!k&&"standard"===J,[i.disabled]:C,[i.labeled]:null!=N,[i.error]:w})},"standard"===J&&oe,n.default.createElement(se,b({ref:this.input,classes:{input:m()(i.input,i[J]),root:m()(i.inputRoot,i[J])},id:T,value:ne,onChange:this.handleUpdateInput,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,inputRef:this.setActualInputRef,disabled:C,fullWidth:S,placeholder:!re&&(le||null==N)||a?q:null,readOnly:Q},M,ie))),B&&n.default.createElement(p.A,b({},D,{className:D?m()(D.className,i.helperText):i.helperText}),B))}}x.propTypes={endAdornment:l().node,allowDuplicates:l().bool,alwaysShowPlaceholder:l().bool,blurBehavior:l().oneOf(["clear","add","add-or-clear","ignore"]),chipRenderer:l().func,clearInputValueOnChange:l().bool,dataSource:l().array,dataSourceConfig:l().shape({text:l().string.isRequired,value:l().string.isRequired}),defaultValue:l().array,delayBeforeAdd:l().bool,disabled:l().bool,disableUnderline:l().bool,FormHelperTextProps:l().object,fullWidth:l().bool,fullWidthInput:l().bool,helperText:l().node,InputLabelProps:l().object,InputProps:l().object,inputRef:l().func,inputValue:l().string,label:l().node,newChipKeyCodes:l().arrayOf(l().number),newChipKeys:l().arrayOf(l().string),onAdd:l().func,onBeforeAdd:l().func,onChange:l().func,onDelete:l().func,onUpdateInput:l().func,placeholder:l().string,readOnly:l().bool,value:l().array,variant:l().oneOf(["outlined","standard","filled"])},x.defaultProps={allowDuplicates:!1,blurBehavior:"clear",clearInputValueOnChange:!1,delayBeforeAdd:!1,disableUnderline:!1,newChipKeyCodes:[13],newChipKeys:["Enter"],variant:"standard"};const S=(0,u.default)((e=>{const t="light"===e.palette.type,a=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{},inputRoot:{display:"inline-flex",flexWrap:"wrap",flex:1,marginTop:0,minWidth:70,"&$outlined,&$filled":{boxSizing:"border-box"},"&$outlined":{paddingTop:14},"&$filled":{paddingTop:28}},input:{display:"inline-block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",appearance:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",float:"left",flex:1},chipContainer:{display:"flex",flexFlow:"row wrap",cursor:"text",marginBottom:-2,minHeight:40,"&$labeled&$standard":{marginTop:18}},outlined:{"& input":{height:16,paddingTop:4,paddingBottom:12,marginTop:4,marginBottom:4}},standard:{},filled:{"& input":{height:22,marginBottom:4,marginTop:4,paddingTop:0},"$marginDense & input":{height:26}},labeled:{},label:{top:4,"&$outlined&:not($labelShrink)":{top:2,"$marginDense &":{top:5}},"&$filled&:not($labelShrink)":{top:15,"$marginDense &":{top:20}}},labelShrink:{top:0},helperText:{marginBottom:-20},focused:{},disabled:{},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary[t?"dark":"light"]),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(a)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{"&:after":{backgroundColor:e.palette.error.main,transform:"scaleX(1)"}},chip:{margin:"0 8px 8px 0",float:"left"},marginDense:{}}}),{name:"WAMuiChipInput"})(x),I=(e,t)=>{let{value:a,text:r,isFocused:l,isDisabled:o,isReadOnly:i,handleClick:s,handleDelete:c,className:u}=e;return n.default.createElement(d.A,{key:t,className:u,style:{pointerEvents:o||i?"none":void 0,backgroundColor:l?"rgb(96, 96, 96)":void 0},onClick:s,onDelete:c,label:r})}},86557:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ct});a(89463),a(27495),a(25440),a(42762),a(62953);var n=a(17402),r=a(79626),l=(a(92614),a(35143)),o=a(32821);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=o.CF.BOLD,u=o.CF.CODE,h=o.CF.ITALIC,p=o.CF.STRIKETHROUGH,f=o.CF.UNDERLINE,m={gfm:!1,tables:!0};function g(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var n=e.getData();return n?"function"==typeof n.get?n.get(t)||a:"object"==typeof n&&n[t]||a:a}var b=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"blocks",void 0),c(this,"contentState",void 0),c(this,"currentBlock",void 0),c(this,"output",void 0),c(this,"totalBlocks",void 0),c(this,"listItemCounts",void 0),c(this,"options",void 0),c(this,"tableBuffer",void 0),this.contentState=t,this.options=a||m,this.tableBuffer=null}var t,a,n;return t=e,(a=[{key:"generate",value:function(){for(this.output=[],this.blocks=this.contentState.getBlockMap().toArray(),this.totalBlocks=this.blocks.length,this.currentBlock=0,this.listItemCounts={};this.currentBlock<this.totalBlocks;)this.processBlock();return this.tableBuffer&&this.flushTable(),this.output.join("").replace(/\n{3,}/g,"\n\n")}},{key:"processBlock",value:function(){var e=this.blocks[this.currentBlock],t=e.getType();if(this.isTableBlock(t))return this.handleTableBlock(e,t),void(this.currentBlock+=1);switch(this.tableBuffer&&this.flushTable(),t){case o.ny.HEADER_ONE:this.insertLineBreaks(1),this.output.push("# "+this.renderBlockContent(e)+"\n\n");break;case o.ny.HEADER_TWO:this.insertLineBreaks(1),this.output.push("## "+this.renderBlockContent(e)+"\n\n");break;case o.ny.HEADER_THREE:this.insertLineBreaks(1),this.output.push("### "+this.renderBlockContent(e)+"\n\n");break;case o.ny.HEADER_FOUR:this.insertLineBreaks(1),this.output.push("#### "+this.renderBlockContent(e)+"\n\n");break;case o.ny.HEADER_FIVE:this.insertLineBreaks(1),this.output.push("##### "+this.renderBlockContent(e)+"\n\n");break;case o.ny.HEADER_SIX:this.insertLineBreaks(1),this.output.push("###### "+this.renderBlockContent(e)+"\n\n");break;case o.ny.UNORDERED_LIST_ITEM:var a=e.getDepth(),n=this.getLastBlock(),r=n?n.getType():null,l=n&&y(r)?n.getDepth():null;r!==t&&l!==a-1&&(this.insertLineBreaks(1),r===o.ny.ORDERED_LIST_ITEM&&this.insertLineBreaks(1));var i=" ".repeat(4*e.depth);this.output.push(i+"- "+this.renderBlockContent(e)+"\n\n");break;case o.ny.ORDERED_LIST_ITEM:var s=e.getDepth(),c=this.getLastBlock(),d=c?c.getType():null,u=c&&y(d)?c.getDepth():null;d!==t&&u!==s-1&&(this.insertLineBreaks(1),d===o.ny.UNORDERED_LIST_ITEM&&this.insertLineBreaks(1));var h=" ".repeat(4*s),p=this.getListItemCount(e)%10;this.output.push(h+"".concat(p,". ")+this.renderBlockContent(e)+"\n\n");break;case o.ny.BLOCKQUOTE:this.insertLineBreaks(1),this.output.push(" > "+this.renderBlockContent(e)+"\n\n");break;case o.ny.CODE:if(this.insertLineBreaks(1),this.options.gfm){var f=g(e,"language","");this.output.push("```".concat(f,"\n")),this.output.push(this.renderBlockContent(e)+"\n"),this.output.push("```\n\n")}else this.output.push("    "+this.renderBlockContent(e)+"\n");break;default:this.insertLineBreaks(1),this.output.push(this.renderBlockContent(e)+"\n\n")}this.currentBlock+=1}},{key:"isTableBlock",value:function(e){return"table"===e||"table-header"===e||"table-row"===e||"table-cell"===e}},{key:"handleTableBlock",value:function(e,t){this.tableBuffer||(this.tableBuffer={headers:[],rows:[],alignments:[],currentRow:null});var a=this.renderBlockContent(e);if("table-header"===t){this.tableBuffer.headers.push(a);var n=g(e,"align",null);this.tableBuffer.alignments.push(n||"left")}else"table-cell"===t&&(this.tableBuffer.currentRow||(this.tableBuffer.currentRow=[]),this.tableBuffer.currentRow.push(a),this.tableBuffer.currentRow.length>=this.tableBuffer.headers.length&&(this.tableBuffer.rows.push(this.tableBuffer.currentRow),this.tableBuffer.currentRow=null));var r=this.blocks[this.currentBlock+1];r&&this.isTableBlock(r.getType())||(this.tableBuffer.currentRow&&this.tableBuffer.currentRow.length>0&&(this.tableBuffer.rows.push(this.tableBuffer.currentRow),this.tableBuffer.currentRow=null),this.flushTable())}},{key:"flushTable",value:function(){if(this.tableBuffer){this.output.length>0&&"\n"!==this.output[this.output.length-1]&&this.output.push("\n");var e="| "+this.tableBuffer.headers.join(" | ")+" |";this.output.push(e+"\n");var t="| "+this.tableBuffer.alignments.map((function(e){switch(e){case"center":return":---:";case"right":return"---:";default:return"---"}})).join(" | ")+" |";this.output.push(t+"\n"),this.tableBuffer.rows.forEach(function(e){var t="| "+e.join(" | ")+" |";this.output.push(t+"\n")}.bind(this)),this.tableBuffer=null}}},{key:"getLastBlock",value:function(){return this.blocks[this.currentBlock-1]}},{key:"getNextBlock",value:function(){return this.blocks[this.currentBlock+1]}},{key:"getListItemCount",value:function(e){for(var t=e.getType(),a=e.getDepth(),n=this.currentBlock-1,r=this.blocks[n];r&&y(r.getType())&&r.getDepth()>a;)n-=1,r=this.blocks[n];return r&&r.getType()===t&&r.getDepth()===a||(this.listItemCounts[a]=0),this.listItemCounts[a]=this.listItemCounts[a]+1}},{key:"insertLineBreaks",value:function(e){if(this.currentBlock>0){var t=this.output[this.output.length-1];if(t&&t.endsWith("\n"))return;for(var a=0;a<e;a++)this.output.push("\n")}}},{key:"renderBlockContent",value:function(e){var t=this.contentState,a=e.getType(),n=e.getText();if(""===n)return"";var r=e.getCharacterList();return(0,o.Ee)(n,r).map((function(e){var n=i(e,2),r=n[0],l=n[1].map((function(e){var t=i(e,2),n=t[0],r=t[1];if(!n)return"";var l=n;return a===o.ny.CODE?l:r.has(u)?"`"+function(e){return e.replace(/`/g,"\\`")}(l)+"`":(l=function(e){return e.replace(/[*_`]/g,"\\$&")}(n),r.has(d)&&(l="**".concat(l,"**")),r.has(f)&&(l="++".concat(l,"++")),r.has(h)&&(l="_".concat(l,"_")),r.has(p)&&(l="~~".concat(l,"~~")),l)})).join(""),s=r?t.getEntity(r):null;if(null!=s&&s.getType()===o.zQ.LINK){var c=s.getData(),m=c.href||c.url||"",g=c.title?' "'.concat(E(c.title),'"'):"";return"[".concat(l,"](").concat(C(m)).concat(g,")")}if(null!=s&&s.getType()===o.zQ.IMAGE){var b=s.getData(),y=b.src||"",v=b.alt?"".concat(E(b.alt)):"";return"![".concat(v,"](").concat(C(y),")")}return null!=s&&s.getType()===o.zQ.EMBED&&s.getData().url||l})).join("")}}])&&s(t.prototype,a),n&&s(t,n),e}();function y(e){switch(e){case o.ny.UNORDERED_LIST_ITEM:case o.ny.ORDERED_LIST_ITEM:return!0;default:return!1}}var v={"(":"%28",")":"%29"};function C(e){return e.replace(/[()]/g,(function(e){return v[e]}))}function E(e){return e.replace(/"/g,'\\"')}function k(e,t){return new b(e,t).generate()}var w=a(9404);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S={gfm:!0,tables:!0,preserveNewlines:!1},I=/^(#{1,6})\s+(.+)$/,B=/^>\s+(.+)$/,T=/^[-*+]\s+(.+)$/,M=/^\d+\.\s+(.+)$/,O=/^[-*_]{3,}$/;class R{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=D(D({},S),e)}parse(e){if(!e||""===e.trim())return l.ContentState.createFromText("");const t=[],a=e.split("\n");let n=0;for(;n<a.length;){const e=this.parseBlock(a,n);e.blocks.length>0&&t.push(...e.blocks),n=e.nextIndex}return 0===t.length&&t.push(this.createBlock("unstyled","")),l.ContentState.createFromBlockArray(t)}parseBlock(e,t){let a=e[t];if(!a||""===a.trim())return{blocks:[],nextIndex:t+1};if(a.startsWith("```"))return this.parseCodeBlock(e,t);if(this.options.tables&&a.includes("|")){const a=this.detectTable(e,t);if(a)return this.parseTableAsMarkdown(a)}const n=a.match(I);if(n){const e=n[1].length,a=n[2];return{blocks:[this.createBlock("header-".concat(this.numberToWord(e)),a)],nextIndex:t+1}}const r=a.match(B);if(r)return{blocks:[this.createBlock("blockquote",r[1])],nextIndex:t+1};const l=a.match(T);if(l)return{blocks:[this.createBlock("unordered-list-item",l[1])],nextIndex:t+1};const o=a.match(M);return o?{blocks:[this.createBlock("ordered-list-item",o[1])],nextIndex:t+1}:O.test(a)?{blocks:[this.createBlock("unstyled","---")],nextIndex:t+1}:{blocks:[this.createBlock("unstyled",a)],nextIndex:t+1}}parseCodeBlock(e,t){const a=e[t].slice(3).trim();let n=t+1;const r=[];for(;n<e.length&&!e[n].startsWith("```");)r.push(e[n]),n++;const l=r.join("\n");return{blocks:[this.createBlock("code-block",l,{language:a})],nextIndex:n+1}}detectTable(e,t){if(t+2>=e.length)return null;const a=e[t],n=e[t+1];if(!a.includes("|")||!n.includes("|"))return null;if(!/[-:]/.test(n))return null;let r=t+2;const l=[];for(;r<e.length&&e[r].trim()&&e[r].includes("|");)l.push(e[r]),r++;return{headerLine:a,separatorLine:n,bodyLines:l,endIndex:r,startIndex:t}}parseTableAsMarkdown(e){const{headerLine:t,separatorLine:a,bodyLines:n,endIndex:r}=e,l=[t,a,...n].join("\n");return{blocks:[this.createBlock("unstyled",l,{isTable:!0})],nextIndex:r}}createBlock(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.stripMarkdown(t),r=[];for(let e=0;e<n.length;e++)r.push(l.CharacterMetadata.create({style:(0,w.OrderedSet)(),entity:null}));return new l.ContentBlock({key:(0,l.genKey)(),type:e,text:n,characterList:(0,w.List)(r),depth:0,data:(0,w.Map)(a)})}stripMarkdown(e){return e.includes("|")?e:e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/~~([^~]+)~~/g,"$1").replace(/\+\+([^+]+)\+\+/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1")}numberToWord(e){return["one","two","three","four","five","six"][e-1]||"one"}}function L(e){return new R(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).parse(e)}var N=a(29632),P=a(52160),H=a(39870),V=(a(32163),a(68016)),W=a(65816),U=a(61434),j=a(35376),F=a(42460),z=a(96746),K=a(72572),_=a(54392),$=a(96232),G=a(69113),q=a(48085),Q=a(84630),Y=a(61466),X=a(77430),Z=a(95834),J=a(69312),ee=a(40827),te=a(5696),ae=a(33615),ne=a(83182),re=a(20426),le=a(6272),oe=a(91004),ie=a(69205),se=a(73546),ce=a(92421),de=a(98039),ue=a(29067),he=a(50915),pe=a(78295),fe=a(41728),me=a(32150);class ge extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(fe.A,this.props,n.default.createElement("path",{d:"M20.56 18H3.44C2.65 18 2 17.37 2 16.59V7.41C2 6.63 2.65 6 3.44 6H20.56C21.35 6 22 6.63 22 7.41V16.59C22 17.37 21.35 18 20.56 18M6.81 15.19V11.53L8.73 13.88L10.65 11.53V15.19H12.58V8.81H10.65L8.73 11.16L6.81 8.81H4.89V15.19H6.81M19.69 12H17.77V8.81H15.85V12H13.92L16.81 15.28L19.69 12Z"}))}}const be=(0,me.A)((e=>({})))(ge);class ye extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(fe.A,this.props,n.default.createElement("path",{d:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M14,18V16H16V6.31L13.5,7.75V5.44L16,4H18V16H20V18H14Z"}))}}const ve=(0,me.A)((e=>({})))(ye);class Ce extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(fe.A,this.props,n.default.createElement("path",{d:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M21,18H15A2,2 0 0,1 13,16C13,15.47 13.2,15 13.54,14.64L18.41,9.41C18.78,9.05 19,8.55 19,8A2,2 0 0,0 17,6A2,2 0 0,0 15,8H13A4,4 0 0,1 17,4A4,4 0 0,1 21,8C21,9.1 20.55,10.1 19.83,10.83L15,16H21V18Z"}))}}const Ee=(0,me.A)((e=>({})))(Ce);class ke extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(fe.A,this.props,n.default.createElement("path",{d:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H19A2,2 0 0,1 21,6V16A2,2 0 0,1 19,18H15A2,2 0 0,1 13,16V15H15V16H19V12H15V10H19V6H15V7H13V6A2,2 0 0,1 15,4Z"}))}}const we=(0,me.A)((e=>({})))(ke);var Ae=a(13565),De=a(12636),xe=a(23119),Se=a(89806),Ie=a(65595),Be=a(66424),Te=a(84022),Me=a(66324),Oe=a(24711),Re=a(11903),Le=a(77649),Ne=a(86848),Pe=a(32580),He=a(10148),Ve=a(64054),We=a(50020),Ue=a(9159),je=a(3280),Fe=a(19948),ze=a(7400),Ke=a(64061),_e=a(78896),$e=a(17807),Ge=a(40693),qe=a(31334),Qe=a(49974),Ye=a(82788),Xe=a(24488),Ze=a(7756),Je=a(16526);function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(Object(a),!0).forEach((function(t){at(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function at(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class nt{constructor(){this.db=null,this.collection=null}async init(){if(this.collection)return!0;try{const{LacertaDB:e}=await Promise.resolve().then(a.bind(a,92614)),t=new e;return this.db=await t.getDatabase("drafts"),this.collection=await this.db.createCollection("documents"),!0}catch(e){return!1}}async save(e,t){await this.init();const a=tt(tt({},t),{},{lastModified:Date.now()});try{return e&&await this.collection.get(e)?await this.collection.update(e,a):await this.collection.add(a)}catch(e){return null}}async getMostRecent(){await this.init();try{const e=await this.collection.query({},{sort:{lastModified:-1},limit:1});return(null==e?void 0:e[0])||null}catch(e){return null}}async get(e){await this.init();try{return await this.collection.get(e)}catch(e){return null}}async getAll(){await this.init();try{return await this.collection.query({},{sort:{lastModified:-1},limit:50})||[]}catch(e){return[]}}async delete(e){await this.init();try{return await this.collection.delete(e),!0}catch(e){return!1}}}const rt=(e,t,a)=>{e.findEntityRanges((e=>{const t=e.getEntity();return null!==t&&"LINK"===a.getEntity(t).getType()}),t)},lt=e=>{const{url:t}=e.contentState.getEntity(e.entityKey).getData();return n.default.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:{color:"#90caf9"}},e.children)};class ot extends n.default.Component{parseTableMarkdown(e){const t=e.trim().split("\n");if(t.length<3)return null;const a=t[0],n=t[1],r=t.slice(2);return{headers:a.replace(/^\||\|$/g,"").split("|").map((e=>e.trim())),alignments:n.replace(/^\||\|$/g,"").split("|").map((e=>{const t=e.trim();return t.startsWith(":")&&t.endsWith(":")?"center":t.endsWith(":")?"right":(t.startsWith(":"),"left")})),rows:r.map((e=>e.replace(/^\||\|$/g,"").split("|").map((e=>e.trim()))))}}render(){const{block:e}=this.props,t=e.getText();if(!t.includes("|")||!t.includes("---"))return null;const a=this.parseTableMarkdown(t);if(!a)return null;const{headers:r,alignments:l,rows:o}=a;return n.default.createElement("div",{className:"markdown-table-wrapper",style:{margin:"16px 0",overflowX:"auto"}},n.default.createElement("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"rgba(255,255,255,0.02)",borderRadius:8}},n.default.createElement("thead",null,n.default.createElement("tr",null,r.map(((e,t)=>n.default.createElement("th",{key:t,style:{padding:"12px",borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:l[t]||"left",fontWeight:600,color:"#fff",backgroundColor:"rgba(255,255,255,0.05)"}},e))))),n.default.createElement("tbody",null,o.map(((e,t)=>n.default.createElement("tr",{key:t,style:{backgroundColor:t%2==0?"transparent":"rgba(255,255,255,0.01)"}},e.map(((e,t)=>n.default.createElement("td",{key:t,style:{padding:"12px",borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:l[t]||"left",color:"#e0e0e0"}},e)))))))))}}class it extends n.PureComponent{constructor(e){super(e),at(this,"onChange",(e=>{this.setState({editorState:e},(()=>{this.updateStats(),this.scheduleAutoSave()}))})),at(this,"onMarkdownChange",(e=>{const t=e.target.value;this.setState({markdownSource:t},(()=>{this.updateStats(),this.scheduleAutoSave()}))})),at(this,"toggleEditorMode",(()=>{const{editorMode:e,editorState:t,markdownSource:a}=this.state;if("visual"===e){const e=k(t.getCurrentContent(),{gfm:!0,tables:!0});this.setState({editorMode:"markdown",markdownSource:e})}else try{const e=L(a,{gfm:!0,tables:!0}),t=new l.CompositeDecorator([{strategy:rt,component:lt}]),n=l.EditorState.createWithContent(e,t);this.setState({editorMode:"visual",editorState:n})}catch(e){ie.Le("Error parsing markdown")}})),at(this,"showConfirmDialog",((e,t,a)=>{this.setState({confirmDialogOpen:!0,confirmDialogTitle:e,confirmDialogMessage:t,confirmDialogAction:a})})),at(this,"closeConfirmDialog",(()=>{this.setState({confirmDialogOpen:!1,confirmDialogAction:null})})),at(this,"handleConfirmAction",(()=>{this.state.confirmDialogAction&&this.state.confirmDialogAction(),this.closeConfirmDialog()})),at(this,"showPasswordDialog",((e,t)=>{this.setState({passwordDialogOpen:!0,passwordDialogTitle:e,passwordDialogValue:"",passwordDialogAction:t})})),at(this,"closePasswordDialog",(()=>{this.setState({passwordDialogOpen:!1,passwordDialogAction:null,passwordDialogValue:""})})),at(this,"handlePasswordAction",(()=>{this.state.passwordDialogAction&&this.state.passwordDialogAction(this.state.passwordDialogValue),this.closePasswordDialog()})),at(this,"showImageUrlDialog",(()=>{this.setState({imageUrlDialogOpen:!0,imageUrlDialogValue:"https://"})})),at(this,"closeImageUrlDialog",(()=>{this.setState({imageUrlDialogOpen:!1,imageUrlDialogValue:""})})),at(this,"handleImageUrlInsert",(()=>{const e=this.state.imageUrlDialogValue;e&&e.trim()&&"https://"!==e&&this.insertImageUrl(e),this.closeImageUrlDialog()})),at(this,"updateDraftStats",(async()=>{try{const n=await this.draftManager.getStats();var e,t,a;if(n.success)this.setState({totalDrafts:(null===(e=n.data.drafts)||void 0===e?void 0:e.totalDrafts)||0,totalWords:(null===(t=n.data.drafts)||void 0===t?void 0:t.totalWords)||0,avgWordCount:Math.round((null===(a=n.data.drafts)||void 0===a?void 0:a.avgWordCount)||0)})}catch(e){}})),at(this,"openDraftsDialog",(async()=>{await this.saveDraft(!1),this.setState({draftsDialogOpen:!0}),await this.loadDrafts(),await this.updateDraftStats()})),at(this,"closeDraftsDialog",(()=>{this.setState({draftsDialogOpen:!1,draftsSearchQuery:"",filterTags:[],filterStatus:null})})),at(this,"handleDraftsSearch",(e=>{this.setState({draftsSearchQuery:e.target.value},(()=>{clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((async()=>{await this.loadDrafts()}),300)}))})),at(this,"formatDate",(e=>{const t=new Date(e),a=new Date-t;if(a<6e4)return"Just now";if(a<36e5){const e=Math.floor(a/6e4);return"".concat(e," minute").concat(e>1?"s":""," ago")}if(a<864e5){const e=Math.floor(a/36e5);return"".concat(e," hour").concat(e>1?"s":""," ago")}if(a<6048e5){const e=Math.floor(a/864e5);return"".concat(e," day").concat(e>1?"s":""," ago")}return t.toLocaleDateString()})),at(this,"focus",(()=>{this.editorRef.current&&this.editorRef.current.focus()})),at(this,"handleKeyCommand",(e=>{const{editorState:t}=this.state,a=l.RichUtils.handleKeyCommand(t,e);return a?(this.onChange(a),"handled"):"save"===e?(this.handleSave(),"handled"):"not-handled"})),at(this,"keyBindingFn",(e=>(e.metaKey||e.ctrlKey)&&"s"===e.key?(e.preventDefault(),"save"):(e.metaKey||e.ctrlKey)&&"k"===e.key?(e.preventDefault(),this.openLinkDialog(),"handled"):(0,l.getDefaultKeyBinding)(e))),at(this,"toggleInlineStyle",(e=>{this.onChange(l.RichUtils.toggleInlineStyle(this.state.editorState,e))})),at(this,"toggleBlockType",(e=>{this.onChange(l.RichUtils.toggleBlockType(this.state.editorState,e))})),at(this,"hasInlineStyle",(e=>this.state.editorState.getCurrentInlineStyle().has(e))),at(this,"hasBlockType",(e=>{const t=this.state.editorState.getSelection();return this.state.editorState.getCurrentContent().getBlockForKey(t.getStartKey()).getType()===e})),at(this,"openLinkDialog",(()=>{const{editorState:e}=this.state,t=e.getSelection(),a=e.getCurrentContent(),n=t.getStartKey(),r=t.getStartOffset(),l=t.getEndOffset(),o=a.getBlockForKey(n).getText().slice(r,l);this.setState({linkDialogOpen:!0,linkText:o,linkUrl:""})})),at(this,"closeLinkDialog",(()=>{this.setState({linkDialogOpen:!1,linkUrl:"",linkText:""})})),at(this,"insertLink",(()=>{const{editorState:e,linkUrl:t,linkText:a}=this.state,n=e.getCurrentContent().createEntity("LINK","MUTABLE",{url:t}),r=n.getLastCreatedEntityKey(),o=e.getSelection();let i;i=o.isCollapsed()?a?l.Modifier.insertText(n,o,a,null,r):l.Modifier.insertText(n,o,t,null,r):l.Modifier.applyEntity(n,o,r);const s=l.EditorState.push(e,i,"apply-entity");this.onChange(s),this.closeLinkDialog()})),at(this,"insertImage",(()=>{this.showImageUrlDialog()})),at(this,"insertImageUrl",(e=>{if(!e)return;const{editorState:t}=this.state,a=t.getCurrentContent().createEntity("IMAGE","IMMUTABLE",{src:e}).getLastCreatedEntityKey(),n=l.AtomicBlockUtils.insertAtomicBlock(t,a," ");this.onChange(n)})),at(this,"handleImageUpload",(e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;const n=new FileReader;n.onload=e=>{this.props.setGradient(e.target.result)},n.readAsDataURL(a)})),at(this,"removeCoverImage",(()=>{this.props.setGradient(null)})),at(this,"openGradientEditor",(e=>{e.stopImmediatePropagation(),ie.Zx()})),at(this,"handleSave",(async()=>{await this.saveDraft(!0)})),at(this,"openPreview",(()=>{this.setState({previewDialogOpen:!0})})),at(this,"closePreview",(()=>{this.setState({previewDialogOpen:!1})})),at(this,"handlePublish",(async()=>{await this.handleSave(),this.closePreview()})),at(this,"renderMarkdown",(e=>{try{return(0,N.yt)(e,{extensions:[(0,P.T)()],htmlExtensions:[(0,P.I)()]})}catch(e){return"<p>Error rendering content</p>"}})),at(this,"openFormatMenu",(e=>this.setState({formatMenuAnchor:e.currentTarget}))),at(this,"closeFormatMenu",(()=>this.setState({formatMenuAnchor:null}))),at(this,"openHeadingMenu",(e=>this.setState({headingMenuAnchor:e.currentTarget}))),at(this,"closeHeadingMenu",(()=>this.setState({headingMenuAnchor:null}))),at(this,"openListMenu",(e=>this.setState({listMenuAnchor:e.currentTarget}))),at(this,"closeListMenu",(()=>this.setState({listMenuAnchor:null}))),at(this,"toggleEditMenu",(()=>this.setState({editOpened:!this.state.editOpened}))),at(this,"resetEditMenu",(()=>this.setState({editOpened:!1}))),at(this,"getBlockStyle",(e=>{switch(e.getType()){case"blockquote":return"RichEditor-blockquote";case"code-block":return"RichEditor-codeblock";default:return null}})),at(this,"blockRendererFn",(e=>{const t=function(e){const t=e.getText();return t.includes("|")&&t.includes("---")?{component:ot,editable:!0,props:{}}:null}(e);return t||("atomic"===e.getType()?{component:st,editable:!1}:null)})),at(this,"_handleTabChange",((e,t)=>{this.setState({tab:t},(()=>{this.swipeableViewScrollTop(),1===parseInt(t)&&this.resetEditMenu()}))})),at(this,"swipeableViewScrollTop",(()=>{let e=document.getElementsByClassName("react-swipeable-view-container").item(0).children.item(0);e.style.scrollBehavior="smooth",e.scrollTop=0}));const t=new l.CompositeDecorator([{strategy:rt,component:lt}]);this.state={editorState:l.EditorState.createEmpty(t),editorMode:"visual",markdownSource:"",title:"",description:"",tags:[],tab:0,currentDraftId:null,payout:"everyone",community:"governance",enableComments:!0,enableMonetization:!1,editOpened:!1,formatMenuAnchor:null,headingMenuAnchor:null,listMenuAnchor:null,linkDialogOpen:!1,linkUrl:"",linkText:"",previewDialogOpen:!1,draftsDialogOpen:!1,drafts:[],draftsLoading:!1,draftsSearchQuery:"",confirmDialogOpen:!1,confirmDialogTitle:"",confirmDialogMessage:"",confirmDialogAction:null,passwordDialogOpen:!1,passwordDialogTitle:"",passwordDialogValue:"",passwordDialogAction:null,imageUrlDialogOpen:!1,imageUrlDialogValue:"",wordCount:0,readingTime:0},this.editorRef=n.default.createRef(),this.fileInputRef=n.default.createRef(),this.draftManager=new nt,this.autoSaveTimer=null}async componentDidMount(){const e=await this.draftManager.getMostRecent();e&&this.loadDraftData(e)}componentWillUnmount(){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.saveDraft()}loadDraftData(e){try{var t,a;const n=e.content?L(e.content,{gfm:!0,tables:!0}):l.EditorState.createEmpty().getCurrentContent(),r=new l.CompositeDecorator([{strategy:rt,component:lt}]),o=l.EditorState.createWithContent(n,r);this.setState({editorState:o,markdownSource:e.content||"",title:e.title||"",description:e.description||"",tags:e.tags||[],currentDraftId:e._id,payout:(null===(t=e.settings)||void 0===t?void 0:t.payout)||"everyone",community:(null===(a=e.settings)||void 0===a?void 0:a.community)||"governance",lastSaved:e.lastModified}),this.props.setGradient&&this.props.setGradient(e.gradient)}catch(e){}}async saveDraft(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{currentDraftId:t,editorState:a,editorMode:n,markdownSource:r,title:l,description:o,tags:i,community:s,payout:c,enableComments:d,enableMonetization:u}=this.state,{gradient:h}=this.props,p="markdown"===n?r:k(a.getCurrentContent(),{gfm:!0,tables:!0}),f="markdown"===n?r.replace(/[#*_\[\]()]/g,"").trim():a.getCurrentContent().getPlainText();if(!l.trim()&&!f.trim())return null;const m=f.trim()?f.split(/\s+/).length:0,g=await this.draftManager.save(t,{title:l||"Untitled",description:o,content:p,tags:i,gradient:h,wordCount:m,settings:{payout:c,community:s}});return g&&(this.setState({currentDraftId:g,lastSaved:Date.now()}),e&&ie.Le("Draft saved")),g}scheduleAutoSave(){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.autoSaveTimer=setTimeout((()=>this.saveDraft()),2e3)}updateStats(){const{editorMode:e,editorState:t,markdownSource:a}=this.state,n="markdown"===e?a.replace(/[#*_\[\]()]/g,"").trim():t.getCurrentContent().getPlainText(),r=n.trim()?n.trim().split(/\s+/).length:0;this.setState({wordCount:r,readingTime:Math.ceil(r/200)})}async createNewDraft(){await this.saveDraft();const e=new l.CompositeDecorator([{strategy:rt,component:lt}]);this.setState({editorState:l.EditorState.createEmpty(e),markdownSource:"",title:"",description:"",tags:[],currentDraftId:null,lastSaved:null,editorMode:"visual"}),this.props.setGradient&&this.props.setGradient(null),ie.Le("New draft created")}async loadDraft(e){await this.saveDraft();const t=await this.draftManager.get(e);t&&(this.loadDraftData(t),this.setState({draftsDialogOpen:!1}),ie.Le("Draft loaded"))}async deleteDraft(e){await this.draftManager.delete(e)&&(this.state.currentDraftId===e&&await this.createNewDraft(),await this.loadDrafts(),ie.Le("Draft deleted"))}async loadDrafts(){this.setState({draftsLoading:!0});const e=await this.draftManager.getAll(),t=this.state.draftsSearchQuery?e.filter((e=>{var t,a;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(this.state.draftsSearchQuery.toLowerCase()))||(null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(this.state.draftsSearchQuery.toLowerCase()))})):e;this.setState({drafts:t,draftsLoading:!1})}render(){const{classes:e,open:t,gradient:a,onClose:r}=this.props,{editorState:o,editorMode:i,markdownSource:s,title:c,description:d,tags:u,payout:h,community:p,editOpened:f,formatMenuAnchor:m,headingMenuAnchor:g,listMenuAnchor:b,linkDialogOpen:y,linkUrl:v,linkText:C,wordCount:E,readingTime:w,tab:A,currentDraftId:D,draftsDialogOpen:x,drafts:S,draftsLoading:I,draftsSearchQuery:B,confirmDialogOpen:T,confirmDialogTitle:M,confirmDialogMessage:O,passwordDialogOpen:R,passwordDialogTitle:L,passwordDialogValue:N,imageUrlDialogOpen:P,imageUrlDialogValue:ie,previewDialogOpen:fe}=this.state,me=window.innerWidth<=960,ge=me?n.default.createElement("div",{className:e.settingsActions},n.default.createElement(z.A,{variant:"text",color:"inherit",startIcon:n.default.createElement(We.A,null),onClick:this.openDraftsDialog},"Drafts"),0===parseInt(A)?n.default.createElement(Z.A,{in:0===parseInt(A)},n.default.createElement(z.A,{variant:"contained",startIcon:n.default.createElement(Ke.A,null),onClick:()=>this.setState({tab:1},this.resetEditMenu),style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Finish")):n.default.createElement(Z.A,{in:1===parseInt(A)},n.default.createElement(z.A,{variant:"contained",startIcon:n.default.createElement(Ye.A,null),onClick:this.openPreview,style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Preview"))):n.default.createElement("div",{className:e.settingsActions},n.default.createElement(z.A,{variant:"text",color:"inherit",startIcon:n.default.createElement(We.A,null),onClick:this.openDraftsDialog},"Drafts"),n.default.createElement(z.A,{variant:"contained",startIcon:n.default.createElement(Ye.A,null),onClick:this.openPreview,style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Preview")),ye=n.default.createElement("div",{className:e.editorSection},n.default.createElement("div",{className:e.editorHeader},n.default.createElement(K.A,{className:e.titleInput,placeholder:"Title",value:c,onChange:e=>this.setState({title:e.target.value}),fullWidth:!0}),n.default.createElement(K.A,{className:e.descriptionInput,placeholder:"Short Description",value:d,onChange:e=>this.setState({description:e.target.value}),fullWidth:!0,multiline:!0,rows:2})),n.default.createElement("div",{className:e.editorWrapper+" "+i,onClick:this.focus},n.default.createElement("div",{style:{height:"100%"}},"visual"===i?n.default.createElement(l.Editor,{ref:this.editorRef,editorState:o,onChange:this.onChange,handleKeyCommand:this.handleKeyCommand,keyBindingFn:this.keyBindingFn,blockStyleFn:this.getBlockStyle,blockRendererFn:this.blockRendererFn,placeholder:"Tell your story...",spellCheck:!0}):n.default.createElement("textarea",{value:s,onChange:this.onMarkdownChange,placeholder:"Write your story in markdown...",spellCheck:!0}))),n.default.createElement($.Ay,{title:"visual"===i?"Switch to markdown code":"Switch to visual editor",placement:"right"},n.default.createElement(Xe.A,{className:e.menuIconButtonFab,onClick:this.toggleEditorMode},"visual"===i?n.default.createElement(be,null):n.default.createElement(Ze.A,null)))),Ce=n.default.createElement("div",{className:e.settingsPanel},n.default.createElement("div",{className:e.settingsContent},n.default.createElement("div",{className:e.settingsSection},n.default.createElement(_.A,{variant:"subtitle2",className:e.subTitle2},"Cover Image",n.default.createElement($.Ay,{interactive:!0,enterTouchDelay:200,leaveTouchDelay:4e3,classes:{tooltip:e.tooltipRoot},title:n.default.createElement("span",{className:e.tooltip},"The cover image has a purpose of aesthetic, gradients are so lite that they are stored in the blockchain as Scalable Vector Graphic of less than 1 kB.")},n.default.createElement(F.A,null,n.default.createElement(Je.A,null)))),n.default.createElement("div",{className:e.imageUploadArea},n.default.createElement("input",{ref:this.fileInputRef,type:"file",accept:"image/*",style:{display:"none"},onChange:this.handleImageUpload}),a?n.default.createElement("div",null,n.default.createElement("img",{src:a,alt:"Cover",className:e.uploadedImage}),n.default.createElement("div",{className:e.imageOverlay},n.default.createElement(z.A,{size:"small",startIcon:n.default.createElement(Oe.A,null),onClick:this.removeCoverImage,style:{color:"#fff"}},"Remove"))):n.default.createElement(G.A,{textAlign:"center",onClick:()=>{var e;return null===(e=this.fileInputRef.current)||void 0===e?void 0:e.click()},style:{cursor:"pointer"}},n.default.createElement(Re.A,{style:{fontSize:48,color:"#666"}}),n.default.createElement(_.A,{variant:"body2",style:{color:"#999",marginTop:8}},"Click to upload"),n.default.createElement("div",{className:e.imageOverlay},n.default.createElement(z.A,{size:"small",startIcon:n.default.createElement($e.A,null),onClick:this.openGradientEditor,style:{color:"#fff"}},"Generate"))))),n.default.createElement("div",{className:e.settingsSection},n.default.createElement(_.A,{variant:"subtitle2",className:e.subTitle2},"Payout",n.default.createElement($.Ay,{interactive:!0,enterTouchDelay:200,leaveTouchDelay:4e3,classes:{tooltip:e.tooltipRoot},title:n.default.createElement("span",{className:e.tooltip},"You can choose how the reward split between authors and curators.")},n.default.createElement(F.A,null,n.default.createElement(Je.A,null)))),n.default.createElement(J.A,{variant:"outlined",fullWidth:!0,size:"small"},n.default.createElement(ee.A,{value:h,onChange:e=>this.setState({payout:e.target.value}),style:{color:"#fff"}},n.default.createElement(Q.A,{value:"author"},"100% Author"),n.default.createElement(Q.A,{value:"everyone"},"50% / 50%"),n.default.createElement(Q.A,{value:"curators"},"100% Curators")))),n.default.createElement("div",{className:e.settingsSection},n.default.createElement(_.A,{variant:"subtitle2",className:e.subTitle2},"Community",n.default.createElement($.Ay,{interactive:!0,enterTouchDelay:200,leaveTouchDelay:4e3,classes:{tooltip:e.tooltipRoot},title:n.default.createElement("span",{className:e.tooltip},"You can choose in which community the post will be featured.")},n.default.createElement(F.A,null,n.default.createElement(Je.A,null)))),n.default.createElement(J.A,{variant:"outlined",fullWidth:!0,size:"small"},n.default.createElement(ee.A,{value:p,onChange:e=>this.setState({community:e.target.value}),style:{color:"#fff"}},n.default.createElement(Q.A,{value:"governance"},"Governance"),n.default.createElement(Q.A,{value:"askpixa"},"Ask Pixa"),n.default.createElement(Q.A,{value:"contest"},"Contest Drawing"),n.default.createElement(Q.A,{value:"edit4me"},"Edit For Me"),n.default.createElement(Q.A,{value:"iy"},"Introduce Yourself"),n.default.createElement(Q.A,{value:"lab"},"Pixa Labs"))))),me?null:ge),ke=me?n.default.createElement(n.default.Fragment,null,n.default.createElement(ze.Ay,{axis:"y",ignoreNativeScroll:!1,containerStyle:{minHeight:"100%",height:"100%",position:"relative"},animateHeight:!1,animateTransitions:!0,disableLazyLoading:!0,resistance:!0,springConfig:{tension:450,friction:60,duration:"120ms",easeFunction:"cubic-bezier(0.280, 0.840, 0.420, 1)",delay:"5ms"},index:A,onChangeIndex:e=>this._handleTabChange({},e),disabled:!1,key:"swipe-able-view"},ye,Ce),ge):[ye,Ce],et="markdown"===i?s:k(o.getCurrentContent(),{gfm:!0,tables:!0});return n.default.createElement(n.default.Fragment,null,n.default.createElement(H.A,{className:e.dialog,open:t,maxWidth:!1,onClose:r},n.default.createElement(U.A,{position:"sticky",className:e.appBar},n.default.createElement(j.A,null,n.default.createElement(G.A,{flexGrow:1,ml:2},n.default.createElement(_.A,{variant:"h6",style:{fontWeight:500}},"Write a New Blog Post"),n.default.createElement(_.A,{variant:"caption",style:{color:"rgba(255,255,255,0.6)"}},E," words · ",w," min read",D&&" · Draft saved")),n.default.createElement(F.A,{color:"inherit",onClick:r},n.default.createElement(se.A,null)))),n.default.createElement(V.A,{className:e.contentArea},n.default.createElement("div",{className:e.mainContainer},ke)),n.default.createElement(_e.A,{in:(0===parseInt(A)||!me)&&"visual"===i,out:1===parseInt(A)||"markdown"===i},n.default.createElement("div",{className:"".concat(e.fixedSidebar," ").concat(f?"opened":"")},!f&&n.default.createElement($.Ay,{title:"Expand",placement:"right"},n.default.createElement(F.A,{className:"edit "+e.menuIconButton,onClick:this.toggleEditMenu},n.default.createElement(Ne.A,null))),n.default.createElement($.Ay,{title:"Bold (Ctrl+B)",placement:"right"},n.default.createElement(F.A,{className:"".concat(e.menuIconButton," ").concat(this.hasInlineStyle("BOLD")?"active":""),onMouseDown:e=>{e.preventDefault(),this.toggleInlineStyle("BOLD")}},n.default.createElement(de.A,null))),n.default.createElement($.Ay,{title:"Italic (Ctrl+I)",placement:"right"},n.default.createElement(F.A,{className:"".concat(e.menuIconButton," ").concat(this.hasInlineStyle("ITALIC")?"active":""),onMouseDown:e=>{e.preventDefault(),this.toggleInlineStyle("ITALIC")}},n.default.createElement(ue.A,null))),n.default.createElement($.Ay,{title:"More",placement:"right"},n.default.createElement(F.A,{className:e.menuIconButton,onClick:this.openFormatMenu},n.default.createElement(He.A,null))),n.default.createElement("div",{className:e.menuDivider}),n.default.createElement($.Ay,{title:"Quote",placement:"right"},n.default.createElement(F.A,{className:"".concat(e.menuIconButton," ").concat(this.hasBlockType("blockquote")?"active":""),onMouseDown:e=>{e.preventDefault(),this.toggleBlockType("blockquote")}},n.default.createElement(pe.A,null))),n.default.createElement($.Ay,{title:"Lists",placement:"right"},n.default.createElement(F.A,{className:e.menuIconButton,onClick:this.openListMenu},n.default.createElement(Se.A,null))),n.default.createElement($.Ay,{title:"Heading",placement:"right"},n.default.createElement(F.A,{className:e.menuIconButton,onClick:this.openHeadingMenu},n.default.createElement(Be.A,null))),n.default.createElement("div",{className:e.menuDivider}),n.default.createElement($.Ay,{title:"Link (Ctrl+K)",placement:"right"},n.default.createElement(F.A,{className:e.menuIconButton,onClick:this.openLinkDialog},n.default.createElement(De.A,null))),n.default.createElement($.Ay,{title:"Image",placement:"right"},n.default.createElement(F.A,{className:e.menuIconButton,onClick:this.insertImage},n.default.createElement(xe.A,null))),n.default.createElement("div",{className:e.menuDivider}),n.default.createElement($.Ay,{title:"Undo",placement:"right"},n.default.createElement(F.A,{className:e.menuIconButton,onClick:()=>this.onChange(l.EditorState.undo(o))},n.default.createElement(Te.A,null))),n.default.createElement($.Ay,{title:"Redo",placement:"right"},n.default.createElement(F.A,{className:e.menuIconButton,onClick:()=>this.onChange(l.EditorState.redo(o))},n.default.createElement(Me.A,null))),f&&n.default.createElement($.Ay,{title:"Collapse",placement:"right"},n.default.createElement(F.A,{className:"close "+e.menuIconButton,style:{backgroundColor:"#000",color:"#fff",marginTop:8},onClick:this.toggleEditMenu},n.default.createElement(Le.A,null)))))),n.default.createElement(H.A,{className:e.previewDialog,open:fe,onClose:this.closePreview,maxWidth:"md",fullWidth:!0},n.default.createElement("div",{className:e.previewDialogTitle},n.default.createElement(_.A,{variant:"h5",style:{fontWeight:600}},"Preview"),n.default.createElement(F.A,{color:"inherit",onClick:this.closePreview},n.default.createElement(se.A,null))),n.default.createElement(V.A,{className:e.previewDialogContent},n.default.createElement(_.A,{className:e.previewTitle},c||"Untitled"),d&&n.default.createElement(_.A,{className:e.previewDescription},d),n.default.createElement("div",{className:e.previewContent,dangerouslySetInnerHTML:{__html:this.renderMarkdown(et)}})),n.default.createElement("div",{className:e.previewDialogActions},n.default.createElement(G.A,{display:"flex",alignItems:"center",color:"rgba(255,255,255,0.6)"},n.default.createElement(_.A,{variant:"caption"},E," words · ",w," min read")),n.default.createElement(z.A,{variant:"contained",startIcon:n.default.createElement(ce.A,null),onClick:this.handlePublish,style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Publish"))),n.default.createElement(H.A,{className:e.draftsDialog,open:x,onClose:this.closeDraftsDialog,maxWidth:"md",fullWidth:!0},n.default.createElement("div",{className:e.draftsDialogTitle},n.default.createElement(G.A,{display:"flex",alignItems:"center"},n.default.createElement(oe.A,{className:e.draftAvatar},n.default.createElement(We.A,null)),n.default.createElement(_.A,{variant:"h5",style:{marginLeft:16,fontWeight:600}},"Your Drafts")),n.default.createElement(G.A,null,n.default.createElement(z.A,{color:"inherit",startIcon:n.default.createElement(Fe.A,null),onClick:()=>{this.createNewDraft()},style:{marginRight:8,backgroundColor:"rgba(255,255,255,0.1)",borderRadius:16}},"New Draft"),n.default.createElement(F.A,{color:"inherit",onClick:this.closeDraftsDialog},n.default.createElement(se.A,null)))),n.default.createElement(V.A,{className:e.draftsDialogContent},n.default.createElement(K.A,{className:e.searchField,variant:"outlined",placeholder:"Search drafts...",value:B,onChange:this.handleDraftsSearch,size:"small",InputProps:{startAdornment:n.default.createElement(Ve.A,{position:"start"},n.default.createElement(je.A,null))}}),I?n.default.createElement("div",{className:e.loadingState},n.default.createElement(ne.A,null)):0===S.length?n.default.createElement("div",{className:e.emptyState},n.default.createElement(Ge.A,{className:e.emptyStateIcon}),n.default.createElement(_.A,{variant:"h5",gutterBottom:!0,style:{fontWeight:500}},B?"No drafts found":"No drafts yet"),n.default.createElement(_.A,{variant:"body1",style:{color:"rgba(255,255,255,0.6)"}},B?"Try a different search query":"Start writing to save your first draft automatically")):n.default.createElement("div",{className:e.draftsList},S.map((t=>{var a,r;return n.default.createElement(re.A,{key:t._id,className:e.draftCard,onClick:()=>this.loadDraft(t._id)},n.default.createElement(le.A,{className:e.draftCardContent},n.default.createElement("div",{className:e.draftHeader},n.default.createElement(G.A,{flex:1},n.default.createElement(_.A,{className:e.draftTitle},t.title||"Untitled Draft"),t.description&&n.default.createElement(_.A,{className:e.draftDescription},t.description)),n.default.createElement(F.A,{className:e.deleteButton,onClick:e=>{e.stopPropagation(),this.deleteDraft(t._id)}},n.default.createElement(Oe.A,null))),n.default.createElement("div",{className:e.draftMeta},n.default.createElement("div",{className:e.draftMetaItem},n.default.createElement(Ue.A,{fontSize:"small"}),n.default.createElement("span",null,this.formatDate(t.lastSaved))),n.default.createElement("div",{className:e.draftMetaItem},n.default.createElement("span",null,(null===(a=t.metadata)||void 0===a?void 0:a.wordCount)||0," words")),n.default.createElement("div",{className:e.draftMetaItem},n.default.createElement("span",null,(null===(r=t.metadata)||void 0===r?void 0:r.readingTime)||0," min read"))),t.tags&&t.tags.length>0&&n.default.createElement("div",{className:e.draftTags},t.tags.slice(0,3).map(((t,a)=>n.default.createElement(ae.A,{key:a,label:t,size:"small",className:e.draftTag}))),t.tags.length>3&&n.default.createElement(ae.A,{label:"+".concat(t.tags.length-3),size:"small",className:e.draftTag}))))}))))),n.default.createElement(H.A,{className:e.confirmDialog,open:T,onClose:this.closeConfirmDialog},n.default.createElement(te.A,null,n.default.createElement(G.A,{display:"flex",alignItems:"center"},n.default.createElement(qe.A,{style:{marginRight:8,color:"#ff9800"}}),M)),n.default.createElement(V.A,null,n.default.createElement(_.A,null,O)),n.default.createElement(W.A,null,n.default.createElement(z.A,{onClick:this.closeConfirmDialog,color:"inherit"},"Cancel"),n.default.createElement(z.A,{onClick:this.handleConfirmAction,variant:"contained",color:"primary"},"Confirm"))),n.default.createElement(H.A,{className:e.passwordDialog,open:R,onClose:this.closePasswordDialog},n.default.createElement(te.A,null,n.default.createElement(G.A,{display:"flex",alignItems:"center"},n.default.createElement(Qe.A,{style:{marginRight:8,color:"#4caf50"}}),L)),n.default.createElement(V.A,null,n.default.createElement(K.A,{className:e.darkInput,variant:"outlined",type:"password",label:"Password",value:N,onChange:e=>this.setState({passwordDialogValue:e.target.value}),fullWidth:!0,autoFocus:!0,margin:"normal"})),n.default.createElement(W.A,null,n.default.createElement(z.A,{onClick:this.closePasswordDialog,color:"inherit"},"Cancel"),n.default.createElement(z.A,{onClick:this.handlePasswordAction,variant:"contained",color:"primary"},"Continue"))),n.default.createElement(H.A,{className:e.imageUrlDialog,open:P,onClose:this.closeImageUrlDialog},n.default.createElement(te.A,null,"Insert Image"),n.default.createElement(V.A,null,n.default.createElement(K.A,{className:e.darkInput,variant:"outlined",label:"Image URL",value:ie,onChange:e=>this.setState({imageUrlDialogValue:e.target.value}),fullWidth:!0,autoFocus:!0,margin:"normal"})),n.default.createElement(W.A,null,n.default.createElement(z.A,{onClick:this.closeImageUrlDialog,color:"inherit"},"Cancel"),n.default.createElement(z.A,{onClick:this.handleImageUrlInsert,variant:"contained",color:"primary"},"Insert"))),n.default.createElement(q.A,{className:e.formatMenu,anchorEl:m,open:Boolean(m),onClose:this.closeFormatMenu},n.default.createElement(Q.A,{onClick:()=>{this.toggleInlineStyle("UNDERLINE"),this.closeFormatMenu()}},n.default.createElement(Y.A,null,n.default.createElement(he.A,null)),n.default.createElement(X.A,{primary:"Underline"})),n.default.createElement(Q.A,{onClick:()=>{this.toggleInlineStyle("STRIKETHROUGH"),this.closeFormatMenu()}},n.default.createElement(Y.A,null,n.default.createElement(Pe.A,null)),n.default.createElement(X.A,{primary:"Strikethrough"})),n.default.createElement(Q.A,{onClick:()=>{this.toggleInlineStyle("CODE"),this.closeFormatMenu()}},n.default.createElement(Y.A,null,n.default.createElement(Ae.A,null)),n.default.createElement(X.A,{primary:"Code"}))),n.default.createElement(q.A,{className:e.formatMenu,anchorEl:g,open:Boolean(g),onClose:this.closeHeadingMenu},n.default.createElement(Q.A,{onClick:()=>{this.toggleBlockType("header-one"),this.closeHeadingMenu()}},n.default.createElement(Y.A,null,n.default.createElement(ve,null)),n.default.createElement(X.A,{primary:"Heading 1"})),n.default.createElement(Q.A,{onClick:()=>{this.toggleBlockType("header-two"),this.closeHeadingMenu()}},n.default.createElement(Y.A,null,n.default.createElement(Ee,null)),n.default.createElement(X.A,{primary:"Heading 2"})),n.default.createElement(Q.A,{onClick:()=>{this.toggleBlockType("header-three"),this.closeHeadingMenu()}},n.default.createElement(Y.A,null,n.default.createElement(we,null)),n.default.createElement(X.A,{primary:"Heading 3"}))),n.default.createElement(q.A,{className:e.formatMenu,anchorEl:b,open:Boolean(b),onClose:this.closeListMenu},n.default.createElement(Q.A,{onClick:()=>{this.toggleBlockType("unordered-list-item"),this.closeListMenu()}},n.default.createElement(Y.A,null,n.default.createElement(Se.A,null)),n.default.createElement(X.A,{primary:"Bullet List"})),n.default.createElement(Q.A,{onClick:()=>{this.toggleBlockType("ordered-list-item"),this.closeListMenu()}},n.default.createElement(Y.A,null,n.default.createElement(Ie.A,null)),n.default.createElement(X.A,{primary:"Numbered List"}))),n.default.createElement(H.A,{PaperProps:{classes:{root:e.darkDialog}},open:y,maxWidth:"xs",fullWidth:!0,onClose:this.closeLinkDialog},n.default.createElement(V.A,{className:e.darkDialogContent},n.default.createElement(_.A,{variant:"h6",gutterBottom:!0},"Insert Link"),n.default.createElement(K.A,{className:e.darkInput,variant:"outlined",label:"Link Text",value:C,onChange:e=>this.setState({linkText:e.target.value}),fullWidth:!0,style:{marginBottom:16}}),n.default.createElement(K.A,{className:e.darkInput,variant:"outlined",label:"URL",placeholder:"https://...",value:v,onChange:e=>this.setState({linkUrl:e.target.value}),fullWidth:!0,autoFocus:!0})),n.default.createElement(W.A,{className:e.darkDialogActions},n.default.createElement(z.A,{onClick:this.closeLinkDialog},"Cancel"),n.default.createElement(z.A,{variant:"contained",onClick:this.insertLink,style:{backgroundColor:"#fff",color:"#000"}},"Insert"))))}}class st extends n.PureComponent{render(){const e=this.props.contentState.getEntity(this.props.block.getEntityAt(0)),{src:t}=e.getData();return"IMAGE"===e.getType()?n.default.createElement("div",{style:{textAlign:"center",margin:"16px 0"}},n.default.createElement("img",{src:t,alt:"",style:{maxWidth:"100%",height:"auto",borderRadius:8}})):null}}const ct=(0,r.default)((e=>({dialog:{"& .MuiDialog-paper":{zIndex:e.zIndex.drawer+10,backgroundColor:"#0c0c0c",color:"#fff",borderRadius:21,[e.breakpoints.down("sm")]:{margin:0,maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%",borderRadius:0},[e.breakpoints.up("md")]:{maxWidth:"90vw",width:1200,height:"85vh"}},"& .MuiBackdrop-root":{zIndex:e.zIndex.drawer+1,backdropFilter:"blur(9px) grayscale(1)",overflow:"hidden",userSelect:"none"}},tooltipRoot:{maxWidth:"min(75vw, 500px)",borderRadius:"16px",backgroundColor:"#dddddd !important",color:"#0e0e0e !important"},tooltip:{margin:"8px",display:"block",fontSize:"14px",lineHeight:"22px"},appBar:{backgroundColor:"transparent",boxShadow:"none","& .MuiToolbar-root":{minHeight:64,padding:"0 24px"}},contentArea:{display:"flex",flexDirection:"column",height:"100%",position:"relative",padding:0,overflow:"hidden",backgroundColor:"#0a0a0a"},mainContainer:{display:"flex",flex:1,overflow:"hidden",position:"relative",[e.breakpoints.down("sm")]:{flexDirection:"column",overflow:"auto","& div.react-swipeable-view-container > div":{minHeight:"100%",maxHeight:"100%"},"& > div:first-child":{height:"100%"}}},modeToggleButton:{position:"absolute",backgroundColor:"#fff",color:"#000",borderRadius:24,padding:"8px 24px",margin:"12px 24px",textTransform:"none",fontWeight:500,"&:hover":{backgroundColor:"#f0f0f0"}},fixedSidebar:{position:"fixed",top:"50%",transform:"translateY(-50%) !important",width:48,backgroundColor:"#ffffff",boxShadow:"2px 0 12px rgba(0,0,0,0.1)",zIndex:1100,display:"flex",flexDirection:"column",alignItems:"center",padding:"8px 0",borderRadius:"24px",marginLeft:"-24px",gap:2,"& .close, & .edit":{display:"none"},[e.breakpoints.down("sm")]:{right:8,width:40,padding:4,height:40,overflow:"hidden",transform:"translateY(-50%) !important",transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important","&.opened":{padding:8,transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important",height:"410px"},"& .close, & .edit":{display:"flex"}}},fixedSidebarMode:{position:"fixed",top:"50%",width:48,zIndex:1100,display:"flex",flexDirection:"column",alignItems:"center",padding:"8px 0",borderRadius:"24px",marginLeft:"-24px",gap:2,"& .close, & .edit":{display:"none"},[e.breakpoints.down("sm")]:{right:8,width:40,padding:4,height:40,overflow:"hidden",transform:"translateY(-50%) !important",transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important","&.opened":{padding:8,transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important",height:"410px"},"& .close, & .edit":{display:"flex"}}},menuIconButton:{color:"#616161",padding:0,margin:0,height:48,width:48,"& .MuiSvgIcon-root":{fontSize:"2rem"},[e.breakpoints.down("sm")]:{width:32,height:32,padding:4,"& .MuiSvgIcon-root":{fontSize:"1.125rem"}},"&:hover":{backgroundColor:"rgba(0,0,0,0.1)",color:"#212121"},"&.active":{backgroundColor:"#000",color:"#fff"}},menuIconButtonFab:{position:"fixed",marginLeft:"-64px",width:64,height:64,backgroundColor:"#d1d1d1",color:"#000",boxShadow:"2px 0 12px rgba(0,0,0,0.1)",padding:0,margin:0,"& .MuiSvgIcon-root":{fontSize:"2rem"},[e.breakpoints.down("sm")]:{height:48,width:48,marginLeft:0,marginTop:"16px",right:16,"& .MuiSvgIcon-root":{fontSize:"1.125rem"}},"&:hover":{backgroundColor:"rgba(0,0,0,0.1)",color:"#212121"},"&.active":{backgroundColor:"#000",color:"#fff"}},menuDivider:{width:"calc(100% - 16px)",height:1,backgroundColor:"#999",margin:"2px 0px"},editorSection:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",backgroundColor:"#171717",paddingLeft:32,paddingRight:16,borderRadius:"0px 32px 0px 0px",[e.breakpoints.down("sm")]:{paddingLeft:8,paddingRight:8,borderRadius:"0px",overflow:"overlay",minHeight:"100%",maxHeight:"100%",position:"relative"}},editorHeader:{padding:e.spacing(3,3,2,3)},titleInput:{"& .MuiInputBase-root":{color:"#fff",fontSize:"2rem",fontWeight:600,padding:0,"&:before":{borderBottom:"none"},"&:hover:before":{borderBottom:"none"},"&:after":{borderBottom:"2px solid rgba(255,255,255,0.2)"}},"& .MuiInputBase-input":{padding:"8px 0"}},descriptionInput:{marginTop:16,"& .MuiInputBase-root":{color:"#ccc",fontSize:"1rem","&:before":{borderBottom:"none"},"&:hover:before":{borderBottom:"none"},"&:after":{borderBottom:"2px solid rgba(255,255,255,0.2)"}}},editorWrapper:{position:"initial",flex:1,margin:"16px 24px 0px 24px",backgroundColor:"#0a0a0a",borderRadius:"32px 32px 0px 0px",cursor:"text",[e.breakpoints.down("sm")]:{borderRadius:"24px 24px 0px 0px",margin:"16px 24px 0px 24px"},"&.markdown":{overflow:"hidden","& textarea":{padding:24}},"&.visual":{overflow:"auto","& > div":{padding:24}},"& .DraftEditor-root":{minHeight:"100%",color:"#e0e0e0",fontSize:16,lineHeight:1.6},"& .DraftEditor-editorContainer":{minHeight:"100%"},"& .public-DraftEditor-content":{minHeight:"100%"},"& .public-DraftStyleDefault-block":{marginBottom:"1em"},"& h1":{fontSize:"2.5em",fontWeight:600,color:"#fff",margin:"0.5em 0"},"& h2":{fontSize:"2em",fontWeight:600,color:"#fff",margin:"0.5em 0"},"& h3":{fontSize:"1.5em",fontWeight:600,color:"#fff",margin:"0.5em 0"},"& blockquote":{borderLeft:"3px solid rgba(255,255,255,0.2)",paddingLeft:16,margin:"1em 0",color:"rgba(255,255,255,0.8)"},"& pre":{backgroundColor:"rgba(255,255,255,0.05)",padding:16,borderRadius:8,overflow:"auto",fontFamily:"monospace"},"& a":{color:"#ffffff",textDecoration:"underline"},"& textarea":{width:"100%",minHeight:"100%",height:"100%",backgroundColor:"transparent",border:"none",outline:"none",color:"#e0e0e0",fontSize:16,lineHeight:1.6,fontFamily:"monospace",resize:"none",padding:0},"& table":{width:"100%",borderCollapse:"collapse",margin:"1.5em 0",backgroundColor:"rgba(255,255,255,0.02)",borderRadius:8,overflow:"hidden"},"& th, & td":{padding:12,borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:"left"},"& th":{fontWeight:600,color:"#fff",backgroundColor:"rgba(255,255,255,0.05)"},"& tr:hover":{backgroundColor:"rgba(255,255,255,0.03)"}},settingsPanel:{width:360,display:"flex",flexDirection:"column",backgroundColor:"transparent",overflow:"auto",[e.breakpoints.down("sm")]:{width:"100%"}},settingsContent:{padding:"0px 24px",flex:1,overflow:"auto",[e.breakpoints.down("sm")]:{padding:"24px"}},settingsActions:{padding:e.spacing(2,3),display:"flex",justifyContent:"space-between"},subTitle2:{color:"#ccc",fontSize:"1rem","& button.MuiIconButton-root":{color:"#666"}},settingsSection:{marginBottom:e.spacing(3)},imageUploadArea:{position:"relative",width:"100%",height:175.5,border:"2px dashed rgba(255,255,255,0.2)",borderRadius:24,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",overflow:"hidden","&:hover":{borderColor:"rgba(255,255,255,0.4)",backgroundColor:"rgba(255,255,255,0.02)"}},uploadedImage:{position:"absolute",width:"100%",height:"100%",objectFit:"cover",top:0,left:0,right:0,bottom:0},imageOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 50%)",display:"flex",alignItems:"flex-end",padding:e.spacing(2),opacity:.5,transition:"opacity 0.3s","&:hover":{opacity:1}},formatMenu:{"& .MuiPaper-root":{backgroundColor:"#e3e3e3",borderRadius:16,boxShadow:"0 4px 24px rgba(0,0,0,0.12)"},"& .MuiListItemText-root":{color:"#171717"},"& .MuiListItemIcon-root":{color:"#0c0c0c"}},tagsInput:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(255,255,255,0.24)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.48)"}},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.7)"}},darkDialog:{backgroundColor:"#212121",color:"#fff",borderRadius:16},darkDialogContent:{padding:24},darkDialogActions:{padding:"8px 16px 16px",display:"flex",justifyContent:"flex-end"},darkInput:{"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.8)"},"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(255,255,255,0.24)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.48)"},"&.Mui-focused fieldset":{borderColor:"#fff"}}},draftsDialog:{"& .MuiDialog-paper":{backgroundColor:"#1a1a1a",color:"#fff",borderRadius:24,maxWidth:900,width:"95%",maxHeight:"85vh",overflow:"hidden"}},draftsDialogTitle:{background:"#1a1a1a",padding:e.spacing(3,4),display:"flex",justifyContent:"space-between",alignItems:"center"},draftsDialogContent:{padding:0,backgroundColor:"#1a1a1a",display:"flex",flexDirection:"column"},searchField:{margin:e.spacing(3,4,2,4),maxWidth:400,"& .MuiOutlinedInput-root":{color:"#fff",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:16,"& fieldset":{borderColor:"rgba(255,255,255,0.15)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.25)"},"&.Mui-focused fieldset":{borderColor:"rgba(255,255,255,0.4)"}},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.6)"},"& .MuiInputAdornment-root svg":{color:"rgba(255,255,255,0.4)"}},draftsList:{padding:0,flex:1,overflow:"auto"},draftCard:{backgroundColor:"#0c0c0c",borderRadius:16,margin:e.spacing(1,4,2,4),cursor:"pointer",transition:"background-color 0.2s ease","&:hover":{backgroundColor:"#000000"}},draftCardContent:{padding:e.spacing(3),"&:last-child":{paddingBottom:e.spacing(3)}},draftHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:e.spacing(2)},draftTitle:{fontSize:"1.25rem",fontWeight:600,color:"#fff",marginBottom:e.spacing(1),lineHeight:1.3},draftDescription:{color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:1.5,marginBottom:e.spacing(2)},draftMeta:{display:"flex",flexWrap:"wrap",gap:e.spacing(2),alignItems:"center",color:"rgba(255,255,255,0.5)",fontSize:"0.85rem"},draftMetaItem:{display:"flex",alignItems:"center",gap:e.spacing(.5)},draftTags:{display:"flex",gap:e.spacing(.5),flexWrap:"wrap",marginTop:e.spacing(1)},draftTag:{backgroundColor:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.8)",borderRadius:12,fontSize:"0.75rem",height:24},emptyState:{padding:e.spacing(8,4),textAlign:"center",color:"rgba(255,255,255,0.5)",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},emptyStateIcon:{fontSize:80,marginBottom:e.spacing(3),color:"rgba(255,255,255,0.3)"},loadingState:{padding:e.spacing(8),display:"flex",justifyContent:"center",alignItems:"center",flex:1},draftAvatar:{backgroundColor:"rgba(255,255,255,0.1)",color:"#fff",width:40,height:40},deleteButton:{color:"rgba(255,255,255,0.4)","&:hover":{color:"#ffffff",backgroundColor:"rgba(255,255,255,0.1)"}},confirmDialog:{"& .MuiDialog-paper":{backgroundColor:"#2a2a2a",color:"#fff",borderRadius:16,maxWidth:400}},passwordDialog:{"& .MuiDialog-paper":{backgroundColor:"#2a2a2a",color:"#fff",borderRadius:16,maxWidth:400}},imageUrlDialog:{"& .MuiDialog-paper":{backgroundColor:"#2a2a2a",color:"#fff",borderRadius:16,maxWidth:400}},previewDialog:{"& .MuiDialog-paper":{backgroundColor:"#1a1a1a",color:"#fff",borderRadius:24,maxWidth:900,width:"95%",maxHeight:"90vh",overflow:"hidden"}},previewDialogTitle:{background:"linear-gradient(180deg, #1a1a1a 0%, transparent 100%)",padding:e.spacing(3,4),display:"flex",justifyContent:"space-between",alignItems:"center"},previewDialogContent:{padding:e.spacing(4),backgroundColor:"#0a0a0a",overflow:"auto"},previewTitle:{fontSize:"2.5rem",fontWeight:700,color:"#fff",marginBottom:e.spacing(2),lineHeight:1.2},previewDescription:{fontSize:"1.25rem",color:"rgba(255,255,255,0.8)",marginBottom:e.spacing(4),lineHeight:1.5},previewContent:{color:"#e0e0e0",fontSize:"1.125rem",lineHeight:1.8,"& h1":{fontSize:"2.5em",fontWeight:600,color:"#fff",margin:"1em 0 0.5em"},"& h2":{fontSize:"2em",fontWeight:600,color:"#fff",margin:"1em 0 0.5em"},"& h3":{fontSize:"1.5em",fontWeight:600,color:"#fff",margin:"1em 0 0.5em"},"& p":{marginBottom:"1em"},"& blockquote":{borderLeft:"4px solid rgba(255,255,255,0.3)",paddingLeft:24,margin:"1.5em 0",color:"rgba(255,255,255,0.8)",fontStyle:"italic"},"& pre":{backgroundColor:"rgba(255,255,255,0.05)",padding:24,borderRadius:12,overflow:"auto",fontFamily:"monospace",margin:"1.5em 0"},"& code":{backgroundColor:"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:4,fontFamily:"monospace",fontSize:"0.9em"},"& pre code":{backgroundColor:"transparent",padding:0},"& a":{color:"#90caf9",textDecoration:"none","&:hover":{textDecoration:"underline"}},"& ul, & ol":{marginBottom:"1em",paddingLeft:"2em"},"& li":{marginBottom:"0.5em"},"& img":{maxWidth:"100%",height:"auto",borderRadius:12,margin:"1.5em 0"},"& table":{width:"100%",borderCollapse:"collapse",margin:"1.5em 0","& th, & td":{padding:12,borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:"left"},"& th":{fontWeight:600,color:"#fff"}}},previewDialogActions:{padding:e.spacing(3,4),background:"linear-gradient(0deg, #1a1a1a 0%, transparent 100%)",display:"flex",justifyContent:"space-between",alignItems:"center"}})))(it)},19948:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(17402),r=a(41728),l=a(32150);class o extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(r.A,this.props,n.default.createElement("path",{d:"M17 17H14V19H17V22H19V19H22V17H19V14H17V17M12 18C12 14.69 14.69 12 18 12C18.77 12 19.5 12.15 20.17 12.41C21.63 7.9 20.7 3.3 20.7 3.3S19.3 3 17.2 3C11.7 3 1.6 5.1 3.2 20.8C4.3 20.9 5.4 21 6.4 21C8.76 21 10.74 20.69 12.41 20.15C12.15 19.5 12 18.76 12 18M7 17C7 17 7 7 17 7C17 7 11 9 7 17Z"}))}}const i=(0,l.A)((e=>({})))(o)}}]);