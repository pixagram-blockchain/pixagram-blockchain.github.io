"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_components_TextEditorDialog_js"],{17683:(e,t,a)=>{a.d(t,{default:()=>$t});var n=a(17402),r=a(79626),o=(a(92614),a(35143)),l=a(32821);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=l.CF.BOLD,u=l.CF.CODE,h=l.CF.ITALIC,m=l.CF.STRIKETHROUGH,g=l.CF.UNDERLINE,p={gfm:!1,tables:!0};function f(e,t,a=null){var n=e.getData();return n?"function"==typeof n.get?n.get(t)||a:"object"==typeof n&&n[t]||a:a}var b=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"blocks",void 0),c(this,"contentState",void 0),c(this,"currentBlock",void 0),c(this,"output",void 0),c(this,"totalBlocks",void 0),c(this,"listItemCounts",void 0),c(this,"options",void 0),c(this,"tableBuffer",void 0),this.contentState=t,this.options=a||p,this.tableBuffer=null}var t,a,n;return t=e,(a=[{key:"generate",value:function(){for(this.output=[],this.blocks=this.contentState.getBlockMap().toArray(),this.totalBlocks=this.blocks.length,this.currentBlock=0,this.listItemCounts={};this.currentBlock<this.totalBlocks;)this.processBlock();return this.tableBuffer&&this.flushTable(),this.output.join("").replace(/\n{3,}/g,"\n\n")}},{key:"processBlock",value:function(){var e=this.blocks[this.currentBlock],t=e.getType();if(this.isTableBlock(t))return this.handleTableBlock(e,t),void(this.currentBlock+=1);switch(this.tableBuffer&&this.flushTable(),t){case l.ny.HEADER_ONE:this.insertLineBreaks(1),this.output.push("# "+this.renderBlockContent(e)+"\n\n");break;case l.ny.HEADER_TWO:this.insertLineBreaks(1),this.output.push("## "+this.renderBlockContent(e)+"\n\n");break;case l.ny.HEADER_THREE:this.insertLineBreaks(1),this.output.push("### "+this.renderBlockContent(e)+"\n\n");break;case l.ny.HEADER_FOUR:this.insertLineBreaks(1),this.output.push("#### "+this.renderBlockContent(e)+"\n\n");break;case l.ny.HEADER_FIVE:this.insertLineBreaks(1),this.output.push("##### "+this.renderBlockContent(e)+"\n\n");break;case l.ny.HEADER_SIX:this.insertLineBreaks(1),this.output.push("###### "+this.renderBlockContent(e)+"\n\n");break;case l.ny.UNORDERED_LIST_ITEM:var a=e.getDepth(),n=this.getLastBlock(),r=n?n.getType():null,o=n&&v(r)?n.getDepth():null;r!==t&&o!==a-1&&(this.insertLineBreaks(1),r===l.ny.ORDERED_LIST_ITEM&&this.insertLineBreaks(1));var i=" ".repeat(4*e.depth);this.output.push(i+"- "+this.renderBlockContent(e)+"\n\n");break;case l.ny.ORDERED_LIST_ITEM:var s=e.getDepth(),c=this.getLastBlock(),d=c?c.getType():null,u=c&&v(d)?c.getDepth():null;d!==t&&u!==s-1&&(this.insertLineBreaks(1),d===l.ny.UNORDERED_LIST_ITEM&&this.insertLineBreaks(1));var h=" ".repeat(4*s),m=this.getListItemCount(e)%10;this.output.push(h+"".concat(m,". ")+this.renderBlockContent(e)+"\n\n");break;case l.ny.BLOCKQUOTE:this.insertLineBreaks(1),this.output.push(" > "+this.renderBlockContent(e)+"\n\n");break;case l.ny.CODE:if(this.insertLineBreaks(1),this.options.gfm){var g=f(e,"language","");this.output.push("```".concat(g,"\n")),this.output.push(this.renderBlockContent(e)+"\n"),this.output.push("```\n\n")}else this.output.push("    "+this.renderBlockContent(e)+"\n");break;default:this.insertLineBreaks(1),this.output.push(this.renderBlockContent(e)+"\n\n")}this.currentBlock+=1}},{key:"isTableBlock",value:function(e){return"table"===e||"table-header"===e||"table-row"===e||"table-cell"===e}},{key:"handleTableBlock",value:function(e,t){this.tableBuffer||(this.tableBuffer={headers:[],rows:[],alignments:[],currentRow:null});var a=this.renderBlockContent(e);if("table-header"===t){this.tableBuffer.headers.push(a);var n=f(e,"align",null);this.tableBuffer.alignments.push(n||"left")}else"table-cell"===t&&(this.tableBuffer.currentRow||(this.tableBuffer.currentRow=[]),this.tableBuffer.currentRow.push(a),this.tableBuffer.currentRow.length>=this.tableBuffer.headers.length&&(this.tableBuffer.rows.push(this.tableBuffer.currentRow),this.tableBuffer.currentRow=null));var r=this.blocks[this.currentBlock+1];r&&this.isTableBlock(r.getType())||(this.tableBuffer.currentRow&&this.tableBuffer.currentRow.length>0&&(this.tableBuffer.rows.push(this.tableBuffer.currentRow),this.tableBuffer.currentRow=null),this.flushTable())}},{key:"flushTable",value:function(){if(this.tableBuffer){this.output.length>0&&"\n"!==this.output[this.output.length-1]&&this.output.push("\n");var e="| "+this.tableBuffer.headers.join(" | ")+" |";this.output.push(e+"\n");var t="| "+this.tableBuffer.alignments.map((function(e){switch(e){case"center":return":---:";case"right":return"---:";default:return"---"}})).join(" | ")+" |";this.output.push(t+"\n"),this.tableBuffer.rows.forEach(function(e){var t="| "+e.join(" | ")+" |";this.output.push(t+"\n")}.bind(this)),this.tableBuffer=null}}},{key:"getLastBlock",value:function(){return this.blocks[this.currentBlock-1]}},{key:"getNextBlock",value:function(){return this.blocks[this.currentBlock+1]}},{key:"getListItemCount",value:function(e){for(var t=e.getType(),a=e.getDepth(),n=this.currentBlock-1,r=this.blocks[n];r&&v(r.getType())&&r.getDepth()>a;)n-=1,r=this.blocks[n];return r&&r.getType()===t&&r.getDepth()===a||(this.listItemCounts[a]=0),this.listItemCounts[a]=this.listItemCounts[a]+1}},{key:"insertLineBreaks",value:function(e){if(this.currentBlock>0){var t=this.output[this.output.length-1];if(t&&t.endsWith("\n"))return;for(var a=0;a<e;a++)this.output.push("\n")}}},{key:"renderBlockContent",value:function(e){var t=this.contentState,a=e.getType(),n=e.getText();if(""===n)return"";var r=e.getCharacterList();return(0,l.Ee)(n,r).map((function(e){var n=i(e,2),r=n[0],o=n[1].map((function(e){var t=i(e,2),n=t[0],r=t[1];if(!n)return"";var o=n;return a===l.ny.CODE?o:r.has(u)?"`"+function(e){return e.replace(/`/g,"\\`")}(o)+"`":(o=function(e){return e.replace(/[*_`]/g,"\\$&")}(n),r.has(d)&&(o="**".concat(o,"**")),r.has(g)&&(o="++".concat(o,"++")),r.has(h)&&(o="_".concat(o,"_")),r.has(m)&&(o="~~".concat(o,"~~")),o)})).join(""),s=r?t.getEntity(r):null;if(null!=s&&s.getType()===l.zQ.LINK){var c=s.getData(),p=c.href||c.url||"",f=c.title?' "'.concat(C(c.title),'"'):"";return"[".concat(o,"](").concat(E(p)).concat(f,")")}if(null!=s&&s.getType()===l.zQ.IMAGE){var b=s.getData(),v=b.src||"",y=b.alt?"".concat(C(b.alt)):"";return"![".concat(y,"](").concat(E(v),")")}return null!=s&&s.getType()===l.zQ.EMBED&&s.getData().url||o})).join("")}}])&&s(t.prototype,a),n&&s(t,n),e}();function v(e){switch(e){case l.ny.UNORDERED_LIST_ITEM:case l.ny.ORDERED_LIST_ITEM:return!0;default:return!1}}var y={"(":"%28",")":"%29"};function E(e){return e.replace(/[()]/g,(function(e){return y[e]}))}function C(e){return e.replace(/"/g,'\\"')}function A(e,t){return new b(e,t).generate()}var x=a(9404);const k={gfm:!0,tables:!0,preserveNewlines:!1},M=/^(#{1,6})\s+(.+)$/,w=/^>\s+(.+)$/,S=/^[-*+]\s+(.+)$/,T=/^\d+\.\s+(.+)$/,I=/^[-*_]{3,}$/;class D{constructor(e={}){this.options={...k,...e}}parse(e){if(!e||""===e.trim())return o.ContentState.createFromText("");const t=[],a=e.split("\n");let n=0;for(;n<a.length;){const e=this.parseBlock(a,n);e.blocks.length>0&&t.push(...e.blocks),n=e.nextIndex}return 0===t.length&&t.push(this.createBlock("unstyled","")),o.ContentState.createFromBlockArray(t)}parseBlock(e,t){let a=e[t];if(!a||""===a.trim())return{blocks:[],nextIndex:t+1};if(a.startsWith("```"))return this.parseCodeBlock(e,t);if(this.options.tables&&a.includes("|")){const a=this.detectTable(e,t);if(a)return this.parseTableAsMarkdown(a)}const n=a.match(M);if(n){const e=n[1].length,a=n[2];return{blocks:[this.createBlock(`header-${this.numberToWord(e)}`,a)],nextIndex:t+1}}const r=a.match(w);if(r)return{blocks:[this.createBlock("blockquote",r[1])],nextIndex:t+1};const o=a.match(S);if(o)return{blocks:[this.createBlock("unordered-list-item",o[1])],nextIndex:t+1};const l=a.match(T);return l?{blocks:[this.createBlock("ordered-list-item",l[1])],nextIndex:t+1}:I.test(a)?{blocks:[this.createBlock("unstyled","---")],nextIndex:t+1}:{blocks:[this.createBlock("unstyled",a)],nextIndex:t+1}}parseCodeBlock(e,t){const a=e[t].slice(3).trim();let n=t+1;const r=[];for(;n<e.length&&!e[n].startsWith("```");)r.push(e[n]),n++;const o=r.join("\n");return{blocks:[this.createBlock("code-block",o,{language:a})],nextIndex:n+1}}detectTable(e,t){if(t+2>=e.length)return null;const a=e[t],n=e[t+1];if(!a.includes("|")||!n.includes("|"))return null;if(!/[-:]/.test(n))return null;let r=t+2;const o=[];for(;r<e.length&&e[r].trim()&&e[r].includes("|");)o.push(e[r]),r++;return{headerLine:a,separatorLine:n,bodyLines:o,endIndex:r,startIndex:t}}parseTableAsMarkdown(e){const{headerLine:t,separatorLine:a,bodyLines:n,endIndex:r}=e,o=[t,a,...n].join("\n");return{blocks:[this.createBlock("unstyled",o,{isTable:!0})],nextIndex:r}}createBlock(e,t,a={}){const n=this.stripMarkdown(t),r=[];for(let e=0;e<n.length;e++)r.push(o.CharacterMetadata.create({style:(0,x.OrderedSet)(),entity:null}));return new o.ContentBlock({key:(0,o.genKey)(),type:e,text:n,characterList:(0,x.List)(r),depth:0,data:(0,x.Map)(a)})}stripMarkdown(e){return e.includes("|")?e:e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/~~([^~]+)~~/g,"$1").replace(/\+\+([^+]+)\+\+/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1")}numberToWord(e){return["one","two","three","four","five","six"][e-1]||"one"}}function B(e,t={}){return new D(t).parse(e)}var _=a(14747),R=a(52160),P=a(39870),L=a(65816),N=a(68016),z=a(5696),H=a(96746),W=a(54392),O=a(27606),$=a(72572),G=a(44041),U=a(40827),V=a(84630),F=a(69312),Y=a(38306),X=a(69440),K=a(69113),j=a(10819),Q=a(46845),q=a(95834),Z=a(53976),J=a(86074),ee=a(56494),te=a(42561),ae=a(23078),ne=a(44122),re=a(48085);class oe{static hexChars="0123456789abcdef";static refY=1;static refU=.19783000664283;static refV=.46831999493879;static kappa=903.2962962;static epsilon=.0088564516;static m_r0=3.240969941904521;static m_r1=-1.537383177570093;static m_r2=-.498610760293;static m_g0=-.96924363628087;static m_g1=1.87596750150772;static m_g2=.041555057407175;static m_b0=.055630079696993;static m_b1=-.20397695888897;static m_b2=1.056971514242878;constructor(){this.hex="#000000",this.rgb_r=0,this.rgb_g=0,this.rgb_b=0,this.xyz_x=0,this.xyz_y=0,this.xyz_z=0,this.luv_l=0,this.luv_u=0,this.luv_v=0,this.lch_l=0,this.lch_c=0,this.lch_h=0,this.hsluv_h=0,this.hsluv_s=0,this.hsluv_l=0,this.hpluv_h=0,this.hpluv_p=0,this.hpluv_l=0,this.r0s=0,this.r0i=0,this.r1s=0,this.r1i=0,this.g0s=0,this.g0i=0,this.g1s=0,this.g1i=0,this.b0s=0,this.b0i=0,this.b1s=0,this.b1i=0}static fromLinear(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}static toLinear(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}static yToL(e){return e<=oe.epsilon?e/oe.refY*oe.kappa:116*Math.pow(e/oe.refY,1/3)-16}static lToY(e){return e<=8?oe.refY*e/oe.kappa:oe.refY*Math.pow((e+16)/116,3)}static rgbChannelToHex(e){const t=Math.round(255*e),a=t%16,n=(t-a)/16|0;return oe.hexChars.charAt(n)+oe.hexChars.charAt(a)}static distanceFromOriginAngle(e,t,a){const n=t/(Math.sin(a)-e*Math.cos(a));return n<0?1/0:n}static min6(e,t,a,n,r,o){return Math.min(e,Math.min(t,Math.min(a,Math.min(n,Math.min(r,o)))))}rgbToHex(){this.hex="#",this.hex+=oe.rgbChannelToHex(this.rgb_r),this.hex+=oe.rgbChannelToHex(this.rgb_g),this.hex+=oe.rgbChannelToHex(this.rgb_b)}xyzToRgb(){this.rgb_r=oe.fromLinear(oe.m_r0*this.xyz_x+oe.m_r1*this.xyz_y+oe.m_r2*this.xyz_z),this.rgb_g=oe.fromLinear(oe.m_g0*this.xyz_x+oe.m_g1*this.xyz_y+oe.m_g2*this.xyz_z),this.rgb_b=oe.fromLinear(oe.m_b0*this.xyz_x+oe.m_b1*this.xyz_y+oe.m_b2*this.xyz_z)}rgbToXyz(){const e=oe.toLinear(this.rgb_r),t=oe.toLinear(this.rgb_g),a=oe.toLinear(this.rgb_b);this.xyz_x=.41239079926595*e+.35758433938387*t+.18048078840183*a,this.xyz_y=.21263900587151*e+.71516867876775*t+.072192315360733*a,this.xyz_z=.019330818715591*e+.11919477979462*t+.95053215224966*a}xyzToLuv(){const e=this.xyz_x+15*this.xyz_y+3*this.xyz_z;let t=4*this.xyz_x,a=9*this.xyz_y;0!==e?(t/=e,a/=e):(t=NaN,a=NaN),this.luv_l=oe.yToL(this.xyz_y),0===this.luv_l?(this.luv_u=0,this.luv_v=0):(this.luv_u=13*this.luv_l*(t-oe.refU),this.luv_v=13*this.luv_l*(a-oe.refV))}luvToXyz(){if(0===this.luv_l)return this.xyz_x=0,this.xyz_y=0,void(this.xyz_z=0);const e=this.luv_u/(13*this.luv_l)+oe.refU,t=this.luv_v/(13*this.luv_l)+oe.refV;this.xyz_y=oe.lToY(this.luv_l),this.xyz_x=0-9*this.xyz_y*e/((e-4)*t-e*t),this.xyz_z=(9*this.xyz_y-15*t*this.xyz_y-t*this.xyz_x)/(3*t)}luvToLch(){if(this.lch_l=this.luv_l,this.lch_c=Math.sqrt(this.luv_u*this.luv_u+this.luv_v*this.luv_v),this.lch_c<1e-8)this.lch_h=0;else{const e=Math.atan2(this.luv_v,this.luv_u);this.lch_h=180*e/Math.PI,this.lch_h<0&&(this.lch_h=360+this.lch_h)}}lchToLuv(){const e=this.lch_h/180*Math.PI;this.luv_l=this.lch_l,this.luv_u=Math.cos(e)*this.lch_c,this.luv_v=Math.sin(e)*this.lch_c}calculateBoundingLines(e){const t=Math.pow(e+16,3)/1560896,a=t>oe.epsilon?t:e/oe.kappa,n=a*(284517*oe.m_r0-94839*oe.m_r2),r=a*(838422*oe.m_r2+769860*oe.m_r1+731718*oe.m_r0),o=a*(632260*oe.m_r2-126452*oe.m_r1),l=a*(284517*oe.m_g0-94839*oe.m_g2),i=a*(838422*oe.m_g2+769860*oe.m_g1+731718*oe.m_g0),s=a*(632260*oe.m_g2-126452*oe.m_g1),c=a*(284517*oe.m_b0-94839*oe.m_b2),d=a*(838422*oe.m_b2+769860*oe.m_b1+731718*oe.m_b0),u=a*(632260*oe.m_b2-126452*oe.m_b1);this.r0s=n/o,this.r0i=r*e/o,this.r1s=n/(o+126452),this.r1i=(r-769860)*e/(o+126452),this.g0s=l/s,this.g0i=i*e/s,this.g1s=l/(s+126452),this.g1i=(i-769860)*e/(s+126452),this.b0s=c/u,this.b0i=d*e/u,this.b1s=c/(u+126452),this.b1i=(d-769860)*e/(u+126452)}calcMaxChromaHsluv(e){const t=e/360*Math.PI*2,a=oe.distanceFromOriginAngle(this.r0s,this.r0i,t),n=oe.distanceFromOriginAngle(this.r1s,this.r1i,t),r=oe.distanceFromOriginAngle(this.g0s,this.g0i,t),o=oe.distanceFromOriginAngle(this.g1s,this.g1i,t),l=oe.distanceFromOriginAngle(this.b0s,this.b0i,t),i=oe.distanceFromOriginAngle(this.b1s,this.b1i,t);return oe.min6(a,n,r,o,l,i)}hsluvToLch(){if(this.hsluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hsluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hsluv_l,this.calculateBoundingLines(this.hsluv_l);const e=this.calcMaxChromaHsluv(this.hsluv_h);this.lch_c=e/100*this.hsluv_s}this.lch_h=this.hsluv_h}lchToHsluv(){if(this.lch_l>99.9999999)this.hsluv_s=0,this.hsluv_l=100;else if(this.lch_l<1e-8)this.hsluv_s=0,this.hsluv_l=0;else{this.calculateBoundingLines(this.lch_l);const e=this.calcMaxChromaHsluv(this.lch_h);this.hsluv_s=this.lch_c/e*100,this.hsluv_l=this.lch_l}this.hsluv_h=this.lch_h}hsluvToRgb(){this.hsluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}rgbToHsluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHsluv()}hsluvToHex(){this.hsluvToRgb(),this.rgbToHex()}}let le=null;const ie=()=>(le||(le=new oe),le),se=(e,t,a)=>{const n=ie();return n.hsluv_h=e,n.hsluv_s=t,n.hsluv_l=a,n.hsluvToHex(),n.hex.toUpperCase()},ce=({color:e={r:0,g:150,b:255,a:1},onChange:t,onConfirm:a,size:r=280})=>{const o=Math.max(128,Math.min(1024,r||280)),[l,i]=(0,n.useState)((()=>{const[t,a,n]=((e,t,a)=>{const n=ie();return n.rgb_r=e/255,n.rgb_g=t/255,n.rgb_b=a/255,n.rgbToHsluv(),[n.hsluv_h,n.hsluv_s,n.hsluv_l]})(e.r,e.g,e.b);return{h:t,s:a,l:n}})),[s,c]=(0,n.useState)(null),d=(0,n.useRef)(null),u=(0,n.useRef)(null),h=o,m=h/2,g=h/2,p=h/280,f=24*p,b=24*p,v=36*p+12*p,y=v+f,E=y+12*p,C=E+b,A=100,x=260,k=-80,M=80,w=(0,n.useCallback)((()=>{const e=((e,t,a)=>{const n=ie();return n.hsluv_h=e,n.hsluv_s=t,n.hsluv_l=a,n.hsluvToRgb(),{r:Math.round(255*n.rgb_r),g:Math.round(255*n.rgb_g),b:Math.round(255*n.rgb_b),a:1}})(l.h,l.s,l.l);t&&t(e)}),[l,t]);(0,n.useEffect)((()=>{w()}),[w]);(0,n.useMemo)((()=>se(l.h,l.s,l.l)),[l]);const S=(0,n.useCallback)(((e,t)=>{if(!d.current)return;const a=d.current.getBoundingClientRect(),n=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY,o=n-a.left-m,l=r-a.top-g;if("hue"===t){let e=Math.atan2(l,o)*(180/Math.PI);e=(e+360)%360,i((t=>({...t,h:Math.round(e)})))}else if("lightness"===t){let e=Math.atan2(l,o)*(180/Math.PI);e<0&&(e+=360),e<A&&(e=A),e>x&&(e=x);const t=(e-A)/160;i((e=>({...e,l:Math.round(100*(1-t))})))}else if("saturation"===t){let e=Math.atan2(l,o)*(180/Math.PI);e<k&&(e=k),e>M&&(e=M);const t=(e-k)/160;i((e=>({...e,s:Math.round(100*(1-t))})))}}),[m,g,A,x,k,M]),T=(0,n.useCallback)(((e,t)=>{e.preventDefault(),e.stopPropagation(),c(t),e.target.setPointerCapture&&e.target.setPointerCapture(e.pointerId),S(e,t)}),[S]),I=(0,n.useCallback)((e=>{s&&(e.preventDefault(),S(e,s))}),[s,S]),D=(0,n.useCallback)((e=>{e.target.releasePointerCapture&&e.target.releasePointerCapture(e.pointerId),c(null)}),[]);(0,n.useEffect)((()=>{if(s){const e=e=>{e.preventDefault(),S(e,s)},t=()=>{c(null)};return document.addEventListener("pointermove",e,{passive:!1}),document.addEventListener("pointerup",t),document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",t),()=>{document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",t),document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t)}}}),[s,S]);const B=(0,n.useMemo)((()=>{const e=l.h*Math.PI/180,t=m+Math.cos(e)*(v+f/2),a=g+Math.sin(e)*(v+f/2),n=(A+160*(1-l.l/100))*Math.PI/180,r=m+Math.cos(n)*(E+b/2),o=g+Math.sin(n)*(E+b/2),i=(M-l.s/100*160)*Math.PI/180;return{hueIndicatorX:t,hueIndicatorY:a,lightIndicatorX:r,lightIndicatorY:o,satIndicatorX:m+Math.cos(i)*(E+b/2),satIndicatorY:g+Math.sin(i)*(E+b/2)}}),[l,m,g,v,f,A,x,k,M,E,b]),_=(0,n.useMemo)((()=>({light:`light-${Math.round(l.h)}-${Math.round(l.s)}`,sat:`sat-${Math.round(l.h)}-${Math.round(l.l)}`})),[l]),R=(0,n.useMemo)((()=>Array.from({length:20},((e,t)=>{const a=t/19*100,n=100-a;return{offset:a,color:se(l.h,l.s,n)}}))),[l.h,l.s]),P=(0,n.useMemo)((()=>Array.from({length:20},((e,t)=>{const a=t/19*100,n=100-a;return{offset:a,color:se(l.h,n,l.l)}}))),[l.h,l.l]),L=(0,n.useMemo)((()=>Array.from({length:90},((e,t)=>{const a=4*t,n=4*(t+1),r=a*Math.PI/180,o=n*Math.PI/180,i=se(a+2,l.s,l.l);return{key:t,path:`\n                    M ${m+Math.cos(r)*v} ${g+Math.sin(r)*v}\n                    A ${v} ${v} 0 0 1 ${m+Math.cos(o)*v} ${g+Math.sin(o)*v}\n                    L ${m+Math.cos(o)*y} ${g+Math.sin(o)*y}\n                    A ${y} ${y} 0 0 0 ${m+Math.cos(r)*y} ${g+Math.sin(r)*y}\n                    Z\n                `,fill:i}}))),[l.s,l.l,m,g,v,y]),N=6*p;return n.default.createElement("div",{ref:u,style:{width:h,height:h,margin:"0 auto",touchAction:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",position:"relative"}},n.default.createElement("svg",{ref:d,width:h,height:h,style:{position:"absolute",top:0,left:0,cursor:s?"grabbing":"grab",touchAction:"none"}},n.default.createElement("defs",null,n.default.createElement("linearGradient",{id:_.light,gradientUnits:"userSpaceOnUse",x1:m+Math.cos(A*Math.PI/180)*(E+b/2),y1:g+Math.sin(A*Math.PI/180)*(E+b/2),x2:m+Math.cos(x*Math.PI/180)*(E+b/2),y2:g+Math.sin(x*Math.PI/180)*(E+b/2)},R.map(((e,t)=>n.default.createElement("stop",{key:t,offset:`${e.offset}%`,stopColor:e.color})))),n.default.createElement("linearGradient",{id:_.sat,gradientUnits:"userSpaceOnUse",x1:m+Math.cos(k*Math.PI/180)*(E+b/2),y1:g+Math.sin(k*Math.PI/180)*(E+b/2),x2:m+Math.cos(M*Math.PI/180)*(E+b/2),y2:g+Math.sin(M*Math.PI/180)*(E+b/2)},P.map(((e,t)=>n.default.createElement("stop",{key:t,offset:`${e.offset}%`,stopColor:e.color})))),n.default.createElement("filter",{id:"centerGlow"},n.default.createElement("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),n.default.createElement("feMerge",null,n.default.createElement("feMergeNode",{in:"coloredBlur"}),n.default.createElement("feMergeNode",{in:"SourceGraphic"}))),n.default.createElement("filter",{id:"indicatorShadow"},n.default.createElement("feDropShadow",{dx:"0",dy:"1",stdDeviation:"2",floodOpacity:"0.3"}))),n.default.createElement("g",{style:{pointerEvents:"all"},onPointerDown:e=>T(e,"hue"),onPointerMove:I,onPointerUp:D},L.map((e=>n.default.createElement("path",{key:e.key,d:e.path,fill:e.fill,stroke:e.fill,strokeWidth:"1"})))),n.default.createElement("g",{style:{pointerEvents:"all"},onPointerDown:e=>T(e,"lightness"),onPointerMove:I,onPointerUp:D},n.default.createElement("path",{d:`\n                            M ${m+Math.cos(A*Math.PI/180)*E} ${g+Math.sin(A*Math.PI/180)*E}\n                            A ${E} ${E} 0 0 1 ${m+Math.cos(x*Math.PI/180)*E} ${g+Math.sin(x*Math.PI/180)*E}\n                            L ${m+Math.cos(x*Math.PI/180)*C} ${g+Math.sin(x*Math.PI/180)*C}\n                            A ${C} ${C} 0 0 0 ${m+Math.cos(A*Math.PI/180)*C} ${g+Math.sin(A*Math.PI/180)*C}\n                            Z\n                        `,fill:`url(#${_.light})`,stroke:"none"}),n.default.createElement("circle",{cx:m+Math.cos(A*Math.PI/180)*(E+b/2),cy:g+Math.sin(A*Math.PI/180)*(E+b/2),r:b/2,fill:se(l.h,l.s,100),stroke:"none"}),n.default.createElement("circle",{cx:m+Math.cos(x*Math.PI/180)*(E+b/2),cy:g+Math.sin(x*Math.PI/180)*(E+b/2),r:b/2,fill:se(l.h,l.s,0),stroke:"none"})),n.default.createElement("g",{style:{pointerEvents:"all"},onPointerDown:e=>T(e,"saturation"),onPointerMove:I,onPointerUp:D},n.default.createElement("path",{d:`\n                            M ${m+Math.cos(k*Math.PI/180)*E} ${g+Math.sin(k*Math.PI/180)*E}\n                            A ${E} ${E} 0 0 1 ${m+Math.cos(M*Math.PI/180)*E} ${g+Math.sin(M*Math.PI/180)*E}\n                            L ${m+Math.cos(M*Math.PI/180)*C} ${g+Math.sin(M*Math.PI/180)*C}\n                            A ${C} ${C} 0 0 0 ${m+Math.cos(k*Math.PI/180)*C} ${g+Math.sin(k*Math.PI/180)*C}\n                            Z\n                        `,fill:`url(#${_.sat})`,stroke:"none"}),n.default.createElement("circle",{cx:m+Math.cos(k*Math.PI/180)*(E+b/2),cy:g+Math.sin(k*Math.PI/180)*(E+b/2),r:b/2,fill:se(l.h,100,l.l),stroke:"none"}),n.default.createElement("circle",{cx:m+Math.cos(M*Math.PI/180)*(E+b/2),cy:g+Math.sin(M*Math.PI/180)*(E+b/2),r:b/2,fill:se(l.h,0,l.l),stroke:"none"})),n.default.createElement("circle",{cx:B.hueIndicatorX,cy:B.hueIndicatorY,r:N,fill:"white",stroke:"rgba(0,0,0,0.5)",strokeWidth:"1.5",filter:"url(#indicatorShadow)",style:{pointerEvents:"none"}}),n.default.createElement("circle",{cx:B.lightIndicatorX,cy:B.lightIndicatorY,r:N,fill:"white",stroke:"rgba(0,0,0,0.5)",strokeWidth:"1.5",filter:"url(#indicatorShadow)",style:{pointerEvents:"none"}}),n.default.createElement("circle",{cx:B.satIndicatorX,cy:B.satIndicatorY,r:N,fill:"white",stroke:"rgba(0,0,0,0.5)",strokeWidth:"1.5",filter:"url(#indicatorShadow)",style:{pointerEvents:"none"}})))};var de=a(19231);class ue{static hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}static rgbToHex(e,t,a){return"#"+((1<<24)+(e<<16)+(t<<8)+a).toString(16).slice(1)}static rgbToHsl(e,t,a){e/=255,t/=255,a/=255;const n=Math.max(e,t,a),r=Math.min(e,t,a);let o,l,i=(n+r)/2;if(n===r)o=l=0;else{const s=n-r;switch(l=i>.5?s/(2-n-r):s/(n+r),n){case e:o=(t-a)/s+(t<a?6:0);break;case t:o=(a-e)/s+2;break;case a:o=(e-t)/s+4}o/=6}return{h:360*o,s:100*l,l:100*i}}static hslToRgb(e,t,a){e/=360,a/=100;const n=(e,t,a)=>(a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e);let r,o,l;if(0===(t/=100))r=o=l=a;else{const i=a<.5?a*(1+t):a+t-a*t,s=2*a-i;r=n(s,i,e+1/3),o=n(s,i,e),l=n(s,i,e-1/3)}return{r:Math.round(255*r),g:Math.round(255*o),b:Math.round(255*l)}}static generateMonotone(e,t=5){const a=this.hexToRgb(e),n=this.rgbToHsl(a.r,a.g,a.b),r=[];for(let e=0;e<t;e++){const a=20+80*e/(t-1),o=20+60*e/(t-1),l=this.hslToRgb(n.h,a,o);r.push(this.rgbToHex(l.r,l.g,l.b))}return r}static generateComplementary(e){const t=this.hexToRgb(e),a=this.rgbToHsl(t.r,t.g,t.b),n=(a.h+180)%360,r=this.hslToRgb(n,a.s,a.l);return[e,this.rgbToHex(r.r,r.g,r.b)]}static generateDarkerTones(e,t=5){const a=this.hexToRgb(e),n=this.rgbToHsl(a.r,a.g,a.b),r=[];for(let e=0;e<t;e++){const t=Math.max(10,n.l-15*e),a=this.hslToRgb(n.h,n.s,t);r.push(this.rgbToHex(a.r,a.g,a.b))}return r}static generateLighterTones(e,t=5){const a=this.hexToRgb(e),n=this.rgbToHsl(a.r,a.g,a.b),r=[];for(let e=0;e<t;e++){const t=Math.min(90,n.l+15*e),a=this.hslToRgb(n.h,n.s,t);r.push(this.rgbToHex(a.r,a.g,a.b))}return r}static interpolateColors(e,t,a=5,n=!1){const r=this.hexToRgb(e),o=this.hexToRgb(t),l=this.rgbToHsl(r.r,r.g,r.b),i=this.rgbToHsl(o.r,o.g,o.b),s=[];let c=i.h-l.h;n?Math.abs(c)<180&&(c=c>0?c-360:c+360):(c>180&&(c-=360),c<-180&&(c+=360));for(let e=0;e<a;e++){const t=e/(a-1),n=(l.h+c*t+360)%360,r=l.s+(i.s-l.s)*t,o=l.l+(i.l-l.l)*t,d=this.hslToRgb(n,r,o);s.push(this.rgbToHex(d.r,d.g,d.b))}return s}static generateTriadic(e,t){const a=this.hexToRgb(e),n=this.hexToRgb(t),r=this.rgbToHsl(a.r,a.g,a.b),o=this.rgbToHsl(n.r,n.g,n.b),l=((r.h+o.h)/2+120)%360,i=(r.s+o.s)/2,s=(r.l+o.l)/2,c=this.hslToRgb(l,i,s);return[e,t,this.rgbToHex(c.r,c.g,c.b)]}static interpolateThreeColors(e,t,a,n=!1,r=7){const o=this.interpolateColors(e,t,Math.ceil(r/2)+1,n),l=this.interpolateColors(t,a,Math.floor(r/2)+1,n);return[...o.slice(0,-1),...l.slice(1)]}static generateRandomColor(){return`#${Math.floor(16777215*Math.random()).toString(16).padStart(6,"0")}`}}class he{static optimizeSVG(e){return(0,de.ky)(e,{multipass:!0,plugins:[{name:"cleanupNumericValues",params:{floatPrecision:1,transformPrecision:0}}],js2svg:{indent:0,pretty:!1}}).data}static seededRandom(e){let t=2147483648,a=e||Math.floor(Math.random()*(t-1));return function(){return a=(1103515245*a+12345)%t,a/(t-1)}}static createLinearGradient(e,t=45){return{type:"linear",x1:`${50+50*Math.cos((90-t)*Math.PI/180)}%`,y1:`${50+50*Math.sin((90-t)*Math.PI/180)}%`,x2:`${50-50*Math.cos((90-t)*Math.PI/180)}%`,y2:`${50-50*Math.sin((90-t)*Math.PI/180)}%`,colors:e,angle:t}}static createRadialGradient(e,t=50,a=50,n=50,r=50){return{type:"radial",cx:`${t}%`,cy:`${a}%`,rx:`${n}%`,ry:`${r}%`,colors:e}}static createBlobGradient(e,t=3,a=.8,n=20,r=60,o=null){null===o&&(o=1e4*Math.random());const l=this.seededRandom(o),i=[];for(let a=0;a<Math.min(t,e.length);a++){const o=a/t*2*Math.PI+(l()-.5)*Math.PI,s=15+40*(l()*l()),c=50+Math.cos(o)*s,d=50+Math.sin(o)*s,u=1.5*n+Math.pow(l(),.7)*(r-1.5*n);i.push({cx:Math.max(5,Math.min(95,c)),cy:Math.max(5,Math.min(95,d)),r:u,color:e[a],opacity:.75+.25*l(),layer:0})}const s=Math.min(e.length,t+2);for(let t=0;t<s;t++){const t=Math.floor(l()*e.length),a=2*l()*Math.PI,r=35*l();i.push({cx:50+Math.cos(a)*r,cy:50+Math.sin(a)*r,r:.6*n+l()*n*.8,color:e[t],opacity:.65+.25*l(),layer:1})}const c=Math.min(2*e.length,8);for(let t=0;t<c;t++){const t=Math.floor(l()*e.length);i.push({cx:10+80*l(),cy:10+80*l(),r:.3*n+l()*n*.4,color:e[t],opacity:.5+.4*l(),layer:2})}return i.sort(((e,t)=>e.layer-t.layer)),{type:"blob",blobs:i,smoothness:a,seed:o}}static createMeshGradient(e,t=4,a=150,n=null){null===n&&(n=1e4*Math.random());const r=[],o=this.seededRandom(n),l=Math.min(t,e.length);for(let t=0;t<l;t++){const a=t/l*2*Math.PI+o()*Math.PI*.3,n=25+25*o(),i=50+Math.cos(a)*n,s=50+Math.sin(a)*n;r.push({cx:Math.max(0,Math.min(100,i+20*(o()-.5))),cy:Math.max(0,Math.min(100,s+20*(o()-.5))),r:35+25*o(),color:e[t%e.length],opacity:.7+.2*o(),layer:0})}const i=100/(t-1);for(let a=0;a<t;a++)for(let n=0;n<t;n++)if(o()>.4){const t=n*i,l=a*i,s=(o()-.5)*i*1.2,c=(o()-.5)*i*1.2,d=Math.floor(o()*e.length),u=15+20*o();r.push({cx:Math.max(0,Math.min(100,t+s)),cy:Math.max(0,Math.min(100,l+c)),r:u,color:e[d],opacity:.5+.3*o(),layer:1})}const s=3*e.length;for(let t=0;t<s;t++){const t=Math.floor(o()*e.length);r.push({cx:100*o(),cy:100*o(),r:8+12*o(),color:e[t],opacity:.4+.4*o(),layer:2})}return r.sort(((e,t)=>e.layer-t.layer)),{type:"mesh",meshPoints:r,gridSize:t,blurIntensity:a,seed:n}}}class me extends n.Component{constructor(e){super(e),this.state={colorCount:2,primaryColor:"#ff6b6b",primaryAlpha:1,secondaryColor:"#4ecdc4",secondaryAlpha:1,tertiaryColor:"#45b7d1",tertiaryAlpha:1,paletteType:"interpolate",gradientType:"linear",angle:45,centerX:50,centerY:50,radiusX:50,radiusY:50,blobCount:3,smoothness:80,minSize:20,maxSize:60,gridSize:4,blurIntensity:150,seed:"369",canvasWidth:1280,canvasHeight:720,expandedPanel:"colors",colorMenuWhich:null,colorMenuAnchor:null,stats:{svgSizeText:"0 KB"}},this.currentGradient=null,this.currentPalette=[],this.svgContent="",this.previewRef=n.createRef(),this._regenTimer=null}static getDerivedStateFromProps(e,t){const a={};let n=!1;return e.open!==t.open&&(a.open=e.open,n=!0),e.size!==t.size&&(a.size=e.size,n=!0),n?a:null}componentDidUpdate(e,t){this.props.open&&!e.open&&setTimeout((()=>{this.newSeed()}),100),t.canvasWidth===this.state.canvasWidth&&t.canvasHeight===this.state.canvasHeight||this.syncPreviewSize();(t.paletteType!==this.state.paletteType||t.colorCount!==this.state.colorCount||t.primaryColor!==this.state.primaryColor||t.secondaryColor!==this.state.secondaryColor||t.tertiaryColor!==this.state.tertiaryColor)&&this.generateNewGradient()}handleDialogEnter=()=>{this.newSeed()};handleDialogEntered=()=>{this.syncPreviewSize(),this.generateNewGradient()};componentDidMount(){this.generateNewGradient()}componentWillUnmount(){this._regenTimer&&clearTimeout(this._regenTimer)}handlePanelChange=e=>(t,a)=>{this.setState({expandedPanel:!!a&&e})};getPreview=()=>this.previewRef.current;getPreviewWrap=()=>{var e;return(null===(e=this.previewRef.current)||void 0===e?void 0:e.parentElement)||null};syncPreviewSize=()=>{const e=this.getPreview(),t=this.getPreviewWrap();if(!e||!t)return;const{canvasWidth:a,canvasHeight:n}=this.state,r=Number(n)/Number(a||1),o=t.clientWidth,l=Math.max(1,Math.round(o*r));e.style.height=`${l}px`};hexToRgb=e=>{let t=String(e||"").trim();if("#"===t[0]&&(t=t.slice(1)),3===t.length&&(t=t.split("").map((e=>e+e)).join("")),!/^[0-9a-fA-F]{6}$/.test(t))return{r:0,g:0,b:0};const a=parseInt(t,16);return{r:a>>16&255,g:a>>8&255,b:255&a}};rgbToHex=({r:e,g:t,b:a})=>{const n=e=>Math.max(0,Math.min(255,Math.round(e))).toString(16).padStart(2,"0");return("#"+n(e)+n(t)+n(a)).toUpperCase()};luminance=({r:e,g:t,b:a})=>{const n=[e,t,a].map((e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)));return.2126*n[0]+.7152*n[1]+.0722*n[2]};generatePalette=()=>{const{colorCount:e,primaryColor:t,secondaryColor:a,tertiaryColor:n,paletteType:r}=this.state;let o=[];try{if(1===e)switch(r){case"monotone":o=ue.generateMonotone(t,5);break;case"complementary":o=ue.generateComplementary(t);break;case"darker":o=ue.generateDarkerTones(t,5);break;case"lighter":o=ue.generateLighterTones(t,5);break;default:o=[t]}else if(2===e){const e="longHue"===r;switch(r){case"interpolate":case"shortHue":case"longHue":o=ue.interpolateColors(t,a,5,e);break;case"triadic":o=ue.generateTriadic(t,a);break;default:o=ue.interpolateColors(t,a,5,!1)}}else if(3===e){const e="longHue"===r;o=ue.interpolateThreeColors(t,a,n,e,7)}0===o.length&&(o=[t])}catch(e){o=[t]}return this.currentPalette=o,o};createSVGFilter=(e,t,a)=>{const n="http://www.w3.org/2000/svg",r=document.createElementNS(n,"filter");if(r.setAttribute("id",e),r.setAttribute("filterUnits","userSpaceOnUse"),r.setAttribute("x","-50%"),r.setAttribute("y","-50%"),r.setAttribute("width","200%"),r.setAttribute("height","200%"),"blob"===t){const e=50+200*a.smoothness,t=document.createElementNS(n,"feGaussianBlur");t.setAttribute("in","SourceGraphic"),t.setAttribute("stdDeviation",e),r.appendChild(t)}else if("mesh"===t){const e=document.createElementNS(n,"feGaussianBlur");e.setAttribute("in","SourceGraphic"),e.setAttribute("stdDeviation",a.blurIntensity),r.appendChild(e)}return r};generateSVG=e=>{const t="http://www.w3.org/2000/svg",a=document.createElementNS(t,"svg");a.setAttribute("xmlns",t),a.setAttribute("viewBox",`0 0 ${this.state.canvasWidth} ${this.state.canvasHeight}`),a.setAttribute("width","100%"),a.setAttribute("height","100%");const n=document.createElementNS(t,"defs");switch(a.appendChild(n),e.type){case"linear":{const r=document.createElementNS(t,"linearGradient");r.setAttribute("id","gradient"),r.setAttribute("x1",e.x1),r.setAttribute("y1",e.y1),r.setAttribute("x2",e.x2),r.setAttribute("y2",e.y2),e.colors.forEach(((a,n)=>{const o=document.createElementNS(t,"stop");o.setAttribute("offset",n/(e.colors.length-1)*100+"%"),o.setAttribute("stop-color",a),r.appendChild(o)})),n.appendChild(r);const o=document.createElementNS(t,"rect");o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill","url(#gradient)"),a.appendChild(o);break}case"radial":{const r=document.createElementNS(t,"radialGradient");r.setAttribute("id","gradient"),r.setAttribute("cx",e.cx),r.setAttribute("cy",e.cy),r.setAttribute("r",e.rx),e.colors.forEach(((a,n)=>{const o=document.createElementNS(t,"stop");o.setAttribute("offset",n/(e.colors.length-1)*100+"%"),o.setAttribute("stop-color",a),r.appendChild(o)})),n.appendChild(r);const o=document.createElementNS(t,"rect");o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill","url(#gradient)"),a.appendChild(o);break}case"blob":{var r;const o=this.createSVGFilter("blobFilter","blob",{smoothness:e.smoothness});n.appendChild(o);const l=document.createElementNS(t,"rect");l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("fill",(null===(r=e.blobs[0])||void 0===r?void 0:r.color)||"#ffffff"),a.appendChild(l);const i=document.createElementNS(t,"g");i.setAttribute("filter","url(#blobFilter)"),e.blobs.forEach((e=>{const a=document.createElementNS(t,"circle");a.setAttribute("cx",`${e.cx}%`),a.setAttribute("cy",`${e.cy}%`),a.setAttribute("r",`${e.r}%`),a.setAttribute("fill",e.color),a.setAttribute("opacity",e.opacity),i.appendChild(a)})),a.appendChild(i);break}case"mesh":{var o;const r=this.createSVGFilter("meshFilter","mesh",{blurIntensity:e.blurIntensity});n.appendChild(r);const l=document.createElementNS(t,"rect");l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("fill",(null===(o=e.meshPoints[0])||void 0===o?void 0:o.color)||"#ffffff"),a.appendChild(l);const i=document.createElementNS(t,"g");i.setAttribute("filter","url(#meshFilter)"),e.meshPoints.forEach((e=>{const a=document.createElementNS(t,"circle");a.setAttribute("cx",`${e.cx}%`),a.setAttribute("cy",`${e.cy}%`),a.setAttribute("r",`${e.r}%`),a.setAttribute("fill",e.color),a.setAttribute("opacity",e.opacity),i.appendChild(a)})),a.appendChild(i);break}}const l=new XMLSerializer;return he.optimizeSVG(l.serializeToString(a))};generateNewGradient=()=>{const e=this.generatePalette(),t=this.state;let a;switch(t.gradientType){case"linear":default:a=he.createLinearGradient(e,t.angle);break;case"radial":a=he.createRadialGradient(e,t.centerX,t.centerY,t.radiusX,t.radiusY);break;case"blob":a=he.createBlobGradient(e,t.blobCount,t.smoothness/100,t.minSize,t.maxSize,parseInt(t.seed));break;case"mesh":a=he.createMeshGradient(e,t.gridSize,t.blurIntensity,parseInt(t.seed))}this.currentGradient=a,this.svgContent=this.generateSVG(a),this.updatePreview(),this.updateStats()};updatePreview=()=>{const e=this.getPreview();if(e&&this.svgContent){const t=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svgContent)))}`;e.style.backgroundImage=`url("${t}")`,e.style.backgroundSize="cover",e.style.backgroundPosition="center"}};getPaletteOptions=()=>{const e=0|this.state.colorCount;return 1===e?[{value:"monotone",label:"Monotone"},{value:"complementary",label:"Complementary"},{value:"darker",label:"Darker Tones"},{value:"lighter",label:"Lighter Tones"}]:2===e?[{value:"interpolate",label:"Interpolate"},{value:"triadic",label:"Triadic"},{value:"shortHue",label:"Short Hue Path"},{value:"longHue",label:"Long Hue Path"}]:[{value:"shortHue",label:"Short Hue Path"},{value:"longHue",label:"Long Hue Path"}]};updateStats=()=>{const e=(new Blob([this.svgContent]).size/1024).toFixed(2)+" KB";this.setState({stats:{svgSizeText:e}})};scheduleRegen=()=>{this._regenTimer&&clearTimeout(this._regenTimer),this._regenTimer=setTimeout((()=>{requestAnimationFrame(this.generateNewGradient)}),120)};handleColorCountChange=(e,t)=>{this.setState({colorCount:t},(()=>{this.updatePaletteOptions(t),this.generateNewGradient()}))};handleColorCountToggle=(e,t)=>{null!=t&&this.setState({colorCount:t},(()=>{this.updatePaletteOptions(t),this.generateNewGradient()}))};updatePaletteOptions=e=>{const t=this.allowedPaletteTypes(e),a=this.state.paletteType,n=t.includes(a)?a:t[0];n!==a&&this.setState({paletteType:n})};handlePaletteTypeChange=(e,t)=>{const a=e&&e.target&&void 0!==e.target.value?e.target.value:"string"==typeof e?e:this.state.paletteType,n=this.allowedPaletteTypes(this.state.colorCount),r=n.includes(a)?a:n[0];r!==this.state.paletteType?this.setState({paletteType:r},this.generateNewGradient):this.generateNewGradient()};handleChangeGenerate=e=>t=>{var a,n;const r=null!==(a=null==t||null===(n=t.target)||void 0===n?void 0:n.value)&&void 0!==a?a:t;this.setState({[e]:r},(()=>{"canvasWidth"!==e&&"canvasHeight"!==e||this.syncPreviewSize(),this.generateNewGradient()}))};handleSliderGenerate=e=>(t,a)=>{this.setState({[e]:a},(()=>{this.generateNewGradient()}))};newSeed=()=>{const e=String(Math.floor(1e4+9e4*Math.random()));this.setState({seed:e},this.generateNewGradient)};randomize=()=>{const e=1+Math.floor(3*Math.random()),t=["linear","radial","blob","mesh"],a=t[Math.floor(Math.random()*t.length)];this.setState({colorCount:e,primaryColor:ue.generateRandomColor(),secondaryColor:ue.generateRandomColor(),tertiaryColor:ue.generateRandomColor(),gradientType:a,angle:Math.floor(360*Math.random()),centerX:20+Math.floor(60*Math.random()),centerY:20+Math.floor(60*Math.random()),radiusX:30+Math.floor(50*Math.random()),radiusY:30+Math.floor(50*Math.random()),blobCount:2+Math.floor(5*Math.random()),smoothness:60+Math.floor(40*Math.random()),gridSize:2+Math.floor(4*Math.random()),blurIntensity:100+Math.floor(200*Math.random())},(()=>{this.updatePaletteOptions(e),this.generateNewGradient()}))};downloadSVG=()=>{const e=new Blob([this.svgContent||""],{type:"image/svg+xml"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`gradient-${this.state.seed}.svg`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)};openColorMenu=e=>t=>{this.setState({colorMenuWhich:e,colorMenuAnchor:t.currentTarget})};closeColorMenu=()=>{this.setState({colorMenuWhich:null,colorMenuAnchor:null},(()=>{this.generateNewGradient()}))};onPickerChange=e=>{const{colorMenuWhich:t}=this.state;if(!t)return;const a=this.rgbToHex(e),n={};var r;if("primary"===t)n.primaryColor=a,n.primaryAlpha=null!==(r=e.a)&&void 0!==r?r:1;else if("secondary"===t){var o;n.secondaryColor=a,n.secondaryAlpha=null!==(o=e.a)&&void 0!==o?o:1}else if("tertiary"===t){var l;n.tertiaryColor=a,n.tertiaryAlpha=null!==(l=e.a)&&void 0!==l?l:1}this.setState(n,(()=>{this.scheduleRegen()}))};convertToBase64=()=>this.svgContent?`data:image/svg+xml;base64,${btoa(this.svgContent)}`:"";allowedPaletteTypes=e=>{switch(0|e){case 1:return["monotone","complementary","darker","lighter"];case 2:return["interpolate","triadic","shortHue","longHue"];case 3:return["shortHue","longHue"];default:return["interpolate"]}};render(){const{classes:e,open:t,size:a}=this.props,r=this.state,o=this.hexToRgb(r.primaryColor),l=this.hexToRgb(r.secondaryColor),i=this.hexToRgb(r.tertiaryColor),s=this.luminance(o)<.45?"white":"black",c=this.luminance(l)<.45?"white":"black",d=this.luminance(i)<.45?"white":"black",u={r:o.r,g:o.g,b:o.b,a:r.primaryAlpha},h={r:l.r,g:l.g,b:l.b,a:r.secondaryAlpha},m={r:i.r,g:i.g,b:i.b,a:r.tertiaryAlpha};return n.createElement(P.A,{className:e.dialog,open:t,maxWidth:"md",fullWidth:!0,disablePortal:!1,onClose:e=>{var t,a;return null===(t=(a=this.props).onClose)||void 0===t?void 0:t.call(a,e)},keepMounted:!1,onEnter:this.handleDialogEnter,onEntered:this.handleDialogEntered},n.createElement(z.A,{style:{display:"flex",margin:"0 0 16px 0"}},n.createElement(W.A,{component:"h1",variant:"h4",style:{width:"100%",margin:0}},"Create A New Gradient")),n.createElement(N.A,{scroll:"paper",className:e.dialogContent},n.createElement(O.A,{container:!0,spacing:2},n.createElement(O.A,{item:!0,xs:12,md:8},n.createElement("div",{className:e.previewPanel},n.createElement(q.A,{in:t,timeout:300,appear:!0},n.createElement("div",{className:e.gradientPreviewWrap},n.createElement("div",{className:e.gradientPreview,ref:this.previewRef}))),n.createElement(q.A,{in:t,timeout:450,appear:!0},n.createElement(O.A,{container:!0,spacing:1},n.createElement(O.A,{item:!0,xs:12,md:4},n.createElement(H.A,{fullWidth:!0,variant:"text",onClick:this.newSeed,startIcon:n.createElement(j.A,null)},"New Seed")),n.createElement(O.A,{item:!0,xs:12,md:4},n.createElement(H.A,{fullWidth:!0,variant:"text",onClick:this.randomize},"Randomize")),n.createElement(O.A,{item:!0,xs:12,md:4},n.createElement(H.A,{fullWidth:!0,variant:"text",onClick:this.downloadSVG,startIcon:n.createElement(Q.A,null)},"Download (",r.stats.svgSizeText,")")))),n.createElement(q.A,{in:t,timeout:500,appear:!0},n.createElement("div",{className:e.canvasInputRow},n.createElement($.A,{label:"Width",type:"number",variant:"outlined",size:"small",value:r.canvasWidth,onChange:e=>this.setState({canvasWidth:e.target.value},(()=>{this.syncPreviewSize(),this.generateNewGradient()})),style:{display:a?"block":"none"}}),n.createElement($.A,{label:"Height",type:"number",variant:"outlined",size:"small",value:r.canvasHeight,onChange:e=>this.setState({canvasHeight:e.target.value},(()=>{this.syncPreviewSize(),this.generateNewGradient()})),style:{display:a?"block":"none"}}),n.createElement($.A,{label:"Seed",variant:"outlined",size:"small",value:r.seed,onChange:this.handleChangeGenerate("seed"),style:{gridColumn:a?"auto":"1 / -1"}}))))),n.createElement(O.A,{item:!0,xs:12,md:4},n.createElement("div",{className:e.controlsPanel},n.createElement(q.A,{in:t,timeout:300,appear:!0},n.createElement(Z.A,{expanded:"colors"===r.expandedPanel,onChange:this.handlePanelChange("colors")},n.createElement(J.A,{expandIcon:n.createElement(te.A,null)},n.createElement(W.A,{className:e.sectionTitle,component:"h5"},"Colors")),n.createElement(ee.A,{style:{display:"block"}},n.createElement(O.A,{container:!0,spacing:1,alignItems:"left"},n.createElement(O.A,{item:!0,xs:12},n.createElement(W.A,{gutterBottom:!0,variant:"caption",style:{display:"block",marginBottom:6}},"Primary Color Count"),n.createElement(ne.A,{value:r.colorCount,exclusive:!0,size:"small",className:e.colorCount,onChange:this.handleColorCountToggle,"aria-label":"color count",style:{width:"100%"}},n.createElement(ae.A,{value:1,"aria-label":"1 color",style:{flex:1,fontWeight:"bold"}},"1"),n.createElement(ae.A,{value:2,"aria-label":"2 colors",style:{flex:1,fontWeight:"bold"}},"2"),n.createElement(ae.A,{value:3,"aria-label":"3 colors",style:{flex:1,fontWeight:"bold"}},"3"))),n.createElement(O.A,{item:!0,xs:3===r.colorCount?4:2===r.colorCount?6:12},n.createElement(H.A,{variant:"contained",className:e.colorButton,style:{color:s,background:r.primaryColor},onClick:this.openColorMenu("primary")},"Primary")),r.colorCount>=2&&n.createElement(O.A,{item:!0,xs:3===r.colorCount?4:6},n.createElement(H.A,{variant:"contained",className:e.colorButton,style:{color:c,background:r.secondaryColor},onClick:this.openColorMenu("secondary")},"Secondary")),r.colorCount>=3&&n.createElement(O.A,{item:!0,xs:4},n.createElement(H.A,{variant:"contained",className:e.colorButton,style:{color:d,background:r.tertiaryColor},onClick:this.openColorMenu("tertiary")},"Tertiary")),n.createElement(O.A,{item:!0,xs:12},n.createElement(K.A,{mt:2},n.createElement(F.A,{variant:"outlined",fullWidth:!0},n.createElement(Y.A,{id:"palette-type-label"},"Palette Type"),n.createElement(U.A,{labelId:"palette-type-label",id:"palette-type",label:"Palette Type",value:r.paletteType,onChange:this.handlePaletteTypeChange,MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}}},this.getPaletteOptions().map((e=>n.createElement(V.A,{key:e.value,value:e.value},e.label))))))),n.createElement(O.A,{item:!0,xs:12},n.createElement(K.A,{className:e.palettePreview},this.currentPalette.map(((t,a)=>n.createElement("div",{key:a,className:e.colorSwatch,style:{background:t},title:t}))))))))),n.createElement(q.A,{in:t,timeout:450,appear:!0},n.createElement(Z.A,{expanded:"gradient"===r.expandedPanel,onChange:this.handlePanelChange("gradient")},n.createElement(J.A,{expandIcon:n.createElement(te.A,null)},n.createElement(W.A,{className:e.sectionTitle,component:"h5"},"Shapes")),n.createElement(ee.A,{style:{display:"block"}},n.createElement(F.A,{variant:"outlined",fullWidth:!0},n.createElement(Y.A,null,"Type"),n.createElement(U.A,{label:"Type",value:r.gradientType,onChange:this.handleChangeGenerate("gradientType")},n.createElement(V.A,{value:"linear"},"Linear"),n.createElement(V.A,{value:"radial"},"Radial"),n.createElement(V.A,{value:"blob"},"Blob"),n.createElement(V.A,{value:"mesh"},"Mesh"))),n.createElement(X.A,{in:"linear"===r.gradientType},n.createElement(K.A,{mt:2},n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Angle: ",r.angle,"Â°"),n.createElement(G.A,{min:0,max:360,value:r.angle,onChange:this.handleSliderGenerate("angle")}))),n.createElement(X.A,{in:"radial"===r.gradientType},n.createElement(K.A,{mt:2},n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Center X: ",r.centerX,"%"),n.createElement(G.A,{min:0,max:100,value:r.centerX,onChange:this.handleSliderGenerate("centerX")}),n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Center Y: ",r.centerY,"%"),n.createElement(G.A,{min:0,max:100,value:r.centerY,onChange:this.handleSliderGenerate("centerY")}),n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Radius X: ",r.radiusX,"%"),n.createElement(G.A,{min:10,max:100,value:r.radiusX,onChange:this.handleSliderGenerate("radiusX")}),n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Radius Y: ",r.radiusY,"%"),n.createElement(G.A,{min:10,max:100,value:r.radiusY,onChange:this.handleSliderGenerate("radiusY")}))),n.createElement(X.A,{in:"blob"===r.gradientType},n.createElement(K.A,{mt:2},n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Blob Count: ",r.blobCount),n.createElement(G.A,{min:2,max:8,value:r.blobCount,onChange:this.handleSliderGenerate("blobCount")}),n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Smoothness: ",r.smoothness),n.createElement(G.A,{min:50,max:200,value:r.smoothness,onChange:this.handleSliderGenerate("smoothness")}),n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Min Size: ",r.minSize,"%"),n.createElement(G.A,{min:10,max:50,value:r.minSize,onChange:this.handleSliderGenerate("minSize")}),n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Max Size: ",r.maxSize,"%"),n.createElement(G.A,{min:30,max:80,value:r.maxSize,onChange:this.handleSliderGenerate("maxSize")}))),n.createElement(X.A,{in:"mesh"===r.gradientType},n.createElement(K.A,{mt:2},n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Grid Size: ",r.gridSize,"x",r.gridSize),n.createElement(G.A,{min:2,max:6,value:r.gridSize,onChange:this.handleSliderGenerate("gridSize")}),n.createElement(W.A,{gutterBottom:!0,variant:"caption"},"Blur Intensity: ",r.blurIntensity),n.createElement(G.A,{min:50,max:300,value:r.blurIntensity,onChange:this.handleSliderGenerate("blurIntensity")})))))))))),n.createElement(L.A,null,n.createElement(H.A,{onClick:e=>{var t,a;return null===(t=(a=this.props).onClose)||void 0===t?void 0:t.call(a,e)},autoFocus:!0,variant:"text",color:"primary"},"Close"),n.createElement(H.A,{style:{backgroundColor:"#fff",color:"#000"},onClick:e=>{var t,a;return null===(t=(a=this.props).onAccept)||void 0===t?void 0:t.call(a,this.convertToBase64())},autoFocus:!0,variant:"contained",color:"secondary"},"Accept")),n.createElement(re.A,{className:e.menu,anchorEl:r.colorMenuAnchor,open:Boolean(r.colorMenuAnchor),onClose:this.closeColorMenu,getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},style:{padding:0}},n.createElement(ce,{className:e.materialPicker,color:"secondary"===r.colorMenuWhich?h:"tertiary"===r.colorMenuWhich?m:u,onChange:this.onPickerChange,onConfirm:this.closeColorMenu})))}}const ge=(0,r.default)((e=>({dialog:{"& .MuiDialog-paper":{zIndex:e.zIndex.drawer+10,backgroundColor:"#0c0c0c",color:"#fff",borderRadius:21,[e.breakpoints.down("sm")]:{margin:0,maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%",borderRadius:0},[e.breakpoints.up("md")]:{maxWidth:"75vw",width:1e3,height:"auto"}},"& .MuiDialog-paperScrollPaper":{[e.breakpoints.down("sm")]:{maxHeight:"100%"}},"& .MuiDialog-paperFullWidth":{[e.breakpoints.down("sm")]:{width:"100% !important"}}},dialogContent:{margin:"12px 0 24px 0"},previewPanel:{backgroundColor:"#171717",borderRadius:"21px",paddingBottom:"16px"},gradientPreviewWrap:{position:"relative",marginBottom:"16px"},gradientPreview:{position:"relative",width:"100%",height:405,borderRadius:21,overflow:"hidden",background:"#000"},controlsPanel:{maxHeight:"calc(80vh - 120px)",overflowY:"auto","& div.MuiPaper-rounded":{borderRadius:"21px",backgroundColor:"#171717"},"& .MuiAccordionDetails-root":{overflow:"hidden"},"& .MuiAccordion-root:before, & div.MuiAccordion-root.Mui-expanded:before":{opacity:0},"& .MuiAccordion-root":{margin:"8px 0"},"& .MuiAccordion-rounded:first-child":{borderTopLeftRadius:"21px",borderTopRightRadius:"21px"},"& .MuiAccordion-rounded:last-child":{borderBottomLeftRadius:"21px",borderBottomRightRadius:"21px"}},sectionTitle:{fontSize:16,fontWeight:600,color:"#ccc",letterSpacing:.5},colorCount:{"& .MuiToggleButton-root":{borderRadius:"21px"},"& .MuiToggleButtonGroup-groupedHorizontal:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0},"& .MuiToggleButtonGroup-groupedHorizontal:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},marginBottom:12},menu:{"& .MuiPaper-root":{background:"transparent",padding:0,borderRadius:"50%",boxShadow:"none"},"& .MuiList-padding":{padding:0}},materialPicker:{width:228,height:"auto",margin:4},colorButton:{fontWeight:"bold",borderRadius:"32px !important",height:56,width:"100%",textTransform:"none"},iconButtonSmallGrey:{"&.MuiIconButton-root":{color:"#666"},"&.MuiIconButton-root:hover":{color:"#999"}},colorSwatch:{width:30,height:30,borderRadius:6,border:"2px solid #333",cursor:"pointer",transition:"transform 0.2s ease","&:hover":{transform:"scale(1.1)"}},palettePreview:{display:"flex",gap:5,marginTop:10,flexWrap:"wrap"},canvasInputRow:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8,padding:"0 12px",marginTop:12}})))(me);var pe=a(61434),fe=a(35376),be=a(42460),ve=a(96232),ye=a(61466),Ee=a(77430),Ce=a(33615),Ae=a(83182),xe=a(20426),ke=a(6272),Me=a(91004),we=a(69205),Se=a(73546),Te=a(92421),Ie=a(98039),De=a(29067),Be=a(50915),_e=a(78295),Re=a(41728),Pe=a(32150);class Le extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(Re.A,this.props,n.default.createElement("path",{d:"M20.56 18H3.44C2.65 18 2 17.37 2 16.59V7.41C2 6.63 2.65 6 3.44 6H20.56C21.35 6 22 6.63 22 7.41V16.59C22 17.37 21.35 18 20.56 18M6.81 15.19V11.53L8.73 13.88L10.65 11.53V15.19H12.58V8.81H10.65L8.73 11.16L6.81 8.81H4.89V15.19H6.81M19.69 12H17.77V8.81H15.85V12H13.92L16.81 15.28L19.69 12Z"}))}}const Ne=(0,Pe.A)((e=>({})))(Le);class ze extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(Re.A,this.props,n.default.createElement("path",{d:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M14,18V16H16V6.31L13.5,7.75V5.44L16,4H18V16H20V18H14Z"}))}}const He=(0,Pe.A)((e=>({})))(ze);class We extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(Re.A,this.props,n.default.createElement("path",{d:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M21,18H15A2,2 0 0,1 13,16C13,15.47 13.2,15 13.54,14.64L18.41,9.41C18.78,9.05 19,8.55 19,8A2,2 0 0,0 17,6A2,2 0 0,0 15,8H13A4,4 0 0,1 17,4A4,4 0 0,1 21,8C21,9.1 20.55,10.1 19.83,10.83L15,16H21V18Z"}))}}const Oe=(0,Pe.A)((e=>({})))(We);class $e extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(Re.A,this.props,n.default.createElement("path",{d:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H19A2,2 0 0,1 21,6V16A2,2 0 0,1 19,18H15A2,2 0 0,1 13,16V15H15V16H19V12H15V10H19V6H15V7H13V6A2,2 0 0,1 15,4Z"}))}}const Ge=(0,Pe.A)((e=>({})))($e);class Ue extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(Re.A,this.props,n.default.createElement("path",{d:"M13,4A4,4 0 0,1 17,8A4,4 0 0,1 13,12H11V18H9V4H13M13,10A2,2 0 0,0 15,8A2,2 0 0,0 13,6H11V10H13Z"}))}}const Ve=(0,Pe.A)((e=>({})))(Ue);var Fe=a(13565),Ye=a(12636),Xe=a(45500),Ke=a(89806),je=a(65595),Qe=a(66424),qe=a(84022),Ze=a(66324),Je=a(24711),et=a(11903),tt=a(77649),at=a(86848),nt=a(32580),rt=a(10148),ot=a(64054),lt=a(50020),it=a(9159),st=a(3280),ct=a(19948),dt=a(7400),ut=a(64061),ht=a(78896),mt=a(17807),gt=a(40693),pt=a(31334),ft=a(49974),bt=a(82788),vt=a(24488),yt=a(7756),Et=a(16526);class Ct{constructor(){this.db=null,this.collection=null}async init(){if(this.collection)return!0;try{const{LacertaDB:e}=await Promise.resolve().then(a.bind(a,92614)),t=new e;return this.db=await t.getDatabase("drafts"),this.collection=await this.db.createCollection("documents"),!0}catch(e){return!1}}async save(e,t){await this.init();const a={...t,lastModified:Date.now()};try{return e&&await this.collection.get(e)?await this.collection.update(e,a):await this.collection.add(a)}catch(e){return null}}async getMostRecent(){await this.init();try{const e=await this.collection.query({},{sort:{lastModified:-1},limit:1});return(null==e?void 0:e[0])||null}catch(e){return null}}async get(e){await this.init();try{return await this.collection.get(e)}catch(e){return null}}async getAll(){await this.init();try{return await this.collection.query({},{sort:{lastModified:-1},limit:50})||[]}catch(e){return[]}}async delete(e){await this.init();try{return await this.collection.delete(e),!0}catch(e){return!1}}}const At=(e,t,a)=>{e.findEntityRanges((e=>{const t=e.getEntity();return null!==t&&"LINK"===a.getEntity(t).getType()}),t)},xt=e=>{const{url:t}=e.contentState.getEntity(e.entityKey).getData();return n.default.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:{color:"#90caf9"}},e.children)};class kt extends n.default.Component{parseTableMarkdown(e){const t=e.trim().split("\n");if(t.length<3)return null;const a=t[0],n=t[1],r=t.slice(2);return{headers:a.replace(/^\||\|$/g,"").split("|").map((e=>e.trim())),alignments:n.replace(/^\||\|$/g,"").split("|").map((e=>{const t=e.trim();return t.startsWith(":")&&t.endsWith(":")?"center":t.endsWith(":")?"right":(t.startsWith(":"),"left")})),rows:r.map((e=>e.replace(/^\||\|$/g,"").split("|").map((e=>e.trim()))))}}render(){const{block:e}=this.props,t=e.getText();if(!t.includes("|")||!t.includes("---"))return null;const a=this.parseTableMarkdown(t);if(!a)return null;const{headers:r,alignments:o,rows:l}=a;return n.default.createElement("div",{className:"markdown-table-wrapper",style:{margin:"16px 0",overflowX:"auto"}},n.default.createElement("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"rgba(255,255,255,0.02)",borderRadius:8}},n.default.createElement("thead",null,n.default.createElement("tr",null,r.map(((e,t)=>n.default.createElement("th",{key:t,style:{padding:"12px",borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:o[t]||"left",fontWeight:600,color:"#fff",backgroundColor:"rgba(255,255,255,0.05)"}},e))))),n.default.createElement("tbody",null,l.map(((e,t)=>n.default.createElement("tr",{key:t,style:{backgroundColor:t%2==0?"transparent":"rgba(255,255,255,0.01)"}},e.map(((e,t)=>n.default.createElement("td",{key:t,style:{padding:"12px",borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:o[t]||"left",color:"#e0e0e0"}},e)))))))))}}class Mt extends n.PureComponent{render(){const e=this.props.contentState.getEntity(this.props.block.getEntityAt(0)),{src:t}=e.getData();return"IMAGE"===e.getType()?n.default.createElement("div",{style:{textAlign:"center",margin:"16px 0"}},n.default.createElement("img",{src:t,alt:"",style:{maxWidth:"100%",height:"auto",borderRadius:8}})):null}}const wt=n.default.memo((({classes:e,title:t,description:a,onTitleChange:r,onDescriptionChange:o})=>n.default.createElement("div",{className:e.editorHeader},n.default.createElement($.A,{className:e.titleInput,placeholder:"Title",value:t,onChange:r,fullWidth:!0}),n.default.createElement($.A,{className:e.descriptionInput,placeholder:"Short Description",value:a,onChange:o,fullWidth:!0,multiline:!0,rows:2})))),St=n.default.memo((({classes:e,editorMode:t,tab:a,mobile:r,editOpened:o,editorState:l,hasInlineStyle:i,hasBlockType:s,onToggleEditMenu:c,onToggleInlineStyle:d,onToggleBlockType:u,onOpenFormatMenu:h,onOpenListMenu:m,onOpenHeadingMenu:g,onOpenLinkDialog:p,onInsertImage:f,onUndo:b,onRedo:v})=>"visual"!==t||r&&1===parseInt(a)?null:n.default.createElement(ht.A,{in:(0===parseInt(a)||!r)&&"visual"===t},n.default.createElement("div",{className:`${e.fixedSidebar} ${o?"opened":""}`},!o&&n.default.createElement(ve.Ay,{title:"Expand",placement:"right"},n.default.createElement(be.A,{className:"edit "+e.menuIconButton,onClick:c},n.default.createElement(at.A,null))),n.default.createElement(ve.Ay,{title:"Bold (Ctrl+B)",placement:"right"},n.default.createElement(be.A,{className:`${e.menuIconButton} ${i("BOLD")?"active":""}`,onMouseDown:e=>{e.preventDefault(),d("BOLD")}},n.default.createElement(Ie.A,null))),n.default.createElement(ve.Ay,{title:"Italic (Ctrl+I)",placement:"right"},n.default.createElement(be.A,{className:`${e.menuIconButton} ${i("ITALIC")?"active":""}`,onMouseDown:e=>{e.preventDefault(),d("ITALIC")}},n.default.createElement(De.A,null))),n.default.createElement(ve.Ay,{title:"More",placement:"right"},n.default.createElement(be.A,{className:e.menuIconButton,onClick:h},n.default.createElement(rt.A,null))),n.default.createElement("div",{className:e.menuDivider}),n.default.createElement(ve.Ay,{title:"Quote",placement:"right"},n.default.createElement(be.A,{className:`${e.menuIconButton} ${s("blockquote")?"active":""}`,onMouseDown:e=>{e.preventDefault(),u("blockquote")}},n.default.createElement(_e.A,null))),n.default.createElement(ve.Ay,{title:"Lists",placement:"right"},n.default.createElement(be.A,{className:e.menuIconButton,onClick:m},n.default.createElement(Ke.A,null))),n.default.createElement(ve.Ay,{title:"Heading",placement:"right"},n.default.createElement(be.A,{className:e.menuIconButton,onClick:g},n.default.createElement(Qe.A,null))),n.default.createElement("div",{className:e.menuDivider}),n.default.createElement(ve.Ay,{title:"Link (Ctrl+K)",placement:"right"},n.default.createElement(be.A,{className:e.menuIconButton,onClick:p},n.default.createElement(Ye.A,null))),n.default.createElement(ve.Ay,{title:"Image",placement:"right"},n.default.createElement(be.A,{className:e.menuIconButton,onClick:f},n.default.createElement(Xe.A,null))),n.default.createElement("div",{className:e.menuDivider}),n.default.createElement(ve.Ay,{title:"Undo",placement:"right"},n.default.createElement(be.A,{className:e.menuIconButton,onClick:b},n.default.createElement(qe.A,null))),n.default.createElement(ve.Ay,{title:"Redo",placement:"right"},n.default.createElement(be.A,{className:e.menuIconButton,onClick:v},n.default.createElement(Ze.A,null))),o&&n.default.createElement(ve.Ay,{title:"Collapse",placement:"right"},n.default.createElement(be.A,{className:"close "+e.menuIconButton,style:{backgroundColor:"#000",color:"#fff",marginTop:8},onClick:c},n.default.createElement(tt.A,null))))))),Tt=n.default.memo((({classes:e,editorMode:t,title:a,description:r,editorState:l,markdownSource:i,editorRef:s,onTitleChange:c,onDescriptionChange:d,onChange:u,onMarkdownChange:h,onFocus:m,handleKeyCommand:g,keyBindingFn:p,getBlockStyle:f,blockRendererFn:b,onToggleEditorMode:v})=>n.default.createElement("div",{className:e.editorSection},n.default.createElement(wt,{classes:e,title:a,description:r,onTitleChange:c,onDescriptionChange:d}),n.default.createElement("div",{className:e.editorWrapper+" "+t,onClick:m},n.default.createElement("div",{style:{height:"100%"}},"visual"===t?n.default.createElement(o.Editor,{ref:s,editorState:l,onChange:u,handleKeyCommand:g,keyBindingFn:p,blockStyleFn:f,blockRendererFn:b,placeholder:"Tell your story...",spellCheck:!0}):n.default.createElement("textarea",{value:i,onChange:h,placeholder:"Write your story in markdown...",spellCheck:!0}))),n.default.createElement(ve.Ay,{title:"visual"===t?"Switch to markdown code":"Switch to visual editor",placement:"right"},n.default.createElement(vt.A,{className:e.menuIconButtonFab,onClick:v},"visual"===t?n.default.createElement(Ne,null):n.default.createElement(yt.A,null)))))),It=n.default.memo((({classes:e,gradient:t,fileInputRef:a,onImageUpload:r,onRemoveImage:o,onOpenGradientEditor:l})=>n.default.createElement("div",{className:e.settingsSection},n.default.createElement(W.A,{variant:"subtitle2",className:e.subTitle2},"Cover Image",n.default.createElement(ve.Ay,{interactive:!0,enterTouchDelay:200,leaveTouchDelay:4e3,classes:{tooltip:e.tooltipRoot},title:n.default.createElement("span",{className:e.tooltip},"The cover image has a purpose of aesthetic, gradients are so lite that they are stored in the blockchain as Scalable Vector Graphic of less than 1 kB.")},n.default.createElement(be.A,null,n.default.createElement(Et.A,null)))),n.default.createElement("div",{className:e.imageUploadArea},n.default.createElement("input",{ref:a,type:"file",accept:"image/*",style:{display:"none"},onChange:r}),t?n.default.createElement("div",null,n.default.createElement("img",{src:t,alt:"Cover",className:e.uploadedImage}),n.default.createElement("div",{className:e.imageOverlay},n.default.createElement(H.A,{size:"small",startIcon:n.default.createElement(Je.A,null),onClick:o,style:{color:"#fff"}},"Remove"))):n.default.createElement(K.A,{textAlign:"center",onClick:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.click()},style:{cursor:"pointer"}},n.default.createElement(et.A,{style:{fontSize:48,color:"#666"}}),n.default.createElement(W.A,{variant:"body2",style:{color:"#999",marginTop:8}},"Click to upload"),n.default.createElement("div",{className:e.imageOverlay},n.default.createElement(H.A,{size:"small",startIcon:n.default.createElement(mt.A,null),onClick:l,style:{color:"#fff"}},"Generate"))))))),Dt=n.default.memo((({classes:e,gradient:t,payout:a,community:r,fileInputRef:o,onImageUpload:l,onRemoveImage:i,onOpenGradientEditor:s,onPayoutChange:c,onCommunityChange:d,mobile:u,actionButtons:h})=>n.default.createElement("div",{className:e.settingsPanel},n.default.createElement("div",{className:e.settingsContent},n.default.createElement(It,{classes:e,gradient:t,fileInputRef:o,onImageUpload:l,onRemoveImage:i,onOpenGradientEditor:s}),n.default.createElement("div",{className:e.settingsSection},n.default.createElement(W.A,{variant:"subtitle2",className:e.subTitle2},"Payout",n.default.createElement(ve.Ay,{interactive:!0,enterTouchDelay:200,leaveTouchDelay:4e3,classes:{tooltip:e.tooltipRoot},title:n.default.createElement("span",{className:e.tooltip},"You can choose how the reward split between authors and curators.")},n.default.createElement(be.A,null,n.default.createElement(Et.A,null)))),n.default.createElement(F.A,{variant:"outlined",fullWidth:!0,size:"small"},n.default.createElement(U.A,{value:a,onChange:c,style:{color:"#fff"}},n.default.createElement(V.A,{value:"author"},"100% Author"),n.default.createElement(V.A,{value:"everyone"},"50% / 50%"),n.default.createElement(V.A,{value:"curators"},"100% Curators")))),n.default.createElement("div",{className:e.settingsSection},n.default.createElement(W.A,{variant:"subtitle2",className:e.subTitle2},"Community",n.default.createElement(ve.Ay,{interactive:!0,enterTouchDelay:200,leaveTouchDelay:4e3,classes:{tooltip:e.tooltipRoot},title:n.default.createElement("span",{className:e.tooltip},"You can choose in which community the post will be featured.")},n.default.createElement(be.A,null,n.default.createElement(Et.A,null)))),n.default.createElement(F.A,{variant:"outlined",fullWidth:!0,size:"small"},n.default.createElement(U.A,{value:r,onChange:d,style:{color:"#fff"}},n.default.createElement(V.A,{value:"governance"},"Governance"),n.default.createElement(V.A,{value:"askpixa"},"Ask Pixa"),n.default.createElement(V.A,{value:"contest"},"Contest Drawing"),n.default.createElement(V.A,{value:"edit4me"},"Edit For Me"),n.default.createElement(V.A,{value:"iy"},"Introduce Yourself"),n.default.createElement(V.A,{value:"lab"},"Pixa Labs"))))),!u&&h))),Bt=n.default.memo((({classes:e,mobile:t,tab:a,onOpenDrafts:r,onFinish:o,onPreview:l})=>t?n.default.createElement("div",{className:e.settingsActions},n.default.createElement(H.A,{variant:"text",color:"inherit",startIcon:n.default.createElement(lt.A,null),onClick:r},"Drafts"),0===parseInt(a)?n.default.createElement(q.A,{in:0===parseInt(a)},n.default.createElement(H.A,{variant:"contained",startIcon:n.default.createElement(ut.A,null),onClick:o,style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Finish")):n.default.createElement(q.A,{in:1===parseInt(a)},n.default.createElement(H.A,{variant:"contained",startIcon:n.default.createElement(bt.A,null),onClick:l,style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Preview"))):n.default.createElement("div",{className:e.settingsActions},n.default.createElement(H.A,{variant:"text",color:"inherit",startIcon:n.default.createElement(lt.A,null),onClick:r},"Drafts"),n.default.createElement(H.A,{variant:"contained",startIcon:n.default.createElement(bt.A,null),onClick:l,style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Preview")))),_t=n.default.memo((({classes:e,draft:t,onLoad:a,onDelete:r,formatDate:o})=>{var l,i;return n.default.createElement(xe.A,{className:e.draftCard,onClick:()=>a(t._id)},n.default.createElement(ke.A,{className:e.draftCardContent},n.default.createElement("div",{className:e.draftHeader},n.default.createElement(K.A,{flex:1},n.default.createElement(W.A,{className:e.draftTitle},t.title||"Untitled Draft"),t.description&&n.default.createElement(W.A,{className:e.draftDescription},t.description)),n.default.createElement(be.A,{className:e.deleteButton,onClick:e=>{e.stopPropagation(),r(t._id)}},n.default.createElement(Je.A,null))),n.default.createElement("div",{className:e.draftMeta},n.default.createElement("div",{className:e.draftMetaItem},n.default.createElement(it.A,{fontSize:"small"}),n.default.createElement("span",null,o(t.lastSaved))),n.default.createElement("div",{className:e.draftMetaItem},n.default.createElement("span",null,(null===(l=t.metadata)||void 0===l?void 0:l.wordCount)||0," words")),n.default.createElement("div",{className:e.draftMetaItem},n.default.createElement("span",null,(null===(i=t.metadata)||void 0===i?void 0:i.readingTime)||0," min read"))),t.tags&&t.tags.length>0&&n.default.createElement("div",{className:e.draftTags},t.tags.slice(0,3).map(((t,a)=>n.default.createElement(Ce.A,{key:a,label:t,size:"small",className:e.draftTag}))),t.tags.length>3&&n.default.createElement(Ce.A,{label:"+"+(t.tags.length-3),size:"small",className:e.draftTag}))))})),Rt=n.default.memo((({classes:e,open:t,drafts:a,loading:r,searchQuery:o,onClose:l,onNewDraft:i,onLoadDraft:s,onDeleteDraft:c,onSearchChange:d,formatDate:u})=>n.default.createElement(P.A,{className:e.draftsDialog,open:t,onClose:l,maxWidth:"md",fullWidth:!0},n.default.createElement("div",{className:e.draftsDialogTitle},n.default.createElement(K.A,{display:"flex",alignItems:"center"},n.default.createElement(Me.A,{className:e.draftAvatar},n.default.createElement(lt.A,null)),n.default.createElement(W.A,{variant:"h5",style:{marginLeft:16,fontWeight:600}},"Your Drafts")),n.default.createElement(K.A,null,n.default.createElement(H.A,{color:"inherit",startIcon:n.default.createElement(ct.A,null),onClick:i,style:{marginRight:8,backgroundColor:"rgba(255,255,255,0.1)",borderRadius:16}},"New Draft"),n.default.createElement(be.A,{color:"inherit",onClick:l},n.default.createElement(Se.A,null)))),n.default.createElement(N.A,{className:e.draftsDialogContent},n.default.createElement($.A,{className:e.searchField,variant:"outlined",placeholder:"Search drafts...",value:o,onChange:d,size:"small",InputProps:{startAdornment:n.default.createElement(ot.A,{position:"start"},n.default.createElement(st.A,null))}}),r?n.default.createElement("div",{className:e.loadingState},n.default.createElement(Ae.A,null)):0===a.length?n.default.createElement("div",{className:e.emptyState},n.default.createElement(gt.A,{className:e.emptyStateIcon}),n.default.createElement(W.A,{variant:"h5",gutterBottom:!0,style:{fontWeight:500}},o?"No drafts found":"No drafts yet"),n.default.createElement(W.A,{variant:"body1",style:{color:"rgba(255,255,255,0.6)"}},o?"Try a different search query":"Start writing to save your first draft automatically")):n.default.createElement("div",{className:e.draftsList},a.map((t=>n.default.createElement(_t,{key:t._id,classes:e,draft:t,onLoad:s,onDelete:c,formatDate:u})))))))),Pt=n.default.memo((({classes:e,open:t,title:a,description:r,content:o,wordCount:l,readingTime:i,onClose:s,onPublish:c,renderMarkdown:d})=>n.default.createElement(P.A,{className:e.previewDialog,open:t,onClose:s,maxWidth:"md",fullWidth:!0},n.default.createElement("div",{className:e.previewDialogTitle},n.default.createElement(W.A,{variant:"h5",style:{fontWeight:600}},"Preview"),n.default.createElement(be.A,{color:"inherit",onClick:s},n.default.createElement(Se.A,null))),n.default.createElement(N.A,{className:e.previewDialogContent},n.default.createElement(W.A,{className:e.previewTitle},a||"Untitled"),r&&n.default.createElement(W.A,{className:e.previewDescription},r),n.default.createElement("div",{className:e.previewContent,dangerouslySetInnerHTML:{__html:d(o)}})),n.default.createElement("div",{className:e.previewDialogActions},n.default.createElement(K.A,{display:"flex",alignItems:"center",color:"rgba(255,255,255,0.6)"},n.default.createElement(W.A,{variant:"caption"},l," words Â· ",i," min read")),n.default.createElement(H.A,{variant:"contained",startIcon:n.default.createElement(Te.A,null),onClick:c,style:{backgroundColor:"#fff",color:"#000",borderRadius:24}},"Publish"))))),Lt=n.default.memo((({classes:e,open:t,linkText:a,linkUrl:r,onClose:o,onInsert:l,onTextChange:i,onUrlChange:s})=>n.default.createElement(P.A,{PaperProps:{classes:{root:e.darkDialog}},open:t,maxWidth:"xs",fullWidth:!0,onClose:o},n.default.createElement(N.A,{className:e.darkDialogContent},n.default.createElement(W.A,{variant:"h6",gutterBottom:!0},"Insert Link"),n.default.createElement($.A,{className:e.darkInput,variant:"outlined",label:"Link Text",value:a,onChange:i,fullWidth:!0,style:{marginBottom:16}}),n.default.createElement($.A,{className:e.darkInput,variant:"outlined",label:"URL",placeholder:"https://...",value:r,onChange:s,fullWidth:!0,autoFocus:!0})),n.default.createElement(L.A,{className:e.darkDialogActions},n.default.createElement(H.A,{onClick:o},"Cancel"),n.default.createElement(H.A,{variant:"contained",onClick:l,style:{backgroundColor:"#fff",color:"#000"}},"Insert"))))),Nt=n.default.memo((({classes:e,open:t,value:a,onClose:r,onInsert:o,onChange:l})=>n.default.createElement(P.A,{className:e.imageUrlDialog,open:t,onClose:r},n.default.createElement(z.A,null,"Insert Image"),n.default.createElement(N.A,null,n.default.createElement($.A,{className:e.darkInput,variant:"outlined",label:"Image URL",value:a,onChange:l,fullWidth:!0,autoFocus:!0,margin:"normal"})),n.default.createElement(L.A,null,n.default.createElement(H.A,{onClick:r,color:"inherit"},"Cancel"),n.default.createElement(H.A,{onClick:o,variant:"contained",color:"primary"},"Insert"))))),zt=n.default.memo((({classes:e,open:t,title:a,message:r,onClose:o,onConfirm:l})=>n.default.createElement(P.A,{className:e.confirmDialog,open:t,onClose:o},n.default.createElement(z.A,null,n.default.createElement(K.A,{display:"flex",alignItems:"center"},n.default.createElement(pt.A,{style:{marginRight:8,color:"#ff9800"}}),a)),n.default.createElement(N.A,null,n.default.createElement(W.A,null,r)),n.default.createElement(L.A,null,n.default.createElement(H.A,{onClick:o,color:"inherit"},"Cancel"),n.default.createElement(H.A,{onClick:l,variant:"contained",color:"primary"},"Confirm"))))),Ht=n.default.memo((({classes:e,open:t,title:a,value:r,onClose:o,onConfirm:l,onChange:i})=>n.default.createElement(P.A,{className:e.passwordDialog,open:t,onClose:o},n.default.createElement(z.A,null,n.default.createElement(K.A,{display:"flex",alignItems:"center"},n.default.createElement(ft.A,{style:{marginRight:8,color:"#4caf50"}}),a)),n.default.createElement(N.A,null,n.default.createElement($.A,{className:e.darkInput,variant:"outlined",type:"password",label:"Password",value:r,onChange:i,fullWidth:!0,autoFocus:!0,margin:"normal"})),n.default.createElement(L.A,null,n.default.createElement(H.A,{onClick:o,color:"inherit"},"Cancel"),n.default.createElement(H.A,{onClick:l,variant:"contained",color:"primary"},"Continue"))))),Wt=n.default.memo((({classes:e,formatMenuAnchor:t,headingMenuAnchor:a,listMenuAnchor:r,onCloseFormatMenu:o,onCloseHeadingMenu:l,onCloseListMenu:i,onToggleInlineStyle:s,onToggleBlockType:c})=>n.default.createElement(n.default.Fragment,null,n.default.createElement(re.A,{className:e.formatMenu,anchorEl:t,open:Boolean(t),onClose:o},n.default.createElement(V.A,{onClick:()=>{s("UNDERLINE"),o()}},n.default.createElement(ye.A,null,n.default.createElement(Be.A,null)),n.default.createElement(Ee.A,{primary:"Underline"})),n.default.createElement(V.A,{onClick:()=>{s("STRIKETHROUGH"),o()}},n.default.createElement(ye.A,null,n.default.createElement(nt.A,null)),n.default.createElement(Ee.A,{primary:"Strikethrough"})),n.default.createElement(V.A,{onClick:()=>{s("CODE"),o()}},n.default.createElement(ye.A,null,n.default.createElement(Fe.A,null)),n.default.createElement(Ee.A,{primary:"Code"}))),n.default.createElement(re.A,{className:e.formatMenu,anchorEl:a,open:Boolean(a),onClose:l},n.default.createElement(V.A,{onClick:()=>{c("header-one"),l()}},n.default.createElement(ye.A,null,n.default.createElement(He,null)),n.default.createElement(Ee.A,{primary:"Heading 1"})),n.default.createElement(V.A,{onClick:()=>{c("header-two"),l()}},n.default.createElement(ye.A,null,n.default.createElement(Oe,null)),n.default.createElement(Ee.A,{primary:"Heading 2"})),n.default.createElement(V.A,{onClick:()=>{c("header-three"),l()}},n.default.createElement(ye.A,null,n.default.createElement(Ge,null)),n.default.createElement(Ee.A,{primary:"Heading 3"})),n.default.createElement(V.A,{onClick:()=>{c("paragraph"),l()}},n.default.createElement(ye.A,null,n.default.createElement(Ve,null)),n.default.createElement(Ee.A,{primary:"Paragraph"}))),n.default.createElement(re.A,{className:e.formatMenu,anchorEl:r,open:Boolean(r),onClose:i},n.default.createElement(V.A,{onClick:()=>{c("unordered-list-item"),i()}},n.default.createElement(ye.A,null,n.default.createElement(Ke.A,null)),n.default.createElement(Ee.A,{primary:"Bullet List"})),n.default.createElement(V.A,{onClick:()=>{c("ordered-list-item"),i()}},n.default.createElement(ye.A,null,n.default.createElement(je.A,null)),n.default.createElement(Ee.A,{primary:"Numbered List"}))))));class Ot extends n.PureComponent{constructor(e){super(e);const t=new o.CompositeDecorator([{strategy:At,component:xt}]);this.state={editorState:o.EditorState.createEmpty(t),editorMode:"visual",markdownSource:"",title:"",description:"",tags:[],tab:0,currentDraftId:null,payout:"everyone",community:"governance",enableComments:!0,enableMonetization:!1,editOpened:!1,formatMenuAnchor:null,headingMenuAnchor:null,listMenuAnchor:null,linkDialogOpen:!1,linkUrl:"",linkText:"",previewDialogOpen:!1,draftsDialogOpen:!1,drafts:[],draftsLoading:!1,draftsSearchQuery:"",confirmDialogOpen:!1,confirmDialogTitle:"",confirmDialogMessage:"",confirmDialogAction:null,passwordDialogOpen:!1,passwordDialogTitle:"",passwordDialogValue:"",passwordDialogAction:null,imageUrlDialogOpen:!1,gradientEditorOpen:!1,imageUrlDialogValue:"",wordCount:0,readingTime:0,gradient:null},this.editorRef=n.default.createRef(),this.fileInputRef=n.default.createRef(),this.draftManager=new Ct,this.autoSaveTimer=null}async componentDidMount(){const e=await this.draftManager.getMostRecent();e&&this.loadDraftData(e)}componentWillUnmount(){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.saveDraft()}componentDidUpdate(e){e.gradient!==this.props.gradient&&this.forceUpdate()}loadDraftData(e){try{var t,a;const n=e.content?B(e.content,{gfm:!0,tables:!0}):o.EditorState.createEmpty().getCurrentContent(),r=new o.CompositeDecorator([{strategy:At,component:xt}]),l=o.EditorState.createWithContent(n,r);this.setState({editorState:l,markdownSource:e.content||"",title:e.title||"",description:e.description||"",tags:e.tags||[],currentDraftId:e._id,payout:(null===(t=e.settings)||void 0===t?void 0:t.payout)||"everyone",community:(null===(a=e.settings)||void 0===a?void 0:a.community)||"governance",lastSaved:e.lastModified}),e.gradient!==this.props.gradient&&this.props.setGradient(e.gradient)}catch(e){}}async saveDraft(e=!1){const{currentDraftId:t,editorState:a,editorMode:n,markdownSource:r,title:o,description:l,tags:i,community:s,payout:c,enableComments:d,enableMonetization:u}=this.state,{gradient:h}=this.props,m="markdown"===n?r:A(a.getCurrentContent(),{gfm:!0,tables:!0}),g="markdown"===n?r.replace(/[#*_\[\]()]/g,"").trim():a.getCurrentContent().getPlainText();if(!o.trim()&&!g.trim())return null;const p=g.trim()?g.split(/\s+/).length:0,f=await this.draftManager.save(t,{title:o||"Untitled",description:l,content:m,tags:i,gradient:h,wordCount:p,settings:{payout:c,community:s}});return f&&(this.setState({currentDraftId:f,lastSaved:Date.now()}),e&&we.Le("Draft saved")),f}scheduleAutoSave(){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.autoSaveTimer=setTimeout((()=>this.saveDraft()),2e3)}onChange=e=>{this.setState({editorState:e},(()=>{this.updateStats(),this.scheduleAutoSave()}))};onMarkdownChange=e=>{const t=e.target.value;this.setState({markdownSource:t},(()=>{this.updateStats(),this.scheduleAutoSave()}))};toggleEditorMode=()=>{const{editorMode:e,editorState:t,markdownSource:a}=this.state;if("visual"===e){const e=A(t.getCurrentContent(),{gfm:!0,tables:!0});this.setState({editorMode:"markdown",markdownSource:e})}else try{const e=B(a,{gfm:!0,tables:!0}),t=new o.CompositeDecorator([{strategy:At,component:xt}]),n=o.EditorState.createWithContent(e,t);this.setState({editorMode:"visual",editorState:n})}catch(e){we.Le("Error parsing markdown")}};updateStats(){const{editorMode:e,editorState:t,markdownSource:a}=this.state,n="markdown"===e?a.replace(/[#*_\[\]()]/g,"").trim():t.getCurrentContent().getPlainText(),r=n.trim()?n.trim().split(/\s+/).length:0;this.setState({wordCount:r,readingTime:Math.ceil(r/200)})}async createNewDraft(){await this.saveDraft();const e=new o.CompositeDecorator([{strategy:At,component:xt}]);this.setState({draftsDialogOpen:!1,editorState:o.EditorState.createEmpty(e),markdownSource:"",title:"",description:"",tags:[],currentDraftId:null,lastSaved:null,editorMode:"visual"}),this.props.setGradient&&this.props.setGradient(null),we.Le("New draft created")}async loadDraft(e){await this.saveDraft();const t=await this.draftManager.get(e);t&&(this.loadDraftData(t),this.setState({draftsDialogOpen:!1}),we.Le("Draft loaded"))}async deleteDraft(e){await this.draftManager.delete(e)&&(this.state.currentDraftId===e&&await this.createNewDraft(),await this.loadDrafts(),we.Le("Draft deleted"))}async loadDrafts(){this.setState({draftsLoading:!0});const e=await this.draftManager.getAll(),t=this.state.draftsSearchQuery?e.filter((e=>{var t,a;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(this.state.draftsSearchQuery.toLowerCase()))||(null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(this.state.draftsSearchQuery.toLowerCase()))})):e;this.setState({drafts:t,draftsLoading:!1})}showConfirmDialog=(e,t,a)=>{this.setState({confirmDialogOpen:!0,confirmDialogTitle:e,confirmDialogMessage:t,confirmDialogAction:a})};closeConfirmDialog=()=>{this.setState({confirmDialogOpen:!1,confirmDialogAction:null})};handleConfirmAction=()=>{this.state.confirmDialogAction&&this.state.confirmDialogAction(),this.closeConfirmDialog()};showPasswordDialog=(e,t)=>{this.setState({passwordDialogOpen:!0,passwordDialogTitle:e,passwordDialogValue:"",passwordDialogAction:t})};closePasswordDialog=()=>{this.setState({passwordDialogOpen:!1,passwordDialogAction:null,passwordDialogValue:""})};handlePasswordAction=()=>{this.state.passwordDialogAction&&this.state.passwordDialogAction(this.state.passwordDialogValue),this.closePasswordDialog()};showImageUrlDialog=()=>{this.setState({imageUrlDialogOpen:!0,imageUrlDialogValue:"https://"})};closeImageUrlDialog=()=>{this.setState({imageUrlDialogOpen:!1,imageUrlDialogValue:""})};handleImageUrlInsert=()=>{const e=this.state.imageUrlDialogValue;e&&e.trim()&&"https://"!==e&&this.insertImageUrl(e),this.closeImageUrlDialog()};updateDraftStats=async()=>{try{const n=await this.draftManager.getStats();var e,t,a;if(n.success)this.setState({totalDrafts:(null===(e=n.data.drafts)||void 0===e?void 0:e.totalDrafts)||0,totalWords:(null===(t=n.data.drafts)||void 0===t?void 0:t.totalWords)||0,avgWordCount:Math.round((null===(a=n.data.drafts)||void 0===a?void 0:a.avgWordCount)||0)})}catch(e){}};openDraftsDialog=async()=>{await this.saveDraft(!1),this.setState({draftsDialogOpen:!0}),await this.loadDrafts(),await this.updateDraftStats()};closeDraftsDialog=()=>{this.setState({draftsDialogOpen:!1,draftsSearchQuery:"",filterTags:[],filterStatus:null})};handleDraftsSearch=e=>{this.setState({draftsSearchQuery:e.target.value},(()=>{clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((async()=>{await this.loadDrafts()}),300)}))};formatDate=e=>{const t=new Date(e),a=new Date-t;if(a<6e4)return"Just now";if(a<36e5){const e=Math.floor(a/6e4);return`${e} minute${e>1?"s":""} ago`}if(a<864e5){const e=Math.floor(a/36e5);return`${e} hour${e>1?"s":""} ago`}if(a<6048e5){const e=Math.floor(a/864e5);return`${e} day${e>1?"s":""} ago`}return t.toLocaleDateString()};focus=()=>{this.editorRef.current&&this.editorRef.current.focus()};handleKeyCommand=e=>{const{editorState:t}=this.state,a=o.RichUtils.handleKeyCommand(t,e);return a?(this.onChange(a),"handled"):"save"===e?(this.handleSave(),"handled"):"not-handled"};keyBindingFn=e=>(e.metaKey||e.ctrlKey)&&"s"===e.key?(e.preventDefault(),"save"):(e.metaKey||e.ctrlKey)&&"k"===e.key?(e.preventDefault(),this.openLinkDialog(),"handled"):(0,o.getDefaultKeyBinding)(e);toggleInlineStyle=e=>{this.onChange(o.RichUtils.toggleInlineStyle(this.state.editorState,e))};toggleBlockType=e=>{this.onChange(o.RichUtils.toggleBlockType(this.state.editorState,e))};hasInlineStyle=e=>this.state.editorState.getCurrentInlineStyle().has(e);hasBlockType=e=>{const t=this.state.editorState.getSelection();return this.state.editorState.getCurrentContent().getBlockForKey(t.getStartKey()).getType()===e};openLinkDialog=()=>{const{editorState:e}=this.state,t=e.getSelection(),a=e.getCurrentContent(),n=t.getStartKey(),r=t.getStartOffset(),o=t.getEndOffset(),l=a.getBlockForKey(n).getText().slice(r,o);this.setState({linkDialogOpen:!0,linkText:l,linkUrl:""})};closeLinkDialog=()=>{this.setState({linkDialogOpen:!1,linkUrl:"",linkText:""})};insertLink=()=>{const{editorState:e,linkUrl:t,linkText:a}=this.state,n=e.getCurrentContent().createEntity("LINK","MUTABLE",{url:t}),r=n.getLastCreatedEntityKey(),l=e.getSelection();let i;i=l.isCollapsed()?a?o.Modifier.insertText(n,l,a,null,r):o.Modifier.insertText(n,l,t,null,r):o.Modifier.applyEntity(n,l,r);const s=o.EditorState.push(e,i,"apply-entity");this.onChange(s),this.closeLinkDialog()};insertImage=()=>{this.showImageUrlDialog()};insertImageUrl=e=>{if(!e)return;const{editorState:t}=this.state,a=t.getCurrentContent().createEntity("IMAGE","IMMUTABLE",{src:e}).getLastCreatedEntityKey(),n=o.AtomicBlockUtils.insertAtomicBlock(t,a," ");this.onChange(n)};handleImageUpload=e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;const n=new FileReader;n.onload=e=>{this.props.setGradient(e.target.result)},n.readAsDataURL(a)};removeCoverImage=()=>{this.props.setGradient&&this.props.setGradient(null)};handleSave=async()=>{await this.saveDraft(!0)};openPreview=()=>{this.setState({previewDialogOpen:!0})};closePreview=()=>{this.setState({previewDialogOpen:!1})};handlePublish=async()=>{await this.handleSave(),this.closePreview()};renderMarkdown=e=>{try{return(0,_.yt)(e,{extensions:[(0,R.T)()],htmlExtensions:[(0,R.I)()]})}catch(e){return"<p>Error rendering content</p>"}};openFormatMenu=e=>this.setState({formatMenuAnchor:e.currentTarget});closeFormatMenu=()=>this.setState({formatMenuAnchor:null});openHeadingMenu=e=>this.setState({headingMenuAnchor:e.currentTarget});openGradientEditor=e=>{e.stopImmediatePropagation(),e.preventDefault(),this.setState({gradientEditorOpen:!0})};closeHeadingMenu=()=>this.setState({headingMenuAnchor:null});openListMenu=e=>this.setState({listMenuAnchor:e.currentTarget});closeListMenu=()=>this.setState({listMenuAnchor:null});toggleEditMenu=()=>this.setState({editOpened:!this.state.editOpened});resetEditMenu=()=>this.setState({editOpened:!1});closeGradientEditor=e=>{this.setState({gradientEditorOpen:!1}),this.props.setGradient(e)};getBlockStyle=e=>{switch(e.getType()){case"blockquote":return"RichEditor-blockquote";case"code-block":return"RichEditor-codeblock";default:return null}};blockRendererFn=e=>{const t=function(e){const t=e.getText();return t.includes("|")&&t.includes("---")?{component:kt,editable:!0,props:{}}:null}(e);return t||("atomic"===e.getType()?{component:Mt,editable:!1}:null)};_handleTabChange=(e,t)=>{this.setState({tab:t},(()=>{this.swipeableViewScrollTop(),1===parseInt(t)&&this.resetEditMenu()}))};swipeableViewScrollTop=()=>{let e=document.getElementsByClassName("react-swipeable-view-container").item(0).children.item(0);e.style.scrollBehavior="smooth",e.scrollTop=0};render(){const{classes:e,open:t,gradient:a,onClose:r}=this.props,{editorState:l,editorMode:i,markdownSource:s,title:c,description:d,tags:u,payout:h,community:m,editOpened:g,formatMenuAnchor:p,headingMenuAnchor:f,listMenuAnchor:b,linkDialogOpen:v,linkUrl:y,linkText:E,wordCount:C,readingTime:x,tab:k,currentDraftId:M,draftsDialogOpen:w,drafts:S,draftsLoading:T,draftsSearchQuery:I,confirmDialogOpen:D,confirmDialogTitle:B,confirmDialogMessage:_,passwordDialogOpen:R,passwordDialogTitle:L,passwordDialogValue:z,imageUrlDialogOpen:H,imageUrlDialogValue:O,previewDialogOpen:$,gradientEditorOpen:G}=this.state,U=window.innerWidth<=960,V=n.default.createElement(Bt,{classes:e,mobile:U,tab:k,onOpenDrafts:this.openDraftsDialog,onFinish:()=>this.setState({tab:1},this.resetEditMenu),onPreview:this.openPreview}),F=n.default.createElement(Tt,{classes:e,editorMode:i,title:c,description:d,editorState:l,markdownSource:s,editorRef:this.editorRef,onTitleChange:e=>this.setState({title:e.target.value}),onDescriptionChange:e=>this.setState({description:e.target.value}),onChange:this.onChange,onMarkdownChange:this.onMarkdownChange,onFocus:this.focus,handleKeyCommand:this.handleKeyCommand,keyBindingFn:this.keyBindingFn,getBlockStyle:this.getBlockStyle,blockRendererFn:this.blockRendererFn,onToggleEditorMode:this.toggleEditorMode}),Y=n.default.createElement(Dt,{classes:e,gradient:a,payout:h,community:m,fileInputRef:this.fileInputRef,onImageUpload:this.handleImageUpload,onRemoveImage:this.removeCoverImage,onOpenGradientEditor:this.openGradientEditor,onPayoutChange:e=>this.setState({payout:e.target.value}),onCommunityChange:e=>this.setState({community:e.target.value}),mobile:U,actionButtons:V}),X=U?n.default.createElement(n.default.Fragment,null,n.default.createElement(dt.Ay,{axis:"y",ignoreNativeScroll:!1,containerStyle:{minHeight:"100%",height:"100%",position:"relative"},animateHeight:!1,animateTransitions:!0,disableLazyLoading:!0,resistance:!0,springConfig:{tension:450,friction:60,duration:"120ms",easeFunction:"cubic-bezier(0.280, 0.840, 0.420, 1)",delay:"5ms"},index:k,onChangeIndex:e=>this._handleTabChange({},e),disabled:!1,key:"swipe-able-view"},F,Y),V):[F,Y],j="markdown"===i?s:A(l.getCurrentContent(),{gfm:!0,tables:!0});return n.default.createElement(n.default.Fragment,null,n.default.createElement(P.A,{className:e.dialog,open:t,maxWidth:!1,onClose:r},n.default.createElement(pe.A,{position:"sticky",className:e.appBar},n.default.createElement(fe.A,null,n.default.createElement(K.A,{flexGrow:1,ml:2},n.default.createElement(W.A,{variant:"h6",style:{fontWeight:500}},"Write a New Blog Post"),n.default.createElement(W.A,{variant:"caption",style:{color:"rgba(255,255,255,0.6)"}},C," words Â· ",x," min read",M&&" Â· Draft saved")),n.default.createElement(be.A,{color:"inherit",onClick:r},n.default.createElement(Se.A,null)))),n.default.createElement(N.A,{className:e.contentArea},n.default.createElement("div",{className:e.mainContainer},X)),n.default.createElement(St,{classes:e,editorMode:i,tab:k,mobile:U,editOpened:g,editorState:l,hasInlineStyle:this.hasInlineStyle,hasBlockType:this.hasBlockType,onToggleEditMenu:this.toggleEditMenu,onToggleInlineStyle:this.toggleInlineStyle,onToggleBlockType:this.toggleBlockType,onOpenFormatMenu:this.openFormatMenu,onOpenListMenu:this.openListMenu,onOpenHeadingMenu:this.openHeadingMenu,onOpenLinkDialog:this.openLinkDialog,onInsertImage:this.insertImage,onUndo:()=>this.onChange(o.EditorState.undo(l)),onRedo:()=>this.onChange(o.EditorState.redo(l))})),n.default.createElement(Pt,{classes:e,open:$,title:c,description:d,content:j,wordCount:C,readingTime:x,onClose:this.closePreview,onPublish:this.handlePublish,renderMarkdown:this.renderMarkdown}),n.default.createElement(Rt,{classes:e,open:w,drafts:S,loading:T,searchQuery:I,onClose:this.closeDraftsDialog,onNewDraft:()=>this.createNewDraft(),onLoadDraft:e=>this.loadDraft(e),onDeleteDraft:e=>this.deleteDraft(e),onSearchChange:e=>this.handleDraftsSearch(e),formatDate:this.formatDate}),n.default.createElement(zt,{classes:e,open:D,title:B,message:_,onClose:this.closeConfirmDialog,onConfirm:this.handleConfirmAction}),n.default.createElement(Ht,{classes:e,open:R,title:L,value:z,onClose:this.closePasswordDialog,onConfirm:this.handlePasswordAction,onChange:e=>this.setState({passwordDialogValue:e.target.value})}),n.default.createElement(Nt,{classes:e,open:H,value:O,onClose:this.closeImageUrlDialog,onInsert:this.handleImageUrlInsert,onChange:e=>this.setState({imageUrlDialogValue:e.target.value})}),n.default.createElement(Wt,{classes:e,formatMenuAnchor:p,headingMenuAnchor:f,listMenuAnchor:b,onCloseFormatMenu:this.closeFormatMenu,onCloseHeadingMenu:this.closeHeadingMenu,onCloseListMenu:this.closeListMenu,onToggleInlineStyle:this.toggleInlineStyle,onToggleBlockType:this.toggleBlockType}),n.default.createElement(Lt,{classes:e,open:v,linkText:E,linkUrl:y,onClose:this.closeLinkDialog,onInsert:this.insertLink,onTextChange:e=>this.setState({linkText:e.target.value}),onUrlChange:e=>this.setState({linkUrl:e.target.value})}),n.default.createElement(ge,{open:G,onAccept:this.closeGradientEditor,onClose:this.closeGradientEditor}))}}const $t=(0,r.default)((e=>({dialog:{"& .MuiDialog-paper":{zIndex:e.zIndex.drawer+10,backgroundColor:"#0c0c0c",color:"#fff",borderRadius:21,[e.breakpoints.down("sm")]:{margin:0,maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%",borderRadius:0},[e.breakpoints.up("md")]:{maxWidth:"90vw",width:1200,height:"85vh"}},"& .MuiBackdrop-root":{zIndex:e.zIndex.drawer+1,backdropFilter:"blur(9px) grayscale(1)",overflow:"hidden",userSelect:"none"}},tooltipRoot:{maxWidth:"min(75vw, 500px)",borderRadius:"16px",backgroundColor:"#dddddd !important",color:"#0e0e0e !important"},tooltip:{margin:"8px",display:"block",fontSize:"14px",lineHeight:"22px"},appBar:{backgroundColor:"transparent",boxShadow:"none","& .MuiToolbar-root":{minHeight:64,padding:"0 24px"}},contentArea:{display:"flex",flexDirection:"column",height:"100%",position:"relative",padding:0,overflow:"hidden",backgroundColor:"#0a0a0a"},mainContainer:{display:"flex",flex:1,overflow:"hidden",position:"relative",[e.breakpoints.down("sm")]:{flexDirection:"column",overflow:"auto","& div.react-swipeable-view-container > div":{minHeight:"100%",maxHeight:"100%"},"& > div:first-child":{height:"100%"}}},modeToggleButton:{position:"absolute",backgroundColor:"#fff",color:"#000",borderRadius:24,padding:"8px 24px",margin:"12px 24px",textTransform:"none",fontWeight:500,"&:hover":{backgroundColor:"#f0f0f0"}},fixedSidebar:{position:"fixed",top:"50%",transform:"translateY(-50%) !important",width:48,backgroundColor:"#ffffff",boxShadow:"2px 0 12px rgba(0,0,0,0.1)",zIndex:1100,display:"flex",flexDirection:"column",alignItems:"center",padding:"8px 0",borderRadius:"24px",marginLeft:"-24px",gap:2,"& .close, & .edit":{display:"none"},[e.breakpoints.down("sm")]:{right:8,width:40,padding:4,height:40,overflow:"hidden",transform:"translateY(-50%) !important",transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important","&.opened":{padding:8,transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important",height:"410px"},"& .close, & .edit":{display:"flex"}}},fixedSidebarMode:{position:"fixed",top:"50%",width:48,zIndex:1100,display:"flex",flexDirection:"column",alignItems:"center",padding:"0px",borderRadius:"24px",marginLeft:"-24px",gap:2,"& .close, & .edit":{display:"none"},[e.breakpoints.down("sm")]:{right:8,width:40,padding:4,height:40,overflow:"hidden",transform:"translateY(-50%) !important",transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important","&.opened":{padding:8,transition:"opacity 196ms cubic-bezier(0.4, 0, 0.2, 1), transform 131ms cubic-bezier(0.4, 0, 0.2, 1), height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, max-height 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms !important",height:"410px"},"& .close, & .edit":{display:"flex"}}},menuIconButton:{color:"#616161",padding:0,margin:0,height:48,width:48,"& .MuiSvgIcon-root":{fontSize:"2rem"},[e.breakpoints.down("sm")]:{width:32,height:32,padding:4,"& .MuiSvgIcon-root":{fontSize:"1.125rem"}},"&:hover":{backgroundColor:"rgba(0,0,0,0.1)",color:"#212121"},"&.active":{backgroundColor:"rgba(0,0,0,0.2)",color:"#101010"}},menuIconButtonFab:{position:"fixed",marginLeft:"-64px",width:64,height:64,backgroundColor:"#d1d1d1",color:"#000",boxShadow:"2px 0 12px rgba(0,0,0,0.1)",padding:0,margin:0,"& .MuiSvgIcon-root":{fontSize:"2rem"},[e.breakpoints.down("sm")]:{height:48,width:48,marginLeft:0,marginTop:"16px",right:16,"& .MuiSvgIcon-root":{fontSize:"1.125rem"}},"&:hover":{backgroundColor:"rgba(0,0,0,0.1)",color:"#212121"},"&.active":{backgroundColor:"rgba(0,0,0,0.2)",color:"#101010"}},menuDivider:{width:"calc(100% - 16px)",height:1,backgroundColor:"#999",margin:"2px 0px"},editorSection:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",backgroundColor:"#171717",paddingLeft:32,paddingRight:16,borderRadius:"0px 32px 0px 0px",[e.breakpoints.down("sm")]:{paddingLeft:8,paddingRight:8,borderRadius:"0px",overflow:"overlay",minHeight:"100%",maxHeight:"100%",position:"relative"}},editorHeader:{padding:e.spacing(3,3,2,3)},titleInput:{"& .MuiInputBase-root":{color:"#fff",fontSize:"2rem",fontWeight:600,padding:0,"&:before":{borderBottom:"none"},"&:hover:before":{borderBottom:"none"},"&:after":{borderBottom:"2px solid rgba(255,255,255,0.2)"}},"& .MuiInputBase-input":{padding:"8px 0"}},descriptionInput:{marginTop:16,"& .MuiInputBase-root":{color:"#ccc",fontSize:"1rem","&:before":{borderBottom:"none"},"&:hover:before":{borderBottom:"none"},"&:after":{borderBottom:"2px solid rgba(255,255,255,0.2)"}}},editorWrapper:{position:"initial",flex:1,margin:"16px 24px 0px 24px",backgroundColor:"#0a0a0a",borderRadius:"32px 32px 0px 0px",cursor:"text",[e.breakpoints.down("sm")]:{borderRadius:"24px 24px 0px 0px",margin:"16px 24px 0px 24px"},"&.markdown":{overflow:"hidden","& textarea":{padding:24}},"&.visual":{overflow:"auto","& > div":{padding:24}},"& .DraftEditor-root":{minHeight:"100%",color:"#e0e0e0",fontSize:16,lineHeight:1.6},"& .DraftEditor-editorContainer":{minHeight:"100%"},"& .public-DraftEditor-content":{minHeight:"100%"},"& .public-DraftStyleDefault-block":{marginBottom:"1em"},"& h1":{fontSize:"2.5em",fontWeight:600,color:"#fff",margin:"0.5em 0"},"& h2":{fontSize:"2em",fontWeight:600,color:"#fff",margin:"0.5em 0"},"& h3":{fontSize:"1.5em",fontWeight:600,color:"#fff",margin:"0.5em 0"},"& blockquote":{borderLeft:"3px solid rgba(255,255,255,0.2)",paddingLeft:16,margin:"1em 0",color:"rgba(255,255,255,0.8)"},"& pre":{backgroundColor:"rgba(255,255,255,0.05)",padding:16,borderRadius:8,overflow:"auto",fontFamily:"monospace"},"& a":{color:"#ffffff",textDecoration:"underline"},"& textarea":{width:"100%",minHeight:"100%",height:"100%",backgroundColor:"transparent",border:"none",outline:"none",color:"#e0e0e0",fontSize:16,lineHeight:1.6,fontFamily:"monospace",resize:"none",padding:0},"& table":{width:"100%",borderCollapse:"collapse",margin:"1.5em 0",backgroundColor:"rgba(255,255,255,0.02)",borderRadius:8,overflow:"hidden"},"& th, & td":{padding:12,borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:"left"},"& th":{fontWeight:600,color:"#fff",backgroundColor:"rgba(255,255,255,0.05)"},"& tr:hover":{backgroundColor:"rgba(255,255,255,0.03)"}},settingsPanel:{width:360,display:"flex",flexDirection:"column",backgroundColor:"transparent",overflow:"auto",[e.breakpoints.down("sm")]:{width:"100%"}},settingsContent:{padding:"0px 24px",flex:1,overflow:"auto",[e.breakpoints.down("sm")]:{padding:"24px"}},settingsActions:{padding:e.spacing(2,3),display:"flex",justifyContent:"space-between"},subTitle2:{color:"#ccc",fontSize:"1rem","& button.MuiIconButton-root":{color:"#666"}},settingsSection:{marginBottom:e.spacing(3)},imageUploadArea:{position:"relative",width:"100%",height:175.5,border:"2px dashed rgba(255,255,255,0.2)",borderRadius:24,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",overflow:"hidden","&:hover":{borderColor:"rgba(255,255,255,0.4)",backgroundColor:"rgba(255,255,255,0.02)"}},uploadedImage:{position:"absolute",width:"100%",height:"100%",objectFit:"cover",top:0,left:0,right:0,bottom:0},imageOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 50%)",display:"flex",alignItems:"flex-end",padding:e.spacing(2),opacity:.5,transition:"opacity 0.3s","&:hover":{opacity:1}},formatMenu:{"& .MuiPaper-root":{backgroundColor:"#e3e3e3",borderRadius:16,boxShadow:"0 4px 24px rgba(0,0,0,0.12)"},"& .MuiListItemText-root":{color:"#171717"},"& .MuiListItemIcon-root":{color:"#0c0c0c"}},tagsInput:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(255,255,255,0.24)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.48)"}},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.7)"}},darkDialog:{backgroundColor:"#212121",color:"#fff",borderRadius:16},darkDialogContent:{padding:24},darkDialogActions:{padding:"8px 16px 16px",display:"flex",justifyContent:"flex-end"},darkInput:{"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.8)"},"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(255,255,255,0.24)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.48)"},"&.Mui-focused fieldset":{borderColor:"#fff"}}},draftsDialog:{"& .MuiDialog-paper":{backgroundColor:"#1a1a1a",color:"#fff",borderRadius:24,maxWidth:900,width:"95%",maxHeight:"85vh",overflow:"hidden"}},draftsDialogTitle:{background:"#1a1a1a",padding:e.spacing(3,4),display:"flex",justifyContent:"space-between",alignItems:"center"},draftsDialogContent:{padding:0,backgroundColor:"#1a1a1a",display:"flex",flexDirection:"column"},searchField:{margin:e.spacing(3,4,2,4),maxWidth:400,"& .MuiOutlinedInput-root":{color:"#fff",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:16,"& fieldset":{borderColor:"rgba(255,255,255,0.15)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.25)"},"&.Mui-focused fieldset":{borderColor:"rgba(255,255,255,0.4)"}},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.6)"},"& .MuiInputAdornment-root svg":{color:"rgba(255,255,255,0.4)"}},draftsList:{padding:0,flex:1,overflow:"auto"},draftCard:{backgroundColor:"#0c0c0c",borderRadius:16,margin:e.spacing(1,4,2,4),cursor:"pointer",transition:"background-color 0.2s ease","&:hover":{backgroundColor:"#000000"}},draftCardContent:{padding:e.spacing(3),"&:last-child":{paddingBottom:e.spacing(3)}},draftHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:e.spacing(2)},draftTitle:{fontSize:"1.25rem",fontWeight:600,color:"#fff",marginBottom:e.spacing(1),lineHeight:1.3},draftDescription:{color:"rgba(255,255,255,0.7)",fontSize:"0.95rem",lineHeight:1.5,marginBottom:e.spacing(2)},draftMeta:{display:"flex",flexWrap:"wrap",gap:e.spacing(2),alignItems:"center",color:"rgba(255,255,255,0.5)",fontSize:"0.85rem"},draftMetaItem:{display:"flex",alignItems:"center",gap:e.spacing(.5)},draftTags:{display:"flex",gap:e.spacing(.5),flexWrap:"wrap",marginTop:e.spacing(1)},draftTag:{backgroundColor:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.8)",borderRadius:12,fontSize:"0.75rem",height:24},emptyState:{padding:e.spacing(8,4),textAlign:"center",color:"rgba(255,255,255,0.5)",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},emptyStateIcon:{fontSize:80,marginBottom:e.spacing(3),color:"rgba(255,255,255,0.3)"},loadingState:{padding:e.spacing(8),display:"flex",justifyContent:"center",alignItems:"center",flex:1},draftAvatar:{backgroundColor:"rgba(255,255,255,0.1)",color:"#fff",width:40,height:40},deleteButton:{color:"rgba(255,255,255,0.4)","&:hover":{color:"#ffffff",backgroundColor:"rgba(255,255,255,0.1)"}},confirmDialog:{"& .MuiDialog-paper":{backgroundColor:"#2a2a2a",color:"#fff",borderRadius:16,maxWidth:400}},passwordDialog:{"& .MuiDialog-paper":{backgroundColor:"#2a2a2a",color:"#fff",borderRadius:16,maxWidth:400}},imageUrlDialog:{"& .MuiDialog-paper":{backgroundColor:"#2a2a2a",color:"#fff",borderRadius:16,maxWidth:400}},previewDialog:{"& .MuiDialog-paper":{backgroundColor:"#1a1a1a",color:"#fff",borderRadius:24,maxWidth:900,width:"95%",maxHeight:"90vh",overflow:"hidden"}},previewDialogTitle:{background:"linear-gradient(180deg, #1a1a1a 0%, transparent 100%)",padding:e.spacing(3,4),display:"flex",justifyContent:"space-between",alignItems:"center"},previewDialogContent:{padding:e.spacing(4),backgroundColor:"#0a0a0a",overflow:"auto"},previewTitle:{fontSize:"2.5rem",fontWeight:700,color:"#fff",marginBottom:e.spacing(2),lineHeight:1.2},previewDescription:{fontSize:"1.25rem",color:"rgba(255,255,255,0.8)",marginBottom:e.spacing(4),lineHeight:1.5},previewContent:{color:"#e0e0e0",fontSize:"1.125rem",lineHeight:1.8,"& h1":{fontSize:"2.5em",fontWeight:600,color:"#fff",margin:"1em 0 0.5em"},"& h2":{fontSize:"2em",fontWeight:600,color:"#fff",margin:"1em 0 0.5em"},"& h3":{fontSize:"1.5em",fontWeight:600,color:"#fff",margin:"1em 0 0.5em"},"& p":{marginBottom:"1em"},"& blockquote":{borderLeft:"4px solid rgba(255,255,255,0.3)",paddingLeft:24,margin:"1.5em 0",color:"rgba(255,255,255,0.8)",fontStyle:"italic"},"& pre":{backgroundColor:"rgba(255,255,255,0.05)",padding:24,borderRadius:12,overflow:"auto",fontFamily:"monospace",margin:"1.5em 0"},"& code":{backgroundColor:"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:4,fontFamily:"monospace",fontSize:"0.9em"},"& pre code":{backgroundColor:"transparent",padding:0},"& a":{color:"#90caf9",textDecoration:"none","&:hover":{textDecoration:"underline"}},"& ul, & ol":{marginBottom:"1em",paddingLeft:"2em"},"& li":{marginBottom:"0.5em"},"& img":{maxWidth:"100%",height:"auto",borderRadius:12,margin:"1.5em 0"},"& table":{width:"100%",borderCollapse:"collapse",margin:"1.5em 0","& th, & td":{padding:12,borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:"left"},"& th":{fontWeight:600,color:"#fff"}}},previewDialogActions:{padding:e.spacing(3,4),background:"linear-gradient(0deg, #1a1a1a 0%, transparent 100%)",display:"flex",justifyContent:"space-between",alignItems:"center"}})))(Ot)},19948:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(17402),r=a(41728),o=a(32150);class l extends n.default.PureComponent{constructor(e){super(e)}render(){return n.default.createElement(r.A,this.props,n.default.createElement("path",{d:"M17 17H14V19H17V22H19V19H22V17H19V14H17V17M12 18C12 14.69 14.69 12 18 12C18.77 12 19.5 12.15 20.17 12.41C21.63 7.9 20.7 3.3 20.7 3.3S19.3 3 17.2 3C11.7 3 1.6 5.1 3.2 20.8C4.3 20.9 5.4 21 6.4 21C8.76 21 10.74 20.69 12.41 20.15C12.15 19.5 12 18.76 12 18M7 17C7 17 7 7 17 7C17 7 11 9 7 17Z"}))}}const i=(0,o.A)((e=>({})))(l)}}]);