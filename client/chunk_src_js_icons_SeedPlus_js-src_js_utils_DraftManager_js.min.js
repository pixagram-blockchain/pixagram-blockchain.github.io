/*! For license information please see chunk_src_js_icons_SeedPlus_js-src_js_utils_DraftManager_js.min.js.LICENSE.txt */
"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_icons_SeedPlus_js-src_js_utils_DraftManager_js"],{19948:(t,e,r)=>{r.d(e,{A:()=>p});r(52675),r(89463),r(2259),r(45700),r(23792),r(89572),r(94170),r(2892),r(59904),r(84185),r(40875),r(10287),r(26099),r(60825),r(47764),r(62953);var n=r(17402),o=r(41728),i=r(32150);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}function u(t,e,r){return e=f(e),function(t,e){if(e&&("object"==a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,r||[],f(t).constructor):e.apply(t,r))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var d=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),r=e,(i=[{key:"render",value:function(){return n.default.createElement(o.A,this.props,n.default.createElement("path",{d:"M17 17H14V19H17V22H19V19H22V17H19V14H17V17M12 18C12 14.69 14.69 12 18 12C18.77 12 19.5 12.15 20.17 12.41C21.63 7.9 20.7 3.3 20.7 3.3S19.3 3 17.2 3C11.7 3 1.6 5.1 3.2 20.8C4.3 20.9 5.4 21 6.4 21C8.76 21 10.74 20.69 12.41 20.15C12.15 19.5 12 18.76 12 18M7 17C7 17 7 7 17 7C17 7 11 9 7 17Z"}))}}])&&c(r.prototype,i),a&&c(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(n.default.PureComponent);const p=(0,i.A)((function(t){return{}}))(d)},54014:(t,e,r)=>{r.d(e,{Ay:()=>k});r(52675),r(89463),r(66412),r(2259),r(45700),r(78125),r(28706),r(2008),r(51629),r(23418),r(74423),r(64346),r(23792),r(48598),r(62062),r(94490),r(34782),r(15086),r(26910),r(59089),r(60739),r(89572),r(23288),r(62010),r(4731),r(36033),r(60479),r(2892),r(59904),r(67945),r(84185),r(83851),r(81278),r(40875),r(79432),r(10287),r(26099),r(3362),r(27495),r(38781),r(21699),r(47764),r(90744),r(11392),r(42762),r(23500),r(62953);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(){c=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),c=new C(n||[]);return i(a,"_invoke",{value:E(t,r,c)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var p="suspendedStart",v="suspendedYield",y="executing",b="completed",m={};function w(){}function g(){}function k(){}var x={};f(x,s,(function(){return this}));var S=Object.getPrototypeOf,_=S&&S(S(N([])));_&&_!==r&&o.call(_,s)&&(x=_);var j=k.prototype=w.prototype=Object.create(x);function D(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,a,c,s){var u=d(t[i],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,s)}),(function(t){r("throw",t,c,s)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===b){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=P(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=d(e,r,n);if("normal"===u.type){if(o=n.done?b:v,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=b,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return g.prototype=k,i(j,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:g,configurable:!0}),g.displayName=f(k,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,f(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},D(O.prototype),f(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},D(j),f(j,l,"Generator"),f(j,s,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return u(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function p(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function y(){return"".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}var b=function(){return p((function t(e){h(this,t),this.dbName=e,this.db=null,this.version=1}),[{key:"open",value:(u=f(c().mark((function t(){var e,r=this,n=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:[],t.abrupt("return",new Promise((function(t,n){var o=indexedDB.open(r.dbName,r.version);o.onupgradeneeded=function(t){var r,n=t.target.result,o=s(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.objectStoreNames.contains(i)||n.createObjectStore(i,{keyPath:"_id"})}}catch(t){o.e(t)}finally{o.f()}},o.onsuccess=function(e){r.db=e.target.result,r.version=r.db.version,t(r.db)},o.onerror=function(){n(new Error("Failed to open database: ".concat(o.error)))}})));case 2:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"addCollection",value:(a=f(c().mark((function t(e){var r=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.db||!this.db.objectStoreNames.contains(e)){t.next=2;break}return t.abrupt("return",!0);case 2:return this.db&&this.db.close(),this.version++,t.abrupt("return",new Promise((function(t,n){var o=indexedDB.open(r.dbName,r.version);o.onupgradeneeded=function(t){var r=t.target.result;r.objectStoreNames.contains(e)||r.createObjectStore(e,{keyPath:"_id"})},o.onsuccess=function(e){r.db=e.target.result,t(!0)},o.onerror=function(){n(new Error("Failed to add collection: ".concat(o.error)))}})));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"put",value:(i=f(c().mark((function t(e,r){var n=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.db){t.next=2;break}throw new Error("Database not open");case 2:return t.abrupt("return",new Promise((function(t,o){try{var i=n.db.transaction([e],"readwrite"),a=i.objectStore(e);r._id||(r._id=y());var c=a.put(r);c.onsuccess=function(){t(r._id)},c.onerror=function(){o(new Error("Failed to save document: ".concat(c.error)))},i.onerror=function(){o(new Error("Transaction failed: ".concat(i.error)))}}catch(t){o(t)}})));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"get",value:(o=f(c().mark((function t(e,r){var n=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.db){t.next=2;break}throw new Error("Database not open");case 2:return t.abrupt("return",new Promise((function(t,o){try{var i=n.db.transaction([e],"readonly").objectStore(e).get(r);i.onsuccess=function(){t(i.result)},i.onerror=function(){o(new Error("Failed to get document: ".concat(i.error)))}}catch(t){o(t)}})));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"getAll",value:(n=f(c().mark((function t(e){var r=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.db){t.next=2;break}throw new Error("Database not open");case 2:return t.abrupt("return",new Promise((function(t,n){try{var o=r.db.transaction([e],"readonly").objectStore(e).getAll();o.onsuccess=function(){t(o.result||[])},o.onerror=function(){n(new Error("Failed to get documents: ".concat(o.error)))}}catch(t){n(t)}})));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"delete",value:(r=f(c().mark((function t(e,r){var n=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.db){t.next=2;break}throw new Error("Database not open");case 2:return t.abrupt("return",new Promise((function(t,o){try{var i=n.db.transaction([e],"readwrite").objectStore(e).delete(r);i.onsuccess=function(){t(!0)},i.onerror=function(){o(new Error("Failed to delete document: ".concat(i.error)))}}catch(t){o(t)}})));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"clear",value:(e=f(c().mark((function t(e){var r=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.db){t.next=2;break}throw new Error("Database not open");case 2:return t.abrupt("return",new Promise((function(t,n){try{var o=r.db.transaction([e],"readwrite").objectStore(e).clear();o.onsuccess=function(){t(!0)},o.onerror=function(){n(new Error("Failed to clear collection: ".concat(o.error)))}}catch(t){n(t)}})));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"close",value:function(){this.db&&(this.db.close(),this.db=null)}},{key:"deleteDatabase",value:(t=f(c().mark((function t(){var e=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.close(),t.abrupt("return",new Promise((function(t,r){var n=indexedDB.deleteDatabase(e.dbName);n.onsuccess=function(){t(!0)},n.onerror=function(){r(new Error("Failed to delete database: ".concat(n.error)))}})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,r,n,o,i,a,u}(),m=function(){return p((function t(e,r){h(this,t),this.db=e,this.name=r}),[{key:"add",value:(a=f(c().mark((function t(e){var r,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={_id:e._id||y(),_created:Date.now(),_modified:Date.now(),data:e.data||e},t.next=3,this.db.put(this.name,r);case 3:return n=t.sent,t.abrupt("return",{success:!0,id:n});case 5:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"update",value:(o=f(c().mark((function t(e,r){var n,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db.get(this.name,e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",{success:!1,error:"Document not found"});case 5:return o=i(i({},n),{},{_modified:Date.now(),data:r.data||r}),t.next=8,this.db.put(this.name,o);case 8:return t.abrupt("return",{success:!0,id:e});case 9:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"get",value:(n=f(c().mark((function t(e){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db.get(this.name,e);case 2:return r=t.sent,t.abrupt("return",r||null);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getAll",value:(r=f(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db.getAll(this.name);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"delete",value:(e=f(c().mark((function t(e){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db.delete(this.name,e);case 2:return t.abrupt("return",{success:!0});case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"clear",value:(t=f(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db.clear(this.name);case 2:return t.abrupt("return",{success:!0});case 3:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,r,n,o,a}(),w=function(){return p((function t(e){h(this,t),this.name=e,this.db=new b(e),this.collections=new Map,this.initialized=!1}),[{key:"init",value:(n=f(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.db.open([]);case 4:this.initialized=!0;case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getCollection",value:(r=f(c().mark((function t(e){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initialized){t.next=3;break}return t.next=3,this.init();case 3:if(this.collections.has(e)){t.next=8;break}return t.next=6,this.db.addCollection(e);case 6:r=new m(this.db,e),this.collections.set(e,r);case 8:return t.abrupt("return",this.collections.get(e));case 9:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"close",value:(e=f(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.db.close(),this.collections.clear(),this.initialized=!1;case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"deleteDatabase",value:(t=f(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db.deleteDatabase();case 2:this.collections.clear(),this.initialized=!1;case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,r,n}(),g=function(){return p((function t(e){h(this,t),this.prefix=e}),[{key:"set",value:function(t,e){try{return localStorage.setItem("".concat(this.prefix,"_").concat(t),JSON.stringify(e)),!0}catch(t){return console.error("QuickStore set error:",t),!1}}},{key:"get",value:function(t){try{var e=localStorage.getItem("".concat(this.prefix,"_").concat(t));return e?JSON.parse(e):null}catch(t){return console.error("QuickStore get error:",t),null}}},{key:"remove",value:function(t){try{return localStorage.removeItem("".concat(this.prefix,"_").concat(t)),!0}catch(t){return console.error("QuickStore remove error:",t),!1}}},{key:"clear",value:function(){var t=this;try{return Object.keys(localStorage).forEach((function(e){e.startsWith(t.prefix)&&localStorage.removeItem(e)})),!0}catch(t){return console.error("QuickStore clear error:",t),!1}}}])}();const k=new(function(){return p((function t(){h(this,t),this.db=null,this.collection=null,this.quickStore=new g("drafts"),this.initialized=!1,this.currentDraftId=null,this.lastSaveHash=null}),[{key:"initialize",value:(s=f(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return",{success:!0});case 2:return t.prev=2,this.db=new w("editorDrafts"),t.next=6,this.db.init();case 6:return t.next=8,this.db.getCollection("drafts");case 8:return this.collection=t.sent,this.initialized=!0,this.loadSession(),console.log("DraftManager initialized successfully"),t.abrupt("return",{success:!0});case 15:return t.prev=15,t.t0=t.catch(2),console.error("Failed to initialize DraftManager:",t.t0),t.abrupt("return",{success:!1,error:t.t0.message});case 19:case"end":return t.stop()}}),t,this,[[2,15]])}))),function(){return s.apply(this,arguments)})},{key:"generateHash",value:function(t){for(var e=JSON.stringify(t),r=0,n=0;n<e.length;n++){r=(r<<5)-r+e.charCodeAt(n),r|=0}return r.toString()}},{key:"saveDraft",value:(a=f(c().mark((function t(e){var r,n,o,i,a,s,u,l,f,h,d,p,v,y,b,m,w,g,k,x,S,_;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initialized){t.next=6;break}return t.next=3,this.initialize();case 3:if((n=t.sent).success){t.next=6;break}return t.abrupt("return",n);case 6:if(o=e.title,i=void 0===o?"":o,a=e.description,s=void 0===a?"":a,u=e.content,l=void 0===u?"":u,f=e.tags,h=void 0===f?[]:f,d=e.settings,p=void 0===d?{}:d,v=e.gradient,y=void 0===v?null:v,b=e.forceNew,m=void 0!==b&&b,w="string"==typeof l?l:(null==l||null===(r=l.blocks)||void 0===r?void 0:r.map((function(t){return t.text})).join(" "))||"",i.trim()||w.trim()){t.next=10;break}return t.abrupt("return",{success:!1,error:"Cannot save empty draft"});case 10:if(g=this.generateHash({title:i,content:l,description:s,tags:h}),m||g!==this.lastSaveHash){t.next=13;break}return t.abrupt("return",{success:!1,error:"No changes detected"});case 13:if(t.prev=13,k={title:i||"Untitled Draft",description:s||"",content:"string"==typeof l?l:JSON.stringify(l),plainText:w.substring(0,500),tags:h||[],settings:p||{},gradient:y,wordCount:w.split(/\s+/).filter(Boolean).length,readingTime:Math.ceil(w.split(/\s+/).filter(Boolean).length/200),lastSaved:Date.now(),version:1},!this.currentDraftId||m){t.next=36;break}return t.next=18,this.collection.get(this.currentDraftId);case 18:if(!(_=t.sent)){t.next=28;break}return k.version=(_.data.version||0)+1,k.createdAt=_.data.createdAt||_._created,t.next=24,this.collection.update(this.currentDraftId,k);case 24:x=t.sent,S=this.currentDraftId,t.next=34;break;case 28:return k.createdAt=Date.now(),t.next=31,this.collection.add(k);case 31:x=t.sent,S=x.id,this.currentDraftId=S;case 34:t.next=42;break;case 36:return k.createdAt=Date.now(),t.next=39,this.collection.add(k);case 39:x=t.sent,S=x.id,this.currentDraftId=S;case 42:if(!x.success){t.next=48;break}return this.lastSaveHash=g,this.saveSession(S),t.abrupt("return",{success:!0,data:{id:S,lastSaved:k.lastSaved,version:k.version}});case 48:return t.abrupt("return",{success:!1,error:"Failed to save draft"});case 49:t.next=55;break;case 51:return t.prev=51,t.t0=t.catch(13),console.error("Error saving draft:",t.t0),t.abrupt("return",{success:!1,error:t.t0.message});case 55:case"end":return t.stop()}}),t,this,[[13,51]])}))),function(t){return a.apply(this,arguments)})},{key:"getDraft",value:(i=f(c().mark((function t(e){var r,n,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initialized){t.next=6;break}return t.next=3,this.initialize();case 3:if((r=t.sent).success){t.next=6;break}return t.abrupt("return",r);case 6:return t.prev=6,t.next=9,this.collection.get(e);case 9:if(!(n=t.sent)){t.next=15;break}if(n.data.content&&"string"==typeof n.data.content)try{o=JSON.parse(n.data.content),n.data.content=o}catch(t){}return t.abrupt("return",{success:!0,data:{_id:n._id,_created:n._created,_modified:n._modified,data:n.data}});case 15:return t.abrupt("return",{success:!1,error:"Draft not found"});case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(6),console.error("Error loading draft:",t.t0),t.abrupt("return",{success:!1,error:t.t0.message});case 22:case"end":return t.stop()}}),t,this,[[6,18]])}))),function(t){return i.apply(this,arguments)})},{key:"getAllDrafts",value:(o=f(c().mark((function t(){var e,r,n,o,i,a,s=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.length>0&&void 0!==s[0]?s[0]:"",this.initialized){t.next=7;break}return t.next=4,this.initialize();case 4:if((r=t.sent).success){t.next=7;break}return t.abrupt("return",r);case 7:return t.prev=7,t.next=10,this.collection.getAll();case 10:return(n=t.sent).sort((function(t,e){return(e._modified||0)-(t._modified||0)})),o=n,e&&(i=e.toLowerCase(),o=n.filter((function(t){var e,r,n,o,a=t.data||{};return(null===(e=a.title)||void 0===e?void 0:e.toLowerCase().includes(i))||(null===(r=a.description)||void 0===r?void 0:r.toLowerCase().includes(i))||(null===(n=a.plainText)||void 0===n?void 0:n.toLowerCase().includes(i))||(null===(o=a.tags)||void 0===o?void 0:o.some((function(t){return t.toLowerCase().includes(i)})))}))),a=o.map((function(t){return{_id:t._id,_created:t._created,_modified:t._modified,data:t.data}})),t.abrupt("return",{success:!0,data:a});case 18:return t.prev=18,t.t0=t.catch(7),console.error("Error loading drafts:",t.t0),t.abrupt("return",{success:!1,error:t.t0.message});case 22:case"end":return t.stop()}}),t,this,[[7,18]])}))),function(){return o.apply(this,arguments)})},{key:"deleteDraft",value:(n=f(c().mark((function t(e){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initialized){t.next=6;break}return t.next=3,this.initialize();case 3:if((r=t.sent).success){t.next=6;break}return t.abrupt("return",r);case 6:return t.prev=6,t.next=9,this.collection.delete(e);case 9:return this.currentDraftId===e&&(this.currentDraftId=null,this.clearSession()),t.abrupt("return",{success:!0});case 13:return t.prev=13,t.t0=t.catch(6),console.error("Error deleting draft:",t.t0),t.abrupt("return",{success:!1,error:t.t0.message});case 17:case"end":return t.stop()}}),t,this,[[6,13]])}))),function(t){return n.apply(this,arguments)})},{key:"getLastDraft",value:(r=f(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllDrafts();case 2:if(!((e=t.sent).success&&e.data.length>0)){t.next=7;break}return t.abrupt("return",{success:!0,data:e.data[0]});case 7:return t.abrupt("return",{success:!1,error:"No drafts found"});case 8:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"saveSession",value:function(t){this.currentDraftId=t,this.quickStore.set("session",{draftId:t,timestamp:Date.now()})}},{key:"loadSession",value:function(){var t=this.quickStore.get("session");t&&t.draftId&&(Date.now()-(t.timestamp||0)<36e5?(this.currentDraftId=t.draftId,console.log("Restored session draft:",t.draftId)):this.clearSession())}},{key:"clearSession",value:function(){this.currentDraftId=null,this.lastSaveHash=null,this.quickStore.remove("session")}},{key:"startNewDraft",value:function(){this.currentDraftId=null,this.lastSaveHash=null}},{key:"getCurrentDraftId",value:function(){return this.currentDraftId}},{key:"setCurrentDraftId",value:function(t){this.currentDraftId=t,this.lastSaveHash=null,t&&this.saveSession(t)}},{key:"close",value:(e=f(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.db){t.next=3;break}return t.next=3,this.db.close();case 3:this.initialized=!1,this.collection=null,this.currentDraftId=null,this.lastSaveHash=null;case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"reset",value:(t=f(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.db){t.next=3;break}return t.next=3,this.db.deleteDatabase();case 3:this.quickStore.clear(),this.initialized=!1,this.collection=null,this.currentDraftId=null,this.lastSaveHash=null;case 8:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,r,n,o,i,a,s}())}}]);