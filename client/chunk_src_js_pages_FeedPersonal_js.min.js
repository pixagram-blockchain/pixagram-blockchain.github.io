"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_pages_FeedPersonal_js"],{74979:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.r(t),s.d(t,{default:()=>S});s(54743),s(11745),s(95477),s(75044),s(52568),s(28845),s(373),s(62953);var o=s(17402),_=s(86982),n=s(79626),r=s(69205),l=s(69232),a=s(16134),c=s(61990),d=s(78725),h=s(23563),p=s(9372),m=s(24488),u=s(40497),f=s(28379),g=e([c,d,u,f]);function w(e,t,s){return(t=y(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function y(e){var t=b(e,"string");return"symbol"==typeof t?t:t+""}function b(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}[c,d,u,f]=g.then?(await g)():g;class x extends a.a{_getEstimatedTotalHeight(){const{cellCount:e,cellMeasurerCache:t,width:s}=this.props,i=Math.floor(s/(t||{}).defaultWidth||0),o=this._positionCache.estimateTotalHeight(e,i,(t||{}).defaultHeight||0);return isFinite(o)?o:0}}const v=e=>({mainFab:{animation:"$slideInFromBottom 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","@global":{"@keyframes slideInFromBottom":{"0%":{transform:"translateY(160px)",filter:"opacity(0)"},"100%":{transform:"translateY(0px)",filter:"opacity(1)"}}},position:"fixed",right:16,bottom:16,transition:"transform 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms","& .MuiButtonBase-root":{borderRadius:"32px",background:"#f6f6f6",transition:"background 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms",mixBlendMode:"overlay","& .MuiTouchRipple-root":{filter:"opacity(1)","& .MuiTouchRipple-child":{backgroundImage:"\n                      radial-gradient(circle at 50% 50%,\n                        magenta 0%, blue 20%, cyan 40%, green 60%, yellow 80%, red 100%)"}}},"& .MuiButtonBase-root:hover":{background:"white",transition:"background 225ms cubic-bezier(0.4, 0, 0.2, 1) 5ms"},"& .MuiFab-extended":{padding:"0 24px",height:64,fontSize:"1.125rem"},"& .MuiFab-extended .MuiSvgIcon-root":{fontSize:"1.75rem"}},masonry:{overflow:"hidden overlay !important",contain:"style layout","& > .ReactVirtualized__Masonry":{zIndex:0,position:"absolute",margin:0,scrollBehavior:"smooth",overscrollBehavior:"none",boxSizing:"content-box !important",touchAction:"pan-y",overflow:"hidden overlay !important",willChange:"scroll-position !important","& > .ReactVirtualized__Masonry__innerScrollContainer":{top:"auto !important",left:"auto !important",contentVisibility:"auto",overflow:"initial !important",position:"absolute !important",paddingBottom:"48px",boxSizing:"content-box"}}}});class k extends o.PureComponent{constructor(e){var t;super(e),t=this,w(this,"_updated_dimensions",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),s=document.documentElement,i=document.body||document.getElementsByTagName("body")[0],o=window.innerWidth||s.clientWidth||i.clientWidth,_=window.innerHeight||s.clientHeight||i.clientHeight;const n=Boolean(o<960),r=Boolean(_<690),l=t.st4te._less_than_960w!==n||t.st4te._less_than_690h!==r;t.st4te._window_width;t.setSt4te({_window_width:o,_window_height:_,_load_more_threshold:_*(_/o)*2},(()=>{t.forceUpdate((()=>{const{_root:s,_gutter_size:i,_window_width:o,_window_height:_,data:n}=t.st4te;let{_column_count:r}=t.st4te;if(s){const n=s.getBoundingClientRect(),l=n.width,a=n.height;if(o<100||l<100||a<100||_<100)setTimeout((()=>{t._updated_dimensions(e)}),250);else{r=1;const e=Math.floor((n.width-(r+1)*i)/r);t.setSt4te({_overscan_by_pixels:_*(_/o)*8,_column_width:Math.min(e,720),_column_count:r,_root_width:l,_root_height:a},(()=>{t._init_cell_measurements((()=>{t.setSt4te({_is_resizing:!1})}))}))}}}))})),l&&t.setSt4te({_less_than_960w:n,_less_than_690h:r,_window_width:o,_window_height:_},(()=>{t.forceUpdate()}))})),w(this,"_recompute_cell_measurements",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const{_cell_measurer_cache:s,_masonry:i,_cell_positioner:o,_column_count:_,_gutter_size:n,_column_width:r}=t.st4te;if(null!=s&&null!=i&&null!=o){s.clearAll(),s.visible_ids={};let l={cellMeasurerCache:s,columnCount:_,columnWidth:r,spacer:n};o.reset(l),i.clearCellPositions(),t.setSt4te({_cell_positioner:o,_cell_positioner_config:l,_cell_measurer_cache:s},(()=>{i.forceUpdate(e)}))}else t._init_cell_measurements(e)})),w(this,"_set_masonry_ref",(e=>{null!==e&&this.setSt4te({_masonry:e},(()=>{this._init_cell_measurements()}))})),w(this,"_set_root_ref",(e=>{null!==e&&this.setSt4te({_root:e})})),w(this,"_cell_renderer",(e=>{const{index:t,key:s,parent:i,style:_,isScrolling:n}=e,{_root_height:r,_root_width:l,_masonry:c,_column_width:h,_cell_measurer_cache:p,_column_count:m,_settings:u,_selected_post_index:f}=this.st4te;if(void 0===c.props.itemsWithSizes[0|t])return;const{item:g,size:w}=c.props.itemsWithSizes[0|t],y=c._scrollingContainer.scrollTop,b=f===t;if(!w.height)return;const x=t%m,v=(t-x)/m,k=Math.ceil(h*(w.height/w.width))||0;_.width=0+h;let{_top_scroll_of_el_by_index:S,_height_of_el_by_index:C,_x_y_of_el_by_index:M}=this.st4te;const z=0+_.top,E=0+_.height,U=z+E;S[t]=z,C[t]=E,M[t]=[v,x];const T=2*r*(r/l),W=T+U>y&&z<y+r+T;p.visible_ids[w.id]=W||p.visible_ids[w.id]||!1;const B=u._selected_locales_code;return this.setSt4te({_top_scroll_of_el_by_index:S,_height_of_el_by_index:C}),o.createElement(a.dl,{cache:p,index:t,key:s,parent:i},o.createElement(d.A,{onOpen:this._open_artwork,locales:B,nsfw:u._nsfw_enabled,data:g,renderer:u._renderer,onMenuClick:this.openCardMenu,is_scrolling:n,selected:b,size:w,visible:p.visible_ids[w.id],column_width:h,image_height:k,image_width:h,id:w.id,key:s,rowIndex:v,columnIndex:x,style:_}))})),w(this,"_init_cell_measurements",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};t.forceUpdate((()=>{if(null!=t.st4te._cell_measurer_cache&&null!=t.st4te._cell_positioner_config&&null!=t.st4te._cell_positioner)t._recompute_cell_measurements(e);else{const{_column_count:s,_column_width:i,_gutter_size:o}=t.st4te;let _=new a.jS({defaultHeight:600,defaultWidth:i,fixedWidth:!0});_.visible_ids={};let n={cellMeasurerCache:_,columnCount:s,columnWidth:i,spacer:o},r=(0,a.wT)(n);t.setSt4te({_cell_measurer_cache:_,_cell_positioner:r,_cell_positioner_config:n},(()=>{t.forceUpdate((()=>{const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const{_masonry:i}=t.st4te;i?i.forceUpdate(e):setTimeout((()=>{s(e)}),5)};s(e)}))}))}}))})),w(this,"_next_current_post",(()=>{const{_post:e,_posts:t,_masonry:s}=this.st4te,i=t.map((e=>e.id)).indexOf(e.id)+1,o=Math.max(0,Math.min(t.length-1,i)),{item:_,size:n}=s.props.itemsWithSizes[0|o];this.setSt4te({_post:_},(()=>{this.forceUpdate(),this._update_selected_post_index(o)}))})),w(this,"_previous_current_post",(()=>{const{_post:e,_posts:t,_masonry:s}=this.st4te,i=t.map((e=>e.id)).indexOf(e.id)-1,o=Math.max(0,Math.min(t.length-1,i)),{item:_,size:n}=s.props.itemsWithSizes[0|o];this.setSt4te({_post:_},(()=>{this.forceUpdate(),this._update_selected_post_index(o)}))})),w(this,"_update_selected_post_index",(function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{_post:i,_posts:o,_masonry:_}=t.st4te;if(!_)return;const n=_.props.itemsWithSizes,r=void 0!==e?e:i?o.map((e=>(e||{}).title)).indexOf(i.title):t.st4te._selected_post_index;t.setSt4te({_selected_post_index:r,_post:o[r],_post_img:(n[r]||{}).size},(()=>{t.forceUpdate((()=>{s?_.forceUpdate():t._scroll_to_index()}))}))})),w(this,"_scroll_to",(e=>{const{_masonry:t}=this.st4te;t&&(void 0===e?(t._scrollingContainer.scrollTop=this.st4te._scroll_top,t.forceUpdate()):this.setSt4te({_scroll_top:e},(()=>{t._scrollingContainer.scrollTop=e,t.forceUpdate()})))})),w(this,"_scroll_to_index",(e=>{const{_selected_post_index:t,_top_scroll_of_el_by_index:s,_height_of_el_by_index:i,_root_height:o}=this.st4te;let _=s[e=void 0!==e?e:t]+i[e]/2-o/3;this._scroll_to(_)})),w(this,"_handle_masonry_scroll",(e=>{const{_load_more_threshold:t,_loading_posts:s}=this.st4te,{_masonry:i,_scroll_top:o,_y:_,_overscan_by_pixels:n}=this.st4te,r=i&&i._scrollingContainer?i._scrollingContainer.scrollTop:0,l=r-o,a=this.st4te._last_scroll_check_height+l,c=Math.abs(a)>n,d=Math.min(Math.max(-64,_-l),64);o===r&&_===d||this.setSt4te({_scroll_top:r,_y:d,_last_scroll_check_height:a},(()=>{(_!==d||c)&&this.setSt4te({_last_scroll_check_height:0},(()=>{this.forceUpdate()}))}))})),w(this,"openCardMenu",((e,t)=>{this.setSt4te({menuCardXY:Int32Array.of(e.x-24,e.y-24),menuCardData:t},(()=>{this.forceUpdate()}))})),w(this,"closeCardMenu",(()=>{this.setSt4te({menuCardXY:Int32Array.of(0,0),menuCardData:{}},(()=>{this.forceUpdate()}))})),w(this,"_open_create_artwork",(()=>{this.setSt4te({_create_artwork_dialog_open:!0},(()=>{this.forceUpdate()}))})),w(this,"_create_artwork_dialog_close",(()=>{this.setSt4te({_create_artwork_dialog_open:!1},(()=>{this.forceUpdate()}))})),w(this,"_open_artwork",(e=>{this.setSt4te({_artwork_open:!0,_post:e},(()=>{this.forceUpdate()}))})),w(this,"_close_artwork",(()=>{this.setSt4te({_artwork_open:!1,_post:{}},(()=>{this.forceUpdate()}))})),this.st4te={classes:e.classes,_settings:e.settings,_history:_.Vv,_pathname:e.pathname,_image_name_infographics:"",_infographics_fadein_time:300,_infographics_in:!0,_bii3_opacity:1,_join_now_button_update:0,_less_than_960w:!0,_less_than_690h:!0,menuCardXY:[],menuCardData:{},authors:[],_scrolling_reset_time_interval:225,_min_col_width:180,_max_col_width:1280,_root_width:0,_root_height:0,_root:null,_window_width:0,_window_height:0,_average_img_ratio:1,_gutter_size:16,column_count:1,_column_width:640,_load_more_threshold:2e3,_overscan_by_pixels:9e3,_cell_positioner:null,_cell_positioner_config:null,_masonry:null,_cell_measurer_cache:null,_scroll_top:0,_intervals:[],_y:0,_top_scroll_of_el_by_index:[],_last_scroll_check_height:0,_height_of_el_by_index:[],_x_y_of_el_by_index:[],_selected_post_index:0,_post_closed_at:0,_posts:[],_create_artwork_dialog_open:!1,_artwork_open:!1,_post:{}}}componentWillMount(){window.addEventListener("resize",this._updated_dimensions),r.qf(),r.wn(0),setTimeout((()=>{r.wn(100)}),300);const e=setInterval(this._handle_masonry_scroll,this.st4te._scrolling_reset_time_interval);this.setSt4te({_intervals:[e]})}setSt4te(e,t){e=e||{},this.st4te=Object.assign(this.st4te,e),"function"==typeof t&&t()}componentDidMount(){this._updated_dimensions(),o.default.findDOMNode(this).addEventListener("keydown",this._handle_keydown),(0,l.A)((()=>s.e("src_js_data_authors_js").then(s.bind(s,60209)))).then((e=>{const t=e.default();(0,l.A)((()=>s.e("default-src_js_data_posts_js").then(s.bind(s,65138)))).then((e=>{const s=e.default();this.setSt4te({_posts:s.map((e=>(e.author=t[e.author],e)))},(()=>{this.forceUpdate((()=>{this._updated_dimensions()}))}))}))}))}componentWillReceiveProps(e){const t=e.settings._renderer!==this.st4te._settings._renderer,s=e.settings._nsfw_enabled!==this.st4te._settings._nsfw_enabled;this.setSt4te({_settings:e.settings},(()=>{(t||s)&&this.forceUpdate((()=>{this.st4te._masonry.forceUpdate()}))}))}componentWillUnmount(){this.st4te._intervals.forEach((e=>{clearInterval(e)}));try{window.removeEventListener("resize",this._updated_dimensions)}catch(e){}try{o.default.findDOMNode(this).removeEventListener("keydown",this._handle_keydown)}catch(e){}}render(){const{classes:e,_settings:t}=this.st4te;let{_less_than_960w:s,_less_than_690h:i,_column_width:_,menuCardXY:n,menuCardData:r}=this.st4te,{_artwork_open:l,_post:a}=this.st4te;const{_window_width:d,_window_height:g,_cell_positioner:w,_cell_measurer_cache:y,_overscan_by_pixels:b,_y:v,_scroll_top:k,_posts:S,_create_artwork_dialog_open:C,_scrolling_reset_time_interval:M}=this.st4te,z=g,E=d>960?d-284:d,U=Math.round((E-_)/2),T=E-2*U,W=z-16,B=t._selected_locales_code;return o.createElement(o.Fragment,null,o.createElement("div",{ref:this._set_root_ref},o.createElement(c.A,{className:e.masonry,items:S,image:e=>e.image,keyMapper:e=>e.id},(e=>o.createElement(x,{style:{padding:"16px ".concat(U,"px 0px ").concat(U,"px")},key:"masonry-extended",scrollTop:k,scrollingResetTimeInterval:M,height:W,cellCount:0|(e||[]).length,itemsWithSizes:e,keyMapper:t=>e[t].size.id,cellMeasurerCache:y,cellPositioner:w,cellRenderer:this._cell_renderer,overscanByPixels:b,ref:this._set_masonry_ref,width:T})))),o.createElement("div",{onClick:this._open_create_artwork,className:e.mainFab,style:{transform:"translateY(".concat(0<v&&k>512?96:0,"px)")}},o.createElement(m.A,{variant:"extended",size:"large"},o.createElement(p.A,{style:{marginRight:12}}),o.createElement("span",null,"CREATE"))),o.createElement(h.A,{xy:n,data:r,onClose:this.closeCardMenu}),o.createElement(u.A,{keepMounted:!0,open:C,onClose:this._create_artwork_dialog_close}),o.createElement(f.A,{renderer:t._renderer,nsfw:t._nsfw_enabled,format:t._format,data:a,open:l,locales:B,onClose:this._close_artwork,onPrevious:this._previous_current_post,onNext:this._next_current_post}))}}const S=(0,n.default)(v)(k);i()}catch(C){i(C)}}))}}]);