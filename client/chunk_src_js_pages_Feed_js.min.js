"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_pages_Feed_js"],{72339:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.r(t),s.d(t,{default:()=>z});s(54743),s(11745),s(95477),s(75044),s(52568),s(28845),s(373),s(62953);var o=s(17402),n=s(86982),_=s(79626),r=s(69205),a=s(69232),l=s(5212),c=s(61990),h=s(78725),p=s(67264),m=s(16594),f=s(23563),u=s(9372),g=s(24488),b=s(40497),w=s(28379),x=e([c,h,b,w]);function y(e,t,s){return(t=v(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function v(e){var t=k(e,"string");return"symbol"==typeof t?t:t+""}function k(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}[c,h,b,w]=x.then?(await x)():x;class C extends l.a{_getEstimatedTotalHeight(){const{cellCount:e,cellMeasurerCache:t,width:s}=this.props,i=Math.floor(s/(t||{}).defaultWidth||0),o=this._positionCache.estimateTotalHeight(e,i,(t||{}).defaultHeight||0);return isFinite(o)?o:0}}const S=e=>({mainTab:{animation:"$slideInFromTop 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","@global":{"@keyframes slideInFromTop":{"0%":{transform:"translateY(-96px)",filter:"opacity(0)"},"100%":{transform:"translateY(0px)",filter:"opacity(1)"}}},backgroundColor:"#101010","& .MuiTab-textColorPrimary.Mui-selected":{backgroundColor:"transparent"},"& .MuiTab-textColorPrimary.Mui-selected .MuiTab-wrapper":{color:"#101010 !important"},"& .MuiTab-fullWidth":{backgroundColor:"transparent",color:"#989898",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",borderRadius:"21px"},"& .MuiTab-fullWidth:hover":{backgroundColor:"rgba(255,255,255,0.06)"},"& span.MuiTabs-indicator":{zIndex:"-1",height:"48px",backgroundColor:"#c7c7c7",borderRadius:"21px",transform:"scale3d(0.875, 0.75, 1)"},margin:"21px 16px 21px 16px",width:"calc(100% - 32px)",borderRadius:"21px",position:"absolute",top:0,left:0,zIndex:1,transition:"transform 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms"},mainFab:{animation:"$slideInFromBottom 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","@global":{"@keyframes slideInFromBottom":{"0%":{transform:"translateY(160px)",filter:"opacity(0)"},"100%":{transform:"translateY(0px)",filter:"opacity(1)"}}},position:"fixed",right:16,bottom:16,transition:"transform 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms","& .MuiButtonBase-root":{borderRadius:"32px",background:"#f6f6f6",transform:"scale(1)",animationName:"$bounce-feed",animationTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",animationDuration:"3.2s",animationFillMode:"both",animationDelay:"1s",animationIterationCount:"infinite",boxShadow:"0 0 8px #ffffff88, 0 0 16px #ffffffcc","@global":{"@keyframes bounce-feed":{"0%":{boxShadow:"0 0 8px #ffffff88, 0 0 16px #ffffffcc",transform:"scale(1)"},"3%":{boxShadow:"0 0 12px #ffffff88, 0 0 24px #ffffffcc",transform:"scale(1.05)"},"6%":{boxShadow:"0 0 4px #ffffff88, 0 0 8px #ffffffcc",transform:"scale(0.975)"},"9%":{boxShadow:"0 0 8px #ffffff88, 0 0 16px #ffffffcc",transform:"scale(1)"}}},transition:"background 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms","& .MuiTouchRipple-root":{filter:"opacity(1)","& .MuiTouchRipple-child":{backgroundImage:"\n                      radial-gradient(circle at 50% 50%,\n                        magenta 0%, blue 20%, cyan 40%, green 60%, yellow 80%, red 100%)"}}},"& .MuiButtonBase-root:hover":{background:"#ffffff",boxShadow:"0 0 8px #ffffff88, 0 0 16px #ffffffcc"},"& .MuiTouchRipple-child":{backgroundImage:"\n            radial-gradient(\n              circle at 50% 50% in hsl shorter hue,\n              #f000ff6b, #0095ffdb, #0cffe9ba, #d8ff00b5, #f59300c2, #6f0000c7, transparent, transparent\n            )"},"& .MuiFab-extended":{padding:"0 24px",height:64,fontSize:"1.125rem"},"& .MuiFab-extended .MuiSvgIcon-root":{fontSize:"1.75rem"}},masonry:{overflow:"hidden overlay !important",contain:"style layout",touchAction:"pan-y","& > .ReactVirtualized__Masonry":{zIndex:0,position:"absolute",margin:0,scrollBehavior:"smooth",willChange:"scroll-position !important",overscrollBehavior:"none",contentVisibility:"auto",boxSizing:"content-box !important",touchAction:"pan-y",overflow:"hidden overlay !important",padding:"66px 12px 32px 16px","& > .ReactVirtualized__Masonry__innerScrollContainer":{top:"auto !important",left:"auto !important",overflow:"initial !important",position:"absolute !important",paddingBottom:"48px",boxSizing:"content-box"}}}});class M extends o.PureComponent{constructor(e){var t;super(e),t=this,y(this,"_updated_dimensions",(()=>{let e=document.documentElement,t=document.body||document.getElementsByTagName("body")[0],s=window.innerWidth||e.clientWidth||t.clientWidth,i=window.innerHeight||e.clientHeight||t.clientHeight;const o=Boolean(s<960),n=Boolean(i<690),_=this.st4te._less_than_960w!==o||this.st4te._less_than_690h!==n;this.setSt4te({_window_width:s,_window_height:i,_load_more_threshold:i*(i/s)*2},(()=>{this.forceUpdate((()=>{const{_root:e,_gutter_size:t,_window_width:s,_window_height:i,data:o}=this.st4te;let{_column_count:n}=this.st4te;if(e){const o=e.getBoundingClientRect(),_=o.width,r=o.height;if(s<100||_<100||r<100||i<100)setTimeout((()=>{this._updated_dimensions(d)}),250);else{n=s>=1920?4:s>=1280?3:s>=768?2:1;const e=Math.floor((o.width-(n+1)*t)/n);this.setSt4te({_overscan_by_pixels:i*(i/s)*8,_column_width:e,_column_count:n,_root_width:_,_root_height:r},(()=>{this._init_cell_measurements((()=>{this.setSt4te({_is_resizing:!1})}))}))}}}))})),_&&this.setSt4te({_less_than_960w:o,_less_than_690h:n,_window_width:s,_window_height:i},(()=>{this.forceUpdate()}))})),y(this,"_recompute_cell_measurements",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const{_cell_measurer_cache:s,_masonry:i,_cell_positioner:o,_column_count:n,_gutter_size:_,_column_width:r}=t.st4te;if(null!=s&&null!=i&&null!=o){s.clearAll(),s.visible_ids={};let a={cellMeasurerCache:s,columnCount:n,columnWidth:r,spacer:_};o.reset(a),i.clearCellPositions(),t.setSt4te({_cell_positioner:o,_cell_positioner_config:a,_cell_measurer_cache:s},(()=>{i.forceUpdate(e)}))}else t._init_cell_measurements(e)})),y(this,"_set_masonry_ref",(e=>{null!==e&&this.setSt4te({_masonry:e},(()=>{this._init_cell_measurements()}))})),y(this,"_set_root_ref",(e=>{null!==e&&this.setSt4te({_root:e})})),y(this,"_cell_renderer",(e=>{const{index:t,key:s,parent:i,style:n,isScrolling:_}=e,{_root_height:r,_root_width:a,_masonry:c,_column_width:d,_cell_measurer_cache:p,_column_count:m,_settings:f,_selected_post_index:u}=this.st4te;if(void 0===c.props.itemsWithSizes[0|t])return;const{item:g,size:b}=c.props.itemsWithSizes[0|t],w=c._scrollingContainer.scrollTop,x=u===t;if(!b.height)return;const y=t%m,v=(t-y)/m,k=Math.ceil(d*(b.height/b.width))||0;n.width=0+d;let{_top_scroll_of_el_by_index:C,_height_of_el_by_index:S,_x_y_of_el_by_index:M}=this.st4te;const z=0+n.top,E=0+n.height,T=z+E;C[t]=z,S[t]=E,M[t]=[v,y];const U=r*(r/a),A=U+T>w&&z<w+r+U;p.visible_ids[b.id]=A||p.visible_ids[b.id]||!1;const W=f._selected_locales_code;return this.setSt4te({_top_scroll_of_el_by_index:C,_height_of_el_by_index:S}),o.createElement(l.dl,{cache:p,index:t,key:s,parent:i},o.createElement(h.A,{onOpen:this._open_artwork,locales:W,nsfw:f._nsfw_enabled,data:g,renderer:f._renderer,onMenuClick:this.openCardMenu,is_scrolling:_,selected:x,size:b,visible:p.visible_ids[b.id],column_width:d,image_height:k,image_width:d,id:b.id,key:s,rowIndex:v,columnIndex:y,style:n}))})),y(this,"_init_cell_measurements",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};t.forceUpdate((()=>{if(null!=t.st4te._cell_measurer_cache&&null!=t.st4te._cell_positioner_config&&null!=t.st4te._cell_positioner)t._recompute_cell_measurements(e);else{const{_column_count:s,_column_width:i,_gutter_size:o}=t.st4te;let n=new l.jS({defaultHeight:600,defaultWidth:i,fixedWidth:!0});n.visible_ids={};let _={cellMeasurerCache:n,columnCount:s,columnWidth:i,spacer:o},r=(0,l.wT)(_);t.setSt4te({_cell_measurer_cache:n,_cell_positioner:r,_cell_positioner_config:_},(()=>{t.forceUpdate((()=>{const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const{_masonry:i}=t.st4te;i?i.forceUpdate(e):setTimeout((()=>{s(e)}),5)};s(e)}))}))}}))})),y(this,"_next_current_post",(()=>{const{_post:e,_posts:t,_masonry:s}=this.st4te,i=t.map((e=>e.id)).indexOf(e.id)+1,o=Math.max(0,Math.min(t.length-1,i)),{item:n,size:_}=s.props.itemsWithSizes[0|o];this.setSt4te({_post:n},(()=>{this.forceUpdate(),this._update_selected_post_index(o)}))})),y(this,"_previous_current_post",(()=>{const{_post:e,_posts:t,_masonry:s}=this.st4te,i=t.map((e=>e.id)).indexOf(e.id)-1,o=Math.max(0,Math.min(t.length-1,i)),{item:n,size:_}=s.props.itemsWithSizes[0|o];this.setSt4te({_post:n},(()=>{this.forceUpdate(),this._update_selected_post_index(o)}))})),y(this,"_handle_keydown",(e=>{let{_masonry:t,_selected_post_index:s,_post_closed_at:i,_posts:o,_post_author:n,_post_permlink:_,_column_count:r,_x_y_of_el_by_index:a}=this.st4te;if(!n&&!_&&i+300<Date.now()){const t=s%r,i=(s-t)/r;let n=t,_=i;switch(e.keyCode){case 40:_+=1,e.preventDefault();break;case 38:_-=1,e.preventDefault();break;case 37:n-=1;break;case 39:n+=1}_===i&&n===t||a.forEach(((e,t)=>{e[1]===n&&_===e[0]&&(s=t)})),s=Math.max(0,Math.min(o.length-1,s)),13===e.keyCode||this.st4te._selected_post_index!==s&&this._update_selected_post_index(s)}})),y(this,"_update_selected_post_index",(function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{_post:i,_posts:o,_masonry:n}=t.st4te;if(!n)return;const _=n.props.itemsWithSizes,r=void 0!==e?e:i?o.map((e=>(e||{}).title)).indexOf(i.title):t.st4te._selected_post_index;t.setSt4te({_selected_post_index:r,_post:o[r],_post_img:(_[r]||{}).size},(()=>{t.forceUpdate((()=>{s?n.forceUpdate():t._scroll_to_index()}))}))})),y(this,"_scroll_to",(e=>{const{_masonry:t}=this.st4te;t&&(void 0===e?(t._scrollingContainer.scrollTop=this.st4te._scroll_top,t.forceUpdate()):this.setSt4te({_scroll_top:e},(()=>{t._scrollingContainer.scrollTop=e,t.forceUpdate()})))})),y(this,"_scroll_to_index",(e=>{const{_selected_post_index:t,_top_scroll_of_el_by_index:s,_height_of_el_by_index:i,_root_height:o}=this.st4te;let n=s[e=void 0!==e?e:t]+i[e]/2-o/3;this._scroll_to(n)})),y(this,"_handle_masonry_scroll",(e=>{const{_load_more_threshold:t,_loading_posts:s}=this.st4te,{_masonry:i,_scroll_top:o,_y:n,_overscan_by_pixels:_}=this.st4te,r=i&&i._scrollingContainer?i._scrollingContainer.scrollTop:0,a=r-o,l=this.st4te._last_scroll_check_height+a,c=Math.abs(l)>_/2,d=Math.min(Math.max(-64,n-a),64);o===r&&n===d||this.setSt4te({_scroll_top:r,_y:d,_last_scroll_check_height:l},(()=>{(n!==d||c)&&this.setSt4te({_last_scroll_check_height:0},(()=>{this.forceUpdate()}))}))})),y(this,"handle_sorting_change",((e,t)=>{this.st4te.sorting!==t?this.setSt4te({sorting:t},(()=>{this.forceUpdate((()=>{this._scroll_to(0)}))})):this._scroll_to(0)})),y(this,"openCardMenu",((e,t)=>{this.setSt4te({menuCardXY:Int32Array.of(e.x-24,e.y-24),menuCardData:t},(()=>{this.forceUpdate()}))})),y(this,"closeCardMenu",(()=>{this.setSt4te({menuCardXY:Int32Array.of(0,0),menuCardData:{}},(()=>{this.forceUpdate()}))})),y(this,"_open_create_artwork",(()=>{this.setSt4te({_create_artwork_dialog_open:!0},(()=>{this.forceUpdate()}))})),y(this,"_create_artwork_dialog_close",(()=>{this.setSt4te({_create_artwork_dialog_open:!1},(()=>{this.forceUpdate()}))})),y(this,"_open_artwork",((e,t)=>{this.setSt4te({_artwork_open:!0,_post:e},(()=>{this.forceUpdate()}))})),y(this,"_close_artwork",(()=>{this.setSt4te({_artwork_open:null,_post:{}},(()=>{this.forceUpdate()}))})),this.st4te={classes:e.classes,_settings:e.settings,_history:n.Vv,_pathname:e.pathname,_image_name_infographics:"",_infographics_fadein_time:300,_infographics_in:!0,_bii3_opacity:1,_join_now_button_update:0,_less_than_960w:!0,_less_than_690h:!0,sorting:0,menuCardXY:[],menuCardData:{},authors:[],_scrolling_reset_time_interval:225,_min_col_width:10,_max_col_width:1e3,_root_width:0,_root_height:0,_root:null,_window_width:0,_window_height:0,_average_img_ratio:1,_gutter_size:16,column_count:4,_column_width:356,_load_more_threshold:2e3,_overscan_by_pixels:6e3,_cell_positioner:null,_cell_positioner_config:null,_masonry:null,_cell_measurer_cache:null,_scroll_top:0,_intervals:[],_y:0,_top_scroll_of_el_by_index:[],_last_scroll_check_height:0,_height_of_el_by_index:[],_x_y_of_el_by_index:[],_selected_post_index:0,_post_closed_at:0,_posts:[],_create_artwork_dialog_open:!1,_artwork_open:null,_post:{}}}componentWillMount(){window.addEventListener("resize",this._updated_dimensions),r.qf(),r.wn(0),setTimeout((()=>{r.wn(100)}),300);const e=setInterval(this._handle_masonry_scroll,this.st4te._scrolling_reset_time_interval);this.setSt4te({_intervals:[e]})}setSt4te(e,t){e=e||{},this.st4te=Object.assign(this.st4te,e),"function"==typeof t&&t()}componentDidMount(){this._updated_dimensions(),o.findDOMNode(this).addEventListener("keydown",this._handle_keydown),(0,a.A)((()=>s.e("src_js_data_authors_js").then(s.bind(s,60209)))).then((e=>{const t=e.default();(0,a.A)((()=>s.e("default-src_js_data_posts_js").then(s.bind(s,65138)))).then((e=>{const s=e.default();this.setSt4te({_posts:s.map((e=>(e.author=t[e.author],e)))},(()=>{this.forceUpdate((()=>{this._updated_dimensions()}))}))}))}))}componentWillReceiveProps(e){const t=e.settings._renderer!==this.st4te._settings._renderer,s=e.settings._nsfw_enabled!==this.st4te._settings._nsfw_enabled;this.setSt4te({_settings:e.settings},(()=>{(t||s)&&this.forceUpdate((()=>{this.st4te._masonry.forceUpdate()}))}))}componentWillUnmount(){this.st4te._intervals.forEach((e=>{clearInterval(e)}));try{window.removeEventListener("resize",this._updated_dimensions)}catch(e){}try{o.findDOMNode(this).removeEventListener("keydown",this._handle_keydown)}catch(e){}}render(){const{classes:e,_settings:t}=this.st4te;let{_less_than_960w:s,_less_than_690h:i,sorting:n,menuCardXY:_,menuCardData:r}=this.st4te,{_artwork_open:a,_post:l}=this.st4te;const{_window_width:d,_window_height:h,_cell_positioner:x,_cell_measurer_cache:y,_overscan_by_pixels:v,_y:k,_scroll_top:S,_posts:M,_create_artwork_dialog_open:z,_scrolling_reset_time_interval:E}=this.st4te,T=d>960?d-284-28:d-32,U=h-(d>960?96:64),A=t._selected_locales_code;return o.createElement(o.Fragment,null,o.createElement(m.A,{style:{transform:"translateY(".concat(0>k&&S>72?-72:0,"px)")},className:e.mainTab,value:n,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:this.handle_sorting_change,fullwidth:!0},o.createElement(p.A,{label:"Created"}),o.createElement(p.A,{label:"Hot"}),o.createElement(p.A,{label:"Trending"}),o.createElement(p.A,{label:"Promoted"})),o.createElement("div",{ref:this._set_root_ref},o.createElement(c.A,{className:e.masonry,items:M,image:e=>e.image,keyMapper:e=>e.id},(e=>o.createElement(C,{key:"masonry-extended",scrollTop:S,scrollingResetTimeInterval:E,height:U,cellCount:0|(e||[]).length,itemsWithSizes:e,keyMapper:t=>e[t].size.id,cellMeasurerCache:y,cellPositioner:x,cellRenderer:this._cell_renderer,overscanByPixels:v,ref:this._set_masonry_ref,width:T})))),o.createElement("div",{onClick:this._open_create_artwork,className:e.mainFab,style:{transform:"translateY(".concat(0<k&&S>512?96:0,"px)")}},o.createElement(g.A,{variant:"extended",size:"large"},o.createElement(u.A,{style:{marginRight:12}}),o.createElement("span",null,"CREATE"))),o.createElement(f.A,{xy:_,data:r,onClose:this.closeCardMenu}),o.createElement(b.A,{keepMounted:!0,open:z,onClose:this._create_artwork_dialog_close}),o.createElement(w.A,{renderer:t._renderer,nsfw:t._nsfw_enabled,format:t._format,data:l,open:a,locales:A,onClose:this._close_artwork,onPrevious:this._previous_current_post,onNext:this._next_current_post}))}}const z=(0,_.default)(S)(M);i()}catch(E){i(E)}}))}}]);