(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_pages_Feed_js"],{32163:(e,t,a)=>{"use strict";a.d(t,{A:()=>A});var s=a(15299),n=a(5556),i=a.n(n),r=a(8728),o=a(7160),l=a(88016),c=a(1128),d=a(70570),h=a(79626),u=a(69312),p=a(95652),_=a(32485),m=a.n(_);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},f.apply(null,arguments)}const g={standard:r.A,filled:o.Ay,outlined:l.A},y=8,w=46,b=37,x=39;class v extends s.default.Component{state={chips:[],errorText:void 0,focusedChip:null,inputValue:"",isClean:!0,isFocused:!1,chipsUpdated:!1,prevPropsValue:[]};constructor(e){super(e),e.defaultValue&&(this.state.chips=e.defaultValue),this.labelRef=s.default.createRef(),this.input=s.default.createRef()}componentDidMount(){"outlined"===this.props.variant&&(this.labelNode=s.default.findDOMNode(this.labelRef.current),this.forceUpdate())}componentWillUnmount(){clearTimeout(this.inputBlurTimeout)}static getDerivedStateFromProps(e,t){let a=null;return e.value&&e.value.length!==t.prevPropsValue.length&&(a={prevPropsValue:e.value},e.clearInputValueOnChange&&(a.inputValue="")),e.clearInputValueOnChange&&e.value&&e.value.length!==t.prevPropsValue.length&&(a={prevPropsValue:e.value,inputValue:""}),e.disabled&&(a={...a,focusedChip:null}),!t.chipsUpdated&&e.defaultValue&&(a={...a,chips:e.defaultValue}),a}blur(){this.input&&this.actualInput.blur()}focus=()=>{this.actualInput.focus(),null!=this.state.focusedChip&&this.setState({focusedChip:null})};handleInputBlur=e=>{this.props.onBlur&&this.props.onBlur(e),this.setState({isFocused:!1}),null!=this.state.focusedChip&&this.setState({focusedChip:null});const t=e.target.value;let a;switch(this.props.blurBehavior){case"add-or-clear":a={clearInputOnFail:!0};case"add":if(this.props.delayBeforeAdd){const e=(this.props.value||this.state.chips).length;this.inputBlurTimeout=setTimeout((()=>{const s=(this.props.value||this.state.chips).length;e===s?this.handleAddChip(t,a):this.clearInput()}),150)}else this.handleAddChip(t,a);break;case"clear":this.clearInput()}};handleInputFocus=e=>{this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(e)};handleKeyDown=e=>{const{focusedChip:t}=this.state;if(this._keyPressed=!1,this._preventChipCreation=!1,this.props.onKeyDown&&(this.props.onKeyDown(e),e.isDefaultPrevented()))return;const a=this.props.value||this.state.chips;if(this.props.newChipKeyCodes.indexOf(e.keyCode)>=0||this.props.newChipKeys.indexOf(e.key)>=0){!1!==this.handleAddChip(e.target.value)&&e.preventDefault()}else switch(e.keyCode){case y:""===e.target.value&&(null!=t?(this.handleDeleteChip(a[t],t),t>0&&this.setState({focusedChip:t-1})):this.setState({focusedChip:a.length-1}));break;case w:""===e.target.value&&null!=t&&(this.handleDeleteChip(a[t],t),t<=a.length-1&&this.setState({focusedChip:t}));break;case b:null==t&&""===e.target.value&&a.length?this.setState({focusedChip:a.length-1}):null!=t&&t>0&&this.setState({focusedChip:t-1});break;case x:null!=t&&t<a.length-1?this.setState({focusedChip:t+1}):this.setState({focusedChip:null});break;default:this.setState({focusedChip:null})}};handleKeyUp=e=>{!this._preventChipCreation&&(this.props.newChipKeyCodes.indexOf(e.keyCode)>=0||this.props.newChipKeys.indexOf(e.key)>=0)&&this._keyPressed?this.clearInput():this.updateInput(e.target.value),this.props.onKeyUp&&this.props.onKeyUp(e)};handleKeyPress=e=>{this._keyPressed=!0,this.props.onKeyPress&&this.props.onKeyPress(e)};handleUpdateInput=e=>{null==this.props.inputValue&&this.updateInput(e.target.value),this.props.onUpdateInput&&this.props.onUpdateInput(e)};handleAddChip(e,t){if(this.props.onBeforeAdd&&!this.props.onBeforeAdd(e))return this._preventChipCreation=!0,null!=t&&t.clearInputOnFail&&this.clearInput(),!1;this.clearInput();const a=this.props.value||this.state.chips;return this.props.dataSourceConfig?("string"==typeof e&&(e={[this.props.dataSourceConfig.text]:e,[this.props.dataSourceConfig.value]:e}),!this.props.allowDuplicates&&a.some((t=>t[this.props.dataSourceConfig.value]===e[this.props.dataSourceConfig.value]))||(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([...this.state.chips,e])),!0):e.trim().length>0&&((this.props.allowDuplicates||-1===a.indexOf(e))&&(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([...this.state.chips,e])),!0)}handleDeleteChip(e,t){if(this.props.value)this.props.onDelete&&this.props.onDelete(e,t);else{const e=this.state.chips.slice();if(e.splice(t,1)){let a=this.state.focusedChip;this.state.focusedChip===t?a=null:this.state.focusedChip>t&&(a=this.state.focusedChip-1),this.updateChips(e,{focusedChip:a})}}}updateChips(e,t={}){this.setState({chips:e,chipsUpdated:!0,...t}),this.props.onChange&&this.props.onChange(e)}clearInput(){this.updateInput("")}updateInput(e){this.setState({inputValue:e})}setActualInputRef=e=>{this.actualInput=e,this.props.inputRef&&this.props.inputRef(e)};render(){const{allowDuplicates:e,alwaysShowPlaceholder:t,blurBehavior:a,children:n,chipRenderer:i=E,classes:r,className:o,clearInputValueOnChange:l,dataSource:d,dataSourceConfig:h,defaultValue:_,delayBeforeAdd:y,disabled:w,disableUnderline:b,error:x,filter:v,FormHelperTextProps:A,fullWidth:C,fullWidthInput:S,helperText:k,id:I,InputProps:R={},inputRef:P,InputLabelProps:M={},inputValue:T,label:U,newChipKeyCodes:z,newChipKeys:O,onBeforeAdd:N,onAdd:D,onBlur:B,onDelete:W,onChange:F,onFocus:L,onKeyDown:j,onKeyPress:H,onKeyUp:V,onUpdateInput:$,placeholder:q,readOnly:Y,required:G,rootRef:K,value:X,variant:J,...Q}=this.props,Z=X||this.state.chips,ee=null!=T?T:this.state.inputValue,te=(this.props.value||ee).length>0||ee.length>0,ae=null!=M.shrink?M.shrink:null!=U&&(te||this.state.isFocused||Z.length>0),se=Z.map(((e,t)=>{const a=h?e[h.value]:e;return i({value:a,text:h?e[h.text]:e,chip:e,isDisabled:!!w,isReadOnly:Y,isFocused:this.state.focusedChip===t,handleClick:()=>this.setState({focusedChip:t}),handleDelete:()=>this.handleDeleteChip(e,t),className:r.chip},t)})),ne={};"outlined"===J&&(ne.notched=ae,ne.labelWidth=ae&&this.labelNode&&this.labelNode.offsetWidth||0),"standard"!==J?ne.startAdornment=s.default.createElement(s.default.Fragment,null,se):R.disableUnderline=!0;const ie=g[J];return s.default.createElement(u.A,f({ref:K,fullWidth:C,className:m()(o,r.root,{[r.marginDense]:"dense"===Q.margin}),error:x,required:Z.length>0?void 0:G,onClick:this.focus,disabled:w,variant:J},Q),U&&s.default.createElement(c.A,f({htmlFor:I,classes:{root:m()(r[J],r.label),shrink:r.labelShrink},shrink:ae,focused:this.state.isFocused,variant:J,ref:this.labelRef,required:G},M),U),s.default.createElement("div",{className:m()(r[J],r.chipContainer,{[r.focused]:this.state.isFocused,[r.underline]:!b&&"standard"===J,[r.disabled]:w,[r.labeled]:null!=U,[r.error]:x})},"standard"===J&&se,s.default.createElement(ie,f({ref:this.input,classes:{input:m()(r.input,r[J]),root:m()(r.inputRoot,r[J])},id:I,value:ee,onChange:this.handleUpdateInput,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,inputRef:this.setActualInputRef,disabled:w,fullWidth:S,placeholder:!te&&(ae||null==U)||t?q:null,readOnly:Y},R,ne))),k&&s.default.createElement(p.A,f({},A,{className:A?m()(A.className,r.helperText):r.helperText}),k))}}v.propTypes={allowDuplicates:i().bool,alwaysShowPlaceholder:i().bool,blurBehavior:i().oneOf(["clear","add","add-or-clear","ignore"]),chipRenderer:i().func,clearInputValueOnChange:i().bool,dataSource:i().array,dataSourceConfig:i().shape({text:i().string.isRequired,value:i().string.isRequired}),defaultValue:i().array,delayBeforeAdd:i().bool,disabled:i().bool,disableUnderline:i().bool,FormHelperTextProps:i().object,fullWidth:i().bool,fullWidthInput:i().bool,helperText:i().node,InputLabelProps:i().object,InputProps:i().object,inputRef:i().func,inputValue:i().string,label:i().node,newChipKeyCodes:i().arrayOf(i().number),newChipKeys:i().arrayOf(i().string),onAdd:i().func,onBeforeAdd:i().func,onChange:i().func,onDelete:i().func,onUpdateInput:i().func,placeholder:i().string,readOnly:i().bool,value:i().array,variant:i().oneOf(["outlined","standard","filled"])},v.defaultProps={allowDuplicates:!1,blurBehavior:"clear",clearInputValueOnChange:!1,delayBeforeAdd:!1,disableUnderline:!1,newChipKeyCodes:[13],newChipKeys:["Enter"],variant:"standard"};const A=(0,h.default)((e=>{const t="light"===e.palette.type,a=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{},inputRoot:{display:"inline-flex",flexWrap:"wrap",flex:1,marginTop:0,minWidth:70,"&$outlined,&$filled":{boxSizing:"border-box"},"&$outlined":{paddingTop:14},"&$filled":{paddingTop:28}},input:{display:"inline-block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",appearance:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",float:"left",flex:1},chipContainer:{display:"flex",flexFlow:"row wrap",cursor:"text",marginBottom:-2,minHeight:40,"&$labeled&$standard":{marginTop:18}},outlined:{"& input":{height:16,paddingTop:4,paddingBottom:12,marginTop:4,marginBottom:4}},standard:{},filled:{"& input":{height:22,marginBottom:4,marginTop:4,paddingTop:0},"$marginDense & input":{height:26}},labeled:{},label:{top:4,"&$outlined&:not($labelShrink)":{top:2,"$marginDense &":{top:5}},"&$filled&:not($labelShrink)":{top:15,"$marginDense &":{top:20}}},labelShrink:{top:0},helperText:{marginBottom:-20},focused:{},disabled:{},underline:{"&:after":{borderBottom:`2px solid ${e.palette.primary[t?"dark":"light"]}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:`2px solid ${e.palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{"&:after":{backgroundColor:e.palette.error.main,transform:"scaleX(1)"}},chip:{margin:"0 8px 8px 0",float:"left"},marginDense:{}}}),{name:"WAMuiChipInput"})(v),E=({value:e,text:t,isFocused:a,isDisabled:n,isReadOnly:i,handleClick:r,handleDelete:o,className:l},c)=>s.default.createElement(d.A,{key:c,className:l,style:{pointerEvents:n||i?"none":void 0,backgroundColor:a?"rgb(96, 96, 96)":void 0},onClick:r,onDelete:o,label:t})},38627:(e,t,a)=>{"use strict";a.d(t,{A:()=>g});var s=a(15299),n=a(79626),i=a(84860),r=a(42460),o=a(96232),l=a(61428),c=(a(39756),a(37532)),d=a(86982),h=a(29514),u=a(50384),p=a(77430),_=a(54392),m=a(15761);class f extends s.default.PureComponent{constructor(e){super(e),this.st4te={classes:e.classes,data:e.data,timeAgo:c.A,visible:e.visible,is_scrolling:e.is_scrolling,selected:e.selected,column_width:e.column_width,key:e.key,id:e.id,rowIndex:e.rowIndex,columnIndex:e.columnIndex,style:e.style||{},_history:d.Vv,_root:void 0,_has_been_visible:!1}}componentWillReceiveProps(e){var t=!this.st4te._init,a=e.id!==this.st4te.id,s=e.is_scrolling!==this.st4te.is_scrolling,n=e.visible!==this.st4te.visible,i=e.column_width!==this.st4te.column_width,r=e.selected!==this.st4te.selected,o=e.locales!==this.st4te.locales,l=()=>{};(t||n||a||s||i||r||o)&&this.setSt4te({...e,_has_been_visible:n||this.st4te._has_been_visible,_init:!0},(()=>{if(t||n||s||r||o)this.forceUpdate(l);else if(i)if(void 0!==this.st4te._root){var a=e.style;this.st4te._root.style.width=a.width+"px",this.st4te._root.style.height=a.height+"px"}else this.forceUpdate(l)}))}setSt4te=(e,t)=>{this.st4te=Object.assign(this.st4te,e),"function"==typeof t&&t()};_set_root_ref=e=>{null!==e&&this.setSt4te({_root:e})};_open_auhtor=e=>{this.st4te._history.push("/@"+e)};render(){const{classes:e,style:t,id:a,locales:n,selected:d,is_scrolling:f,_has_been_visible:g}=this.st4te,y=this.st4te.data||{},w=(y.upVotesNumber,y.upVotesNumber,y.downVotesNumber,y.downVotesNumber,parseFloat(21.5*Math.random()).toFixed(2)),b=parseFloat(1*w/3).toFixed(2),x=parseFloat(2*w/3).toFixed(2),v=y.author||{};return s.default.createElement(u.A,{key:a,className:e.card+(d?" Mui-selected":""),ref:this._set_root_ref,alignItems:"flex-start"},s.default.createElement(h.A,null,s.default.createElement(i.A,{alt:v.name,onClick:e=>{this._open_auhtor(v.username)},src:v.image})),s.default.createElement(p.A,{primary:s.default.createElement(s.default.Fragment,null,s.default.createElement(o.Ay,{title:"@"+(y.author||{}).username},s.default.createElement("span",{className:e.subheaderName,onClick:e=>{this._open_auhtor(v.username)}},(v||{}).name)),s.default.createElement("span",{style:{color:"#999"}}," said "),s.default.createElement(o.Ay,{arrow:!0,title:new Date(y.date).toLocaleDateString(n,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},s.default.createElement(_.A,{component:"span",variant:"body2",color:"textPrimary"},c.A.format(y.date||Date.now())))),secondary:s.default.createElement(s.default.Fragment,null,s.default.createElement(_.A,{component:"span",variant:"body2",color:"textSecondary"},y.body),s.default.createElement(o.Ay,{arrow:!0,title:"Curators: "+b+" PS + Author: "+x+" PS"},s.default.createElement(_.A,{component:"span",variant:"body2",color:"textSecondary",style:{color:"#666"}}," (Earned ",w," PS)")),s.default.createElement("div",null,s.default.createElement(r.A,{"aria-label":"Up-Vote"},s.default.createElement(l.A,{style:{transform:"rotate(-90deg)",color:"#999"}})),y.upVotesNumber,s.default.createElement(r.A,{"aria-label":"Down-Vote"},s.default.createElement(l.A,{style:{transform:"rotate(90deg)",color:"#999"}})),y.downVotesNumber,s.default.createElement("span",{style:{float:"right"}},s.default.createElement(o.Ay,{arrow:!0,title:"Show all replies"},s.default.createElement("span",{style:{cursor:"pointer",color:"#666"}},"X Replies")),s.default.createElement(o.Ay,{arrow:!0,title:"Reply to the comment"},s.default.createElement(r.A,{"aria-label":"Reply to comment"},s.default.createElement(m.A,{style:{color:"#333"}}))))))}))}}const g=(0,n.default)((e=>({card:{width:"100%","& .MuiAvatar-root":{cursor:"pointer",borderRadius:"12px"}},subheaderName:{color:"#fff",cursor:"pointer"},subheaderBy:{color:"#aaa"},subheaderDate:{color:"#ddd"},image:{width:"100%",borderRadius:"12px",cursor:"pointer",userSelect:"none",contain:"style layout"},payout:{marginLeft:"auto",marginRight:12,color:e.palette.primary.actionLighter,fontSize:"16px",marginBottom:"4px",fontWeight:"bold"},actions:{color:"#666"},cardHeader:{"& .MuiCardHeader-title":{fontWeight:"bold",fontFamily:'"Industry Book", "Normative Pro"',color:"#fff",cursor:"pointer"}}})))(f)},61990:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{A:()=>c});var n=a(15299),i=a(23308),r=e([i]);const o=(0,(i=(r.then?(await r)():r)[0]).Y)();class l extends n.default.PureComponent{constructor(e){super(e),this.st4te={className:e.className,items:e.items,keyMapper:e.keyMapper,image:e.image,children:e.children,ids:(e.items||[]).map((e=>e.id)).join("-"),itemsWithSizes:[],itemsWithSizesComputed:[]}}setSt4te(e,t){this.st4te=Object.assign(this.st4te,e||{}),"function"==typeof t&&t()}componentWillReceiveProps(e){let{items:t,image:a}=e;const s=(t||[]).map((e=>e.id)).join("-"),n=s!==this.st4te.ids,i=s.startsWith(this.st4te.ids)&&s!==this.st4te.ids,r=n?i?[...this.st4te.itemsWithSizes]:new Array(t.length):[...this.st4te.itemsWithSizes],o=n?i?[...this.st4te.itemsWithSizesComputed,...new Array(t.length-this.st4te.itemsWithSizesComputed.length).fill(!1)]:new Array(t.length).fill(!1):[...this.st4te.itemsWithSizesComputed];this.setSt4te({...e,ids:s,itemsWithSizes:r,itemsWithSizesComputed:o},(()=>{n?this._process_all_sizes(t,a):this.maybe_render()}))}_process_all_sizes(e,t){const a=e.map(((e,a)=>this.st4te.itemsWithSizesComputed[a]?null:o.get_new_img_obj(t(e)).then((t=>({index:a,item:e,size:t}))))).filter(Boolean);Promise.all(a).then((e=>{let{itemsWithSizes:t,itemsWithSizesComputed:a}=this.st4te;e.forEach((({index:e,item:s,size:n})=>{t[e]={size:n,item:s},a[e]=!0})),this.setSt4te({itemsWithSizes:t,itemsWithSizesComputed:a},(()=>{this.maybe_render()}))})).catch((e=>{console.error("Failed to process all image sizes:",e)}))}maybe_render(){const{items:e,itemsWithSizesComputed:t}=this.st4te;(t||[]).filter(Boolean).length===(e||[]).length&&this.forceUpdate()}render(){const{itemsWithSizes:e,children:t,className:a}=this.st4te;return n.default.createElement("div",{className:a},t(e))}}const c=l;s()}catch(e){s(e)}}))},6850:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var s=a(15299),n=a(79626),i=a(96746),r=a(39870),o=a(65816),l=a(68016),c=a(30240),d=a(5696);class h extends s.default.PureComponent{constructor(e){super(e),this.state={classes:e.classes,open:e.open,date:e.date,username:e.username,name:e.name}}componentWillReceiveProps(e,t){this.setState(e,this.forceUpdate)}render(){const{classes:e,open:t,date:a,username:n,name:h}=this.state;return s.default.createElement(r.A,{className:e.dialog,maxWidth:"sm",disablePortal:!0,fullWidth:!0,keepMounted:!1,open:t,scroll:"paper",onClose:this.props.onClose},s.default.createElement(d.A,null,"Licensed Under The Following Terms"),s.default.createElement("div",{className:e.dialogBody},s.default.createElement(l.A,{className:e.dialogBody},s.default.createElement(c.A,null,s.default.createElement("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},`PIXA LICENSE 0.1 Copyright (c) ${new Date(a).getFullYear()} https://pixagram.io/@${n} (${h})\n\nI) DEFINITIONS\n\nThe following terms shall have the meanings indicated:\n\n - “WORK” or “ARTWORK” refers to the digital artwork covered by this license.\n - “AUTHOR” refers to the individual or entity who created and owns the copyright to the WORK.\n - “OWNER” refers to the person or entity that holds a valid NFT representing or associated with the WORK.\n - “THIRD PARTY” refers to anyone who is neither the AUTHOR nor the OWNER.\n\nII) COPYRIGHT NOTICE\n\nCopyright (C) [YEAR], [AUTHOR NAME]. All rights reserved except as stated in this license.\n\nIII) AUTHOR’S RIGHTS\n\nThe AUTHOR retains all copyright and moral rights in the WORK, including the right to reproduce, modify, distribute, license, and otherwise exploit the WORK in any format or medium.\n\nIV) OWNER’S RIGHTS AND CONDITIONS\nThe OWNER is granted a worldwide, non-exclusive right to use, copy, display, and adapt the WORK solely for personal or private purposes. This right exists only while the OWNER legitimately holds the NFT linked to the WORK.\n\nFor any commercial use of the WORK, the OWNER must:\n\n a) Give clear attribution to the AUTHOR, for example: “Artwork by [AUTHOR NAME], licensed under the PIXA LICENSE 0.1. Owned by [OWNER].”\n b) Avoid any statement or implication that the AUTHOR endorses the OWNER or any product or service, unless expressly permitted in writing.\n c) If the OWNER transfers the NFT to a new holder, the new holder becomes the OWNER and is subject to these same terms.\n\nV) THIRD-PARTY RIGHTS AND LIMITATIONS\n\nTHIRD PARTIES may view and share the WORK for non-commercial purposes only, provided they:\n\n a) Credit the AUTHOR by name (if known) and reference “PIXA LICENSE 0.1.”\n b) Preserve all copyright notices included with the WORK.\n c) THIRD PARTIES who do not own the NFT are prohibited from using the WORK for commercial purposes, unless they obtain separate written permission from the AUTHOR.\n\nVI) PRESERVATION OF LICENSE NOTICE\n\nWhen redistributing, displaying, or copying the WORK beyond strictly private use, include a copy or a link to this PIXA LICENSE 0.1 text, so that recipients understand the terms.\n\nVII) DISCLAIMER OF WARRANTY\n\nTHE WORK IS PROVIDED “AS IS,” WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, WHETHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO IMPLIED WARRANTIES OF TITLE, NON-INFRINGEMENT, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE. ANY USE OF THE WORK IS AT YOUR SOLE RISK.\n\nVIII) LIMITATION OF LIABILITY\n\nIN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY CLAIM OR DAMAGES ARISING OUT OF OR RELATING TO THE WORK OR THIS LICENSE, UNDER ANY LEGAL THEORY, INCLUDING BUT NOT LIMITED TO CONTRACT, TORT, OR OTHERWISE.\n\nIX) TERMINATION\n\nA material breach of these terms immediately terminates all rights granted under this license. Upon termination, the breaching party must cease use, distribution, and display of the WORK. Termination does not affect the rights of other parties who remain in compliance with these terms.\n\nX) ENTIRE AGREEMENT\n\nThis license constitutes the complete agreement regarding the WORK among the AUTHOR, OWNER, and any THIRD PARTY. It replaces and supersedes all previous statements, understandings, or licenses regarding its subject matter.`))),s.default.createElement(o.A,null,s.default.createElement(i.A,{onClick:this.props.onClose,color:"primary",autoFocus:!0},"Close"))))}}const u=(0,n.default)((e=>({dialog:{[e.breakpoints.down("xs")]:{"& .MuiDialog-container .MuiDialog-paper":{margin:"0px 0px",maxHeight:"100%",borderRadius:0}}},dialogBody:{overflowY:"auto",display:"flex",flexDirection:"column"},breakAllWords:{wordBreak:"break-all"}})))(h)},40497:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{A:()=>S});var n=a(15299),i=a(79626),r=a(52706),o=a(65816),l=a(68016),c=a(96746),d=a(39870),h=a(54392),u=a(8728),p=a(36896),_=a(83182),m=a(69312),f=a(15776),g=a(94422),y=a(72572),w=a(44385),b=a(34274),x=a(69232),v=a(32163),A=e([b]);b=(A.then?(await A)():A)[0];const E=e=>({dropZone:{width:"100%",height:"100%",aspectRatio:"1/1",border:"2px dashed #666",textAlign:"center",verticalAlign:"middle",backgroundColor:"transparent",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 225ms"},dropZoneActive:{width:"100%",height:"100%",aspectRatio:"1/1",border:"2px solid #666",textAlign:"center",verticalAlign:"middle",backgroundColor:"rgba(255, 255, 255, 0.07)",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 25ms"}});class C extends n.default.Component{constructor(e){super(e),this.state={classes:e.classes,keepMounted:e.keepMounted||!1,open:e.open,_drop_ref:null,_preferred_size:"M",_title:"",_currentStep:0,_totalStep:3,_drag_file:{},_preview:{},_preview_kb:0,_previews:[],_canvas:{},_offscreen_canvas:{},_base64:"",_dropzone_active:!1,_tags:[],_message:"We maintains privacy and doesn't store uploaded images.",_close_confirm_close_open:!1,process:{name:"upload file",start:0,finish:0}}}componentWillReceiveProps(e){this.setState(e,(()=>{this.forceUpdate()}))}_resetProps=()=>{this.setState({_drop_ref:null,_preferred_size:"M",_title:"",_currentStep:0,_totalStep:3,_drag_file:{},_preview:{},_preview_kb:0,_previews:[],_canvas:{},_offscreen_canvas:{},_base64:"",_dropzone_active:!1,_message:"We maintains privacy and doesn't store uploaded images.",_close_confirm_close_open:!1,process:{name:"upload file",start:0,finish:0}},this.forceUpdate)};_setTags=e=>{this.setState({_tags:e.target.value.toString()},this.forceUpdate)};_drop_start=e=>{e.preventDefault(),e.stopPropagation();const t=this.state._dropzone_active;this.setState({_dropzone_active:!0},(()=>{t||this.forceUpdate()}))};_drop_end=e=>{e.preventDefault(),e.stopPropagation();const t=this.state._dropzone_active;this.setState({_dropzone_active:!1},(()=>{t&&this.forceUpdate()}))};_trigger_message=e=>{this.setState({_message:e},this.forceUpdate)};_handle_file_upload=async e=>{"dataTransfer"in e&&e.dataTransfer.files.length>0&&(e.preventDefault(),e.stopPropagation());const t=(e.target||{}).files||(e.srcElement||{}).files||(e.currentTarget||{}).files||((e.path||[])[0]||{}).files||(e.dataTransfer||{}).files||[],a=t[0]||null;let s=null;for(let e=0;e<t.length;e++)s=t[e],s.type.startsWith("image/")&&(e=t.length);if(null===s&&null===a)this._trigger_message("Looks like I can't get your file as something is erroneous.",5700);else if(null!==s){Boolean("image/png"===s.type)||s.type;const e=await(0,b.E)(s,512,512,128);if(e instanceof ImageData)this._trigger_message("The image appears to be already optimized!"),this.setState({_previews:[{name:"default",imageData:e}],_title:"",_currentStep:1,process:{name:"upload file",start:0,finish:0}},(()=>{this.forceUpdate((()=>{this._set_size()}))}));else{const e=await(0,b.z)(s,1024,1024,void 0,this._trigger_message,this._set_process);this.setState({_previews:e.artworks,_title:e.prompt,_currentStep:1,process:{name:"upload file",start:0,finish:0}},(()=>{this.forceUpdate((()=>{this._set_size()}))}))}}};_setTitle=e=>{this.setState({_title:e.target.value},this.forceUpdate)};_set_process=(e,t,a)=>{const s=setInterval(this.forceUpdate.bind(this),250),n=setTimeout((()=>{this.state.process._interval===s&&clearInterval(this.state.process._interval)}),a-t);this.setState({process:{name:e,start:t,finish:a,_interval:s,_timout:n}},(()=>{this.forceUpdate()}))};_handle_size_change=e=>{this.setState({_preferred_size:e.target.value},(()=>{this._set_size()}))};_set_canvas_ref=e=>{if(void 0===e)return this._set_size();if(null==e)return this._set_size();if(void 0===e.width)return this._set_size();if(null==e.width)return this._set_size();if("function"==typeof e.getContext){var t=e;t.context=e.getContext("2d"),this.setState({_canvas:t},(()=>{this._set_size()}))}};_set_size=()=>{this.state._previews.forEach((e=>{1!==this.state._previews.length&&e.name.toUpperCase()!==this.state._preferred_size.toUpperCase()||this.setState({_preview:e.imageData},(()=>{this.state._canvas.width=this.state._preview.width,this.state._canvas.height=this.state._preview.height,this.state._canvas.context.putImageData(this.state._preview,0,0),(0,x.A)((()=>Promise.all([a.e("src_js_utils_encodeImage_js"),a.e("src_js_utils_png_quant_js")]).then(a.bind(a,15656)))).then((({encodeIMG:e})=>{e(this.state._preview,"WEBP",!0).then((e=>{this.setState({_base64:e},this.forceUpdate)}))}))}))}))};download_artwork=()=>{let e=document.createElement("a");e.download="Pixagram.webp",e.href=this.state._base64,e.click(),e.remove()};_set_drop_ref=e=>{null!=e&&this.setState({_drop_ref:e},(()=>{this.state._drop_ref.addEventListener("drop",this._handle_file_upload.bind(this)),this.state._drop_ref.addEventListener("dragenter",this._drop_start.bind(this)),this.state._drop_ref.addEventListener("dragover",this._drop_start.bind(this)),this.state._drop_ref.addEventListener("dragleave",this._drop_end.bind(this)),this.state._drop_ref.addEventListener("dragend",this._drop_end.bind(this))}))};_backOrCancel=e=>{parseInt(this.state._currentStep)<=1?e?this.close_confirm():this.setState({_close_confirm_close_open:!0},this.forceUpdate):this.setState({_currentStep:parseInt(this.state._currentStep)-1},this.forceUpdate)};request_close=()=>{this.setState({_close_confirm_close_open:!0},this.forceUpdate)};_nextOrFinish=()=>{2===parseInt(this.state._currentStep)?(this._resetProps(),this.props.onClose()):this.setState({_currentStep:parseInt(this.state._currentStep)+1},this.forceUpdate)};_open_link=e=>{window.open(e,"_blank")};close_confirm_close=()=>{this.setState({_close_confirm_close_open:!1},(()=>{this.forceUpdate()}))};close_confirm=()=>{this.setState({_close_confirm_close_open:!1},(()=>{this.forceUpdate((()=>{this._resetProps(),this.props.onClose()}))}))};render(){const{classes:e,_title:t,_preferred_size:a,_currentStep:s,_totalStep:i,open:b,keepMounted:x,_preview:A,_dropzone_active:E,process:C,_base64:S,_tags:k,_previews:I,_message:R,_close_confirm_close_open:P}=this.state,{name:M,start:T,finish:U}=C;Math.round(s/i*100);let z=null,O=U-T,N=Date.now()-T,D=N/O,B=O>N,W=((S||"").length||0)/1e3*3/4;switch(s.toString()){case"0":z=n.default.createElement("form",{noValidate:!0,autoComplete:"off",ref:this._set_drop_ref,style:{position:"relative"}},n.default.createElement("div",{style:{borderRadius:"12px"},className:E?e.dropZoneActive:e.dropZone},n.default.createElement(u.A,{onChange:this._handle_file_upload,accept:"image/*",style:{display:"none",position:"absolute"},id:"button-file-dialog-secondary",type:"file"}),n.default.createElement("div",{style:{transform:"translate(-50%, -50%)",top:"50%",position:"absolute",display:"inline"}},n.default.createElement(c.A,{disabled:B||"upload file"!=M,component:"label",htmlFor:"button-file-dialog-secondary",onClick:this._handle_file_upload},n.default.createElement("span",{style:{fontWeight:"bold",fontSize:"24px",verticalAlign:"super",color:"#999",marginRight:"16px"}},M||"Upload Image"),B||"upload file"!=M?n.default.createElement(p.A,{position:"relative",display:"inline-flex"},n.default.createElement(_.A,{variant:B?"determinate":"indeterminate",color:"#ffffff",value:Math.round(100*D)}),n.default.createElement(p.A,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},n.default.createElement(h.A,{variant:"caption",component:"div",color:"textSecondary"},B?`${Math.round(Math.min(100*D,100))}%`:"wait"))):n.default.createElement(w.A,{style:{color:"#666"}})),n.default.createElement("p",{style:{textAlign:"center",color:"#a7a7a7"}},R))));break;case"1":z=n.default.createElement("div",{noValidate:!0,autoComplete:"off",style:{position:"relative"}},n.default.createElement(m.A,{component:"fieldset",style:{padding:"8px 16px 64px 16px",position:"absolute",background:"linear-gradient(180deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",top:"0px"}},1===(I||0).length?n.default.createElement("p",null,"Your artwork is already optimized for pixel art"):n.default.createElement(r.A,{row:!0,defaultValue:"top","aria-label":"size",name:"SIZE",color:"primary",value:a,onChange:this._handle_size_change},n.default.createElement(f.A,{value:"XS",control:n.default.createElement(g.A,null),label:"XS"}),n.default.createElement(f.A,{value:"S",control:n.default.createElement(g.A,null),label:"S"}),n.default.createElement(f.A,{value:"M",control:n.default.createElement(g.A,null),label:"M"}),n.default.createElement(f.A,{value:"L",control:n.default.createElement(g.A,null),label:"L"}),n.default.createElement(f.A,{value:"XL",control:n.default.createElement(g.A,null),label:"XL"}),n.default.createElement(f.A,{value:"XXL",control:n.default.createElement(g.A,null),label:"XXL"}))),n.default.createElement("div",{className:"pixelated",style:{width:"100%"}},n.default.createElement("canvas",{style:{borderRadius:"12px",width:"100%"},ref:this._set_canvas_ref,width:A.width+"px",height:A.height+"px"})),n.default.createElement("div",{style:{padding:"64px 8px 16px 8px",textAlign:"right",position:"absolute",background:"linear-gradient(0deg, #101010cf 20%, #10101075 60%, #10101000 90%)",width:"100%",bottom:"0px"}},n.default.createElement(c.A,{variant:"text",color:"#ffffff88",onClick:this.download_artwork},"DOWNLOAD (",W.toFixed(2)," kB)"),n.default.createElement(c.A,{variant:"text",color:"#ffffff88",onClick:()=>this._open_link("https://pixa.pics/")},"OPEN EDITOR")));break;case"2":z=n.default.createElement("div",{noValidate:!0,autoComplete:"off"},n.default.createElement(y.A,{value:t,fullWidth:!0,label:"Title",variant:"outlined",onChange:this._setTitle}),n.default.createElement(y.A,{style:{marginTop:24,marginBottom:24},label:"Content",multiline:!0,rows:1,defaultValue:S,variant:"filled",disabled:!0,fullWidth:!0}),n.default.createElement(y.A,{style:{marginTop:24,marginBottom:24},label:"Description",multiline:!0,minRows:6,defaultValue:"",variant:"outlined",fullWidth:!0}),n.default.createElement(v.A,{fullWidth:!0,label:"Tags",placeholder:"Tags for content classification"}))}return n.default.createElement(n.default.Fragment,null,n.default.createElement(d.A,{open:b,maxWidth:"sm",fullWidth:!0,disablePortal:!1,onClose:this.request_close,keepMounted:!1},n.default.createElement(l.A,null,n.default.createElement(h.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Publisher"),z),n.default.createElement(o.A,{style:{textAlign:"right"}},n.default.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:()=>this._backOrCancel(Boolean(!B&&"upload file"==M))},parseInt(s)>0?"Back":"Cancel"),n.default.createElement(c.A,{variant:"contained",color:"primary",disabled:0===parseInt(s),onClick:this._nextOrFinish},2===parseInt(s)?"Publish":"Next"))),n.default.createElement(d.A,{open:P,maxWidth:"xs",disablePortal:!1,onClose:this.close_confirm_close,keepMounted:!1},n.default.createElement(l.A,null,n.default.createElement(h.A,{style:{marginTop:8,marginBottom:24},component:"h2",variant:"h6"},"Are you sure?"),n.default.createElement("p",null,"Your current artwork will be lost.")),n.default.createElement(o.A,{style:{textAlign:"right"}},n.default.createElement(c.A,{variant:"text",color:"primary",autoFocus:!0,onClick:this.close_confirm_close},"Cancel"),n.default.createElement(c.A,{variant:"contained",color:"primary",onClick:this.close_confirm},"Close"))))}}const S=(0,i.default)(E)(C);s()}catch(e){s(e)}}))},78725:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{A:()=>A});var n=a(15299),i=a(79626),r=a(20426),o=a(67520),l=a(84860),c=a(42460),d=a(88104),h=a(96232),u=a(67114),p=a(61428),_=a(39756),m=a(92059),f=a(37532),g=a(86982),y=a(47851),w=a(69205),b=e([m]);m=(b.then?(await b)():b)[0];const x=e=>({card:{width:"100%",borderRadius:"21px",marginTop:"24px",userSelect:"none",contain:"style layout paint","&.MuiCard-root":{overflow:"hidden",backgroundColor:"#101010",transition:"background-color 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms, filter 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},"&.MuiCard-root:hover":{backgroundColor:"#000000",contain:"inherit",boxShadow:"0px 2px 4px -1px rgb(0 0 0 / 20%), 0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%)",transition:"all 150ms cubic-bezier(0.4, 0, 0.2, 1) 5ms, filter 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},"&.shown":{filter:"opacity(1)"},"&.hidden":{filter:"opacity(0)"}},subheaderName:{color:"#fff",cursor:"pointer"},subheaderBy:{color:"#aaa"},subheaderDate:{color:"#ddd"},image:{width:"100%",cursor:"pointer",userSelect:"none",contain:"style layout paint"},payout:{marginLeft:"auto",marginRight:12,color:e.palette.primary.actionLighter,fontSize:"16px",marginBottom:"4px",fontWeight:"bold"},actions:{color:"#666"},cardHeader:{"& .MuiCardHeader-title":{fontWeight:"bold",fontFamily:'"Industry Book", "Normative Pro"',color:"#fff",cursor:"pointer"},"& .MuiAvatar-root":{cursor:"pointer",borderRadius:"16px",contain:"style layout paint"}}});class v extends n.default.PureComponent{constructor(e){super(e),this.st4te={classes:e.classes,data:e.data,timeAgo:f.A,renderer:e.renderer,nsfw:e.nsfw,size:e.size,visible:e.visible,is_scrolling:e.is_scrolling,selected:e.selected,image_height:e.image_height||0,image_width:e.image_width||0,column_width:e.column_width,key:e.key,id:e.id,rowIndex:e.rowIndex,columnIndex:e.columnIndex,style:e.style||{},_history:g.Vv,_init:!1,_canvas:void 0,_image:void 0,_imagePreload:void 0,_root:void 0,width:0,height:0,_has_been_visible:!1,_voted:0}}componentWillReceiveProps(e){var t=!this.st4te._init,a=e.renderer!==this.st4te.renderer,s=e.id!==this.st4te.id,n=e.is_scrolling!==this.st4te.is_scrolling,i=e.nsfw!==this.st4te.nsfw,r=e.visible!==this.st4te.visible,o=e.image_height!==this.st4te.image_height||e.image_width!==this.st4te.image_width,l=e.style.top!==this.st4te.style.top||e.style.left!==this.st4te.style.left||e.style.height!==this.st4te.style.height||e.style.width!==this.st4te.style.width||o,c=e.selected!==this.st4te.selected,d=e.locales!==this.st4te.locales,h=()=>{(i||o||a||t)&&this._set_size()};(t||a||r||s||n||i||l||c||d)&&this.setSt4te({...e,_has_been_visible:r||this.st4te._has_been_visible,_init:!0},(()=>{if(t||a||i||o||s||r||c||d)this.forceUpdate(h);else if(l)if(void 0!==this.st4te._root){var n=e.style;this.st4te._root.style.width=n.width+"px",this.st4te._root.style.height=n.height+"px",this.st4te._root.style.left=n.left+"px",this.st4te._root.style.top=n.top+"px"}else this.forceUpdate(h)}))}setSt4te=(e,t)=>{this.st4te=Object.assign(this.st4te,e),"function"==typeof t&&t()};_set_root_ref=e=>{null!==e&&this.setSt4te({_root:e})};setCanvasRef=e=>{if(null!=e&&void 0!==e.width&&null!=e.width&&"function"==typeof e.getContext&&(void 0===this.st4te._canvas||void 0===this.st4te._canvas.getContext)){var t=e.getContext("2d",{powerPreference:"high-performance"});this.setSt4te({_context2d:t},(()=>{}))}};_set_imgd=e=>{this.st4te._context2d.canvas.width=e.width,this.st4te._context2d.canvas.height=e.height,setTimeout((e=>{createImageBitmap(e).then((e=>{this.st4te._context2d.drawImage(e,0,0),e.close()}))}),0,e)};_render_hex=()=>{const e=Math.max(Math.min(12,600/this.st4te.size.width/2),3);(0,m.eu)(this.st4te.size.image_data,e,this._set_imgd,!0,this.st4te.id)};_render_smooth=()=>{const e=Math.max(Math.min(6,600/this.st4te.size.width|0),2);(0,m.px)(this.st4te.size.image_data,e,this._set_imgd,!0,this.st4te.id)};_render_crt=()=>{const e=Math.max(Math.min(6,600/this.st4te.size.width|0),2);(0,m.E6)(this.st4te.size.image_data,e,this._set_imgd,!0,this.st4te.id)};_render_square=()=>{this._set_imgd(this.st4te.size.image_data)};_set_size=()=>{"hexagon"===this.st4te.renderer?this._render_hex():"xbrz"===this.st4te.renderer?this._render_smooth():"crt"===this.st4te.renderer?this._render_crt():this._render_square()};_open_auhtor=e=>{this.st4te._history.push("/@"+e)};_can_not_open_nsfw=()=>{w.Le("Mature content is disabled"),setTimeout((()=>{w.Le("Edit your settings for enabling NSFW content")}),3250)};_upvote_toggle=()=>{this.setSt4te({_voted:1!==this.st4te._voted?1:0},(()=>this.forceUpdate()))};_downvote_toggle=()=>{this.setSt4te({_voted:-1!==this.st4te._voted?-1:0},(()=>this.forceUpdate()))};render(){const{classes:e,width:t,height:a,nsfw:s,renderer:i,style:m,id:g,image_height:w,image_width:b,locales:x,selected:v,is_scrolling:A,_voted:E,_has_been_visible:C}=this.st4te,S=this.st4te.data||{},k=S.upVotesNumber+(1===E?1:0),I=S.downVotesNumber+(-1===E?1:0),R=parseFloat((S.payout||"").replace("$","")),P=parseFloat(1*R/3).toFixed(2),M=parseFloat(2*R/3).toFixed(2),T=A?{pointerEvents:"none",touchActions:"pan-y"}:{},U=S.author||{};return n.default.createElement(r.A,{ref:this._set_root_ref,key:g,className:e.card+(v?" Mui-selected":"")+(C?" shown":" hidden"),style:{...m,...T}},n.default.createElement(o.A,{className:e.cardHeader,avatar:n.default.createElement(l.A,{onClick:e=>{this._open_auhtor(U.username)},src:U.image}),action:n.default.createElement(c.A,{onClick:e=>{this.props.onMenuClick(e,S)}},n.default.createElement(u.A,{style:{color:"#666"}})),title:n.default.createElement("span",{onClick:e=>this.props.onOpen(S)},S.title),subheader:n.default.createElement("span",null,n.default.createElement(h.Ay,{arrow:!0,title:new Date(S.date).toLocaleDateString(x,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},n.default.createElement("span",{className:e.subheaderDate},f.A.format(S.date||Date.now()))),n.default.createElement("span",{className:e.subheaderBy}," by "),n.default.createElement(h.Ay,{title:"@"+(S.author||{}).username},n.default.createElement("span",{className:e.subheaderName,onClick:e=>{this._open_auhtor(U.username)}},(U||{}).name)))}),n.default.createElement(y.A,{onContextMenu:e=>{e.preventDefault()},style:{width:"100%",borderRadius:"xbrz"===i?"12px":"0px"},key:(S.nsfw&&!s?"nsfw":"sfw")+"-"+i},n.default.createElement("canvas",{ref:this.setCanvasRef,className:e.image+("square"===i?" pixelated":""),width:t||b,height:a||w,onContextMenu:e=>{e.preventDefault()},onClick:e=>{!S.nsfw||s?this.props.onOpen(S):this._can_not_open_nsfw()},style:{filter:S.nsfw&&!s?"blur(24px)":"none",aspectRatio:`${t||b} / ${a||w}`,borderRadius:"xbrz"===i?"12px":"0px"}})),n.default.createElement(d.A,{disableSpacing:!0,style:e.actions},n.default.createElement(c.A,{"aria-label":"Up-Vote",onClick:this._upvote_toggle},n.default.createElement(p.A,{style:{transform:"rotate(-90deg)",color:E>0?"#eee":"#999"}})),n.default.createElement("span",{style:{color:E>0?"#eee":"#999"}},k),n.default.createElement(c.A,{"aria-label":"Down-Vote",onClick:this._downvote_toggle},n.default.createElement(p.A,{style:{transform:"rotate(90deg)",color:E<0?"#eee":"#999"}})),n.default.createElement("span",{style:{color:E<0?"#eee":"#999"}},I),n.default.createElement(h.Ay,{arrow:!0,title:"Curators: "+P+" PS + Author: "+M+" PS"},n.default.createElement("span",{className:e.payout},parseFloat(S.payout).toFixed(2)," ",n.default.createElement(_.A,{style:{width:"24px",height:"24px",verticalAlign:"bottom"}})))))}}const A=(0,i.default)(x)(v);s()}catch(e){s(e)}}))},23563:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var s=a(15299),n=a(79626),i=a(84630),r=a(19008),o=a(61466),l=a(77430),c=a(48085),d=a(68048),h=a(82133),u=a(41068),p=a(46577);class _ extends s.default.PureComponent{constructor(e){super(e),this.state={classes:e.classes,data:e.data,xy:e.xy||[]}}componentWillReceiveProps(e){this.setState(e,(()=>{this.forceUpdate()}))}render(){const{xy:e,classes:t}=this.state,a=0|e[0],n=0|e[1];return s.default.createElement(c.A,{className:t.menu,PaperProps:{style:{overflowY:"overlay",contain:"paint style layout",scrollBehavior:"smooth",userSelect:"none",pointerEvents:Boolean(n)||Boolean(a)?"all":"none"}},onContextMenu:function(e){e.preventDefault()},MenuListProps:{dense:!0},transitionDuration:{enter:125,exit:250},open:Boolean(n)||Boolean(a),onClose:this.props.onClose,disablePortal:!1,keepMounted:!0,anchorReference:"anchorPosition",anchorPosition:{top:0|n,left:0|a}},s.default.createElement(r.A,null,s.default.createElement(i.A,null,s.default.createElement(o.A,null,s.default.createElement(d.A,{fontSize:"small"})),s.default.createElement(l.A,{primary:"Favorite"})),s.default.createElement(i.A,null,s.default.createElement(o.A,null,s.default.createElement(h.A,{fontSize:"small"})),s.default.createElement(l.A,{primary:"Share"})),s.default.createElement(i.A,null,s.default.createElement(o.A,null,s.default.createElement(p.A,{fontSize:"small"})),s.default.createElement(l.A,{primary:"Votes"})),s.default.createElement(i.A,null,s.default.createElement(o.A,null,s.default.createElement(u.A,{fontSize:"small"})),s.default.createElement(l.A,{primary:"Details"}))))}}const m=(0,n.default)((e=>({})))(_)},28379:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{A:()=>oe});var n=a(15299),i=a(79626),r=a(20426),o=a(53058),l=a(6272),c=a(54392),d=a(73486),h=a(50384),u=a(29514),p=a(77430),_=a(71846),m=a(96232),f=a(4826),g=a(84860),y=a(42460),w=a(73546),b=a(67520),x=a(37532),v=a(88104),A=a(61428),E=a(39756),C=a(82293),S=a(99537),k=a(92059),I=a(86809),R=a(16526),P=a(69232),M=a(86982),T=a(70570),U=a(13045),z=a(70100),O=a(47625),N=a(61466),D=a(45152),B=a(27606),W=a(90820),F=a(11862),L=a(6850),j=a(15695),H=a(97214),V=a(7315),$=a(93367),q=a(42965),Y=a(83182),G=a(38627),K=a(16594),X=a(67264),J=a(69440),Q=a(7400),Z=a(72572),ee=a(95834),te=e([k]);let ae;function se(e,t){if(void 0===ae){try{"undefined"!=typeof OffscreenCanvas&&(ae=new OffscreenCanvas(e,t))}catch(a){ae=document.createElement("canvas"),ae.width=e,ae.height=t}return ae.ctx=ae.getContext("2d",{willReadFrequently:!0}),ae}return ae.width=e,ae.height=t,ae}async function ne(e){return new Promise((function(t,a){var s=new Image;s.onload=function(){var e=se(s.naturalWidth||s.width,s.naturalHeight||s.height),a=e.ctx;a.drawImage(s,0,0);var n=a.getImageData(0,0,e.width,e.height),i=new Uint32Array(n.data.buffer),r=new f.Colors(n.data.buffer).get_deduplicated_sorted_uint32a(),o={};new f.Colors(r.buffer).slice_uint32().forEach((e=>{o[e]=0}));for(var l=0,c=0|i.length;(0|l)<(0|c);l=l+1|0)o[i[0|l]]++;var d=Object.entries(o).map((e=>{var t=e[0],a=f.Color.new_uint32(t).hex,s=e[1];return{hex:a,percentage:Math.round(s/i.length*1e4)/100}})),h={imgd:a.getImageData(0,0,e.width,e.height),colors:d,width:e.width,height:e.height};t(h)},s.onabort=a,s.src=e}))}k=(te.then?(await te)():te)[0];const ie=e=>({comment:{width:"100%","& .MuiInputBase-input":{},"& .MuiInputLabel-root":{userSelect:"none"},"& .MuiInput-underline:after":{borderBottom:"2px solid #ffffff"},"& .MuiInput-underline:hover:not(.Mui-disabled):before":{borderBottom:"2px solid #bbbbbb"},"& .MuiInputBase-fullWidth":{width:"100%"}},backdrop:{zIndex:e.zIndex.drawer+1,backdropFilter:"blur(9px) grayscale(1)"},drawer:{width:384,[e.breakpoints.down("sm")]:{width:"100%"}},drawerPaper:{padding:"16px 16px"},colorBadges:{width:"100%",display:"flex",flexWrap:"wrap",gap:"5px",[e.breakpoints.down("sm")]:{gap:"4px"},justifyContent:"flex-start",padding:"12px 0px 24px 24px"},colorBadge:{display:"flex",width:24,height:24,borderRadius:"8px",cursor:"pointer"},cardHeader:{"&.MuiCardHeader-root":{backgroundColor:"#000",boxShadow:"0px 0px 6px 12px #000000"},"& .MuiCardHeader-title":{fontWeight:"bold",fontFamily:'"Industry Book", "Normative Pro"',color:"#fff",cursor:"pointer"},"& .MuiAvatar-root":{cursor:"pointer",borderRadius:"12px"}},subheaderName:{color:"#fff",cursor:"pointer"},subheaderBy:{color:"#aaa"},subheaderDate:{color:"#ddd"},image:{width:"100%",cursor:"pointer",userSelect:"none",contain:"style layout"},payout:{marginLeft:"auto",marginRight:12,color:e.palette.primary.actionLighter,fontSize:"16px",marginBottom:"4px",fontWeight:"bold"},cardActions:{backgroundColor:"#101010",position:"fixed",bottom:0,width:"100%",color:"#666",[e.breakpoints.down("sm")]:{padding:"0px 8px !important"}},hidden:{filter:"opacity(0)",transform:"scale(0.5)",transition:"transform 35ms cubic-bezier(0.4, 0, 0.2, 1) 15ms",contain:"paint size style layout"},appear:{filter:"opacity(1)",transform:"scale(1)",transition:"transform 260ms cubic-bezier(0.4, 0, 0.2, 1) 5ms",contain:"paint size style layout"},viewLeft:{width:"calc(100% - 480px)",position:"relative",[e.breakpoints.down("sm")]:{width:"100%"}},viewRight:{width:"480px",padding:"16px 16px 16px 0px",[e.breakpoints.down("sm")]:{width:"100%",height:"100%",position:"fixed",top:"0px",padding:"0px",transform:"translateY(0px)",transition:"transform 260ms cubic-bezier(0.4, 0, 0.2, 1) 5ms"}},viewRightHidden:{width:"480px",padding:"16px",[e.breakpoints.down("sm")]:{width:"100%",height:"100%",position:"fixed",bottom:"0px",transform:"translateY(calc(100% - 96px))",transition:"transform 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms"}},infoButton:{position:"absolute",right:16,bottom:16,display:"none",[e.breakpoints.down("sm")]:{display:"inherit"}},closeButton:{position:"absolute",top:16,right:16,display:"none",[e.breakpoints.down("sm")]:{display:"inherit"}},back:{cursor:"pointer",position:"absolute",left:0,top:"calc(50% - 64px)",width:128,height:128,lineHeight:"128px",verticalAlign:"middle",textAlign:"center",[e.breakpoints.down("sm")]:{width:80,height:80,top:"calc(50% - 40px)"}},forward:{cursor:"pointer",position:"absolute",right:0,top:"calc(50% - 64px)",width:128,height:128,lineHeight:"128px",verticalAlign:"middle",textAlign:"center",[e.breakpoints.down("sm")]:{width:80,height:80,top:"calc(50% - 40px)"}},arrowIcon:{color:"#ffffff24",width:72,height:72,margin:"28px",transition:"color 180ms cubic-bezier(0.4, 0, 0.2, 1) 5ms",[e.breakpoints.down("sm")]:{width:48,height:48,margin:"16px"},"&:hover":{color:"#ffffff60"}},card:{position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",minHeight:"100%",borderRadius:"32px !important",[e.breakpoints.down("sm")]:{borderRadius:"32px 32px 0px 0px !important","&.opened":{borderRadius:"0px 0px 0px 0px !important"},minHeight:"100%"},"& .MuiCardHeader-action":{margin:"0px !important"},"& .MuiAccordion-root.Mui-expanded":{margin:"0px !important"}},downloadButtonProgress:{color:"white",position:"absolute",top:-8,left:-8,zIndex:1},circle:{strokeLinecap:"round"},chipTags:{lineHeight:"34px",gap:"8px",width:"100%",display:"flex",padding:"0px",flexWrap:"wrap",justifyContent:"flex-start",marginTop:"12px","& .MuiChip-root":{cursor:"pointer",borderRadius:"12px",backgroundColor:"#1b1b1b",color:"#979797",transition:"background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},"& .MuiChip-root:hover":{backgroundColor:"#2a2a2a",color:"#e3e3e3"}},cardTabs:{backgroundColor:"#101010","& .MuiTab-root":{minWidth:"72px !important"},"& .MuiTab-textColorPrimary.Mui-selected":{backgroundColor:"transparent"},"& .MuiTab-textColorPrimary.Mui-selected .MuiTab-wrapper":{color:"#101010 !important"},"& .MuiTab-fullWidth":{backgroundColor:"transparent",color:"#989898",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",borderRadius:"21px"},"& .MuiTab-fullWidth:hover":{backgroundColor:"rgba(255,255,255,0.06)"},"& span.MuiTabs-indicator":{zIndex:"-1",height:"48px",backgroundColor:"#c7c7c7",borderRadius:"21px",transform:"scale3d(0.875, 0.75, 1)"},margin:"8px 16px 0px 16px",width:"calc(100% - 32px)",borderRadius:"21px",position:"fixed",top:0,left:0,zIndex:1,transition:"transform 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},collapse:{"&.MuiCollapse-entered":{minHeight:"72px !important"}},commentSendButton:{backgroundColor:"#ffffff17","&:hover":{backgroundColor:"#ffffff24"}}});class re extends n.default.PureComponent{constructor(e){super(e),this.st4te={classes:e.classes,keepMounted:e.keepMounted||!1,open:e.open,data:e.data,renderer:e.renderer,locales:e.locales,kb:0,type:"",_history:M.Vv,_authors:[],_tab_value:0,_view_element:{},_view_element_measurement:{},_canvas:null,_size:{},_card_ref:{},_download_loading:!1,_hidden:!0,_zoom_mode:0,_view_mobile_opened:!1,_view_right_mobile_enabled:(window.innerWidth||document.documentElement.clientWidth||(document.body||document.getElementsByTagName("body")[0]).clientWidth)<=960,metadata:{imgd:null,colors:[],width:0,height:0},_card_y_offset:0,_card_y_now:0,_card_y_previous:0,_card_y_moved_at:0,_license_dialog_opened:!1,_accounts:{},_comments:[{username:"primerz",body:"Really lovely!",date:Date.now()-6e4,upVotesNumber:6,downVotesNumber:0},{username:"chuckchuck",body:"It is so important for me to support your work, you are so awesome, and this pixel art looks so cool.",date:Date.now()-3e5,upVotesNumber:7,downVotesNumber:1},{username:"sophiajulio",body:"I understand, I made so much friends on this platform yet you are my bestie number one.",date:Date.now()-84e4,upVotesNumber:4,downVotesNumber:0},{username:"azal",body:"Cool!",date:Date.now()-528e4,upVotesNumber:17,downVotesNumber:2},{username:"technoania",body:"Super, I would love to hear from you.",date:Date.now()-768e4,upVotesNumber:8,downVotesNumber:1}]}}setSt4te(e,t){let a=Object.keys(e),s=0|a.length,n="";for(let t=0;(0|t)<(0|s);t=(t+1|0)>>>0)n=a[t].toString(),this.st4te[n]=e[n];"function"==typeof t&&t()}componentWillReceiveProps(e){var t=e.data.image!==this.st4te.data.image,a=!1===e.open&&this.st4te.open;const s=((e.data.image||"").length||0)/1e3*3/4,n=(e.data.image||"").startsWith("data:image/png;base64,")?"png":(e.data.image||"").startsWith("data:image/webp;base64,")?"webp":"unknown";this.setSt4te({...e,kb:s,type:n},(()=>{(a||t)&&this.setSt4te({_hidden:!0},(()=>{this.forceUpdate()})),t&&ne(e.data.image).then((e=>{setTimeout((()=>{this.setSt4te({metadata:e},(()=>{this._get_views(!0),this._computeSize()}))}),90)}))}))}swipeableViewScrollTop=()=>{let e=document.getElementsByClassName("react-swipeable-view-container").item(0).children.item(0);e.style.scrollBehavior="smooth",e.scrollTop=0};componentDidMount(){(0,P.A)((()=>a.e("src_js_data_authors_js").then(a.bind(a,60209)))).then((e=>{const t=e.default();let a=this.st4te._comments;a=a.map((e=>({...e,author:t[e.username]}))),this.setSt4te({_authors:t,_comments:a},(()=>{this._get_views(!0),this.forceUpdate()}))})),ne(this.st4te.data.image).then((e=>{this.setSt4te({metadata:e},(()=>{this._get_views(!0),this._computeSize()}))})),window.addEventListener("resize",this._computeSize)}componentWillUnmount(){window.removeEventListener("resize",this._computeSize)}_handleTabChange=(e,t)=>{this.setSt4te({_tab_value:t},(()=>{this.swipeableViewScrollTop(),this.forceUpdate()}))};_votesRenderer=({index:e,key:t,style:a})=>{const s=Object.entries(this.st4te._authors)[e][1];return n.default.createElement(h.A,{className:ie.row,key:t,style:a},n.default.createElement(u.A,null,n.default.createElement(m.Ay,{title:`@${s.username}`},n.default.createElement(g.A,{src:s.image,style:{borderRadius:"12px",cursor:"pointer"},className:"pixelated",onClick:e=>{this._open_auhtor(s.username)}}))),n.default.createElement(p.A,{primary:s.name,secondary:"0.1 PS with 100%"}))};_setViewRef=e=>{e&&"function"==typeof e.getBoundingClientRect&&this.setSt4te({_view_element:e},(()=>{this._computeSize()}))};_setZoom=()=>{this.setSt4te({_zoom_mode:this.st4te._zoom_mode+1&3},(()=>{this.forceUpdate()}))};_computeSize=()=>{const e=(window.innerWidth||document.documentElement.clientWidth||(document.body||document.getElementsByTagName("body")[0]).clientWidth)<=960;if(this.st4te._view_right_mobile_enabled!==e&&this.setSt4te({_view_right_mobile_enabled:e},(()=>{this.forceUpdate()})),"function"==typeof this.st4te._view_element.getBoundingClientRect&&this.st4te.metadata.width){const e=this.st4te._view_element.getBoundingClientRect();this.setSt4te({_view_element_measurement:e},(()=>{const{metadata:e,_view_element_measurement:t}=this.st4te,a=Math.min((t.width-32)/e.width,(t.height-32)/e.height),s={width:e.width*a|0,height:e.height*a|0};this.setSt4te({_size:s},(()=>{this._set_size()}))}))}};setCanvasRef=e=>{if(void 0!==e&&null!=e&&void 0!==e.width&&null!=e.width&&"function"==typeof e.getContext){var t=e;t.context=e.getContext("2d",{willReadFrequently:!0}),this.setSt4te({_canvas:t},(()=>{this._set_size()}))}};_setMenuCardRef=e=>{e&&this.setSt4te({_card_ref:e},(()=>{this.st4te._card_ref.addEventListener("pointerdown",this._handle_card_pointer_down.bind(this)),this.st4te._card_ref.addEventListener("pointermove",this._handle_card_pointer_move.bind(this)),this.st4te._card_ref.addEventListener("pointerup",this._handle_card_pointer_up.bind(this)),this.st4te._card_ref.addEventListener("pointercancel",this._handle_card_pointer_up.bind(this)),this.st4te._card_ref.addEventListener("pointerout",this._handle_card_pointer_move.bind(this)),this.st4te._card_ref.addEventListener("pointerleave",this._handle_card_pointer_move.bind(this))}))};_handle_card_pointer_down=e=>{this.st4te._view_right_mobile_enabled&&this.setSt4te({_card_y_moved_at:Date.now(),_card_y_previous:e.pageY,_card_y_now:e.pageY,_card_y_offset:this.st4te._card_y_offset},(()=>{this.forceUpdate()}))};_handle_card_pointer_move=e=>{if(!this.st4te._view_right_mobile_enabled)return;const t=this.st4te._card_y_offset+(e.pageY-this.st4te._card_y_now),a=!this.st4te._view_mobile_opened&&this.st4te._view_right_mobile_enabled?Math.min(0,t):Math.max(0,t);this.setSt4te({_card_y_moved_at:Date.now(),_card_y_previous:this.st4te._card_y_now,_card_y_now:e.pageY,_card_y_offset:a},(()=>{this.forceUpdate()}))};_handle_card_pointer_up=e=>{if(!this.st4te._view_right_mobile_enabled)return;const t=!this.st4te._view_mobile_opened&&this.st4te._view_right_mobile_enabled;this.setSt4te({_card_y_previous:e.pageY,_card_y_now:e.pageY},(()=>{if(t&&this.st4te._card_y_offset<-20)this.setSt4te({_view_mobile_opened:!0,_card_y_previous:0,_card_y_now:0,_card_y_offset:0},(()=>{this.forceUpdate()}));else if(!t&&this.st4te._card_y_offset>20)this.setSt4te({_view_mobile_opened:!1,_card_y_previous:0,_card_y_now:0,_card_y_offset:0},(()=>{this.forceUpdate()}));else if(0!==this.st4te._card_y_offset&&(!t&&this.st4te._card_y_offset<160||t&&this.st4te._card_y_offset>-160)){const e=()=>{const a=this.st4te._card_y_offset>=0,s=t?-1:1,n=a?Math.min:Math.max;this.setSt4te({_card_y_offset:n(0,this.st4te._card_y_offset+s)},(()=>{this.forceUpdate((()=>{0!==this.st4te._card_y_offset&&requestAnimationFrame(e)}))}))};requestAnimationFrame(e)}}))};_set_imgd=(e,t)=>{if(t===this.st4te.data.id){const t=this.st4te._canvas;t.style.aspectRatio=`${e.width} / ${e.height}`,t.width=e.width,t.height=e.height,t.context.putImageData(e,0,0),this.setSt4te({_hidden:!1},(()=>{this.forceUpdate()}))}};_download_with_watermark=()=>{this.setSt4te({_download_loading:!0},(()=>{this.forceUpdate()})),(0,P.A)((()=>a.e("src_js_utils_watermark_js").then(a.bind(a,93984)))).then((e=>{const t=t=>{e.default(t,"@"+this.st4te.data.author.username,new Date(this.st4te.data.date).getFullYear(),this.st4te.format.toUpperCase()).then((e=>{let t=document.createElement("a");t.href=e,t.download="Artwork_From_@"+this.st4te.data.author.username+"_Printed_Using_"+this.st4te.renderer.toUpperCase()+"."+(""+this.st4te.format).toLowerCase(),t.style.display="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t),this.setSt4te({_download_loading:!1},(()=>{this.forceUpdate()}))}))};let a=1,s=this.st4te.metadata.imgd;s&&("hexagon"===this.st4te.renderer?(a=Math.max(Math.min(32,2*Math.ceil(this.st4te._size.width/this.st4te.metadata.width)),3),(0,k.eu)(s,a,(e=>{t(e)}),!0,4294967295*Math.random()|0)):"xbrz"===this.st4te.renderer?(a=Math.max(Math.min(32,3*Math.ceil(this.st4te._size.width/this.st4te.metadata.width)),2),(0,k.px)(s,a,(e=>{s.width*a-128<e.width&&t(e)}),!0,4294967295*Math.random()|0)):"crt"===this.st4te.renderer?(a=Math.max(Math.min(6,3*Math.ceil(this.st4te._size.width/this.st4te.metadata.width)),2),(0,k.E6)(s,a,(e=>{t(e)}),!0,4294967295*Math.random()|0)):(a=Math.max(Math.min(32,3*Math.ceil(this.st4te._size.width/this.st4te.metadata.width)),2),(0,k.R2)(s,a,(e=>{t(e)}),!0,4294967295*Math.random()|0)))}))};_render_hex=()=>{const e=""+this.st4te.data.id,t=Math.max(Math.min(32,Math.ceil(this.st4te._size.width/this.st4te.metadata.width/2)),3);(0,k.eu)(this.st4te.metadata.imgd,t,(t=>{this._set_imgd(t,e)}),!0,4294967295*Math.random()|0)};_render_smooth=()=>{const e=""+this.st4te.data.id,t=Math.max(Math.min(32,Math.ceil(this.st4te._size.width/this.st4te.metadata.width)),2);(0,k.px)(this.st4te.metadata.imgd,t,(t=>{this._set_imgd(t,e)}),!0,4294967295*Math.random()|0)};_render_crt=()=>{const e=""+this.st4te.data.id,t=Math.max(Math.min(6,Math.ceil(this.st4te._size.width/this.st4te.metadata.width)),2);(0,k.E6)(this.st4te.metadata.imgd,t,(t=>{this._set_imgd(t,e)}),!0,4294967295*Math.random()|0)};_render_square=()=>{const e=""+this.st4te.data.id;this._set_imgd(this.st4te.metadata.imgd,e)};_set_size=()=>{this.st4te.metadata.imgd&&("hexagon"===this.st4te.renderer?this._render_hex():"xbrz"===this.st4te.renderer?this._render_smooth():"crt"===this.st4te.renderer?this._render_crt():this._render_square())};_set_menu_open=()=>{this.setSt4te({_view_mobile_opened:!0},(()=>{this.forceUpdate((()=>{this.swipeableViewScrollTop()}))}))};_set_menu_close=()=>{this.st4te._view_right_mobile_enabled?this.setSt4te({_view_mobile_opened:!1},(()=>{this.forceUpdate((()=>{this.swipeableViewScrollTop()}))})):(this.props.onClose(),this.swipeableViewScrollTop())};_onRequestClose=()=>{const{_view_mobile_opened:e,_view_right_mobile_enabled:t}=this.st4te;e&&t?this._set_menu_close():this.props.onClose()};_open_auhtor=e=>{this.st4te._history.push("/@"+e)};_set_tag_naviguation=e=>{this.st4te._history.push("/trending/"+e),this.props.onClose()};_handle_open_license_dialog=()=>{this.setSt4te({_license_dialog_opened:!0},(()=>{this.forceUpdate()}))};_handle_close_license_dialog=()=>{this.setSt4te({_license_dialog_opened:!1},(()=>{this.forceUpdate()}))};_download_artwork=()=>{let e=document.createElement("a");e.href=this.st4te.data.image,e.download=this.st4te.data.title+"."+this.st4te.type,e.style.display="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e)};_get_views=(e=!1)=>{const t=[0,1,2];return(e||void 0===this._views)&&(this._views=t.map((e=>this._get_view(e)))),this._views};_get_view=e=>{let t=null;const{classes:a,metadata:s,_tab_value:i,_authors:r,kb:o,type:u,_comments:_}=this.st4te,f=["pixa-selfie","lifestyle","hype","demo-tag","be-yourself"];switch(e||i){case 0:t=n.default.createElement(n.default.Fragment,null,n.default.createElement(c.A,{variant:"body2",color:"textSecondary",component:"p",style:{marginTop:16}},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc auctor nec ante ac aliquam. Nullam auctor commodo ex. In euismod bibendum tellus nec interdum. Nulla mattis quis nibh vel mattis. Vivamus ornare faucibus odio. Mauris sit amet sem posuere, tincidunt eros ac, imperdiet leo. Etiam pharetra suscipit pulvinar. Etiam quis finibus ex, id gravida libero. Duis imperdiet massa sit amet enim posuere porttitor nec eu velit. Proin est magna, pretium et tortor eu, suscipit feugiat leo."),n.default.createElement("div",{className:a.chipTags},f.map(((e,t)=>n.default.createElement(T.A,{key:"#".concat(e.concat(t.toString(10))),label:"#".concat(e.toLowerCase()),onClick:()=>this._set_tag_naviguation(e.toLowerCase())})))),n.default.createElement(d.A,null,n.default.createElement(D.A,{disableSticky:!0},"Image"),n.default.createElement(h.A,null,n.default.createElement(N.A,null,n.default.createElement(O.A,null)),n.default.createElement(p.A,null,s.width,"px Width")),n.default.createElement(h.A,null,n.default.createElement(N.A,null,n.default.createElement(z.A,null)),n.default.createElement(p.A,null,s.height,"px Height")),n.default.createElement(h.A,null,n.default.createElement(N.A,null,n.default.createElement(U.A,null)),n.default.createElement(p.A,null,s.colors.length," Colors")),n.default.createElement("div",{className:a.colorBadges},s.colors.map(((e,t)=>n.default.createElement(m.Ay,{key:e.hex,arrow:!0,interactive:!0,title:e.hex+" ("+e.percentage+"%)"},n.default.createElement("div",{className:a.colorBadge,style:{backgroundColor:e.hex}}))))),n.default.createElement(D.A,{disableSticky:!0},"Artwork"),n.default.createElement(m.Ay,{title:"Download the original image"},n.default.createElement(h.A,{onClick:this._download_artwork,style:{cursor:"pointer"}},n.default.createElement(N.A,null,n.default.createElement(W.A,null)),n.default.createElement(p.A,null,u.toUpperCase()," of ",o.toFixed(2)," kB"))),n.default.createElement(m.Ay,{title:"View the artwork's license"},n.default.createElement(h.A,{onClick:this._handle_open_license_dialog,style:{cursor:"pointer"}},n.default.createElement(N.A,null,n.default.createElement(F.A,null)),n.default.createElement(p.A,null,"PIXA LICENSE 0.1")))));break;case 1:t=n.default.createElement(d.A,null,_.map(((e,t)=>n.default.createElement(G.A,{id:t,key:t,data:e}))));break;case 2:t=n.default.createElement(c.A,{variant:"body2",color:"textSecondary",component:"p"},"Feature available at the launch.");break;case 3:t=n.default.createElement(C.A,{disableHeight:!0},(({width:e})=>n.default.createElement(S.Ay,{noRowsRenderer:()=>{},scrollToIndex:()=>{},height:160,overscanRowCount:1,rowCount:Object.keys(r).length,rowHeight:72,rowRenderer:this._votesRenderer,width:e})))}return n.default.createElement(l.A,{key:"view-"+(e||i),style:{paddingBottom:i<2?64:0,display:"inline-block",overflow:"overlay",width:"100%",flexGrow:"1",paddingTop:72}},t)};render(){const{classes:e,open:t,data:a,metadata:s,locales:i,renderer:l,_hidden:c,_tab_value:d,_view_element_measurement:h,_size:u,_zoom_mode:p,_authors:f,_view_mobile_opened:C,_view_right_mobile_enabled:S,_card_y_offset:k,_license_dialog_opened:P,_download_loading:M,kb:T,type:U,_comments:z}=this.st4te,O=(a.upVotesNumber,a.upVotesNumber,a.downVotesNumber,a.downVotesNumber,parseFloat((a.payout||"0$").replace("$",""))||0),N=parseFloat(1*O/3).toFixed(2),D=parseFloat(2*O/3).toFixed(2);const W={left:(h.width-u.width)/2|0,top:(h.height-u.height)/2|0};return n.default.createElement(_.A,null,n.default.createElement(o.A,{keepMounted:!0,open:t,className:e.backdrop},n.default.createElement("div",{style:{width:"100%",height:"100%",display:"flex"}},n.default.createElement("div",{className:e.viewLeft,ref:this._setViewRef},n.default.createElement("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%"},onClick:this._onRequestClose}),n.default.createElement("div",{style:{top:12,left:12,position:"absolute",margin:"12px",display:"relative"}},n.default.createElement(y.A,{onClick:this._download_with_watermark},n.default.createElement(j.A,null)),M&&n.default.createElement(Y.A,{thickness:3,size:64,classes:{circle:e.circle},className:e.downloadButtonProgress})),n.default.createElement("div",{className:e.back,onClick:this.props.onPrevious},n.default.createElement(I.A,{style:{transform:"rotate(180deg)"},className:e.arrowIcon})),n.default.createElement("div",{className:e.forward,onClick:this.props.onNext},n.default.createElement(I.A,{className:e.arrowIcon})),n.default.createElement("div",{onClick:this._setZoom,style:{transform:`scale(${(1/1.314).toFixed(2)})`,animation:"transform 325ms cubic-bezier(0.4, 0, 0.2, 1) 25ms",position:"absolute",left:W.left,top:W.top,background:"transparent",display:"relative",margin:0}},n.default.createElement("img",{src:a.image,className:c?e.hidden:e.appear,style:{position:"absolute",width:u.width,height:u.height,filter:"blur(120px) brightness(1.2)"}}),n.default.createElement("img",{src:a.image,className:c?e.hidden:e.appear,style:{position:"absolute",width:u.width,height:u.height,filter:"blur(180px) brightness(1.3)"}}),n.default.createElement("canvas",{onContextMenu:e=>{e.preventDefault(),e.stopImmediatePropagation()},className:("square"===l?"pixelated":"")+" "+(c?e.hidden:e.appear),ref:this.setCanvasRef,style:{userSelect:"none",touchAction:"none",width:u.width,height:u.height,borderRadius:"xbrz"===l?"64px":"0px"}}))),n.default.createElement("div",{className:C||!S?e.viewRight:e.viewRightHidden},n.default.createElement(r.A,{className:e.card+(t&&C?" opened":" closed"),style:{transform:`translateY(${k}px)`}},n.default.createElement(J.A,{timeout:d<1?0:50,in:d<1,className:e.collapse},n.default.createElement(b.A,{ref:this._setMenuCardRef,className:e.cardHeader,avatar:n.default.createElement(g.A,{src:(a.author||{}).image,onClick:e=>{this._open_auhtor(a.author.username)}}),action:n.default.createElement(y.A,{onClick:e=>{C||!S?this._set_menu_close(e):this._set_menu_open()}},C||!S?n.default.createElement(w.A,{style:{color:"#666"}}):n.default.createElement(R.A,{style:{color:"#666"}})),title:a.title,subheader:n.default.createElement("span",null,n.default.createElement(m.Ay,{arrow:!0,title:new Date(a.date).toLocaleDateString(i,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},n.default.createElement("span",{className:e.subheaderDate},x.A.format(new Date(a.date||Date.now())))),n.default.createElement("span",{className:e.subheaderBy}," by "),n.default.createElement(m.Ay,{title:"@"+(a.author||{}).username},n.default.createElement("span",{className:e.subheaderName,onClick:e=>{this._open_auhtor(a.author.username)}},(a.author||{}).name)))})),n.default.createElement(K.A,{style:{transform:`translateY(${d<1?72:8}px)`},className:e.cardTabs,value:d,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:this._handleTabChange,fullwidth:!0},n.default.createElement(X.A,{icon:n.default.createElement(V.A,null)}),n.default.createElement(X.A,{icon:n.default.createElement(H.A,null)}),n.default.createElement(X.A,{icon:n.default.createElement($.A,null)})),n.default.createElement(Q.Ay,{ignoreNativeScroll:!0,containerStyle:{height:"100%"},animateHeight:!1,animateTransitions:!0,disableLazyLoading:!0,resistance:!0,springConfig:{tension:450,friction:60,duration:"120ms",easeFunction:"cubic-bezier(0.280, 0.840, 0.420, 1)",delay:"5ms"},index:d,onChangeIndex:e=>this._handleTabChange({},e),disabled:!1,key:"swipe-able-view"},this._get_views()),n.default.createElement(ee.A,{in:0===d,timeout:225},n.default.createElement(v.A,{disableSpacing:!0,className:e.cardActions},n.default.createElement(y.A,{"aria-label":"Up-Vote"},n.default.createElement(A.A,{style:{transform:"rotate(-90deg)",color:"#999"}})),a.upVotesNumber,n.default.createElement(y.A,{"aria-label":"Down-Vote"},n.default.createElement(A.A,{style:{transform:"rotate(90deg)",color:"#999"}})),a.downVotesNumber,n.default.createElement(m.Ay,{arrow:!0,title:"Curators: "+N+" PS + Author: "+D+" PS"},n.default.createElement("span",{className:e.payout},parseFloat(a.payout).toFixed(2)," ",n.default.createElement(E.A,{style:{width:"16px",height:"16px"}}))))),n.default.createElement(ee.A,{in:1===d,timeout:225},n.default.createElement("div",{style:{backgroundColor:"#101010",position:"fixed",bottom:0,width:"100%",padding:"12px 16px"}},n.default.createElement(B.A,{container:!0,spacing:1,alignItems:"center"},n.default.createElement(B.A,{item:!0},n.default.createElement(g.A,{style:{width:48,height:48,cursor:"pointer",borderRadius:"16px"},src:(a.author||{}).image})),n.default.createElement(B.A,{item:!0,xs:!0},n.default.createElement(Z.A,{fullWidth:!0,autoFocus:1===d,type:"text",className:e.comment,id:"comment-textfield",name:"comment-textfield",label:`Reply to @${(a.author||{}).username}`})),n.default.createElement(B.A,{item:!0},n.default.createElement(y.A,{className:e.commentSendButton},n.default.createElement(q.A,null))))))))),n.default.createElement(L.A,{type:"power-down",open:P,onClose:this._handle_close_license_dialog,username:(a.author||{}).username,name:(a.author||{}).name,date:a.date})))}}const oe=(0,i.default)(ie)(re);s()}catch(le){s(le)}}))},61428:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(15299),n=a(41728),i=a(32150);class r extends s.default.PureComponent{constructor(e){super(e)}render(){return s.default.createElement(n.A,this.props,s.default.createElement("path",{d:"M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M8.6,16.6L13.2,12L8.6,7.4L10,6L16,12L10,18L8.6,16.6Z"}))}}const o=(0,i.A)((e=>({})))(r)},11862:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(15299),n=a(41728),i=a(32150);class r extends s.default.PureComponent{constructor(e){super(e)}render(){return s.default.createElement(n.A,this.props,s.default.createElement("path",{d:"M9 10A3.04 3.04 0 0 1 12 7A3.04 3.04 0 0 1 15 10A3.04 3.04 0 0 1 12 13A3.04 3.04 0 0 1 9 10M12 19L16 20V16.92A7.54 7.54 0 0 1 12 18A7.54 7.54 0 0 1 8 16.92V20M12 4A5.78 5.78 0 0 0 7.76 5.74A5.78 5.78 0 0 0 6 10A5.78 5.78 0 0 0 7.76 14.23A5.78 5.78 0 0 0 12 16A5.78 5.78 0 0 0 16.24 14.23A5.78 5.78 0 0 0 18 10A5.78 5.78 0 0 0 16.24 5.74A5.78 5.78 0 0 0 12 4M20 10A8.04 8.04 0 0 1 19.43 12.8A7.84 7.84 0 0 1 18 15.28V23L12 21L6 23V15.28A7.9 7.9 0 0 1 4 10A7.68 7.68 0 0 1 6.33 4.36A7.73 7.73 0 0 1 12 2A7.73 7.73 0 0 1 17.67 4.36A7.68 7.68 0 0 1 20 10Z"}))}}const o=(0,i.A)((e=>({})))(r)},39756:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(15299),n=a(41728),i=a(32150);class r extends s.default.PureComponent{constructor(e){super(e)}render(){return s.default.createElement(n.A,this.props,s.default.createElement("path",{fill:"currentColor","fill-rule":"evenodd",d:"M17.62 3.63q.25 0 .5.04.16.02.32.08a1 1 0 0 1 .38.23q.08.08.13.17a2 2 0 0 1 .2.56l.03.48v4.88q0 .26-.04.5a2 2 0 0 1-.2.55 1 1 0 0 1-.29.29l-.24.11q-.15.05-.32.08-.23.03-.47.03h-6.8a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1zM1.6 24h7.22a1 1 0 0 0 1-1v-6.74a1 1 0 0 1 1-1h6.93q.63 0 1.25-.1a5 5 0 0 0 1.9-.7 4.2 4.2 0 0 0 1.72-2.14q.2-.5.28-1.04.1-.64.1-1.27V5.25q0-.63-.1-1.25a6 6 0 0 0-.7-1.9A4.3 4.3 0 0 0 20.06.38 5 5 0 0 0 19.02.1Q18.4 0 17.75 0H7a1 1 0 0 0-1 1v10.52H1.6a1 1 0 0 0-1 1V23a1 1 0 0 0 1 1m.79-11.25h1.65c.31 0 .57.26.57.57v9.16c0 .31-.26.57-.58.57H2.4a.57.57 0 0 1-.57-.57v-9.16c0-.31.26-.57.57-.57m4.18 0h1.64c.32 0 .57.26.57.57v9.16c0 .31-.25.57-.57.57H6.57a.57.57 0 0 1-.57-.57v-9.16c0-.31.26-.57.57-.57"}))}}const o=(0,i.A)((e=>({})))(r)},72339:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.r(t),a.d(t,{default:()=>A});var n=a(15299),i=a(86982),r=a(79626),o=a(69205),l=a(69232),c=a(16134),d=a(61990),h=a(78725),u=a(67264),p=a(16594),_=a(23563),m=a(9372),f=a(24488),g=a(40497),y=a(28379),w=e([d,h,g,y]);[d,h,g,y]=w.then?(await w)():w;class b extends c.a{_getEstimatedTotalHeight(){const{cellCount:e,cellMeasurerCache:t,width:a}=this.props,s=Math.floor(a/(t||{}).defaultWidth||0),n=this._positionCache.estimateTotalHeight(e,s,(t||{}).defaultHeight||0);return isFinite(n)?n:0}}const x=e=>({mainTab:{backgroundColor:"#101010","& .MuiTab-textColorPrimary.Mui-selected":{backgroundColor:"transparent"},"& .MuiTab-textColorPrimary.Mui-selected .MuiTab-wrapper":{color:"#101010 !important"},"& .MuiTab-fullWidth":{backgroundColor:"transparent",color:"#989898",transition:"all 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",borderRadius:"21px"},"& .MuiTab-fullWidth:hover":{backgroundColor:"rgba(255,255,255,0.06)"},"& span.MuiTabs-indicator":{zIndex:"-1",height:"48px",backgroundColor:"#c7c7c7",borderRadius:"21px",transform:"scale3d(0.875, 0.75, 1)"},margin:"21px 16px 21px 16px",width:"calc(100% - 32px)",borderRadius:"21px",position:"absolute",top:0,left:0,zIndex:1,transition:"transform 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms"},mainFab:{position:"fixed",right:16,bottom:16,transition:"transform 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms","& .MuiButtonBase-root":{borderRadius:"32px",background:"#f6f6f6",transition:"background 225ms cubic-bezier(0.4, 0, 0.2, 1) 75ms",mixBlendMode:"overlay","& .MuiTouchRipple-root":{filter:"opacity(1)","& .MuiTouchRipple-child":{backgroundImage:"\n                      radial-gradient(circle at 50% 50%,\n                        magenta 0%, blue 20%, cyan 40%, green 60%, yellow 80%, red 100%)"}}},"& .MuiButtonBase-root:hover":{background:"white",transition:"background 225ms cubic-bezier(0.4, 0, 0.2, 1) 5ms"},"& .MuiFab-extended":{padding:"0 24px",height:64,fontSize:"1.125rem"},"& .MuiFab-extended .MuiSvgIcon-root":{fontSize:"1.75rem"}},masonry:{overflow:"hidden overlay !important",contain:"style layout paint","& > .ReactVirtualized__Masonry":{zIndex:0,position:"absolute",margin:0,scrollBehavior:"smooth",overscrollBehavior:"none",boxSizing:"content-box !important",touchAction:"pan-y",willChange:"scroll-position !important",overflow:"hidden overlay !important",padding:"66px 12px 32px 16px","& > .ReactVirtualized__Masonry__innerScrollContainer":{top:"auto !important",left:"auto !important",overflow:"initial !important",position:"absolute !important",paddingBottom:"48px",boxSizing:"content-box"}}}});class v extends n.default.PureComponent{constructor(e){super(e),this.st4te={classes:e.classes,_settings:e.settings,_history:i.Vv,_pathname:e.pathname,_image_name_infographics:"",_infographics_fadein_time:300,_infographics_in:!0,_bii3_opacity:1,_join_now_button_update:0,_less_than_960w:!0,_less_than_690h:!0,sorting:0,menuCardXY:[],menuCardData:{},authors:[],_scrolling_reset_time_interval:300,_min_col_width:10,_max_col_width:1e3,_root_width:0,_root_height:0,_root:null,_window_width:0,_window_height:0,_average_img_ratio:1,_gutter_size:16,column_count:4,_column_width:356,_load_more_threshold:2e3,_overscan_by_pixels:6e3,_cell_positioner:null,_cell_positioner_config:null,_masonry:null,_cell_measurer_cache:null,_scroll_top:0,_intervals:[],_y:0,_top_scroll_of_el_by_index:[],_last_scroll_check_height:0,_height_of_el_by_index:[],_x_y_of_el_by_index:[],_selected_post_index:0,_post_closed_at:0,_posts:[],_create_artwork_dialog_open:!1,_artwork_open:!1,_post:{}}}componentWillMount(){window.addEventListener("resize",this._updated_dimensions),o.qf(),o.wn(0),setTimeout((()=>{o.wn(100)}),300);const e=setInterval(this._handle_masonry_scroll,this.st4te._scrolling_reset_time_interval);this.setSt4te({_intervals:[e]})}setSt4te(e,t){e=e||{},this.st4te=Object.assign(this.st4te,e),"function"==typeof t&&t()}componentDidMount(){this._updated_dimensions(),n.default.findDOMNode(this).addEventListener("keydown",this._handle_keydown),(0,l.A)((()=>a.e("src_js_data_authors_js").then(a.bind(a,60209)))).then((e=>{const t=e.default();(0,l.A)((()=>a.e("src_js_data_posts_js").then(a.bind(a,65138)))).then((e=>{const a=e.default();this.setSt4te({_posts:a.map((e=>(e.author=t[e.author],e)))},(()=>{this.forceUpdate((()=>{this._updated_dimensions()}))}))}))}))}_updated_dimensions=(e=Date.now())=>{const t=Date.now();!this.st4te._is_resizing&&e<=t-150?this.setSt4te({_is_resizing:!0},(()=>{let a=document.documentElement,s=document.body||document.getElementsByTagName("body")[0],n=window.innerWidth||a.clientWidth||s.clientWidth,i=window.innerHeight||a.clientHeight||s.clientHeight;const r=Boolean(n<960),o=Boolean(i<690),l=this.st4te._less_than_960w!==r||this.st4te._less_than_690h!==o;this.st4te._window_width;this.setSt4te({_window_width:n,_window_height:i,_load_more_threshold:i*(i/n)*2},(()=>{this.forceUpdate((()=>{const{_root:a,_gutter_size:s,_window_width:n,_window_height:i,data:r}=this.st4te;let{_column_count:o}=this.st4te;if(a){const t=a.getBoundingClientRect(),r=t.width,l=t.height;if(n<100||r<100||l<100||i<100)setTimeout((()=>{this._updated_dimensions(e)}),250);else{o=n>1920?6:n>1280?4:n>960?3:n>480?2:1;const e=Math.floor((t.width-(o+1)*s)/o);this.setSt4te({_overscan_by_pixels:i*(i/n)*8,_column_width:e,_column_count:o,_root_width:r,_root_height:l},(()=>{this._init_cell_measurements((()=>{this.setSt4te({_is_resizing:!1})}))}))}}else e>=t-150&&setTimeout((()=>{this._updated_dimensions(e)}),150)}))})),l&&this.setSt4te({_less_than_960w:r,_less_than_690h:o,_window_width:n,_window_height:i},(()=>{this.forceUpdate()}))})):e>t-150&&setTimeout((()=>{this._updated_dimensions(e)}),150)};componentWillReceiveProps(e){const t=e.settings._renderer!==this.st4te._settings._renderer,a=e.settings._nsfw_enabled!==this.st4te._settings._nsfw_enabled;this.setSt4te({_settings:e.settings},(()=>{(t||a)&&this.forceUpdate((()=>{this.st4te._masonry.forceUpdate()}))}))}componentWillUnmount(){this.st4te._intervals.forEach((e=>{clearInterval(e)}));try{window.removeEventListener("resize",this._updated_dimensions)}catch(e){}try{n.default.findDOMNode(this).removeEventListener("keydown",this._handle_keydown)}catch(e){}}_recompute_cell_measurements=(e=()=>{})=>{const{_cell_measurer_cache:t,_masonry:a,_cell_positioner:s,_column_count:n,_gutter_size:i,_column_width:r}=this.st4te;if(null!=t&&null!=a&&null!=s){t.clearAll();let o={cellMeasurerCache:t,columnCount:n,columnWidth:r,spacer:i};s.reset(o),a.clearCellPositions(),this.setSt4te({_cell_positioner:s,_cell_positioner_config:o,_cell_measurer_cache:t},(()=>{a.forceUpdate(e)}))}else this._init_cell_measurements(e)};_set_masonry_ref=e=>{null!==e&&this.setSt4te({_masonry:e},(()=>{this._init_cell_measurements()}))};_set_root_ref=e=>{null!==e&&this.setSt4te({_root:e})};_cell_renderer=e=>{const{index:t,key:a,parent:s,style:i,isScrolling:r}=e,{_root_height:o,_root_width:l,_masonry:d,_column_width:u,_cell_measurer_cache:p,_column_count:_,_settings:m,_selected_post_index:f}=this.st4te;if(void 0===d.props.itemsWithSizes[0|t])return;const{item:g,size:y}=d.props.itemsWithSizes[0|t],w=d._scrollingContainer.scrollTop,b=f===t;if(!y.height)return;const x=t%_,v=(t-x)/_,A=Math.ceil(u*(y.height/y.width))||0;i.width=0+u;let{_top_scroll_of_el_by_index:E,_height_of_el_by_index:C,_x_y_of_el_by_index:S}=this.st4te;const k=0+i.top,I=0+i.height,R=k+I;E[t]=k,C[t]=I,S[t]=[v,x];const P=o*(o/l),M=P+R>w&&k<w+o+P,T=m._selected_locales_code;return this.setSt4te({_top_scroll_of_el_by_index:E,_height_of_el_by_index:C}),n.default.createElement(c.dl,{cache:p,index:t,key:a,parent:s},n.default.createElement(h.A,{onOpen:this._open_artwork,locales:T,nsfw:m._nsfw_enabled,data:g,renderer:m._renderer,onMenuClick:this.openCardMenu,is_scrolling:r,selected:b,size:y,visible:M,column_width:u,image_height:A,image_width:u,id:y.id,key:a,rowIndex:v,columnIndex:x,style:i}))};_init_cell_measurements=(e=()=>{})=>{this.forceUpdate((()=>{if(null!=this.st4te._cell_measurer_cache&&null!=this.st4te._cell_positioner_config&&null!=this.st4te._cell_positioner)this._recompute_cell_measurements(e);else{const{_column_count:t,_column_width:a,_gutter_size:s}=this.st4te;let n=new c.jS({defaultHeight:600,defaultWidth:a,fixedWidth:!0}),i={cellMeasurerCache:n,columnCount:t,columnWidth:a,spacer:s},r=(0,c.wT)(i);this.setSt4te({_cell_measurer_cache:n,_cell_positioner:r,_cell_positioner_config:i},(()=>{this.forceUpdate((()=>{const t=(e=()=>{})=>{const{_masonry:a}=this.st4te;a?a.forceUpdate(e):setTimeout((()=>{t(e)}),5)};t(e)}))}))}}))};_next_current_post=()=>{const{_post:e,_posts:t,_masonry:a}=this.st4te,s=t.map((e=>e.id)).indexOf(e.id)+1,n=Math.max(0,Math.min(t.length-1,s)),{item:i,size:r}=a.props.itemsWithSizes[0|n];this.setSt4te({_post:i},(()=>{this.forceUpdate(),this._update_selected_post_index(n)}))};_previous_current_post=()=>{const{_post:e,_posts:t,_masonry:a}=this.st4te,s=t.map((e=>e.id)).indexOf(e.id)-1,n=Math.max(0,Math.min(t.length-1,s)),{item:i,size:r}=a.props.itemsWithSizes[0|n];this.setSt4te({_post:i},(()=>{this.forceUpdate(),this._update_selected_post_index(n)}))};_handle_keydown=e=>{let{_masonry:t,_selected_post_index:a,_post_closed_at:s,_posts:n,_post_author:i,_post_permlink:r,_column_count:o,_x_y_of_el_by_index:l}=this.st4te;if(!i&&!r&&s+300<Date.now()){const t=a%o,s=(a-t)/o;let i=t,r=s;switch(e.keyCode){case 40:r+=1,e.preventDefault();break;case 38:r-=1,e.preventDefault();break;case 37:i-=1;break;case 39:i+=1}r===s&&i===t||l.forEach(((e,t)=>{e[1]===i&&r===e[0]&&(a=t)})),a=Math.max(0,Math.min(n.length-1,a)),13===e.keyCode||this.st4te._selected_post_index!==a&&this._update_selected_post_index(a)}};_update_selected_post_index=(e,t=!1)=>{const{_post:a,_posts:s,_masonry:n}=this.st4te;if(!n)return;const i=n.props.itemsWithSizes,r=void 0!==e?e:a?s.map((e=>(e||{}).title)).indexOf(a.title):this.st4te._selected_post_index;this.setSt4te({_selected_post_index:r,_post:s[r],_post_img:(i[r]||{}).size},(()=>{this.forceUpdate((()=>{t?n.forceUpdate():this._scroll_to_index()}))}))};_scroll_to=e=>{const{_masonry:t}=this.st4te;t&&(void 0===e?(t._scrollingContainer.scrollTop=this.st4te._scroll_top,t.forceUpdate()):this.setSt4te({_scroll_top:e},(()=>{t._scrollingContainer.scrollTop=e,t.forceUpdate()})))};_scroll_to_index=e=>{const{_selected_post_index:t,_top_scroll_of_el_by_index:a,_height_of_el_by_index:s,_root_height:n}=this.st4te;let i=a[e=void 0!==e?e:t]+s[e]/2-n/3;this._scroll_to(i)};_handle_masonry_scroll=e=>{const{_load_more_threshold:t,_loading_posts:a}=this.st4te,{_masonry:s,_scroll_top:n,_y:i,_overscan_by_pixels:r}=this.st4te,o=s&&s._scrollingContainer?s._scrollingContainer.scrollTop:0,l=o-n,c=this.st4te._last_scroll_check_height+l,d=Math.abs(c)>r/2,h=Math.min(Math.max(-64,i-l),64);n===o&&i===h||this.setSt4te({_scroll_top:o,_y:h,_last_scroll_check_height:c},(()=>{(i!==h||d)&&this.setSt4te({_last_scroll_check_height:0},(()=>{this.forceUpdate()}))}))};handle_sorting_change=(e,t)=>{this.st4te.sorting!==t?this.setSt4te({sorting:t},(()=>{this.forceUpdate((()=>{this._scroll_to(0)}))})):this._scroll_to(0)};openCardMenu=(e,t)=>{this.setSt4te({menuCardXY:Int32Array.of(e.x-24,e.y-24),menuCardData:t},(()=>{this.forceUpdate()}))};closeCardMenu=()=>{this.setSt4te({menuCardXY:Int32Array.of(0,0),menuCardData:{}},(()=>{this.forceUpdate()}))};_open_create_artwork=()=>{this.setSt4te({_create_artwork_dialog_open:!0},(()=>{this.forceUpdate()}))};_create_artwork_dialog_close=()=>{this.setSt4te({_create_artwork_dialog_open:!1},(()=>{this.forceUpdate()}))};_open_artwork=e=>{this.setSt4te({_artwork_open:!0,_post:e},(()=>{this.forceUpdate()}))};_close_artwork=()=>{this.setSt4te({_artwork_open:!1,_post:{}},(()=>{this.forceUpdate()}))};render(){const{classes:e,_settings:t}=this.st4te;let{_less_than_960w:a,_less_than_690h:s,sorting:i,menuCardXY:r,menuCardData:o}=this.st4te,{_artwork_open:l,_post:c}=this.st4te;const{_window_width:h,_window_height:w,_cell_positioner:x,_cell_measurer_cache:v,_overscan_by_pixels:A,_y:E,_scroll_top:C,_posts:S,_create_artwork_dialog_open:k,_scrolling_reset_time_interval:I}=this.st4te,R=h>960?h-284-28:h-32,P=w-(h>960?96:64),M=t._selected_locales_code;return n.default.createElement(n.default.Fragment,null,n.default.createElement(p.A,{style:{transform:`translateY(${0>E&&C>72?-72:0}px)`},className:e.mainTab,value:i,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:this.handle_sorting_change,fullwidth:!0},n.default.createElement(u.A,{label:"Created"}),n.default.createElement(u.A,{label:"Hot"}),n.default.createElement(u.A,{label:"Trending"}),n.default.createElement(u.A,{label:"Promoted"})),n.default.createElement("div",{ref:this._set_root_ref},n.default.createElement(d.A,{className:e.masonry,items:S,image:e=>e.image,keyMapper:e=>e.id},(e=>n.default.createElement(b,{key:"masonry-extended",scrollTop:C,scrollingResetTimeInterval:I,height:P,cellCount:0|(e||[]).length,itemsWithSizes:e,keyMapper:t=>e[t].size.id,cellMeasurerCache:v,cellPositioner:x,cellRenderer:this._cell_renderer,overscanByPixels:A,ref:this._set_masonry_ref,width:R})))),n.default.createElement("div",{onClick:this._open_create_artwork,className:e.mainFab,style:{transform:`translateY(${0<E&&C>512?96:0}px)`}},n.default.createElement(f.A,{variant:"extended",size:"large"},n.default.createElement(m.A,{style:{marginRight:12}}),n.default.createElement("span",null,"CREATE"))),n.default.createElement(_.A,{xy:r,data:o,onClose:this.closeCardMenu}),n.default.createElement(g.A,{keepMounted:!0,open:k,onClose:this._create_artwork_dialog_close}),n.default.createElement(y.A,{renderer:t._renderer,nsfw:t._nsfw_enabled,format:t._format,data:c,open:l,locales:M,onClose:this._close_artwork,onPrevious:this._previous_current_post,onNext:this._next_current_post}))}}const A=(0,r.default)(x)(v);s()}catch(e){s(e)}}))},23138:(e,t,a)=>{"use strict";a.d(t,{A:()=>M});var s=a(82803),n=a(4826),i=(0,n.SIMDopeCreateConfAdd)({create:{new_of:!0},properties:{uint32:!0,laba:!0,rgbaon4bits:!0,rgbaon6bits:!0,rgbaon8bits:!0,rgbaon12bits:!0,rgbaon16bits:!0,skin:!0},methods:{simplify:!0,get_new_element:!0,get_use_element:!0,set_tail:!0,is_dark:!0,blend_first_with:!0,blend_first_with_tails:!0,blend_all:!0,euclidean_match_with:!0,manhattan_match_with:!0,cie76_match_with:!0,copy:!0}}),r=Math.fround,o=r(100),l=r(1.666);const{simdops:c,Color:d,Colors:h}=(0,n.SIMDopeCreate)(i),{minus_int:u,int_not_equal:p,plus_int:_,plus_uint:m,minus_uint:f,multiply_int:g,multiply_uint:y,multiply_uint_4:w,divide_uint:b,clamp_uint8:x,clamp_uint32:v,int_equal:A,uint_less:E,int_less:C,int_greater_equal:S,uint_not_equal:k,uint_less_equal:I,min_uint:R}=c;var P=function(e){if(e=e||{},!(this instanceof P))return new P(e);e.pxl_colors=e.pxl_colors||new Uint32Array(0),e.pxls=e.pxls||new Uint32Array(0),this.speed=e.speed||"auto",this.new_pxls_="buffer"in e.pxls?new Uint32Array(e.pxls.buffer):Uint32Array.from(e.pxls),this.new_pxl_colors_="buffer"in e.pxl_colors?new h(e.pxl_colors.buffer):new h(Uint32Array.from(e.pxl_colors).buffer);var t=0|this.new_pxl_colors_.length;this.new_pxl_colors_is_skin_mask_=new s.SetFixed(0|t),this.set_new_pxl_skin_mask(),this.best_color_number_=e.number_of_color,this.max_cluster_=t>65536?65537:t>16384?4097:t>4096?257:t>256?17:1,this.index_clusters_=new Array(this.max_cluster_),this.length_clusters_=new Uint32Array(this.max_cluster_),this.pxl_colors_usage_=new Uint32Array(t),this.all_index_clusters_=new Uint32Array(t),this.clean_pxl_colors_=new Uint32Array(t),this.clean_pxl_colors_lookup_={},this.t=0,this.is_skin_ops_=0,this.match_ops_=0,this.blend_ops_=0,this.remove_duplicate_ops_=0,this.simplify_ops_=0,this.classify_on_x_bits_ops_=0};Object.defineProperty(P.prototype,"set_is_skin_ops",{get:function(){return function(e){this.is_skin_ops_=(0|e)>>>0}}}),Object.defineProperty(P.prototype,"set_match_ops",{get:function(){return function(e){this.match_ops_=(0|e)>>>0}}}),Object.defineProperty(P.prototype,"set_blend_ops",{get:function(){return function(e){this.blend_ops_=(0|e)>>>0}}}),Object.defineProperty(P.prototype,"set_remove_duplicate_ops",{get:function(){return function(e){this.remove_duplicate_ops_=(0|e)>>>0}}}),Object.defineProperty(P.prototype,"set_simplify_ops",{get:function(){return function(e){this.simplify_ops_=e}}}),Object.defineProperty(P.prototype,"set_classify_on_x_bits_ops",{get:function(){return function(e){this.classify_on_x_bits_ops_=e}}}),Object.defineProperty(P.prototype,"get_is_skin_ops",{get:function(){return function(){return 0|this.is_skin_ops_}}}),Object.defineProperty(P.prototype,"get_match_ops",{get:function(){return function(){return 0|this.match_ops_}}}),Object.defineProperty(P.prototype,"get_blend_ops",{get:function(){return function(){return 0|this.blend_ops_}}}),Object.defineProperty(P.prototype,"get_remove_duplicate_ops",{get:function(){return function(){return 0|this.remove_duplicate_ops_}}}),Object.defineProperty(P.prototype,"get_simplify_ops",{get:function(){return function(){return this.simplify_ops_}}}),Object.defineProperty(P.prototype,"get_classify_on_x_bits_ops",{get:function(){return function(){return this.classify_on_x_bits_ops_}}}),Object.defineProperty(P.prototype,"reset_deduplicate",{get:function(){return function(e){this.clean_pxl_colors_lookup_={},this.pxl_colors_usage_.fill(0,0,0|e),this.clean_pxl_colors_.fill(0,0,0|e)}}}),Object.defineProperty(P.prototype,"index_of_color_within_cleaned",{get:function(){return function(e){return(0|this.clean_pxl_colors_lookup_[(0|e)>>>0])-1|0}}}),Object.defineProperty(P.prototype,"set_cleaned_pxl_colors",{get:function(){return function(e,t){this.clean_pxl_colors_[(0|e)>>>0]=(0|t)>>>0,this.clean_pxl_colors_lookup_[(0|t)>>>0]=(e+1|0)>>>0}}}),Object.defineProperty(P.prototype,"increase_color_usage",{get:function(){return function(e){this.pxl_colors_usage_[(0|e)>>>0]=(this.pxl_colors_usage_[(0|e)>>>0]+1|0)>>>0}}}),Object.defineProperty(P.prototype,"set_new_pxls",{get:function(){return function(e,t){this.new_pxls_[(0|e)>>>0]=(0|t)>>>0}}}),Object.defineProperty(P.prototype,"set_new_pxl_colors",{get:function(){return function(e){this.new_pxl_colors_=new h(this.clean_pxl_colors_.buffer.slice(0,w(0|e))),this.set_new_pxl_skin_mask()}}}),Object.defineProperty(P.prototype,"set_new_pxl_skin_mask",{get:function(){return function(){var e=new d(new ArrayBuffer(4)),t=0|this.new_pxl_colors_.length,a=0;for(this.new_pxl_colors_is_skin_mask_=new s.SetFixed(0|t);(0|a)<(0|t);a=a+1|0)this.new_pxl_colors_.get_use_element(0|a,e).skin&&this.new_pxl_colors_is_skin_mask_.add(0|a);this.set_is_skin_ops(this.get_is_skin_ops()+a|0)}}}),Object.defineProperty(P.prototype,"get_a_new_pxl_color_from_pxl_index",{get:function(){return function(e){return 4294967295&this.new_pxl_colors_.buffer_getUint32(this.new_pxls_[0|e])}}}),Object.defineProperty(P.prototype,"reset_cluster",{get:function(){return function(){var e=this.new_pxl_colors_.length;this.max_cluster_=e>65536?65537:e>16384?4097:e>4096?257:e>256?17:1,this.length_clusters_.fill(0,0,0|this.max_cluster);for(var t=0;(0|t)<(0|this.max_cluster);t=(t+1|0)>>>0)this.index_clusters_[0|t]=[]}}}),Object.defineProperty(P.prototype,"add_in_indexes_cluster",{get:function(){return function(e,t){this.index_clusters_[(0|e)>>>0].push((0|t)>>>0)}}}),Object.defineProperty(P.prototype,"set_all_cluster_indexes",{get:function(){return function(){for(var e=0,t=0;(0|e)<(0|this.max_cluster);e=(e+1|0)>>>0)this.all_index_clusters_.set(this.index_clusters_[(0|e)>>>0],(0|t)>>>0),t=(t+this.get_length_in_index_clusters(0|e)|0)>>>0}}}),Object.defineProperty(P.prototype,"get_length_in_index_clusters",{get:function(){return function(e){return(0|this.index_clusters_[(0|e)>>>0].length)>>>0}}}),Object.defineProperty(P.prototype,"get_in_cluster_lengths",{get:function(){return function(e){return(0|this.length_clusters_[(0|e)>>>0])>>>0}}}),Object.defineProperty(P.prototype,"get_an_index_in_clusters",{get:function(){return function(e){return(0|this.all_index_clusters_[0|e])>>>0}}}),Object.defineProperty(P.prototype,"get_a_color_usage",{get:function(){return function(e){return(0|this.pxl_colors_usage_[0|e])>>>0}}}),Object.defineProperty(P.prototype,"set_a_color_usage",{get:function(){return function(e,t){return this.pxl_colors_usage_[0|e]=(0|t)>>>0}}}),Object.defineProperty(P.prototype,"get_a_color_usage_percent",{get:function(){return function(e){return this.pxl_colors_usage_[0|e]/this.new_pxls_.length}}}),Object.defineProperty(P.prototype,"get_average_color_usage_percent",{get:function(){return function(e,t){t=0|((t|=0)<(e|=0)?this.pxl_colors_usage_.length:t);var a=0,s=0,n=0;for(s=0|e;(0|s)<(0|t);s=(s+1|0)>>>0)n=(0|this.get_an_index_in_clusters((0|s)>>>0))>>>0,a+=this.pxl_colors_usage_[0|n]/this.new_pxls_.length;return a/(t-e|0)}}}),Object.defineProperty(P.prototype,"get_a_new_pxl_color",{get:function(){return function(e){return this.new_pxl_colors_.get_new_element(0|e)}}}),Object.defineProperty(P.prototype,"is_pxl_color_skin",{get:function(){return function(e){return this.new_pxl_colors_is_skin_mask_.has(0|e)}}}),Object.defineProperty(P.prototype,"max_cluster",{get:function(){return 0|this.max_cluster_}}),Object.defineProperty(P.prototype,"new_pxls_length",{get:function(){return 0|this.new_pxls_.length}}),Object.defineProperty(P.prototype,"new_pxl_colors_length",{get:function(){return 0|this.new_pxl_colors_.length}}),Object.defineProperty(P.prototype,"best_color_number",{get:function(){return 0|this.best_color_number_}}),Object.defineProperty(P.prototype,"get_data",{get:function(){return function(){return Array.of(this.new_pxls_,this.new_pxl_colors_.subarray_uint32(0,this.new_pxl_colors_.length),{deduplicate:this.get_remove_duplicate_ops(),simplify:this.get_simplify_ops(),classify:this.get_classify_on_x_bits_ops(),skin:this.get_is_skin_ops(),blend:this.get_blend_ops(),match:this.get_match_ops()})}}}),P.prototype.output=function(e){e=e||"heap";var t=this.get_data();if("heap"==e){var a=new Uint32Array(2+t[0].length+t[1].length);return a[0]=0|t[0].length,a[1]=0|t[1].length,a.set(t[0],2),a.set(t[1],2+t[0].length),a.buffer}return t},P.prototype.deduplicate=function(){this.set_remove_duplicate_ops(this.get_remove_duplicate_ops()+1|0),this.reset_deduplicate(0|this.new_pxl_colors_length);for(var e=0,t=0,a=0,s=0,n=0|this.new_pxls_length;(0|s)<(0|n);s=(s+1|0)>>>0)t=0|this.get_a_new_pxl_color_from_pxl_index(0|s),-1==(0|(a=0|this.index_of_color_within_cleaned(0|t)))&&(this.set_cleaned_pxl_colors(0|e,0|t),a=0|e,e=e+1|0),this.increase_color_usage(0|a),this.set_new_pxls(0|s,0|a);this.set_new_pxl_colors(e)},P.prototype.clusterize=function(){this.reset_cluster();var e=0;if(65537===this.max_cluster)for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|e)>>>0).rgbaon16bits)>>>0,(0|e)>>>0);else if(4097===this.max_cluster)for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|e)>>>0).rgbaon12bits)>>>0,(0|e)>>>0);else if(257===this.max_cluster)for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|e)>>>0).rgbaon8bits)>>>0,(0|e)>>>0);else if(17===this.max_cluster)for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|e)>>>0).rgbaon4bits)>>>0,(0|e)>>>0);else for(;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.add_in_indexes_cluster(0,(0|e)>>>0);this.max_cluster>1&&this.set_classify_on_x_bits_ops(this.get_classify_on_x_bits_ops()+this.new_pxl_colors_length),this.set_all_cluster_indexes()},P.prototype.process_threshold=function(e,t,a){var s,n,i,c,h=!1,u=[],p=[],_=0,m=0,f=!1,g=!1,y=0,w=0,b=0,x=0,v=0,A=0,E=function(e){return 1-(1-e)*(1-e)}((e=(0|e)>>>0)/(a=(0|a)>>>0)),C=0,S=0,k=0,I=0,R=0,P=0;for(c=r(E*l),i=r(E*o);(0|R)<(0|this.max_cluster);R=(R+1|0)>>>0){for(m=(_+((0|this.get_length_in_index_clusters(0|R))>>>0)|0)>>>0,v=this.get_average_color_usage_percent(0|_,0|m),k=0|_;(0|k)<(0|m);k=(k+1|0)>>>0){if(C=(0|this.get_an_index_in_clusters((0|k)>>>0))>>>0,s=this.get_a_new_pxl_color((0|C)>>>0),f=this.is_pxl_color_skin((0|C)>>>0),(0|(y=(0|this.get_a_color_usage((0|C)>>>0))>>>0))>0)for(u=[],I=0|_;(0|I)<(0|m);I=(I+1|0)>>>0)S=(0|this.get_an_index_in_clusters((0|I)>>>0))>>>0,n=this.get_a_new_pxl_color((0|S)>>>0),g=this.is_pxl_color_skin((0|S)>>>0),0|(w=(0|this.get_a_color_usage((0|S)>>>0))>>>0)&&(0|C)!=(0|S)&&(0|f)==(0|g)&&(b=this.get_a_color_usage_percent((0|C)>>>0)/v,x=this.get_a_color_usage_percent((0|S)>>>0)/v,P=r((P=f&&g?c:f||g?i:E)*(.15*Math.abs(b-x)+.25*(2-(b+x))+.6)/1),s[t](n,P)&&(A=r(w/y),h=!0,this.set_a_color_usage(0|S,0),u.push(n),p.push(A)));(0|u.length)>0&&(d.blend_all(s,u,p),u=[],p=[])}_=0|m}return h},P.prototype.round=function(){if(this.new_pxl_colors_length>1024){for(var e=0|(this.new_pxl_colors_length>32768?4:this.new_pxl_colors_length>32768?3:this.new_pxl_colors_length>16384?2.5:this.new_pxl_colors_length>8192?2:this.new_pxl_colors_length>2048?1.5:(this.new_pxl_colors_length,1)),t=0;(0|t)<(0|this.new_pxl_colors_length);t=(t+1|0)>>>0)this.get_a_new_pxl_color((0|t)>>>0).simplify(e);this.set_simplify_ops(this.get_simplify_ops()+this.new_pxl_colors_length)}},P.prototype.init=function(){return this.round(),this.deduplicate(),this.clusterize(),this},P.prototype.run=function(){var e=0;if(this.new_pxl_colors_length<=this.best_color_number)return this.deduplicate(),this.clusterize(),this;for(var t=["manhattan_match_with","euclidean_match_with","cie76_match_with"],a=this.speed=this.new_pxl_colors_length>32768?t[0]:this.new_pxl_colors_length>1024?t[1]:t[2];this.new_pxl_colors_length>this.best_color_number;)e=e+1|0,this.process_threshold(e,a,369)&&(this.deduplicate(),this.clusterize());return this},P.split_image_data=function(e){for(var t=new Uint32Array(e.data.buffer),a=Uint32Array.from(new Set(t)),s={},n=a.length,i=new Uint32Array(t.length),r=0,o=0|n;(0|r)<(0|o);r=(r+1|0)>>>0)s[a[0|r]]=(0|r)>>>0;for(r=0,o=0|t.length;(0|r)<(0|o);r=(r+1|0)>>>0)i[0|r]=(0|s[t[0|r]])>>>0;return[i,a,t,n]};const M=function(e,t){const[a,s,n,i]=P.split_image_data(e);Date.now();var r="auto"===t,o=parseFloat(t)>0&&parseFloat(t)<1,l=parseInt(t)<0,c=r?"auto":!o&&!l?parseInt(t):l?Math.max(1,i+parseInt(t)):o?Math.max(1,parseFloat(t)*i):i;if("auto"===c&&(c=i>255?255:i/2|0),c>=i)return e;for(var d=new P({pxls:a,pxl_colors:s,speed:"auto",number_of_color:Math.min(i,c),width:e.width,height:e.height}).init().run().output("split"),h=(Date.now(),d[0]),u=0|h.length,p=d[1],_=0;(0|_)<(0|u);_=(_+1|0)>>>0)n[0|_]=(0|p[(0|h[0|_])>>>0])>>>0;return e=new ImageData(new Uint8ClampedArray(n.buffer),e.width,e.height)}},37532:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(36811),n=a(29411);s.A.addDefaultLocale(n.A);const i=new s.A("en-US")},20793:e=>{e.exports={functionString:"\n  var fu = function(image_data, scale) {\n\n    return new Promise(function (resolve, reject) {\n\n        var CRT = (function () {\n\n            \"use asm\";\n\n            var sqrt = Math.sqrt;\n            var cos = Math.cos;\n            var sin = Math.sin;\n            var min = Math.min;\n            var max = Math.max;\n            var imul = Math.imul;\n\n            function apply(imageData, srcx, srcy, scale, threshold) {\n\n                srcx = srcx | 0;\n                srcy = srcy | 0;\n                scale = scale | 0;\n                threshold = +threshold;\n\n                var Channels = 4;\n                var SizeX = srcx * scale | 0;\n                var SizeY = srcy * scale | 0;\n\n                var ScaledImage = new Uint8ClampedArray(SizeX * SizeY * Channels);\n\n                var total = SizeY | 0;\n                var current = 0;\n\n                var ppx = 0.0;\n                var ppy = 0.0;\n                var posx = 0;\n                var posy = 0;\n                var sub_posx = 0.0;\n                var sub_posy = 0.0;\n                var positionx = 0;\n                var positiony = 0;\n                var center = 0;\n                var left = 0;\n                var right = 0;\n                var midleft = 0;\n                var midright = 0;\n                var ret = 0;\n                var cr = 0;\n                var cg = 0;\n                var cb = 0;\n                var mlb = 0;\n                var mrr = 0;\n                var mrg = 0;\n                var lb = 0;\n                var rr = 0;\n                var rg = 0;\n                var alpha = 0;\n\n                for (var y = 0; y < SizeY; y = y + 1 | 0) {\n\n                    var offset = imul(y, SizeX) | 0;\n                    ppy = +(y / SizeY);\n\n                    for (var x = 0; x < SizeX; x = x + 1 | 0) {\n\n                        ppx = +(x / SizeX);\n                        posx = ~~(ppx * srcx);\n                        posy = ~~(ppy * srcy);\n                        sub_posx = +(ppx * srcx * 6) % 1.0;\n                        sub_posy = +(ppy * srcy * 6) % 1.0;\n                        positionx = posx | 0;\n                        positiony = posy | 0;\n\n                        center = CLR(imageData, srcx, srcy, positionx, positiony, 0, 0);\n                        left = CLR(imageData, srcx, srcy, positionx, positiony, -1, 0);\n                        right = CLR(imageData, srcx, srcy, positionx, positiony, 1, 0);\n\n                        if (sub_posy < 1.0 / 6.0) {\n\n                            center = mix(center, CLR(imageData, srcx, srcy, positionx, positiony, 0, -1), 0.5 - sub_posy / 2.0);\n                            left = mix(left, CLR(imageData, srcx, srcy, positionx, positiony, -1, -1), 0.5 - sub_posy / 2.0);\n                            right = mix(right, CLR(imageData, srcx, srcy, positionx, positiony, 1, -1), 0.5 - sub_posy / 2.0);\n\n                        } else if (sub_posy > 5.0 / 6.0) {\n\n                            center = mix(center, CLR(imageData, srcx, srcy, positionx, positiony, 0, 1), sub_posy / 2.0);\n                            left = mix(left, CLR(imageData, srcx, srcy, positionx, positiony, -1, 1), sub_posy / 2.0);\n                            right = mix(right, CLR(imageData, srcx, srcy, positionx, positiony, 1, 1), sub_posy / 2.0);\n                        }\n\n                        var scanline_multiplier;\n\n                        if (sub_posy < 0.5) {\n\n                            scanline_multiplier = (sub_posy * 2) * 0.3 + 0.7;\n\n                        } else {\n\n                            scanline_multiplier = ((1 - sub_posy) * 2) * 0.3 + 0.7;\n                        }\n\n                        Mul(center, scanline_multiplier);\n                        Mul(left, scanline_multiplier);\n                        Mul(right, scanline_multiplier);\n\n                        var odd = (ppx * srcx) & 1;\n\n                        var gradient_position;\n\n                        if (odd) {\n\n                            posy = +(posy + 0.5);\n                            posy = +(posy % 1.0);\n                        }\n\n                        if (posy < 1.0 / 3.0) {\n\n                            gradient_position = +(posy * 3.0);\n\n                            Mul(center, gradient_position * 0.6 + 0.4);\n                            Mul(left, gradient_position * 0.6 + 0.4);\n                            Mul(right, gradient_position * 0.6 + 0.4);\n\n                        } else if (posy > 2.0 / 3.0) {\n\n                            gradient_position = +(1 - posy) * 3.0;\n\n                            Mul(center, gradient_position * 0.6 + 0.4);\n                            Mul(left, gradient_position * 0.6 + 0.4);\n                            Mul(right, gradient_position * 0.6 + 0.4);\n                        }\n\n                        if (posx < 1.0 / 6.0 || posx > 5.0 / 6.0) {\n\n                            posy = +(posy + 0.5);\n                            posy = +(posy % 1.0);\n\n                            if (posy < 1.0 / 3.0) {\n\n                                gradient_position = +(posy * 3.0);\n\n                                if (posx < 0.5) {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (ppx) * 6.0));\n\n                                } else {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (1 - ppx) * 6.0));\n                                }\n\n                                Mul(center, gradient_position * 0.6 + 0.4);\n                                Mul(left, gradient_position * 0.6 + 0.4);\n                                Mul(right, gradient_position * 0.6 + 0.4);\n\n                            } else if (posy > 2.0 / 3.0) {\n\n                                gradient_position = +(1 - posy) * 3.0;\n\n                                if (posx < 0.5) {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (ppx) * 6.0));\n\n                                } else {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (1 - ppx) * 6.0));\n                                }\n\n                                Mul(center, gradient_position * 0.6 + 0.4);\n                                Mul(left, gradient_position * 0.6 + 0.4);\n                                Mul(right, gradient_position * 0.6 + 0.4);\n                            }\n                        }\n\n                        midleft = mix(left, center, 0.5);\n                        midright = mix(right, center, 0.5);\n\n                        cr = Red(center) | 0;\n                        cg = Green(center) | 0;\n                        cb = Blue(center) | 0;\n                        mlb = Blue(midleft) | 0;\n                        mrr = Red(midright) | 0;\n                        mrg = Green(midright) | 0;\n                        lb = Blue(left) | 0;\n                        rr = Red(right) | 0;\n                        rg = Green(right) | 0;\n                        alpha = Alpha(center) | 0;\n\n                        if (ppx < 1.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, cr * 255, cg * 255, lb * 255), ARGBINT(alpha, cr * 255, cg * 255, lb * 255), sub_posx);\n\n                        } else if (ppx < 2.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, cr * 255, cg * 255, lb * 255), ARGBINT(alpha, cr * 255, cg * 255, mlb * 255), sub_posx);\n\n                        } else if (ppx < 3.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, cr * 255, cg * 255, mlb * 255), ARGBINT(alpha, mrr * 255, cg * 255, cb * 255), sub_posx);\n\n                        } else if (ppx < 4.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, mrr * 255, cg * 255, cb * 255), ARGBINT(alpha, rr * 255, cg * 255, cb * 255), sub_posx);\n\n                        } else if (ppx < 5.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, rr * 255, cg * 255, cb * 255), ARGBINT(alpha, rr * 255, mrg * 255, cb * 255), sub_posx);\n\n                        } else {\n\n                            ret = mix(ARGBINT(alpha, rr * 255, mrg * 255, cb * 255), ARGBINT(alpha, rr * 255, rg * 255, cb * 255), sub_posx);\n                        }\n\n                        if (positionx < 1) {\n\n                            Mul(ret, positionx | 0);\n\n                        } else if (positionx > srcx - 1) {\n\n                            Mul(ret, srcx - positionx | 0);\n                        }\n\n                        if (positiony < 1) {\n\n                            Mul(ret, positiony | 0);\n\n                        } else if (positiony > srcy - 1) {\n\n                            Mul(ret, srcy - positiony | 0);\n                        }\n\n                        ScaledImage[offset * Channels] = Red(ret) | 0;\n                        ScaledImage[offset * Channels + 1] = Green(ret) | 0;\n                        ScaledImage[offset * Channels + 2] = Blue(ret) | 0;\n                        ScaledImage[offset * Channels + 3] = Alpha(ret) | 0;\n\n                    }\n\n                    current = current + 1 | 0;\n                }\n\n                return new ImageData(ScaledImage, SizeX, SizeY);\n            }\n\n            function mix(a, b, c) {\n\n                a = a | 0;\n                b = b | 0;\n                c = +c;\n\n                return ((a + ((b - a) * c)) | 0);\n            }\n\n            function Mul(x, y) {\n\n                x = x | 0;\n                y = +y;\n\n                return ((x * y) | 0);\n            }\n\n            function Red(rgb) {\n\n                rgb = rgb | 0;\n\n                return ((rgb >>> 16) & 0xFF) | 0;\n            }\n\n            function Green(rgb) {\n\n                rgb = rgb | 0;\n\n                return ((rgb >>> 8) & 0xFF) | 0;\n            }\n\n            function Blue(rgb) {\n\n                rgb = rgb | 0;\n\n                return (rgb & 0xFF) | 0;\n            }\n\n            function Alpha(rgb) {\n\n                rgb = rgb | 0;\n\n                return (rgb >>> 24) | 0;\n            }\n\n            function ARGBINT(a, r, g, b) {\n\n                a = a | 0;\n                r = r | 0;\n                g = g | 0;\n                b = b | 0;\n\n                return (((((a) << 24) | (r << 16) | (g << 8) | b) >>> 0) | 0);\n            }\n\n            function CLR(Input, srcx, srcy, x, y, dx, dy) {\n\n                Input = Input | 0;\n                srcx = srcx | 0;\n                srcy = srcy | 0;\n                x = x | 0;\n                y = y | 0;\n                dx = dx | 0;\n                dy = dy | 0;\n\n                var Channels = 4;\n\n                var xx = 0;\n                var yy = 0;\n\n                xx = (x + dx) | 0;\n                yy = (y + dy) | 0;\n\n                xx = max(0, min(srcx - 1, xx)) | 0;\n                yy = max(0, min(srcy - 1, yy)) | 0;\n\n                var index = 0;\n\n                index = ((yy * srcx + xx) * Channels) | 0;\n\n                var r = 0;\n                var g = 0;\n                var b = 0;\n                var a = 0;\n\n                r = (Input[index] | 0);\n                g = (Input[index + 1] | 0);\n                b = (Input[index + 2] | 0);\n                a = (Input[index + 3] | 0);\n\n                return ARGBINT(a, r, g, b) | 0;\n            }\n\n            return { Apply: apply };\n        }());\n\n        resolve(CRT.Apply(image_data.data, image_data.width, image_data.height, scale, 0));\n    });\n}\n\nfunction crt(image_data, scale) {\n    return new Promise(function(resolve, reject){\n        fu(image_data, scale).then((result) => {\n            resolve(result);\n        });\n    });\n}\n\n\n    self.onmessage = function onmessage(event) {\n        if (event.data.type === 'imageData') {\n            const result = crt(event.data.imageData, event.data.data.scale).then(function(result){\n                self.postMessage([result, event.data.id, event.data.algorithm]);\n            });\n        }\n    };\n",functionSize:function(e,t,a){return{width:e*a,height:t*a,arrayBufferLength:e*a*t*a*4}}}},5090:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{A:()=>i});var n=a(71768);function i(e,t){t=Math.round(t);const{data:a,width:s,height:i}=(0,n.in)(e.data,e.width,e.height,t);return new ImageData(a,s,i)}await(0,n.Ay)(),s()}catch(r){s(r)}}),1)},90010:(e,t,a)=>{"use strict";a.d(t,{p:()=>d,I:()=>h});class s{constructor(e,t,a,s){this.baseUrl=e,this.msgCallback=t||function(){},this.progressCallback=a||function(){},this.name=s||""}generateRandomSeed(){try{return crypto.getRandomValues(new Uint32Array(1))[0]}catch(e){return Math.round(4294967295*Math.random())}}message(e){try{const t=JSON.parse(e.slice(5))||{},a=t.msg;if((this.date_message||Date.now()-100)+100<=Date.now())switch(this.date_message=Date.now(),a){case"estimation":const e=t.rank_eta||0,a=(t.queue_size||0)-1,s=t.rank||0,n=`Estimated waiting duration: ${parseInt(e)} seconds. ${a>s?`Process will start after ${a} remaining job${a?"s":""}`:"Process will start immediately"}`,i=Date.now();this.progressCallback(this.name,i,i+1e3*parseInt(e)),this.msgCallback(n);break;case"progress":const r=(t.progress_data||[])[0]||{},o=r.index,l=r.length,c=`Processing: ${o}/${l} ${r.unit}.`;this.msgCallback(c);break;case"process_completed":let d="Processing completed.";const h=t.success,u=t.output||{};d=h?d:u.error,this.msgCallback(d)}}catch(e){}}generateRandomId(e=6){for(var t="";e>=6;)t+=Math.round(16777215*Math.random()).toString(16).padStart(6,"0"),e-=6;return e>0&&(t+=Math.round(16777215*Math.random()).toString(16).padStart(6,"0").slice(0,e)),t}getHeadersJson(){return{"Content-Type":"application/json"}}getHeadersStream(){return{accept:"text/event-stream"}}getHeadersAll(){return{accept:"*/*"}}getUploadUrl(e){return`${this.baseUrl}/upload?upload_id=${e}`}getCreateImagePathUrl(e){return`${this.baseUrl}/file=${e}`}async handleLoadComplete(e,t,a,s){t=void 0===t?"blob":t;let n=(e||"/unknown.webp").split("/"),i=n[n.length-1]||"unknown.png",r=i.split(".")[1]||"png",o="image/"+r;r="jpeg"===r?"jpg":r;try{const n=await new Promise((function(n){const i=new Image;i.setAttribute("crossorigin","anonymous"),i.onload=()=>{const e=i.naturalHeight||i.height,r=i.naturalWidth||i.width;s=s||e,a=a||r;try{switch(t.toLowerCase()){case"base64":!function(){const e=document.createElement("canvas");e.width=a,e.height=s,e.getContext("2d").drawImage(i,0,0,a,s);try{n(e.toDataURL("image/webp",.75))}catch(t){n(e.toDataURL("image/jpeg",.75))}}();break;case"blob":!function(){const e=document.createElement("canvas");e.width=a,e.height=s,e.getContext("2d").drawImage(i,0,0,a,s);try{e.toBlob(n,"image/webp",.75)}catch(t){e.toBlob(n,"image/jpeg",.75)}}();break;case"imagedata":!function(){const e=document.createElement("canvas");e.width=a,e.height=s;const t=e.getContext("2d");t.drawImage(i,0,0,a,s),n(t.getImageData(0,0,a,s,{colorSpace:"srgb"}))}()}}catch(e){}},i.setAttribute("src",e)}));switch(t){case"blob":const e=new File([n],i,{type:o});return Promise.resolve(e);case"base64":case"imagedata":return Promise.resolve(n)}}catch(e){return console.error("Error creating file from URL:",e),Promise.reject()}}async uploadFile(e,t){const a=new FormData;a.append("files",e);const s=await fetch(this.getUploadUrl(t),{method:"POST",body:a}),n=await s.json();return Promise.resolve(n[0]||n)}async fetchEventSource(e){const t=await fetch(e,{headers:this.getHeadersAll(),method:"GET"});return Promise.resolve(t.body.getReader())}async fetchEventSourceJSON(e){const t=await fetch(e,{headers:this.getHeadersJson(),method:"GET"}),a=(await t.clone().text()).replaceAll("event: complete\ndata: ","");try{return Promise.resolve(JSON.parse(a))}catch(e){return Promise.reject()}}async readResponse(e){const t=new TextDecoder("utf-8");let a="",s="",n=!1;for(;!n;){const{value:i,done:r}=await e.read();n=n||r,a+="".concat(t.decode(i||new Uint8Array,{stream:!0}));let o=(a||"\n").split("\n");for(let e=0;e<o.length;e++){const t=o[e].trim();if(this.message(t),t.includes("complete")&&t.includes('success":true')&&!t.includes("You have exceeded your GPU quota")&&!t.includes("custom_lora_card")&&!t.includes('data":[]'))return n=!0,s=t,Promise.resolve(s)}a=o[o.length-1]}return Promise.reject("You have exceeded your GPU quota.")}}class n extends s{constructor(e,t){super("https://gokaygokay-sd3-long-captioner-v2.hf.space",e,t,"captioner")}getCreateCaptionsUrl(){return`${this.baseUrl}/call/create_captions_rich`}getReadCaptions(e){try{return JSON.parse(e.slice(5))}catch(e){return""}}async createCaptions(e){const t=await fetch(this.getCreateCaptionsUrl(),{method:"POST",headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:e}]})});try{const e=await t.json();return Promise.resolve(e.event_id)}catch(e){return Promise.reject("Error")}}async run(e){let t;if("string"==typeof e)t=await this.handleLoadComplete(e);else{if(!(e instanceof Blob))return Promise.reject();t=e}const a=this.generateRandomId(),s=await this.uploadFile(t,a),n=this.getCreateCaptionsUrl(),i=await this.createCaptions(s);return this.fetchEventSourceJSON(`${n}/${i}`).then((function(e){return e[0]})).catch((function(){return""}))}}class i extends s{constructor(e,t){super("https://gokaygokay-florence-2.hf.space",e,t,"captioner")}getPredictHeader(e,t,a,s,n,i){return i=i||1,{headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:e,url:t,orig_name:"image."+s.replaceAll("image/",""),size:a,mime_type:s,meta:{_type:"gradio.FileData"}},1===i?"Caption":2===i?"Detailed Caption":"More Detailed Caption","","microsoft/Florence-2-large"],event_data:null,fn_index:4,trigger_id:10,session_hash:n}),method:"POST"}}getQueueJoinUrl(){return`${this.baseUrl}/queue/join`}getResultUrl(e){return`${this.baseUrl}/queue/data?session_hash=${e}`}readLine(e,t){e=e.slice(5);try{const a=JSON.parse(e);if(a.success){const e=a.output||{},s=(e.data||[])[0],n=1===t?s.slice(15,s.length-2):2===t?s.slice(24,s.length-2):s.slice(29,s.length-2);return Promise.resolve(n.replaceAll("\\n","").replaceAll("\n",""))}return Promise.reject()}catch(e){return Promise.reject()}}async run(e,t){let a;if("string"==typeof e)a=await this.handleLoadComplete(e);else{if(!(e instanceof Blob))return Promise.reject();a=e}const s=this.generateRandomId(),n=await this.uploadFile(a,s),i=this.getCreateImagePathUrl(n),r=this.getPredictHeader(n,i,a.size,a.type,s,t),o=await fetch(this.getQueueJoinUrl(),r);if((await o.json()).event_id){const e=await this.fetchEventSource(this.getResultUrl(s));return this.readResponse(e).then((e=>this.readLine(e,t)))}return Promise.reject()}}const r={lucasArt:{url:"https://huggingface.co/primerz/lucasart",weight:1.78,face:.92,image:.21,scale:7.5,strength:.84,prompt:"In lucasarts style: a beautiful illustration of ('${prompt}':0.75) (in lucasarts style). Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, 2D, illustration, palette-based, natural color. lucasarts style.",negative:"Photography, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature."},lucasArt2:{url:"https://civitai.com/models/151539/lucasarts-style-1990s-pc-adventure-games-sdxl-lora-dreambooth-trained",weight:1.2,face:.97,image:.12,scale:5,strength:.8,prompt:"An 2D beautiful illustration of ('${prompt}':0.618) in lcas artstyle. Artwork, detailed digital painting, bold-edge, sexy character, 2D, illustration, palette-based, natural color. lcas artstyle.",negative:"Photography, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature."},pixa:{url:"https://huggingface.co/primerz/Pixa2",weight:3.5,face:.95,image:.35,scale:5,strength:.85,prompt:"In the style of P1X4... ('${prompt}':0.314)",negative:"Photography, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature."},thimbled:{url:"https://civitai.com/models/174301/pixelartthimbledweed",weight:1.2,face:.95,image:.15,scale:9,strength:.8,prompt:"An high resolution illustration of '${prompt}' in lucasarts style with clean and bold edges. Truthful and beautifully aligned face, very high quality.",negative:"Realistic, photography, real."},arsMJ:{url:"https://civitai.com/models/547343/pixel-art-pony-sdxl",weight:.8,face:.95,image:.2,scale:9,strength:.8,prompt:"An high resolution illustration of '${prompt}' in lucasarts style with clean and bold edges. Truthful and beautifully aligned face, very high quality.",negative:"Realistic, photography, real."}};class o extends s{constructor(e,t,a="777"){super("https://primerz-face-to-all-"+a+".hf.space",e,t,"Transform"),this.styles=r}getPredictUrl(){return`${this.baseUrl}/run/predict`}getPredictHeader(e,t){return{headers:this.getHeadersJson(),body:JSON.stringify({data:[e],event_data:null,fn_index:0,trigger_id:11,session_hash:t}),method:"POST"}}getQueueJoinUrl(){return`${this.baseUrl}/queue/join?__theme=light`}extractSecondImageUrl(e){const t=e.match(/"url":"(https:\/\/[^"]+)"/g);if(t&&t.length>1){return t[1].match(/"url":"(https:\/\/[^"]+)"/)[1]}return null}getQueueJoinHeader(e,t,a,s,n,i,r){const o=this.styles[i],l=o.prompt.replace("${prompt}",n.replaceAll("\\n","").replaceAll("\\",""));return{headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:e,url:t,orig_name:"image."+s.replaceAll("image/",""),size:a,mime_type:s,meta:{_type:"gradio.FileData"}},l,o.negative,o.face,null,o.weight,o.image,o.scale,o.strength,null,null],event_data:null,fn_index:6,trigger_id:18,session_hash:r}),method:"POST"}}getQueueDataUrl(e){return`${this.baseUrl}/queue/data?session_hash=${e}`}async readResponse(e){const t=new TextDecoder("utf-8");let a="",s="",n=!1;for(;!n;){const{value:i,done:r}=await e.read();n=n||r,a+="".concat(t.decode(i||new Uint8Array,{stream:!0}));let o=(a||"\n").split("\n");for(let e=0;e<o.length;e++){const t=o[e].trim();if(this.message(t),t.includes("complete")&&t.includes('success":true')&&!t.includes("You have exceeded your GPU quota")&&!t.includes("custom_lora_card")&&!t.includes('data":[]'))return n=!0,s=t,Promise.resolve(s)}a=o[o.length-1]}return Promise.reject("You have exceeded your GPU quota.")}async run(e,t,a="lucasArt"){let s;if("string"==typeof e)s=await this.handleLoadComplete(e);else{if(!(e instanceof Blob))return Promise.reject();s=e}const n=this.generateRandomId(),i=this.generateRandomId(),r=this.getPredictHeader(this.styles[a].url,i),o=this.getPredictUrl(),l=(await fetch(o,r)).ok,c=await this.uploadFile(s,n),d=this.getCreateImagePathUrl(c);if(l&&d){const e=this.getQueueJoinHeader(c,d,s.size,s.type,t,a,i),n=this.getQueueJoinUrl(),r=await fetch(n,e);if(void 0!==(await r.json()).event_id){const e=this.getQueueDataUrl(i),t=await this.fetchEventSource(e);return this.readResponse(t).then((async e=>{const t=this.extractSecondImageUrl(e),a=await this.handleLoadComplete(t);return Promise.resolve(a)}))}}return Promise.reject()}}class l extends s{constructor(e,t,a="777"){super("https://primerz-face-to-all-"+a+".hf.space",e,t,"Transform"),this.styles=r}getPredictUrl(){return`${this.baseUrl}/queue/join`}getPredictHeader(e,t){return{headers:this.getHeadersJson(),body:JSON.stringify({data:[e],event_data:null,fn_index:0,trigger_id:11,session_hash:t}),method:"POST"}}extractSecondImageUrl(e){const t=e.match(/"url":"(https:\/\/[^"]+)"/g);if(t&&t.length>1){return t[1].match(/"url":"(https:\/\/[^"]+)"/)[1]}return null}getQueueJoinHeader(e,t,a,s,n,i,r){const o=this.styles[i],l=o.prompt.replace("${prompt}",n.replaceAll("\\n","").replaceAll("\\",""));return{headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:e,url:t,orig_name:"image."+s.replaceAll("image/",""),size:a,mime_type:s,meta:{_type:"gradio.FileData"}},l,o.negative,o.face,null,o.weight,o.image,o.scale,o.strength,null,null],event_data:null,fn_index:6,trigger_id:18,session_hash:r}),method:"POST"}}async readResponse(e){const t=new TextDecoder("utf-8");let a="",s="",n=!1;for(;!n;){const{value:i,done:r}=await e.read();n=n||r,a+="".concat(t.decode(i||new Uint8Array,{stream:!0}));let o=(a||"\n").split("\n");for(let e=0;e<o.length;e++){const t=o[e].trim();if(this.message(t),t.includes("complete")&&t.includes('success":true')&&!t.includes("You have exceeded your GPU quota")&&!t.includes("custom_lora_card")&&!t.includes('data":[]'))return n=!0,s=t,Promise.resolve(s)}a=o[o.length-1]}return Promise.reject("You have exceeded your GPU quota.")}async run(e,t,a="lucasArt"){let s;if("string"==typeof e)s=await this.handleLoadComplete(e);else{if(!(e instanceof Blob))return Promise.reject();s=e}const n=this.generateRandomId(8),i=this.generateRandomId(11),r=this.getPredictHeader(this.styles[a].url,i),o=this.getPredictUrl(),l=(await fetch(o,r)).ok,c=await this.uploadFile(s,n),d=this.getCreateImagePathUrl(c);if(l&&d){const e=this.getQueueJoinHeader(c,d,s.size,s.type,t,a,i),n=this.getQueueJoinUrl(),r=await fetch(n,e);if(r.ok){if(void 0!==(await r.json()).event_id){const e=this.getQueueDataUrl(i),t=await fetch(e,this.getUselessBullshit(i));if(t.ok){if((await t.json()).event_id){const t=await this.fetchEventSource(e);return this.readResponse(t).then((async e=>{const t=this.extractSecondImageUrl(e),a=await this.handleLoadComplete(t);return Promise.resolve(a)}))}}}}}return Promise.reject()}}class c extends s{constructor(e,t,a="777"){super("https://primerz-face-to-all-"+a+".hf.space",e,t,"Transform"),this.styles=r}getPredictUrl(){return`${this.baseUrl}/run/predict`}getPredictHeader(e,t){return{headers:this.getHeadersJson(),body:JSON.stringify({data:[e],event_data:null,fn_index:0,trigger_id:11,session_hash:t}),method:"POST"}}extractSecondImageUrl(e){const t=e.match(/"url":"(https:\/\/[^"]+)"/g);if(t&&t.length>1){return t[1].match(/"url":"(https:\/\/[^"]+)"/)[1]}return null}getQueueJoinHeader(e,t,a,s,n,i,r){const o=this.styles[i],l=o.prompt.replace("${prompt}",n.replaceAll("\\n","").replaceAll("\\",""));return{headers:this.getHeadersJson(),body:JSON.stringify({data:[{path:e,url:t,orig_name:"image."+s.replaceAll("image/",""),size:a,mime_type:s,meta:{_type:"gradio.FileData"}},l,o.negative,o.face,null,o.weight,o.image,o.scale,o.strength,null,null],event_data:null,fn_index:6,trigger_id:18,session_hash:r}),method:"POST"}}async readResponse(e){const t=new TextDecoder("utf-8");let a="",s="",n=!1;for(;!n;){const{value:i,done:r}=await e.read();n=n||r,a+="".concat(t.decode(i||new Uint8Array,{stream:!0}));let o=(a||"\n").split("\n");for(let e=0;e<o.length;e++){const t=o[e].trim();if(this.message(t),t.includes("complete")&&t.includes('success":true')&&!t.includes("You have exceeded your GPU quota")&&!t.includes("custom_lora_card")&&!t.includes('data":[]'))return n=!0,s=t,Promise.resolve(s)}a=o[o.length-1]}return Promise.reject("You have exceeded your GPU quota.")}async run(e,t,a="lucasArt"){let s;if("string"==typeof e)s=await this.handleLoadComplete(e);else{if(!(e instanceof Blob))return Promise.reject();s=e}const n=this.generateRandomId(),i=this.generateRandomId(),r=this.getPredictHeader(this.styles[a].url,i),o=this.getPredictUrl(),l=await fetch(o,r),c=await l.json(),d=await this.uploadFile(s,n),h=this.getCreateImagePathUrl(d);if(c&&h){const e=this.getQueueJoinHeader(d,h,s.size,s.type,t,a,i),n=this.getQueueJoinUrl(),r=await fetch(n,e);if(void 0!==(await r.json()).event_id){const e=this.getQueueDataUrl(i),t=await this.fetchEventSource(e);return this.readResponse(t).then((async e=>{const t=this.extractSecondImageUrl(e),a=await this.handleLoadComplete(t);return Promise.resolve(a)}))}}return Promise.reject()}}const d=async(e,t=()=>{},a=()=>{})=>{const s=new i(t,a),r=new n(t,a);return await s.run(e,1).catch((()=>r.run(e).catch((()=>Promise.resolve("a person")))))||""},h=async(e,t="",a=()=>{},s=()=>{})=>{const n=new o(a,s),i=new l(a,s),r=new c(a,s),d=new o(a,s,"666"),h=new l(a,s,"666"),u=new c(a,s,"666");return n.run(e,t,"lucasArt").then((e=>Promise.resolve(e))).catch((()=>i.run(e,t,"lucasArt").then((e=>Promise.resolve(e))).catch((()=>r.run(e,t,"lucasArt").then((e=>Promise.resolve(e))).catch((()=>d.run(e,t,"lucasArt").then((e=>Promise.resolve(e))).catch((()=>h.run(e,t,"lucasArt").then((e=>Promise.resolve(e))).catch((()=>u.run(e,t,"lucasArt").then((e=>Promise.resolve(e))).catch((()=>Promise.resolve(e)))))))))))))}},34274:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{E:()=>h,z:()=>u});var n=a(23138),i=a(90010),r=a(75600);function o(e){const{width:t,height:a,data:s}=e,n=new Uint32Array(s.buffer);function i(e,t,a,s){return a[t*s+e|0]}function r(e,t,a,s,n){s[t*n+e|0]=a>>>0}let o=0,l={},c=new Uint32Array(8),d=0;for(let e=1;e<a-1;e=e+1|0)for(let a=1;a<t-1;a=a+1|0){l={},o=i(a,e,n,t),c[0]=i(a-1,e-1,n,t),c[1]=i(a,e-1,n,t),c[2]=i(a+1,e-1,n,t),c[3]=i(a-1,e,n,t),c[4]=i(a+1,e,n,t),c[5]=i(a-1,e+1,n,t),c[0]=i(a,e+1,n,t),c[7]=i(a+1,e+1,n,t);for(var h=0;h<8;h++)d=c[h],l[d]=(l[d]||0)+1,h>=5&&l[d]>=6&&r(a,e,d,n,t)}const u=new Uint8ClampedArray(n.buffer);return new ImageData(u,t,a)}function l(e,t,a){const s=e*t;let n=Math.sqrt(a/s);return Math.min(n,1)}function c(e,t){let a;try{if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");a=new OffscreenCanvas(e,t)}catch(s){a=document.createElement("canvas"),a.width=e,a.height=t}return a}function d(e){e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1}await(0,r.Ay)();const h=async function(e,t,a,s){const n=t*a,i=await createImageBitmap(e),r=l(i.width,i.height,n),o=c(i.width,i.height),h=o.getContext("2d");d(h),h.drawImage(i,0,0,i.width,i.height),i.close();const u=h.getImageData(0,0,o.width,o.height),p=new Uint32Array(u.data.buffer),_=Uint32Array.from(new Set(p));return!!Boolean(r<=1&&_.length<s)&&u},u=async function(e,t,a,s,h,u){const p=await(0,i.p)(e,h,u);e=await(0,i.I)(e,p,h,u);const _=t*a,m=await createImageBitmap(e,{resizeQuality:"pixelated"}),f=l(m.width,m.height,_),g=Math.round(m.width*f),y=Math.round(m.height*f),w=c(g,y).getContext("2d");d(w),w.drawImage(m,0,0,g,y),m.close();const b=c(1,1),x=b.getContext("2d",{willReadFrequently:!0});d(x);const v=function(e,t){const a=t.canvas,s=l(a.width,a.height,e.size*e.size),i=s<=5?3:s<=7?4:s<=10?5:6,o=5+i/2|0,c=a.width,d=a.height,h=Math.round(c*s),u=Math.round(d*s),p=t.getImageData(0,0,c,d).data,_=(0,r.$K)(p,c,d,h,u,i,o),m=new ImageData(new Uint8ClampedArray(_),h,u);return b.width=m.width,b.height=m.height,x.putImageData(m,0,0),function(e,t){const a=(0,n.A)(e.getImageData(0,0,e.canvas.width,e.canvas.height),t);e.putImageData(a,0,0)}(x,e.colors),x.getImageData(0,0,0|b.width,0|b.height)};return{artworks:[{name:"XS",size:100,colors:30},{name:"S",size:120,colors:40},{name:"M",size:150,colors:50},{name:"L",size:190,colors:60},{name:"XL",size:240,colors:70},{name:"XXL",size:300,colors:80}].map((function(e){return e.imageData=o(o(v(e,w))),e})),prompt:p||""}};s()}catch(p){s(p)}}),1)},23308:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{Y:()=>u});var n=a(12542),i=a(24234),r=a(54136),o=a(35791);new o.B64chromium;await(0,n.Ay)();const l=new n.IU(BigInt(42206)),c=new TextEncoder;async function d(e){var t=new Uint8Array(0),a="UNKNOWN";return"string"==typeof e&&(e.startsWith("data:image/")?(e.startsWith("data:image/webp;base64,")?a="WEBP":e.startsWith("data:image/png;base64,")&&(a="PNG"),t=new Uint8Array(await(await fetch(e)).arrayBuffer())):(a="IMAGE",t=c.encode(e))),l.update(t),{data:t,type:a,hash:l.finalize_and_reset(n.jH.Base58)}}const h=(e,t,a)=>new Promise((function(s,n){let o={id:a};"PNG"===e?(0,r.A)(t).then((function(e){o.width=e.width,o.height=e.height,o.image_data=e,s(o)})):"WEBP"===e&&(0,i.A)(t).then((function(e){o.width=e.width,o.height=e.height,o.image_data=e,s(o)}))})),u=()=>{const e=new Map;return{get_new_img_obj:async t=>{const{hash:a,type:s,data:n}=await d(t);if(e.has(a))return e.get(a);{const t=await h(s,n,a);return e.set(t.id,t),e.size>=600&&Object.keys(e).slice(-100).forEach((t=>{e.delete(t)})),t}}}};s()}catch(p){s(p)}}),1)},92059:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{E6:()=>w,R2:()=>b,eu:()=>y,px:()=>g});var n=a(5090),i=a(20793),r=a.n(i),o=a(7514),l=e([n,o]);function c(e,t){const a=document.createElement("canvas"),s=document.createElement("canvas");a.width=e.width*t,a.height=e.height*t,s.width=e.width,s.height=e.height;const n=a.getContext("2d"),i=s.getContext("2d");return n.imageSmoothingEnabled=!1,i.imageSmoothingEnabled=!1,i.putImageData(e,0,0),n.drawImage(s,0,0,s.width,s.height,0,0,a.width,a.height),n.getImageData(0,0,a.width,a.height)}[n,o]=l.then?(await l)():l;class d{constructor(e){this.workers=new Map,this.workerScripts=e}createWorker(e,t,a=!1){if(this.workers.has(e))return this.workers.get(e).worker;const s=new Blob([t],{type:"application/javascript"}),n=URL.createObjectURL(s);let i;return i=a?new SharedWorker(n):new Worker(n),this.workers.set(e,{worker:i,type:a?"shared":"dedicated"}),i}sendDataToWorker(e,t,a={},s){let n=this.workers.get(e);if(!n){if(void 0===this.workerScripts[e])throw new Error(`Worker ${e} not found`);n=this.createWorker(e,this.workerScripts[e],!1)}const{worker:i,type:r}=n,o={type:a.type||"default",data:t,id:s,algorithm:e},l=[];if("canvas"===a.type){const e=a.canvas.transferControlToOffscreen();o.canvas=e,l.push(e)}else"sharedBuffer"===a.type?(o.sharedArrayBuffer=a.sharedArrayBuffer,l.push(a.sharedArrayBuffer)):"imageData"===a.type&&(o.imageData=t.data);"dedicated"===r?i.postMessage(o,l):"shared"===r&&(i.port.postMessage(o,l),i.port.start()),"dedicated"===r?i.onmessage=e=>{a.onReceive&&a.onReceive(e.data[0],e.data[1],e.data[2])}:"shared"===r&&(i.port.onmessage=e=>{a.port.onReceive&&a.port.onReceive(e.data[0],e.data[1],e.data[2])})}terminateWorker(e){const t=this.workers.get(e);t&&("dedicated"===t.type?t.worker.terminate():"shared"===t.type&&t.worker.port.close(),this.workers.delete(e))}}const h=new d({crt:r().functionString});let u={xbrz:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}},hex:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}},sqr:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}},crt:{worker:!0,callbacks:{},data:{},bitmap:{},timestamp:{}}},p=0;function _(e){for(const t in u)t!==e&&(h.terminateWorker(t),u[t].callbacks={})}async function m(e,t,a){if(void 0!==u[a].callbacks[t]&&u[a].callbacks[t](e),void 0===u[a].data[t]){const s=e.data.byteLength;if(u[a].data[t]=e,u[a].timestamp[t]=0|Date.now(),p+=s,p>262144e3){const e=Object.keys(u[a].timestamp),t=Object.values(u[a].timestamp);let s=0|Date.now();for(let e=0,a=t.length;e<a;e++)t[e]<s&&(s=t[e]);const n=e[t.indexOf(s)];if(n){const e=0|u[a].data[n].data.byteLength;delete u[a].data[n],delete u[a].callbacks[n],delete u[a].timestamp[n],p-=e}}}}async function f(e,t,a,s,i=!1,r){r=r+"-"+a,_(e),u[e].callbacks[r]=s;const l=Object.keys(u[e].callbacks).length;if(void 0!==u[e].data[r]&&void 0!==u[e].callbacks[r]){const t=u[e].data[r];u[e].callbacks[r](t)}else if(u[e].worker)h.sendDataToWorker(e,{data:t,scale:a},{type:"imageData",onReceive:m},r);else if("hex"===e)await m((0,n.A)(t,a),r,e);else if("xbrz"===e){const s=await(0,o.i)(t,a,(t=>{m(t,r,e)}),l);await m(s,r,e)}else if("sqr"===e){const s=await c(t,a);await m(s,r,e)}}function g(e,t,a,s,n){f("xbrz",e,t,a,s,n)}function y(e,t,a,s,n){f("hex",e,t,a,s,n)}function w(e,t,a,s,n){f("crt",e,t,a,s,n)}function b(e,t,a,s,n){f("sqr",e,t,a,s,n)}s()}catch(x){s(x)}}))},79205:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{A:()=>_});var n=a(23073),i=a(4826),r=e([n]);n=(r.then?(await r)():r)[0];var o=(0,i.SIMDopeCreateConfAdd)({create:{new_of:!0,new_uint32:!0,new_uint32b:!0},properties:{uint32:!0,hex:!0},methods:{get_element:!0,euclidean_match_with:!0,slice_uint32:!0,get_deduplicated_sorted_uint32a:!0}}),{Color:l,Colors:c}=(0,i.SIMDopeCreate)(o);const d=new XMLSerializer;function h(e){var t=e.getImageData(0,0,e.canvas.width,e.canvas.height),a=new Uint32Array(t.data.buffer),s=new c(t.data.buffer).get_deduplicated_sorted_uint32a(),n={};new c(s.buffer).slice_uint32().forEach((e=>{n[e]=0}));for(var i=l.new_hex("#000000FF"),r=l.new_uint32(0).hex.substring(0,7)+"00",o=r.substring(0,7),d=0,h=0|a.length;(0|d)<(0|h);d=d+1|0)n[a[0|d]]++,l.new_uint32(a[0|d]).euclidean_match_with(i,.001)&&(a[0|d]=l.new_hex(r).uint32);return e.putImageData(new ImageData(new Uint8ClampedArray(a.buffer),e.canvas.width,e.canvas.height),0,0),Object.entries(n).map((e=>{var t=e[0],a=l.new_uint32(t).hex.toUpperCase(),s=a.substring(0,7);return{hex8:a,hex6:s}})).concat([{hex6:"#000000",hex8:"transparent"},{hex6:o,hex8:"#000000FF"}])}function u(e,t,a,s){const n=document.getElementById(e),i=document.getElementById(t);if(!n)return console.error("SVG element not found"),null;if(!i)return console.error("SVG element not found"),null;n.removeAttribute("style"),n.removeAttribute("id");let r=d.serializeToString(n);if(s.forEach((e=>{r=r.replaceAll(`style="fill: ${e.hex6};"`,`style="fill: ${e.hex8};"`)})),n.id=e,n.style.display="none",n.remove(),i.remove(),"svg"===a)return r;if("blob"===a){const e=new Blob([r],{type:"image/svg+xml"});return URL.createObjectURL(e)}}function p(e,t,a){e.canvasId&&e.svgId||(console.error("Canvas ID and SVG ID are required."),e.canvasId="frame"+a,e.svgId="svg"+a);let s=document.getElementById(e.canvasId);s||(s=document.createElement("canvas"),s.id=e.canvasId,s.style.display="none",document.body.appendChild(s));let i=document.getElementById(e.svgId);i||(i=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.id=e.svgId,i.style.display="none",document.body.appendChild(i));const r=new Image;var o;function l(t,a,s){o&&o.stop(),(o=new c(t,e.output,a,s)).run()}class c{constructor(e,t,a,s){this.converter=n.HI.new_with_string(`{"canvas_id":"frame${a}","svg_id":"svg${a}","mode":"spline","clustering_mode":"color","hierarchical":"cutout","corner_threshold":0.1,"length_threshold":18,"max_iterations":4,"splice_threshold": 0.1,"filter_speckle":18,"color_precision":0,"layer_difference":18,"path_precision":2}`),this.converter.init(),this.stopped=!1,this.output=t||"svg",this.callback=e,this.n=a,this.list=s}run(){const e=this;!function t(){if(!e.stopped){let a=!1;const s=performance.now();for(;!(a=e.converter.tick())&&performance.now()-s<25;);a?e.ok(this.n):setTimeout(t,1)}}()}stop(){this.stopped=!0,this.converter.free()}ok(){this.callback(u("svg"+this.n,"frame"+this.n,this.output,Array.from(this.list)))}}!function(e,t,a){if(e instanceof ImageData){s.width=e.width,s.height=e.height;const n=s.getContext("2d",{colorSpace:"srgb"});n.putImageData(e,0,0);const r=h(n);i.setAttribute("height",s.height+"px"),i.setAttribute("width",s.width+"px"),l(t,a,r)}else r.src=e,r.onload=function(){s.width=r.naturalWidth,s.height=r.naturalHeight;const e=s.getContext("2d",{colorSpace:"srgb"});e.drawImage(r,0,0);const n=h(e);i.setAttribute("height",s.height+"px"),i.setAttribute("width",s.width+"px"),l(t,a,n)}}(e.imageSource,t,a)}function _(e,t,a=0){return new Promise((function(s,n){p({imageSource:e,output:t},s,a)}))}s()}catch(m){s(m)}}))},7514:(e,t,a)=>{"use strict";a.a(e,(async(e,s)=>{try{a.d(t,{i:()=>d});var n=a(79205),i=a(29012),r=e([n]);n=(r.then?(await r)():r)[0],await(0,i.Ay)();const o=new OffscreenCanvas(0,0),l=o.getContext("2d",{performance:"high-performance",willReadFrequently:!0});function c(e,t){const a=Math.max(1,Math.min(6,Math.round(t)));o.width=e.width*a,o.height=e.height*a;const{ptr:s,len:n}=(0,i.N8)(e.data,e.width,e.height,a),r=new Uint8ClampedArray((0,i.Xq)().buffer).subarray(s,s+n),c=new ImageData(r,o.width,o.height);return l.putImageData(c,0,0),l.getImageData(0,0,o.width,o.height)}async function d(e,t,a,s=0){const i=c(e,t);return t<=6?i:(a(i),await new Promise((async(e,a)=>{const r=await(0,n.A)(i,"blob",s),o=t/Math.round(Math.min(t,6)),l=Math.round(i.width*o),c=Math.round(i.height*o),d=document.createElement("img");d.onload=()=>{const t=new OffscreenCanvas(l,c).getContext("2d");t.drawImage(d,0,0,i.width,i.height,0,0,l,c),e(t.getImageData(0,0,l,c))},d.src="".concat(r)})))}s()}catch(h){s(h)}}),1)}}]);