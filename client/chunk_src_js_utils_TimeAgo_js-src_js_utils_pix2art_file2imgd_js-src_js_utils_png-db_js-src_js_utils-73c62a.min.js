/*! For license information please see chunk_src_js_utils_TimeAgo_js-src_js_utils_pix2art_file2imgd_js-src_js_utils_png-db_js-src_js_utils-73c62a.min.js.LICENSE.txt */
(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_utils_TimeAgo_js-src_js_utils_pix2art_file2imgd_js-src_js_utils_png-db_js-src_js_utils-73c62a","src_js_utils_pix2art_file2imgd_js-src_js_utils_png-db_js-src_js_utils_render-pool_js"],{23138:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});r(52675),r(89463),r(2259),r(33771),r(23418),r(64346),r(23792),r(31051),r(34782),r(54743),r(11745),r(38309),r(59089),r(23288),r(62010),r(60605),r(84185),r(26099),r(78459),r(58940),r(27495),r(38781),r(31415),r(47764),r(22134),r(61740),r(81630),r(72170),r(75044),r(69539),r(31694),r(89955),r(33206),r(48345),r(44496),r(66651),r(12887),r(19369),r(66812),r(8995),r(31575),r(36072),r(88747),r(28845),r(29423),r(57301),r(373),r(86614),r(41405),r(33684),r(62953);var n=r(82803),o=r(4826);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var s=(0,o.SIMDopeCreateConfAdd)({create:{new_of:!0},properties:{uint32:!0,laba:!0,rgbaon4bits:!0,rgbaon6bits:!0,rgbaon8bits:!0,rgbaon12bits:!0,rgbaon16bits:!0,skin:!0},methods:{simplify:!0,get_new_element:!0,get_use_element:!0,set_tail:!0,is_dark:!0,blend_first_with:!0,blend_first_with_tails:!0,blend_all:!0,euclidean_match_with:!0,manhattan_match_with:!0,cie76_match_with:!0,copy:!0}}),c=Math.fround,u=c(100),l=c(2),f=(0,o.SIMDopeCreate)(s),h=f.simdops,p=f.Color,_=f.Colors,d=(h.minus_int,h.int_not_equal,h.plus_int,h.plus_uint,h.minus_uint,h.multiply_int,h.multiply_uint,h.multiply_uint_4),g=(h.divide_uint,h.clamp_uint8,h.clamp_uint32,h.int_equal,h.uint_less,h.int_less,h.int_greater_equal,h.uint_not_equal,h.uint_less_equal,h.min_uint,function(t){if(t=t||{},!(this instanceof g))return new g(t);t.pxl_colors=t.pxl_colors||new Uint32Array(0),t.pxls=t.pxls||new Uint32Array(0),this.speed=t.speed||"auto",this.new_pxls_="buffer"in t.pxls?new Uint32Array(t.pxls.buffer):Uint32Array.from(t.pxls),this.new_pxl_colors_="buffer"in t.pxl_colors?new _(t.pxl_colors.buffer):new _(Uint32Array.from(t.pxl_colors).buffer);var e=0|this.new_pxl_colors_.length;this.new_pxl_colors_is_skin_mask_=new n.SetFixed(0|e),this.set_new_pxl_skin_mask(),this.best_color_number_=t.number_of_color,this.max_cluster_=e>65536?65537:e>16384?4097:e>4096?257:e>256?17:1,this.index_clusters_=new Array(this.max_cluster_),this.length_clusters_=new Uint32Array(this.max_cluster_),this.pxl_colors_usage_=new Uint32Array(e),this.all_index_clusters_=new Uint32Array(e),this.clean_pxl_colors_=new Uint32Array(e),this.clean_pxl_colors_lookup_={},this.t=0,this.is_skin_ops_=0,this.match_ops_=0,this.blend_ops_=0,this.remove_duplicate_ops_=0,this.simplify_ops_=0,this.classify_on_x_bits_ops_=0});Object.defineProperty(g.prototype,"set_is_skin_ops",{get:function(){return function(t){this.is_skin_ops_=(0|t)>>>0}}}),Object.defineProperty(g.prototype,"set_match_ops",{get:function(){return function(t){this.match_ops_=(0|t)>>>0}}}),Object.defineProperty(g.prototype,"set_blend_ops",{get:function(){return function(t){this.blend_ops_=(0|t)>>>0}}}),Object.defineProperty(g.prototype,"set_remove_duplicate_ops",{get:function(){return function(t){this.remove_duplicate_ops_=(0|t)>>>0}}}),Object.defineProperty(g.prototype,"set_simplify_ops",{get:function(){return function(t){this.simplify_ops_=t}}}),Object.defineProperty(g.prototype,"set_classify_on_x_bits_ops",{get:function(){return function(t){this.classify_on_x_bits_ops_=t}}}),Object.defineProperty(g.prototype,"get_is_skin_ops",{get:function(){return function(){return 0|this.is_skin_ops_}}}),Object.defineProperty(g.prototype,"get_match_ops",{get:function(){return function(){return 0|this.match_ops_}}}),Object.defineProperty(g.prototype,"get_blend_ops",{get:function(){return function(){return 0|this.blend_ops_}}}),Object.defineProperty(g.prototype,"get_remove_duplicate_ops",{get:function(){return function(){return 0|this.remove_duplicate_ops_}}}),Object.defineProperty(g.prototype,"get_simplify_ops",{get:function(){return function(){return this.simplify_ops_}}}),Object.defineProperty(g.prototype,"get_classify_on_x_bits_ops",{get:function(){return function(){return this.classify_on_x_bits_ops_}}}),Object.defineProperty(g.prototype,"reset_deduplicate",{get:function(){return function(t){this.clean_pxl_colors_lookup_={},this.pxl_colors_usage_.fill(0,0,0|t),this.clean_pxl_colors_.fill(0,0,0|t)}}}),Object.defineProperty(g.prototype,"index_of_color_within_cleaned",{get:function(){return function(t){return(0|this.clean_pxl_colors_lookup_[(0|t)>>>0])-1|0}}}),Object.defineProperty(g.prototype,"set_cleaned_pxl_colors",{get:function(){return function(t,e){this.clean_pxl_colors_[(0|t)>>>0]=(0|e)>>>0,this.clean_pxl_colors_lookup_[(0|e)>>>0]=(t+1|0)>>>0}}}),Object.defineProperty(g.prototype,"increase_color_usage",{get:function(){return function(t){this.pxl_colors_usage_[(0|t)>>>0]=(this.pxl_colors_usage_[(0|t)>>>0]+1|0)>>>0}}}),Object.defineProperty(g.prototype,"set_new_pxls",{get:function(){return function(t,e){this.new_pxls_[(0|t)>>>0]=(0|e)>>>0}}}),Object.defineProperty(g.prototype,"set_new_pxl_colors",{get:function(){return function(t){this.new_pxl_colors_=new _(this.clean_pxl_colors_.buffer.slice(0,d(0|t))),this.set_new_pxl_skin_mask()}}}),Object.defineProperty(g.prototype,"set_new_pxl_skin_mask",{get:function(){return function(){var t=new p(new ArrayBuffer(4)),e=0|this.new_pxl_colors_.length,r=0;for(this.new_pxl_colors_is_skin_mask_=new n.SetFixed(0|e);(0|r)<(0|e);r=r+1|0)this.new_pxl_colors_.get_use_element(0|r,t).skin&&this.new_pxl_colors_is_skin_mask_.add(0|r);this.set_is_skin_ops(this.get_is_skin_ops()+r|0)}}}),Object.defineProperty(g.prototype,"get_a_new_pxl_color_from_pxl_index",{get:function(){return function(t){return 4294967295&this.new_pxl_colors_.buffer_getUint32(this.new_pxls_[0|t])}}}),Object.defineProperty(g.prototype,"reset_cluster",{get:function(){return function(){var t=this.new_pxl_colors_.length;this.max_cluster_=t>65536?65537:t>16384?4097:t>4096?257:t>256?17:1,this.length_clusters_.fill(0,0,0|this.max_cluster);for(var e=0;(0|e)<(0|this.max_cluster);e=(e+1|0)>>>0)this.index_clusters_[0|e]=[]}}}),Object.defineProperty(g.prototype,"add_in_indexes_cluster",{get:function(){return function(t,e){this.index_clusters_[(0|t)>>>0].push((0|e)>>>0)}}}),Object.defineProperty(g.prototype,"set_all_cluster_indexes",{get:function(){return function(){for(var t=0,e=0;(0|t)<(0|this.max_cluster);t=(t+1|0)>>>0)this.all_index_clusters_.set(this.index_clusters_[(0|t)>>>0],(0|e)>>>0),e=(e+this.get_length_in_index_clusters(0|t)|0)>>>0}}}),Object.defineProperty(g.prototype,"get_length_in_index_clusters",{get:function(){return function(t){return(0|this.index_clusters_[(0|t)>>>0].length)>>>0}}}),Object.defineProperty(g.prototype,"get_in_cluster_lengths",{get:function(){return function(t){return(0|this.length_clusters_[(0|t)>>>0])>>>0}}}),Object.defineProperty(g.prototype,"get_an_index_in_clusters",{get:function(){return function(t){return(0|this.all_index_clusters_[0|t])>>>0}}}),Object.defineProperty(g.prototype,"get_a_color_usage",{get:function(){return function(t){return(0|this.pxl_colors_usage_[0|t])>>>0}}}),Object.defineProperty(g.prototype,"set_a_color_usage",{get:function(){return function(t,e){return this.pxl_colors_usage_[0|t]=(0|e)>>>0}}}),Object.defineProperty(g.prototype,"get_a_color_usage_percent",{get:function(){return function(t){return this.pxl_colors_usage_[0|t]/this.new_pxls_.length}}}),Object.defineProperty(g.prototype,"get_average_color_usage_percent",{get:function(){return function(t,e){e=0|((e|=0)<(t|=0)?this.pxl_colors_usage_.length:e);var r=0,n=0,o=0;for(n=0|t;(0|n)<(0|e);n=(n+1|0)>>>0)o=(0|this.get_an_index_in_clusters((0|n)>>>0))>>>0,r+=this.pxl_colors_usage_[0|o]/this.new_pxls_.length;return r/(e-t|0)}}}),Object.defineProperty(g.prototype,"get_a_new_pxl_color",{get:function(){return function(t){return this.new_pxl_colors_.get_new_element(0|t)}}}),Object.defineProperty(g.prototype,"is_pxl_color_skin",{get:function(){return function(t){return this.new_pxl_colors_is_skin_mask_.has(0|t)}}}),Object.defineProperty(g.prototype,"max_cluster",{get:function(){return 0|this.max_cluster_}}),Object.defineProperty(g.prototype,"new_pxls_length",{get:function(){return 0|this.new_pxls_.length}}),Object.defineProperty(g.prototype,"new_pxl_colors_length",{get:function(){return 0|this.new_pxl_colors_.length}}),Object.defineProperty(g.prototype,"best_color_number",{get:function(){return 0|this.best_color_number_}}),Object.defineProperty(g.prototype,"get_data",{get:function(){return function(){return Array.of(this.new_pxls_,this.new_pxl_colors_.subarray_uint32(0,this.new_pxl_colors_.length),{deduplicate:this.get_remove_duplicate_ops(),simplify:this.get_simplify_ops(),classify:this.get_classify_on_x_bits_ops(),skin:this.get_is_skin_ops(),blend:this.get_blend_ops(),match:this.get_match_ops()})}}}),g.prototype.output=function(t){t=t||"heap";var e=this.get_data();if("heap"==t){var r=new Uint32Array(2+e[0].length+e[1].length);return r[0]=0|e[0].length,r[1]=0|e[1].length,r.set(e[0],2),r.set(e[1],2+e[0].length),r.buffer}return e},g.prototype.deduplicate=function(){this.set_remove_duplicate_ops(this.get_remove_duplicate_ops()+1|0),this.reset_deduplicate(0|this.new_pxl_colors_length);for(var t=0,e=0,r=0,n=0,o=0|this.new_pxls_length;(0|n)<(0|o);n=(n+1|0)>>>0)e=0|this.get_a_new_pxl_color_from_pxl_index(0|n),-1==(0|(r=0|this.index_of_color_within_cleaned(0|e)))&&(this.set_cleaned_pxl_colors(0|t,0|e),r=0|t,t=t+1|0),this.increase_color_usage(0|r),this.set_new_pxls(0|n,0|r);this.set_new_pxl_colors(t)},g.prototype.clusterize=function(){this.reset_cluster();var t=0;if(65537===this.max_cluster)for(;(0|t)<(0|this.new_pxl_colors_length);t=(t+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|t)>>>0).rgbaon16bits)>>>0,(0|t)>>>0);else if(4097===this.max_cluster)for(;(0|t)<(0|this.new_pxl_colors_length);t=(t+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|t)>>>0).rgbaon12bits)>>>0,(0|t)>>>0);else if(257===this.max_cluster)for(;(0|t)<(0|this.new_pxl_colors_length);t=(t+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|t)>>>0).rgbaon8bits)>>>0,(0|t)>>>0);else if(17===this.max_cluster)for(;(0|t)<(0|this.new_pxl_colors_length);t=(t+1|0)>>>0)this.add_in_indexes_cluster((0|this.get_a_new_pxl_color((0|t)>>>0).rgbaon4bits)>>>0,(0|t)>>>0);else for(;(0|t)<(0|this.new_pxl_colors_length);t=(t+1|0)>>>0)this.add_in_indexes_cluster(0,(0|t)>>>0);this.max_cluster>1&&this.set_classify_on_x_bits_ops(this.get_classify_on_x_bits_ops()+this.new_pxl_colors_length),this.set_all_cluster_indexes()},g.prototype.process_threshold=function(t,e,r){var n,o,i,a,s=!1,f=[],h=[],_=0,d=0,g=!1,y=!1,v=0,m=0,w=0,x=0,b=0,k=0,L=function(t){return 1-(1-t)*(1-t)}((t=(0|t)>>>0)/(r=(0|r)>>>0)),E=0,S=0,j=0,O=0,P=0,A=0;for(a=c(L*l),i=c(L*u);(0|P)<(0|this.max_cluster);P=(P+1|0)>>>0){for(d=(_+((0|this.get_length_in_index_clusters(0|P))>>>0)|0)>>>0,b=this.get_average_color_usage_percent(0|_,0|d),j=0|_;(0|j)<(0|d);j=(j+1|0)>>>0){if(E=(0|this.get_an_index_in_clusters((0|j)>>>0))>>>0,n=this.get_a_new_pxl_color((0|E)>>>0),g=this.is_pxl_color_skin((0|E)>>>0),(0|(v=(0|this.get_a_color_usage((0|E)>>>0))>>>0))>0)for(f=[],O=0|_;(0|O)<(0|d);O=(O+1|0)>>>0)S=(0|this.get_an_index_in_clusters((0|O)>>>0))>>>0,o=this.get_a_new_pxl_color((0|S)>>>0),y=this.is_pxl_color_skin((0|S)>>>0),0|(m=(0|this.get_a_color_usage((0|S)>>>0))>>>0)&&(0|E)!=(0|S)&&(0|g)==(0|y)&&(w=this.get_a_color_usage_percent((0|E)>>>0)/b,x=this.get_a_color_usage_percent((0|S)>>>0)/b,A=c((A=g&&y?a:g||y?i:L)*(.15*Math.abs(w-x)+.3*(2-(w+x))+.55)/1),n[e](o,A)&&(k=c(m/v),s=!0,this.set_a_color_usage(0|S,0),f.push(o),h.push(k)));(0|f.length)>0&&(p.blend_all(n,f,h),f=[],h=[])}_=0|d}return s},g.prototype.round=function(){if(this.new_pxl_colors_length>1024){for(var t=0|(this.new_pxl_colors_length>32768?4:this.new_pxl_colors_length>32768?3:this.new_pxl_colors_length>16384?2.5:this.new_pxl_colors_length>8192?2:this.new_pxl_colors_length>2048?1.5:(this.new_pxl_colors_length,1)),e=0;(0|e)<(0|this.new_pxl_colors_length);e=(e+1|0)>>>0)this.get_a_new_pxl_color((0|e)>>>0).simplify(t);this.set_simplify_ops(this.get_simplify_ops()+this.new_pxl_colors_length)}},g.prototype.init=function(){return this.round(),this.deduplicate(),this.clusterize(),this},g.prototype.run=function(){var t=0;if(this.new_pxl_colors_length<=this.best_color_number)return this.deduplicate(),this.clusterize(),this;for(var e=["euclidean_match_with","euclidean_match_with","euclidean_match_with"],r=this.speed=this.new_pxl_colors_length>32768?e[0]:this.new_pxl_colors_length>1024?e[1]:e[2];this.new_pxl_colors_length>this.best_color_number;)t=t+1|0,this.process_threshold(t,r,256)&&(this.deduplicate(),this.clusterize());return this},g.split_image_data=function(t){for(var e=new Uint32Array(t.data.buffer),r=Uint32Array.from(new Set(e)),n={},o=r.length,i=new Uint32Array(e.length),a=0,s=0|o;(0|a)<(0|s);a=(a+1|0)>>>0)n[r[0|a]]=(0|a)>>>0;for(a=0,s=0|e.length;(0|a)<(0|s);a=(a+1|0)>>>0)i[0|a]=(0|n[e[0|a]])>>>0;return[i,r,e,o]};const y=function(t,e){var r=i(g.split_image_data(t),4),n=r[0],o=r[1],a=r[2],s=r[3],c=(Date.now(),"auto"===e),u=parseFloat(e)>0&&parseFloat(e)<1,l=parseInt(e)<0,f=c?"auto":!u&&!l?parseInt(e):l?Math.max(1,s+parseInt(e)):u?Math.max(1,parseFloat(e)*s):s;if("auto"===f&&(f=s>255?255:s/2|0),f>=s)return t;for(var h=new g({pxls:n,pxl_colors:o,speed:"auto",number_of_color:Math.min(s,f),width:t.width,height:t.height}).init().run().output("split"),p=(Date.now(),h[0]),_=0|p.length,d=h[1],y=0;(0|y)<(0|_);y=(y+1|0)>>>0)a[0|y]=(0|d[(0|p[0|y])>>>0])>>>0;return t=new ImageData(new Uint8ClampedArray(a.buffer),t.width,t.height)}},37532:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(36811),o=r(29411);n.A.addDefaultLocale(o.A);const i=new n.A("en-US")},20793:t=>{var e="\n  ".concat('var fu = function(image_data, scale) {\n\n    return new Promise(function (resolve, reject) {\n\n        var CRT = (function () {\n\n            "use asm";\n\n            var sqrt = Math.sqrt;\n            var cos = Math.cos;\n            var sin = Math.sin;\n            var min = Math.min;\n            var max = Math.max;\n            var imul = Math.imul;\n\n            function apply(imageData, srcx, srcy, scale, threshold) {\n\n                srcx = srcx | 0;\n                srcy = srcy | 0;\n                scale = scale | 0;\n                threshold = +threshold;\n\n                var Channels = 4;\n                var SizeX = srcx * scale | 0;\n                var SizeY = srcy * scale | 0;\n\n                var ScaledImage = new Uint8ClampedArray(SizeX * SizeY * Channels);\n\n                var total = SizeY | 0;\n                var current = 0;\n\n                var ppx = 0.0;\n                var ppy = 0.0;\n                var posx = 0;\n                var posy = 0;\n                var sub_posx = 0.0;\n                var sub_posy = 0.0;\n                var positionx = 0;\n                var positiony = 0;\n                var center = 0;\n                var left = 0;\n                var right = 0;\n                var midleft = 0;\n                var midright = 0;\n                var ret = 0;\n                var cr = 0;\n                var cg = 0;\n                var cb = 0;\n                var mlb = 0;\n                var mrr = 0;\n                var mrg = 0;\n                var lb = 0;\n                var rr = 0;\n                var rg = 0;\n                var alpha = 0;\n\n                for (var y = 0; y < SizeY; y = y + 1 | 0) {\n\n                    var offset = imul(y, SizeX) | 0;\n                    ppy = +(y / SizeY);\n\n                    for (var x = 0; x < SizeX; x = x + 1 | 0) {\n\n                        ppx = +(x / SizeX);\n                        posx = ~~(ppx * srcx);\n                        posy = ~~(ppy * srcy);\n                        sub_posx = +(ppx * srcx * 6) % 1.0;\n                        sub_posy = +(ppy * srcy * 6) % 1.0;\n                        positionx = posx | 0;\n                        positiony = posy | 0;\n\n                        center = CLR(imageData, srcx, srcy, positionx, positiony, 0, 0);\n                        left = CLR(imageData, srcx, srcy, positionx, positiony, -1, 0);\n                        right = CLR(imageData, srcx, srcy, positionx, positiony, 1, 0);\n\n                        if (sub_posy < 1.0 / 6.0) {\n\n                            center = mix(center, CLR(imageData, srcx, srcy, positionx, positiony, 0, -1), 0.5 - sub_posy / 2.0);\n                            left = mix(left, CLR(imageData, srcx, srcy, positionx, positiony, -1, -1), 0.5 - sub_posy / 2.0);\n                            right = mix(right, CLR(imageData, srcx, srcy, positionx, positiony, 1, -1), 0.5 - sub_posy / 2.0);\n\n                        } else if (sub_posy > 5.0 / 6.0) {\n\n                            center = mix(center, CLR(imageData, srcx, srcy, positionx, positiony, 0, 1), sub_posy / 2.0);\n                            left = mix(left, CLR(imageData, srcx, srcy, positionx, positiony, -1, 1), sub_posy / 2.0);\n                            right = mix(right, CLR(imageData, srcx, srcy, positionx, positiony, 1, 1), sub_posy / 2.0);\n                        }\n\n                        var scanline_multiplier;\n\n                        if (sub_posy < 0.5) {\n\n                            scanline_multiplier = (sub_posy * 2) * 0.3 + 0.7;\n\n                        } else {\n\n                            scanline_multiplier = ((1 - sub_posy) * 2) * 0.3 + 0.7;\n                        }\n\n                        Mul(center, scanline_multiplier);\n                        Mul(left, scanline_multiplier);\n                        Mul(right, scanline_multiplier);\n\n                        var odd = (ppx * srcx) & 1;\n\n                        var gradient_position;\n\n                        if (odd) {\n\n                            posy = +(posy + 0.5);\n                            posy = +(posy % 1.0);\n                        }\n\n                        if (posy < 1.0 / 3.0) {\n\n                            gradient_position = +(posy * 3.0);\n\n                            Mul(center, gradient_position * 0.6 + 0.4);\n                            Mul(left, gradient_position * 0.6 + 0.4);\n                            Mul(right, gradient_position * 0.6 + 0.4);\n\n                        } else if (posy > 2.0 / 3.0) {\n\n                            gradient_position = +(1 - posy) * 3.0;\n\n                            Mul(center, gradient_position * 0.6 + 0.4);\n                            Mul(left, gradient_position * 0.6 + 0.4);\n                            Mul(right, gradient_position * 0.6 + 0.4);\n                        }\n\n                        if (posx < 1.0 / 6.0 || posx > 5.0 / 6.0) {\n\n                            posy = +(posy + 0.5);\n                            posy = +(posy % 1.0);\n\n                            if (posy < 1.0 / 3.0) {\n\n                                gradient_position = +(posy * 3.0);\n\n                                if (posx < 0.5) {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (ppx) * 6.0));\n\n                                } else {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (1 - ppx) * 6.0));\n                                }\n\n                                Mul(center, gradient_position * 0.6 + 0.4);\n                                Mul(left, gradient_position * 0.6 + 0.4);\n                                Mul(right, gradient_position * 0.6 + 0.4);\n\n                            } else if (posy > 2.0 / 3.0) {\n\n                                gradient_position = +(1 - posy) * 3.0;\n\n                                if (posx < 0.5) {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (ppx) * 6.0));\n\n                                } else {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (1 - ppx) * 6.0));\n                                }\n\n                                Mul(center, gradient_position * 0.6 + 0.4);\n                                Mul(left, gradient_position * 0.6 + 0.4);\n                                Mul(right, gradient_position * 0.6 + 0.4);\n                            }\n                        }\n\n                        midleft = mix(left, center, 0.5);\n                        midright = mix(right, center, 0.5);\n\n                        cr = Red(center) | 0;\n                        cg = Green(center) | 0;\n                        cb = Blue(center) | 0;\n                        mlb = Blue(midleft) | 0;\n                        mrr = Red(midright) | 0;\n                        mrg = Green(midright) | 0;\n                        lb = Blue(left) | 0;\n                        rr = Red(right) | 0;\n                        rg = Green(right) | 0;\n                        alpha = Alpha(center) | 0;\n\n                        if (ppx < 1.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, cr * 255, cg * 255, lb * 255), ARGBINT(alpha, cr * 255, cg * 255, lb * 255), sub_posx);\n\n                        } else if (ppx < 2.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, cr * 255, cg * 255, lb * 255), ARGBINT(alpha, cr * 255, cg * 255, mlb * 255), sub_posx);\n\n                        } else if (ppx < 3.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, cr * 255, cg * 255, mlb * 255), ARGBINT(alpha, mrr * 255, cg * 255, cb * 255), sub_posx);\n\n                        } else if (ppx < 4.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, mrr * 255, cg * 255, cb * 255), ARGBINT(alpha, rr * 255, cg * 255, cb * 255), sub_posx);\n\n                        } else if (ppx < 5.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, rr * 255, cg * 255, cb * 255), ARGBINT(alpha, rr * 255, mrg * 255, cb * 255), sub_posx);\n\n                        } else {\n\n                            ret = mix(ARGBINT(alpha, rr * 255, mrg * 255, cb * 255), ARGBINT(alpha, rr * 255, rg * 255, cb * 255), sub_posx);\n                        }\n\n                        if (positionx < 1) {\n\n                            Mul(ret, positionx | 0);\n\n                        } else if (positionx > srcx - 1) {\n\n                            Mul(ret, srcx - positionx | 0);\n                        }\n\n                        if (positiony < 1) {\n\n                            Mul(ret, positiony | 0);\n\n                        } else if (positiony > srcy - 1) {\n\n                            Mul(ret, srcy - positiony | 0);\n                        }\n\n                        ScaledImage[offset * Channels] = Red(ret) | 0;\n                        ScaledImage[offset * Channels + 1] = Green(ret) | 0;\n                        ScaledImage[offset * Channels + 2] = Blue(ret) | 0;\n                        ScaledImage[offset * Channels + 3] = Alpha(ret) | 0;\n\n                    }\n\n                    current = current + 1 | 0;\n                }\n\n                return new ImageData(ScaledImage, SizeX, SizeY);\n            }\n\n            function mix(a, b, c) {\n\n                a = a | 0;\n                b = b | 0;\n                c = +c;\n\n                return ((a + ((b - a) * c)) | 0);\n            }\n\n            function Mul(x, y) {\n\n                x = x | 0;\n                y = +y;\n\n                return ((x * y) | 0);\n            }\n\n            function Red(rgb) {\n\n                rgb = rgb | 0;\n\n                return ((rgb >>> 16) & 0xFF) | 0;\n            }\n\n            function Green(rgb) {\n\n                rgb = rgb | 0;\n\n                return ((rgb >>> 8) & 0xFF) | 0;\n            }\n\n            function Blue(rgb) {\n\n                rgb = rgb | 0;\n\n                return (rgb & 0xFF) | 0;\n            }\n\n            function Alpha(rgb) {\n\n                rgb = rgb | 0;\n\n                return (rgb >>> 24) | 0;\n            }\n\n            function ARGBINT(a, r, g, b) {\n\n                a = a | 0;\n                r = r | 0;\n                g = g | 0;\n                b = b | 0;\n\n                return (((((a) << 24) | (r << 16) | (g << 8) | b) >>> 0) | 0);\n            }\n\n            function CLR(Input, srcx, srcy, x, y, dx, dy) {\n\n                Input = Input | 0;\n                srcx = srcx | 0;\n                srcy = srcy | 0;\n                x = x | 0;\n                y = y | 0;\n                dx = dx | 0;\n                dy = dy | 0;\n\n                var Channels = 4;\n\n                var xx = 0;\n                var yy = 0;\n\n                xx = (x + dx) | 0;\n                yy = (y + dy) | 0;\n\n                xx = max(0, min(srcx - 1, xx)) | 0;\n                yy = max(0, min(srcy - 1, yy)) | 0;\n\n                var index = 0;\n\n                index = ((yy * srcx + xx) * Channels) | 0;\n\n                var r = 0;\n                var g = 0;\n                var b = 0;\n                var a = 0;\n\n                r = (Input[index] | 0);\n                g = (Input[index + 1] | 0);\n                b = (Input[index + 2] | 0);\n                a = (Input[index + 3] | 0);\n\n                return ARGBINT(a, r, g, b) | 0;\n            }\n\n            return { Apply: apply };\n        }());\n\n        resolve(CRT.Apply(image_data.data, image_data.width, image_data.height, scale, 0));\n    });\n}\n\nfunction crt(image_data, scale) {\n    return new Promise(function(resolve, reject){\n        fu(image_data, scale).then((result) => {\n            resolve(result);\n        });\n    });\n}\n\n',"\n    self.onmessage = function onmessage(event) {\n        if (event.data.type === 'imageData') {\n            const result = crt(event.data.imageData, event.data.data.scale).then(function(result){\n                self.postMessage([result, event.data.id, event.data.algorithm]);\n            });\n        }\n    };\n");t.exports={functionString:e,functionSize:function(t,e,r){return{width:t*r,height:e*r,arrayBufferLength:t*r*e*r*4}}}},81968:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});r(23792),r(54743),r(11745),r(38309),r(26099),r(34594),r(22134),r(81630),r(72170),r(75044),r(69539),r(31694),r(89955),r(33206),r(44496),r(66651),r(12887),r(19369),r(66812),r(8995),r(31575),r(36072),r(88747),r(28845),r(29423),r(57301),r(373),r(86614),r(41405),r(33684);const n=function(){var t,e,r,n,o,i,a;function s(e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}return function(c){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,l=c.width,f=c.height,h=l*u,p=f*u;t||function(){e||(e=new OffscreenCanvas(1,1)),t||(t=e.getContext("webgl2"));var c=s(t.VERTEX_SHADER,"#version 300 es\n        in vec2 position;\n        out vec2 vTexCoord;\n        \n        void main() {\n            vTexCoord = (position + 1.0) * 0.5; // Convert from clip space to UV\n            gl_Position = vec4(position, 0.0, 1.0);\n        }\n    "),u=s(t.FRAGMENT_SHADER,"#version 300 es\n    precision highp float;\n    \n    uniform vec3 _uiResolution;\n    uniform sampler2D _uiChannel0;\n    \n    in vec2 vTexCoord;\n    out vec4 fragColor;\n    \n    float _uhardScan = -8.0;\n    float _uhardPix = -3.0;\n    vec2 _uwarp = vec2(0.03125, 0.0416666679);\n    float _umaskDark = 0.5;\n    float _umaskLight = 1.5;\n    \n    float _uToLinear1(in float _uc){\n      return _uc <= 0.04045 ? (_uc / 12.92) : pow((_uc + 0.055) / 1.055, 2.4);\n    }\n    vec3 _uToLinear(in vec3 _uc){\n      return vec3(_uToLinear1(_uc.r), _uToLinear1(_uc.g), _uToLinear1(_uc.b));\n    }\n    float _uToSrgb1(in float _uc){\n      return _uc < 0.0031308 ? (_uc * 12.92) : (1.055 * pow(_uc, 1.0 / 2.4) - 0.055);\n    }\n    vec3 _uToSrgb(in vec3 _uc){\n      return vec3(_uToSrgb1(_uc.r), _uToSrgb1(_uc.g), _uToSrgb1(_uc.b));\n    }\n    \n    vec3 _uFetch(in vec2 _pos, in vec2 _off){\n      vec2 p = floor((_pos * (_uiResolution.xy / 6.0)) + _off) / (_uiResolution.xy / 6.0);\n      if (max(abs(p.x - 0.5), abs(p.y - 0.5)) > 0.5) return vec3(0.0);\n      return _uToLinear(texture(_uiChannel0, p).rgb);\n    }\n    \n    vec2 _uDist(in vec2 _pos){\n      vec2 p = _pos * (_uiResolution.xy / 6.0);\n      return -(p - floor(p) - vec2(0.5));\n    }\n    \n    float _uGaus(float x, float scale){\n      return exp2(scale * x * x);\n    }\n    \n    vec3 _uHorz3(vec2 pos, float off){\n      vec3 b = _uFetch(pos, vec2(-1.0, off));\n      vec3 c = _uFetch(pos, vec2(0.0, off));\n      vec3 d = _uFetch(pos, vec2(1.0, off));\n      float dst = _uDist(pos).x;\n      float wb = _uGaus(dst - 1.0, _uhardPix);\n      float wc = _uGaus(dst, _uhardPix);\n      float wd = _uGaus(dst + 1.0, _uhardPix);\n      return (b * wb + c * wc + d * wd) / (wb + wc + wd);\n    }\n    \n    vec3 _uHorz5(vec2 pos, float off){\n      vec3 a = _uFetch(pos, vec2(-2.0, off));\n      vec3 b = _uFetch(pos, vec2(-1.0, off));\n      vec3 c = _uFetch(pos, vec2(0.0, off));\n      vec3 d = _uFetch(pos, vec2(1.0, off));\n      vec3 e = _uFetch(pos, vec2(2.0, off));\n      float dst = _uDist(pos).x;\n      float wa = _uGaus(dst - 2.0, _uhardPix);\n      float wb = _uGaus(dst - 1.0, _uhardPix);\n      float wc = _uGaus(dst, _uhardPix);\n      float wd = _uGaus(dst + 1.0, _uhardPix);\n      float we = _uGaus(dst + 2.0, _uhardPix);\n      return (a * wa + b * wb + c * wc + d * wd + e * we) / (wa + wb + wc + wd + we);\n    }\n    \n    float _uScan(vec2 pos, float off){\n      float dst = _uDist(pos).y;\n      return _uGaus(dst + off, _uhardScan);\n    }\n    \n    vec3 _uTri(vec2 pos){\n      vec3 a = _uHorz3(pos, -1.0);\n      vec3 b = _uHorz5(pos,  0.0);\n      vec3 c = _uHorz3(pos,  1.0);\n      float wa = _uScan(pos, -1.0);\n      float wb = _uScan(pos,  0.0);\n      float wc = _uScan(pos,  1.0);\n      return a * wa + b * wb + c * wc;\n    }\n    \n    vec2 _uWarp(vec2 pos){\n      pos = pos * 2.0 - 1.0;\n      pos *= vec2(1.0 + pos.y * pos.y * _uwarp.x, 1.0 + pos.x * pos.x * _uwarp.y);\n      return pos * 0.5 + 0.5;\n    }\n    \n    vec3 _uMask(vec2 pos){\n      pos.x += pos.y * 3.0;\n      vec3 mask = vec3(_umaskDark);\n      float frac = fract(pos.x / 6.0);\n      if (frac < 0.333) mask.r = _umaskLight;\n      else if (frac < 0.666) mask.g = _umaskLight;\n      else mask.b = _umaskLight;\n      return mask;\n    }\n    \n    float _uBar(float pos, float bar){\n      pos -= bar;\n      return (pos * pos < 4.0) ? 0.0 : 1.0;\n    }\n    \n   void main() {\n  vec2 fragCoord = vTexCoord * _uiResolution.xy;\n  vec4 fragColorLinear = vec4(0.0);\n\n  // Treat the whole screen as View 3\n  vec2 pos = _uWarp(fragCoord / _uiResolution.xy);\n\n  _uhardScan = -12.0;\n  _umaskDark = _umaskLight = 1.0;\n\n  fragColorLinear.rgb = _uTri(pos) * _uMask(fragCoord.xy);\n  fragColorLinear.a = 1.0;\n\n  fragColor = vec4(_uToSrgb(fragColorLinear.rgb), 1.0);\n}\n    ");if(r=t.createProgram(),t.attachShader(r,c),t.attachShader(r,u),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(r));t.useProgram(r),n=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(r,"position");t.enableVertexAttribArray(l),t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),o=t.getUniformLocation(r,"_uiChannel0"),i=t.getUniformLocation(r,"_uiResolution"),a=t.createTexture(),t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.createFramebuffer()}(),e.width=h,e.height=p,t.viewport(0,0,h,p),t.useProgram(r),t.bindBuffer(t.ARRAY_BUFFER,n),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,l,f,0,t.RGBA,t.UNSIGNED_BYTE,c.data),t.uniform1i(o,0),t.uniform3f(i,h,p,1),t.drawArrays(t.TRIANGLES,0,6);var _=new Uint8ClampedArray(h*p*4);return t.readPixels(0,0,h,p,t.RGBA,t.UNSIGNED_BYTE,_),new ImageData(_,h,p)}}()},87507:(t,e,r)=>{"use strict";r.d(e,{E:()=>m,z:()=>w});r(52675),r(89463),r(66412),r(2259),r(78125),r(51629),r(23792),r(62062),r(94490),r(34782),r(54743),r(11745),r(38309),r(62010),r(4731),r(60479),r(59904),r(84185),r(40875),r(10287),r(26099),r(3362),r(31415),r(47764),r(22134),r(61740),r(81630),r(72170),r(75044),r(69539),r(31694),r(89955),r(33206),r(48345),r(44496),r(66651),r(12887),r(19369),r(66812),r(8995),r(31575),r(36072),r(88747),r(28845),r(29423),r(57301),r(373),r(86614),r(41405),r(33684),r(23500),r(62953),r(22774);var n=r(23138);r(59089),r(45700),r(28706),r(74423),r(60739),r(89572),r(23288),r(94170),r(2892),r(79432),r(58940),r(60825),r(27495),r(38781),r(21699),r(71761),r(68156),r(25440),r(11392),r(42762),r(21489),r(35874),r(12041),r(76031);var o=r(60987);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var _="suspendedStart",d="suspendedYield",g="executing",y="completed",v={};function m(){}function w(){}function x(){}var b={};f(b,c,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(R([])));L&&L!==r&&n.call(L,c)&&(b=L);var E=x.prototype=m.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,s,c){var u=p(t[o],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=_;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===_)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var u=p(e,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(i(e)+" is not iterable")}return w.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(j.prototype),f(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),f(E,l,"Generator"),f(E,c,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function s(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}var u=function(){var t=c(a().mark((function t(e){var r,n,i,s=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:0,n=s.length>2&&void 0!==s[2]?s[2]:function(){},i=s.length>3&&void 0!==s[3]?s[3]:function(){},t.abrupt("return",new Promise(function(){var t=c(a().mark((function t(s,u){var l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n("AI CONVERT"),i("COMPUTE",Date.now(),Date.now()+8e4),t.prev=2,t.next=5,o.Kj.connect("primerz/face-to-all-777");case 5:l=t.sent,0===r?l.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasart"}).then((function(){l.predict("/run_lora",{face_image:e,prompt:"In lucasarts style : a precise illustration of ('A person':0.35) (in lucasarts style). Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 3D, detailed illustration, natural color. lucasarts style.",negative:"Photography, too simple, photo, picture, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.8,face_strength:.95,image_strength:.3,guidance_scale:9,depth_control_scale:.75}).then(function(){var t=c(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,fetch(e.data[0][1].url);case 3:return t.next=5,t.sent.blob();case 5:t.t1=t.sent,(0,t.t0)(t.t1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){u(t.message)}))})).catch((function(t){u(t.message)})):1===r?l.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/pixl"}).then((function(){l.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.9,face_strength:.95,image_strength:.22,guidance_scale:9,depth_control_scale:.8}).then(function(){var t=c(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,fetch(e.data[0][1].url);case 3:return t.next=5,t.sent.blob();case 5:t.t1=t.sent,(0,t.t0)(t.t1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){u(t.message)}))})).catch((function(t){u(t.message)})):2===r&&l.predict("/load_custom_lora",{link:"https://huggingface.co/primerz/lucasartsxbrz2"}).then((function(){l.predict("/run_lora",{face_image:e,prompt:"a precise illustration of ('A person':0.3) Artwork, detailed digital painting, bold-edge, sexy character, well aligned face, enhanced 2D, detailed illustration, natural color.",negative:"Photography, simple, photo-realistic, bad quality, ugly, text, bad, bad picture, text, error, ugly, extra fingers, extra toes, mutated hands, mutation, deformed, bad anatomy, bad proportions, extra limbs, disfigured, missing arms, missing legs, extra arms, extra legs, fused fingers, fused toes, too many fingers, too many toes, username, watermark, signature, realistic, realism, photographic, screenshot, movie, photo, low-resolution.",lora_scale:.8,face_strength:.95,image_strength:.2,guidance_scale:9,depth_control_scale:.8}).then(function(){var t=c(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,fetch(e.data[0][1].url);case 3:return t.next=5,t.sent.blob();case 5:t.t1=t.sent,(0,t.t0)(t.t1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){u(t.message)}))})).catch((function(t){u(t.message)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),u("Please Try Again Later");case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,r){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=r(75600);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(){h=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var _="suspendedStart",d="suspendedYield",g="executing",y="completed",v={};function m(){}function w(){}function x(){}var b={};u(b,a,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(R([])));L&&L!==r&&n.call(L,a)&&(b=L);var E=x.prototype=m.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,s){var c=p(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==f(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=_;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===_)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var u=p(e,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(f(e)+" is not iterable")}return w.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=u(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(j.prototype),u(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function p(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){p(i,n,o,a,s,"next",t)}function s(t){p(i,n,o,a,s,"throw",t)}a(void 0)}))}}function d(t){var e=t.width,r=t.height,n=t.data,o=new Uint32Array(n.buffer);function i(t,e,r,n){return r[e*n+t|0]}function a(t,e,r,n,o){n[e*o+t|0]=r>>>0}for(var s={},c=new Uint32Array(8),u=0,l=1;l<r-1;l=l+1|0)for(var f=1;f<e-1;f=f+1|0){s={},i(f,l,o,e),c[0]=i(f-1,l-1,o,e),c[1]=i(f,l-1,o,e),c[2]=i(f+1,l-1,o,e),c[3]=i(f-1,l,o,e),c[4]=i(f+1,l,o,e),c[5]=i(f-1,l+1,o,e),c[6]=i(f,l+1,o,e),c[7]=i(f+1,l+1,o,e);for(var h=0;h<8;h++)s[u=c[h]]=(s[u]||0)+1,h>=5&&s[u]>=6&&a(f,l,u,o,e)}var p=new Uint8ClampedArray(o.buffer);return new ImageData(p,e,r)}function g(t,e,r){var n=t*e,o=Math.sqrt(r/n);return Math.min(o,1)}function y(t,e){var r;try{if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas not supported");r=new OffscreenCanvas(t,e)}catch(n){(r=document.createElement("canvas")).width=t,r.height=e}return r}function v(t){t.imageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1}var m=function(){var t=_(h().mark((function t(e,r,n,o){var i,a,s,c,u,l,f,p;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r*n,t.next=3,createImageBitmap(e);case 3:return a=t.sent,s=g(a.width,a.height,i),c=y(a.width,a.height),v(u=c.getContext("2d")),u.drawImage(a,0,0,a.width,a.height),a.close(),l=u.getImageData(0,0,c.width,c.height),f=new Uint32Array(l.data.buffer),p=Uint32Array.from(new Set(f)),t.abrupt("return",!!Boolean(s<=1&&p.length<o)&&l);case 14:case"end":return t.stop()}}),t)})));return function(e,r,n,o){return t.apply(this,arguments)}}(),w=function(){var t=_(h().mark((function t(e,r,o,i,a,s,c,f){var p,_,m,w,x,b,k,L,E,S,j,O;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E=function(t,e){return(0,n.A)(t,e)},t.next=3,(0,l.Ay)();case 3:if(!c){t.next=12;break}return t.prev=4,t.next=7,u(e,f,a,s);case 7:e=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:return p=r*o,t.next=15,createImageBitmap(e,{resizeQuality:"pixelated"});case 15:return _=t.sent,m=g(_.width,_.height,p),w=Math.round(_.width*m),x=Math.round(_.height*m),b=y(w,x),v(k=b.getContext("2d")),k.drawImage(_,0,0,w,x),_.close(),L=k.getImageData(0,0,w,x),k.putImageData(L,0,0),S=[{name:"XS",size:90,colors:50},{name:"S",size:120,colors:60},{name:"M",size:150,colors:70},{name:"L",size:180,colors:80},{name:"XL",size:210,colors:90},{name:"XXL",size:240,colors:100}],j=y(1,1),v(j.getContext("2d",{willReadFrequently:!0})),O=function(t,e,r){var n=g(e.width,e.height,t.size*t.size),o=e.width,i=e.height,a=Math.round(o*n),s=Math.round(i*n),c=(0,l.Yj)(r,o,i,a,s,!1,0),u=new ImageData(new Uint8ClampedArray(c),a,s);return E(u,t.colors)},t.abrupt("return",{artworks:S.map((function(t){return t.imageData=d(O(t,b,k.getImageData(0,0,b.width,b.height).data)),t})),prompt:prompt||""});case 32:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e,r,n,o,i,a,s,c){return t.apply(this,arguments)}}()},23308:(t,e,r)=>{"use strict";r.a(t,(async(t,n)=>{try{r.d(e,{Y:()=>d});r(52675),r(89463),r(66412),r(2259),r(78125),r(51629),r(23792),r(94490),r(34782),r(54743),r(11745),r(38309),r(62010),r(4731),r(36033),r(60479),r(59904),r(84185),r(40875),r(79432),r(10287),r(26099),r(3362),r(47764),r(11392),r(21489),r(81630),r(72170),r(75044),r(69539),r(31694),r(89955),r(33206),r(44496),r(66651),r(12887),r(19369),r(66812),r(8995),r(31575),r(36072),r(88747),r(28845),r(29423),r(57301),r(373),r(86614),r(41405),r(33684),r(23500),r(62953);var o=r(18046),i=r(24234),a=r(54136),s=r(2657),c=t([o]);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(){y=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",_="executing",d="completed",v={};function m(){}function w(){}function x(){}var b={};u(b,a,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(R([])));L&&L!==r&&n.call(L,a)&&(b=L);var E=x.prototype=m.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==g(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===_)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=_;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(g(e)+" is not iterable")}return w.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=u(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(j.prototype),u(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function v(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function m(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){v(i,n,o,a,s,"next",t)}function s(t){v(i,n,o,a,s,"throw",t)}a(void 0)}))}}o=(c.then?(await c)():c)[0];var u="data:image/",l="data:image/webp;base64,",f="data:image/png;base64,",h=new Map,p=new Map;function w(t){return x.apply(this,arguments)}function x(){return(x=m(y().mark((function t(e){var r,n,i;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new Uint8Array(0),n="UNKNOWN",i="","string"!=typeof e){t.next=16;break}if(!e.startsWith(u)){t.next=14;break}return e.startsWith(l)?n="WEBP":e.startsWith(f)&&(n="PNG"),t.t0=Uint8Array,t.next=8,fetch(e);case 8:return t.next=10,t.sent.arrayBuffer();case 10:t.t1=t.sent,r=new t.t0(t.t1),t.next=16;break;case 14:n="IMAGE",r=(0,o.s5)(e);case 16:return i=(0,o.QQ)(r,o.$y.Base58),t.abrupt("return",{data:r,type:n,hash:i});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var _=function(t,e,r){return new Promise((function(n,o){var i={id:r,type:t,data:e},a=(0,s.R9)(e),c=a.width,u=a.height;i.width=c,i.height=u,n(i)}))},d=function(){var t=function(){var t=m(y().mark((function t(e){var r,n,o,i,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:if(r=t.sent,n=r.hash,o=r.type,i=r.data,!h.has(n)){t.next=10;break}return t.abrupt("return",h.get(n));case 10:return t.next=12,_(o,i,n);case 12:return a=t.sent,h.set(a.id,a),h.size>=600&&Object.keys(h).slice(-100).forEach((function(t){h.delete(t)})),t.abrupt("return",a);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e=function(){var t=m(y().mark((function t(e){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){if(p.has(e.id))t(p.get(e.id));else{var n=function(r){p.set(e.id,r),p.size>=600&&Object.keys(p).slice(-100).forEach((function(t){p.delete(t)})),t(r)};"PNG"===e.type?(0,a.A)(e.data).then(n):"WEBP"===e.type&&(0,i.A)(e.data).then(n)}})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{get_new_img_obj:t,get_new_img_data:e}};n()}catch(b){n(b)}}))},92059:(t,e,r)=>{"use strict";r.a(t,(async(t,n)=>{try{r.d(e,{E6:()=>P,R2:()=>A,eu:()=>O,px:()=>j});r(52675),r(89463),r(66412),r(2259),r(45700),r(78125),r(51629),r(25276),r(23792),r(94490),r(34782),r(54743),r(11745),r(38309),r(59089),r(89572),r(62010),r(4731),r(36033),r(60479),r(2892),r(59904),r(84185),r(40875),r(79432),r(10287),r(26099),r(16034),r(3362),r(47764),r(21489),r(81630),r(72170),r(75044),r(69539),r(31694),r(89955),r(33206),r(44496),r(66651),r(12887),r(19369),r(66812),r(8995),r(31575),r(36072),r(88747),r(28845),r(29423),r(57301),r(373),r(86614),r(41405),r(33684),r(23500),r(62953),r(3296),r(27208),r(48408);var o=r(71768),i=r(20793),a=r.n(i),s=r(7514),c=r(81968),u=t([o,s]);function p(){p=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",_="suspendedYield",d="executing",y="completed",v={};function m(){}function w(){}function x(){}var b={};u(b,a,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(R([])));L&&L!==r&&n.call(L,a)&&(b=L);var E=x.prototype=m.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==g(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:_,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(g(e)+" is not iterable")}return w.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=u(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(j.prototype),u(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function _(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_(i,n,o,a,s,"next",t)}function s(t){_(i,n,o,a,s,"throw",t)}a(void 0)}))}}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function m(t){var e=w(t,"string");return"symbol"==g(e)?e:e+""}function w(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function x(t,e){var r=document.createElement("canvas"),n=document.createElement("canvas");r.width=t.width*e,r.height=t.height*e,n.width=t.width,n.height=t.height;var o=r.getContext("2d"),i=n.getContext("2d");return o.imageSmoothingEnabled=!1,i.imageSmoothingEnabled=!1,i.putImageData(t,0,0),o.drawImage(n,0,0,n.width,n.height,0,0,r.width,r.height),o.getImageData(0,0,r.width,r.height)}[o,s]=u.then?(await u)():u;var l=new(function(){return t=function t(e){y(this,t),this.workers=new Map,this.workerScripts=e},e=[{key:"createWorker",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.workers.has(t))return this.workers.get(t).worker;var n,o=new Blob([e],{type:"application/javascript"}),i=URL.createObjectURL(o);return n=r?new SharedWorker(i):new Worker(i),this.workers.set(t,{worker:n,type:r?"shared":"dedicated"}),n}},{key:"sendDataToWorker",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=this.workers.get(t);if(!o){if(void 0===this.workerScripts[t])throw new Error("Worker ".concat(t," not found"));o=this.createWorker(t,this.workerScripts[t],!1)}var i=o,a=i.worker,s=i.type,c={type:r.type||"default",data:e,id:n,algorithm:t},u=[];if("canvas"===r.type){var l=r.canvas.transferControlToOffscreen();c.canvas=l,u.push(l)}else"sharedBuffer"===r.type?(c.sharedArrayBuffer=r.sharedArrayBuffer,u.push(r.sharedArrayBuffer)):"imageData"===r.type&&(c.imageData=e.data);"dedicated"===s?a.postMessage(c,u):"shared"===s&&(a.port.postMessage(c,u),a.port.start()),"dedicated"===s?a.onmessage=function(t){r.onReceive&&r.onReceive(t.data[0],t.data[1],t.data[2])}:"shared"===s&&(a.port.onmessage=function(t){r.port.onReceive&&r.port.onReceive(t.data[0],t.data[1],t.data[2])})}},{key:"terminateWorker",value:function(t){var e=this.workers.get(t);e&&("dedicated"===e.type?e.worker.terminate():"shared"===e.type&&e.worker.port.close(),this.workers.delete(t))}}],e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}())({crt:a().functionString}),f={xbrz:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}},hex:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}},sqr:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}},crt:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}}},h=0;function b(t){for(var e in f)e!==t&&(l.terminateWorker(e),f[e].callbacks={})}function k(t,e,r){return L.apply(this,arguments)}function L(){return(L=d(p().mark((function t(e,r,n){var o,i,a,s,c,u,l,_,d;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof f[n].callbacks[r]){t.next=6;break}if(void 0!==o){t.next=5;break}return t.next=4,createImageBitmap(e,0,0,e.width,e.height);case 4:o=t.sent;case 5:f[n].callbacks[r](e,o);case 6:if(void 0===f[n].data[r]){t.next=17;break}if(void 0!==o){t.next=11;break}return t.next=10,createImageBitmap(e,0,0,e.width,e.height);case 10:o=t.sent;case 11:if(i=e.data.byteLength,f[n].data[r]=e,f[n].bitmap[r]=o,f[n].timestamp[r]=0|Date.now(),(h+=i)>262144){for(a=Object.keys(f[n].timestamp),s=Object.values(f[n].timestamp),c=0|Date.now(),u=0,l=s.length;u<l;u++)s[u]<c&&(c=s[u]);(_=a[s.indexOf(c)])&&(d=0|f[n].data[_].data.byteLength,delete f[n].data[_],f[n].bitmap[_].close(),delete f[n].bitmap[_],delete f[n].callbacks[_],delete f[n].timestamp[_],h-=d)}case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,e,r,n){return S.apply(this,arguments)}function S(){return S=d(p().mark((function t(e,r,n,i){var a,u,h,_,d,g,y,v,m,w,L,E,S=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(a=S.length>5?S[5]:void 0)+"-"+e+"-"+n,b(e),f[e].callbacks[a]=i,u=Object.keys(f[e].callbacks).length,void 0===f[e].data[a]||"function"!=typeof f[e].callbacks[a]){t.next=12;break}h=f[e].data[a],_=f[e].bitmap[a],f[e].callbacks[a](h,_),t.next=45;break;case 12:if(!f[e].worker){t.next=16;break}l.sendDataToWorker(e,{data:r,scale:n},{type:"imageData",onReceive:k},a),t.next=45;break;case 16:if("hex"!==e){t.next=23;break}return d=(0,o.XX)(new Uint8Array(r.data.buffer),r.width,r.height,n),g=d.width,y=d.height,v=d.data,m=new ImageData(v,g,y),t.next=21,k(m,a,e);case 21:case 29:case 37:t.next=45;break;case 23:if("xbrz"!==e){t.next=31;break}return t.next=26,(0,s.i)(r,n,(function(t){k(t,a,e)}),u);case 26:return w=t.sent,t.next=29,k(w,a,e);case 31:if("crt"!==e){t.next=39;break}return t.next=34,(0,c.A)(r,n);case 34:return L=t.sent,t.next=37,k(L,a,e);case 39:if("sqr"!==e){t.next=45;break}return t.next=42,x(r,n);case 42:return E=t.sent,t.next=45,k(E,a,e);case 45:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function j(t,e,r,n,o){E("xbrz",t,e,r,n,o)}function O(t,e,r,n,o){E("hex",t,e,r,n,o)}function P(t,e,r,n,o){E("crt",t,e,r,n,o)}function A(t,e,r,n,o){E("sqr",t,e,r,n,o)}n()}catch(I){n(I)}}))},79205:(t,e,r)=>{"use strict";r.a(t,(async(t,n)=>{try{r.d(e,{A:()=>y});r(52675),r(89463),r(2259),r(45700),r(28706),r(51629),r(23792),r(62062),r(54743),r(11745),r(38309),r(89572),r(2892),r(84185),r(5506),r(26099),r(3362),r(27495),r(47764),r(25440),r(22134),r(61740),r(81630),r(72170),r(75044),r(69539),r(31694),r(89955),r(33206),r(44496),r(66651),r(12887),r(19369),r(66812),r(8995),r(31575),r(36072),r(88747),r(28845),r(29423),r(57301),r(373),r(86614),r(41405),r(33684),r(12041),r(23500),r(62953),r(76031),r(3296),r(27208),r(48408);var o=r(23073),i=r(4826),a=t([o]);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function p(t){var e=_(t,"string");return"symbol"==l(e)?e:e+""}function _(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}o=(a.then?(await a)():a)[0];var s=(0,i.SIMDopeCreateConfAdd)({create:{new_of:!0,new_uint32:!0,new_uint32b:!0},properties:{uint32:!0,hex:!0},methods:{get_element:!0,euclidean_match_with:!0,slice_uint32:!0,get_deduplicated_sorted_uint32a:!0}}),c=(0,i.SIMDopeCreate)(s),u=(c.Color,c.Colors,new XMLSerializer);function d(t,e,r){var n=document.getElementById(t),o=document.getElementById(e);if(!n)return console.error("SVG element not found"),null;if(!o)return console.error("SVG element not found"),null;n.removeAttribute("style"),n.removeAttribute("id");var i=u.serializeToString(n);if(i=i.replaceAll('style="fill: #000000;"','style="fill: #00000000;"'),n.id=t,n.style.display="none",n.remove(),o.remove(),"svg"===r)return i;if("blob"===r){var a=new Blob([i],{type:"image/svg+xml"});return URL.createObjectURL(a)}}function g(t,e,r){t.canvasId&&t.svgId||(console.error("Canvas ID and SVG ID are required."),t.canvasId="frame"+r,t.svgId="svg"+r);var n=document.getElementById(t.canvasId);n||((n=document.createElement("canvas")).id=t.canvasId,n.style.display="none",document.body.appendChild(n));var i=document.getElementById(t.svgId);i||((i=document.createElementNS("http://www.w3.org/2000/svg","svg")).id=t.svgId,i.style.display="none",document.body.appendChild(i));var a,s=new Image;function c(e,r,n){a&&a.stop(),(a=new u(e,t.output,r,n)).run()}var u=function(){return t=function t(e,r,n,i){f(this,t),this.converter=o.HI.new_with_string('{"canvas_id":"frame'.concat(n,'","svg_id":"svg').concat(n,'","mode":"spline","clustering_mode":"color","hierarchical":"cutout","corner_threshold":0.08,"length_threshold":8,"max_iterations":1,"splice_threshold": 0.08,"filter_speckle":12,"color_precision":1,"layer_difference":0,"path_precision":3}')),this.converter.init(),this.stopped=!1,this.output=r||"svg",this.callback=e,this.n=n,this.list=i},(e=[{key:"run",value:function(){var t=this;!function e(){if(!t.stopped){for(var r=!1,n=performance.now();!(r=t.converter.tick())&&performance.now()-n<25;);r?t.ok(this.n):setTimeout(e,1)}}()}},{key:"stop",value:function(){this.stopped=!0,this.converter.free()}},{key:"ok",value:function(){this.callback(d("svg"+this.n,"frame"+this.n,this.output))}}])&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();!function(t,e,r){t instanceof ImageData?(n.width=t.width,n.height=t.height,n.getContext("2d",{colorSpace:"srgb"}).putImageData(t,0,0),i.setAttribute("height",n.height+"px"),i.setAttribute("width",n.width+"px"),c(e,r,null)):(s.src=t,s.onload=function(){n.width=s.naturalWidth,n.height=s.naturalHeight,n.getContext("2d",{colorSpace:"srgb"}).drawImage(s,0,0),i.setAttribute("height",n.height+"px"),i.setAttribute("width",n.width+"px"),c(e,r,null)})}(t.imageSource,e,r)}function y(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(n,o){g({imageSource:t,output:e},n,r)}))}n()}catch(v){n(v)}}))},7514:(t,e,r)=>{"use strict";r.a(t,(async(t,n)=>{try{r.d(e,{i:()=>_});r(52675),r(89463),r(66412),r(2259),r(78125),r(51629),r(23792),r(94490),r(34782),r(54743),r(11745),r(38309),r(62010),r(4731),r(60479),r(59904),r(84185),r(40875),r(10287),r(26099),r(3362),r(47764),r(22134),r(81630),r(72170),r(75044),r(69539),r(31694),r(89955),r(33206),r(44496),r(66651),r(12887),r(19369),r(66812),r(8995),r(31575),r(36072),r(88747),r(28845),r(29423),r(57301),r(373),r(86614),r(41405),r(33684),r(23500),r(62953),r(3296),r(27208),r(48408);var o=r(79205),i=r(29012),a=t([o]);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(){l=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var _="suspendedStart",d="suspendedYield",g="executing",y="completed",v={};function m(){}function w(){}function x(){}var b={};f(b,a,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(R([])));L&&L!==r&&n.call(L,a)&&(b=L);var E=x.prototype=m.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,s){var c=p(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==u(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=_;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===_)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var u=p(e,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(u(e)+" is not iterable")}return w.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(j.prototype),f(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),f(E,c,"Generator"),f(E,a,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function f(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){f(i,n,o,a,s,"next",t)}function s(t){f(i,n,o,a,s,"throw",t)}a(void 0)}))}}o=(a.then?(await a)():a)[0],await(0,i.Ay)();var s=new OffscreenCanvas(0,0),c=s.getContext("2d",{performance:"high-performance",willReadFrequently:!0});function p(t,e){var r=Math.max(1,Math.min(6,Math.round(e)));s.width=t.width*r,s.height=t.height*r;var n=(0,i.N8)(t.data,t.width,t.height,0|r),o=n.ptr,a=n.len,u=new Uint8ClampedArray((0,i.Xq)().buffer).subarray(o,o+a),l=new ImageData(u,s.width,s.height);return c.putImageData(l,0,0),n.free(),c.getImageData(0,0,s.width,s.height)}function _(t,e,r){return d.apply(this,arguments)}function d(){return d=h(l().mark((function t(e,r,n){var i,a,s=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=s.length>3&&void 0!==s[3]?s[3]:0,a=p(e,r),!(r<=6)){t.next=6;break}return t.abrupt("return",a);case 6:return n(a),t.next=9,new Promise(function(){var t=h(l().mark((function t(e,n){var s,c,u,f,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.A)(a,"blob",i);case 2:s=t.sent,c=r/Math.round(Math.min(r,6)),u=Math.round(a.width*c),f=Math.round(a.height*c),(h=document.createElement("img")).onload=function(){var t=new OffscreenCanvas(u,f),r=t.getContext("2d");r.drawImage(h,0,0,a.width,a.height,0,0,t.width,t.height),e(r.getImageData(0,0,t.width,t.height)),URL.revokeObjectURL(s)},h.src=s;case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}n()}catch(g){n(g)}}),1)}}]);