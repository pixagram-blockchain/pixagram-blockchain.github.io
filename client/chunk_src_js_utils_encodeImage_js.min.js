"use strict";(self.webpackChunkpixa_pics=self.webpackChunkpixa_pics||[]).push([["src_js_utils_encodeImage_js"],{5233:(e,t,a)=>{async function n(e,t,a){const n="PNG"==(t="PNG"===t.toUpperCase()?"PNG":"WEBP"===t.toUpperCase()?"WEBP":"JPEG")?s.U.encodeImageData.bind(this):"WEBP"===t?i.A.encodeImageData.bind(this):o.encodeImageData.bind(this),r=await async function(e){if(e instanceof ImageData)return e;const t=document.createElement("img");t.src=e,await new Promise((e=>t.onload=e));const a=document.createElement("canvas");[a.width,a.height]=[t.width,t.height];const n=a.getContext("2d");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}(e);return await n(r,a)}var s,i;a.r(t),a.d(t,{encodeIMG:()=>n}),s=a(43930),i=a(18303);const o={};i.A.encodeImageData=async function(e,t=!1){const a=t?{quality:0,target_size:0,target_PSNR:0,method:6,sns_strength:100,filter_strength:0,filter_sharpness:0,filter_type:0,partitions:0,segments:4,pass:6,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:1,exact:1,image_hint:1,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:1,use_sharp_yuv:0}:{lossless:0,quality:85,method:4},n=await(0,i.A)(e,a),s=new Blob([n],{type:"image/webp"});return await(o=s,new Promise(((e,t)=>{const a=new FileReader;a.onloadend=()=>e(a.result),a.readAsDataURL(o)})));var o};const r=document.createElement("canvas");r.context=r.getContext("2d"),s.U.encodeImageData=async function(e,t=!1){return await new Promise(((a,n)=>{r.width=e.width,r.height=e.height,r.context.putImageData(e,0,0),(0,s.U)(r.toDataURL("image/png"),t?100:30,t?100:90,t?1:9,(e=>{a(e)}))}))},o.encodeImageData=async function(e,t=!1){return await new Promise(((a,n)=>{r.width=e.width,r.height=e.height,r.context.putImageData(e,0,0),a(r.toDataURL("image/jpeg",{quality:t?100:75}))}))}}}]);