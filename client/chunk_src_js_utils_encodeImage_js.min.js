"use strict";(self.webpackChunkpixa_pics=self.webpackChunkpixa_pics||[]).push([["src_js_utils_encodeImage_js"],{38420:(e,t,a)=>{function s(e,t,a={}){let s;return t&&(s=(e,a)=>{const s=new WebAssembly.Instance(t,e);return a(s),s.exports}),e({noInitialRun:!0,instantiateWasm:s,...a})}async function n(e,t={}){l||(l=async function(e,t){if(await c()){const n=await a.e("node_modules_jsquash_webp_codec_enc_webp_enc_simd_js").then(a.bind(a,28899));return l=s(n.default,e,t),l}const n=await a.e("node_modules_jsquash_webp_codec_enc_webp_enc_js").then(a.bind(a,49227));return l=s(n.default,e,t),l}());const n={...o,...t},i=(await l).encode(e.data,e.width,e.height,n);if(!i)throw Error("Encoding error.");return i.buffer}async function i(e,t,a){const s="PNG"==(t="PNG"===t.toUpperCase()?"PNG":"WEBP"===t.toUpperCase()?"WEBP":"JPEG")?r.U.encodeImageData.bind(this):"WEBP"===t?n.encodeImageData.bind(this):_.encodeImageData.bind(this),i=await async function(e){if(e instanceof ImageData)return e;const t=document.createElement("img");t.src=e,await new Promise((e=>t.onload=e));const a=document.createElement("canvas");[a.width,a.height]=[t.width,t.height];const s=a.getContext("2d");return s.drawImage(t,0,0),s.getImageData(0,0,t.width,t.height)}(e);return await s(i,a)}a.r(t),a.d(t,{encodeIMG:()=>i});var r=a(43930);const o={quality:75,target_size:0,target_PSNR:0,method:4,sns_strength:50,filter_strength:60,filter_sharpness:0,filter_type:1,partitions:0,segments:4,pass:1,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:0,exact:0,image_hint:0,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:0,use_sharp_yuv:0},c=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));let l;const _={};n.encodeImageData=async function(e,t=!1){const a=t?{quality:0,target_size:0,target_PSNR:0,method:5,sns_strength:100,filter_strength:0,filter_sharpness:0,filter_type:0,partitions:0,segments:4,pass:6,show_compressed:0,preprocessing:0,autofilter:1,partition_limit:0,alpha_compression:1,alpha_filtering:0,alpha_quality:100,lossless:1,exact:1,image_hint:1,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:1,use_sharp_yuv:0}:{lossless:0,quality:80,method:4,thread_level:1,use_delta_palette:1,alpha_quality:0,filter_strength:0,filter_sharpness:0},s=await n(e,a),i=new Blob([s],{type:"image/webp"});return await(r=i,new Promise(((e,t)=>{const a=new FileReader;a.onloadend=()=>e(a.result),a.readAsDataURL(r)})));var r};const h=document.createElement("canvas");h.context=h.getContext("2d"),r.U.encodeImageData=async function(e,t=!1){return await new Promise(((a,s)=>{h.width=e.width,h.height=e.height,h.context.putImageData(e,0,0),(0,r.U)(h.toDataURL("image/png"),t?100:40,t?100:80,t?1:9,(e=>{a(e)}))}))},_.encodeImageData=async function(e,t=!1){return await new Promise(((a,s)=>{h.width=e.width,h.height=e.height,h.context.putImageData(e,0,0),a(h.toDataURL("image/jpeg",{quality:t?100:80}))}))}}}]);