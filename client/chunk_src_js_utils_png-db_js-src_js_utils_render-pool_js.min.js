/*! For license information please see chunk_src_js_utils_png-db_js-src_js_utils_render-pool_js.min.js.LICENSE.txt */
(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_utils_png-db_js-src_js_utils_render-pool_js"],{20793:t=>{var e="\n  ".concat('var fu = function(image_data, scale) {\n\n    return new Promise(function (resolve, reject) {\n\n        var CRT = (function () {\n\n            "use asm";\n\n            var sqrt = Math.sqrt;\n            var cos = Math.cos;\n            var sin = Math.sin;\n            var min = Math.min;\n            var max = Math.max;\n            var imul = Math.imul;\n\n            function apply(imageData, srcx, srcy, scale, threshold) {\n\n                srcx = srcx | 0;\n                srcy = srcy | 0;\n                scale = scale | 0;\n                threshold = +threshold;\n\n                var Channels = 4;\n                var SizeX = srcx * scale | 0;\n                var SizeY = srcy * scale | 0;\n\n                var ScaledImage = new Uint8ClampedArray(SizeX * SizeY * Channels);\n\n                var total = SizeY | 0;\n                var current = 0;\n\n                var ppx = 0.0;\n                var ppy = 0.0;\n                var posx = 0;\n                var posy = 0;\n                var sub_posx = 0.0;\n                var sub_posy = 0.0;\n                var positionx = 0;\n                var positiony = 0;\n                var center = 0;\n                var left = 0;\n                var right = 0;\n                var midleft = 0;\n                var midright = 0;\n                var ret = 0;\n                var cr = 0;\n                var cg = 0;\n                var cb = 0;\n                var mlb = 0;\n                var mrr = 0;\n                var mrg = 0;\n                var lb = 0;\n                var rr = 0;\n                var rg = 0;\n                var alpha = 0;\n\n                for (var y = 0; y < SizeY; y = y + 1 | 0) {\n\n                    var offset = imul(y, SizeX) | 0;\n                    ppy = +(y / SizeY);\n\n                    for (var x = 0; x < SizeX; x = x + 1 | 0) {\n\n                        ppx = +(x / SizeX);\n                        posx = ~~(ppx * srcx);\n                        posy = ~~(ppy * srcy);\n                        sub_posx = +(ppx * srcx * 6) % 1.0;\n                        sub_posy = +(ppy * srcy * 6) % 1.0;\n                        positionx = posx | 0;\n                        positiony = posy | 0;\n\n                        center = CLR(imageData, srcx, srcy, positionx, positiony, 0, 0);\n                        left = CLR(imageData, srcx, srcy, positionx, positiony, -1, 0);\n                        right = CLR(imageData, srcx, srcy, positionx, positiony, 1, 0);\n\n                        if (sub_posy < 1.0 / 6.0) {\n\n                            center = mix(center, CLR(imageData, srcx, srcy, positionx, positiony, 0, -1), 0.5 - sub_posy / 2.0);\n                            left = mix(left, CLR(imageData, srcx, srcy, positionx, positiony, -1, -1), 0.5 - sub_posy / 2.0);\n                            right = mix(right, CLR(imageData, srcx, srcy, positionx, positiony, 1, -1), 0.5 - sub_posy / 2.0);\n\n                        } else if (sub_posy > 5.0 / 6.0) {\n\n                            center = mix(center, CLR(imageData, srcx, srcy, positionx, positiony, 0, 1), sub_posy / 2.0);\n                            left = mix(left, CLR(imageData, srcx, srcy, positionx, positiony, -1, 1), sub_posy / 2.0);\n                            right = mix(right, CLR(imageData, srcx, srcy, positionx, positiony, 1, 1), sub_posy / 2.0);\n                        }\n\n                        var scanline_multiplier;\n\n                        if (sub_posy < 0.5) {\n\n                            scanline_multiplier = (sub_posy * 2) * 0.3 + 0.7;\n\n                        } else {\n\n                            scanline_multiplier = ((1 - sub_posy) * 2) * 0.3 + 0.7;\n                        }\n\n                        Mul(center, scanline_multiplier);\n                        Mul(left, scanline_multiplier);\n                        Mul(right, scanline_multiplier);\n\n                        var odd = (ppx * srcx) & 1;\n\n                        var gradient_position;\n\n                        if (odd) {\n\n                            posy = +(posy + 0.5);\n                            posy = +(posy % 1.0);\n                        }\n\n                        if (posy < 1.0 / 3.0) {\n\n                            gradient_position = +(posy * 3.0);\n\n                            Mul(center, gradient_position * 0.6 + 0.4);\n                            Mul(left, gradient_position * 0.6 + 0.4);\n                            Mul(right, gradient_position * 0.6 + 0.4);\n\n                        } else if (posy > 2.0 / 3.0) {\n\n                            gradient_position = +(1 - posy) * 3.0;\n\n                            Mul(center, gradient_position * 0.6 + 0.4);\n                            Mul(left, gradient_position * 0.6 + 0.4);\n                            Mul(right, gradient_position * 0.6 + 0.4);\n                        }\n\n                        if (posx < 1.0 / 6.0 || posx > 5.0 / 6.0) {\n\n                            posy = +(posy + 0.5);\n                            posy = +(posy % 1.0);\n\n                            if (posy < 1.0 / 3.0) {\n\n                                gradient_position = +(posy * 3.0);\n\n                                if (posx < 0.5) {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (ppx) * 6.0));\n\n                                } else {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (1 - ppx) * 6.0));\n                                }\n\n                                Mul(center, gradient_position * 0.6 + 0.4);\n                                Mul(left, gradient_position * 0.6 + 0.4);\n                                Mul(right, gradient_position * 0.6 + 0.4);\n\n                            } else if (posy > 2.0 / 3.0) {\n\n                                gradient_position = +(1 - posy) * 3.0;\n\n                                if (posx < 0.5) {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (ppx) * 6.0));\n\n                                } else {\n\n                                    gradient_position = +(1 - (1 - gradient_position) * (1 - (1 - ppx) * 6.0));\n                                }\n\n                                Mul(center, gradient_position * 0.6 + 0.4);\n                                Mul(left, gradient_position * 0.6 + 0.4);\n                                Mul(right, gradient_position * 0.6 + 0.4);\n                            }\n                        }\n\n                        midleft = mix(left, center, 0.5);\n                        midright = mix(right, center, 0.5);\n\n                        cr = Red(center) | 0;\n                        cg = Green(center) | 0;\n                        cb = Blue(center) | 0;\n                        mlb = Blue(midleft) | 0;\n                        mrr = Red(midright) | 0;\n                        mrg = Green(midright) | 0;\n                        lb = Blue(left) | 0;\n                        rr = Red(right) | 0;\n                        rg = Green(right) | 0;\n                        alpha = Alpha(center) | 0;\n\n                        if (ppx < 1.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, cr * 255, cg * 255, lb * 255), ARGBINT(alpha, cr * 255, cg * 255, lb * 255), sub_posx);\n\n                        } else if (ppx < 2.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, cr * 255, cg * 255, lb * 255), ARGBINT(alpha, cr * 255, cg * 255, mlb * 255), sub_posx);\n\n                        } else if (ppx < 3.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, cr * 255, cg * 255, mlb * 255), ARGBINT(alpha, mrr * 255, cg * 255, cb * 255), sub_posx);\n\n                        } else if (ppx < 4.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, mrr * 255, cg * 255, cb * 255), ARGBINT(alpha, rr * 255, cg * 255, cb * 255), sub_posx);\n\n                        } else if (ppx < 5.0 / 6.0) {\n\n                            ret = mix(ARGBINT(alpha, rr * 255, cg * 255, cb * 255), ARGBINT(alpha, rr * 255, mrg * 255, cb * 255), sub_posx);\n\n                        } else {\n\n                            ret = mix(ARGBINT(alpha, rr * 255, mrg * 255, cb * 255), ARGBINT(alpha, rr * 255, rg * 255, cb * 255), sub_posx);\n                        }\n\n                        if (positionx < 1) {\n\n                            Mul(ret, positionx | 0);\n\n                        } else if (positionx > srcx - 1) {\n\n                            Mul(ret, srcx - positionx | 0);\n                        }\n\n                        if (positiony < 1) {\n\n                            Mul(ret, positiony | 0);\n\n                        } else if (positiony > srcy - 1) {\n\n                            Mul(ret, srcy - positiony | 0);\n                        }\n\n                        ScaledImage[offset * Channels] = Red(ret) | 0;\n                        ScaledImage[offset * Channels + 1] = Green(ret) | 0;\n                        ScaledImage[offset * Channels + 2] = Blue(ret) | 0;\n                        ScaledImage[offset * Channels + 3] = Alpha(ret) | 0;\n\n                    }\n\n                    current = current + 1 | 0;\n                }\n\n                return new ImageData(ScaledImage, SizeX, SizeY);\n            }\n\n            function mix(a, b, c) {\n\n                a = a | 0;\n                b = b | 0;\n                c = +c;\n\n                return ((a + ((b - a) * c)) | 0);\n            }\n\n            function Mul(x, y) {\n\n                x = x | 0;\n                y = +y;\n\n                return ((x * y) | 0);\n            }\n\n            function Red(rgb) {\n\n                rgb = rgb | 0;\n\n                return ((rgb >>> 16) & 0xFF) | 0;\n            }\n\n            function Green(rgb) {\n\n                rgb = rgb | 0;\n\n                return ((rgb >>> 8) & 0xFF) | 0;\n            }\n\n            function Blue(rgb) {\n\n                rgb = rgb | 0;\n\n                return (rgb & 0xFF) | 0;\n            }\n\n            function Alpha(rgb) {\n\n                rgb = rgb | 0;\n\n                return (rgb >>> 24) | 0;\n            }\n\n            function ARGBINT(a, r, g, b) {\n\n                a = a | 0;\n                r = r | 0;\n                g = g | 0;\n                b = b | 0;\n\n                return (((((a) << 24) | (r << 16) | (g << 8) | b) >>> 0) | 0);\n            }\n\n            function CLR(Input, srcx, srcy, x, y, dx, dy) {\n\n                Input = Input | 0;\n                srcx = srcx | 0;\n                srcy = srcy | 0;\n                x = x | 0;\n                y = y | 0;\n                dx = dx | 0;\n                dy = dy | 0;\n\n                var Channels = 4;\n\n                var xx = 0;\n                var yy = 0;\n\n                xx = (x + dx) | 0;\n                yy = (y + dy) | 0;\n\n                xx = max(0, min(srcx - 1, xx)) | 0;\n                yy = max(0, min(srcy - 1, yy)) | 0;\n\n                var index = 0;\n\n                index = ((yy * srcx + xx) * Channels) | 0;\n\n                var r = 0;\n                var g = 0;\n                var b = 0;\n                var a = 0;\n\n                r = (Input[index] | 0);\n                g = (Input[index + 1] | 0);\n                b = (Input[index + 2] | 0);\n                a = (Input[index + 3] | 0);\n\n                return ARGBINT(a, r, g, b) | 0;\n            }\n\n            return { Apply: apply };\n        }());\n\n        resolve(CRT.Apply(image_data.data, image_data.width, image_data.height, scale, 0));\n    });\n}\n\nfunction crt(image_data, scale) {\n    return new Promise(function(resolve, reject){\n        fu(image_data, scale).then((result) => {\n            resolve(result);\n        });\n    });\n}\n\n',"\n    self.onmessage = function onmessage(event) {\n        if (event.data.type === 'imageData') {\n            const result = crt(event.data.imageData, event.data.data.scale).then(function(result){\n                self.postMessage([result, event.data.id, event.data.algorithm]);\n            });\n        }\n    };\n");t.exports={functionString:e,functionSize:function(t,e,n){return{width:t*n,height:e*n,arrayBufferLength:t*n*e*n*4}}}},81968:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});n(23792),n(54743),n(11745),n(38309),n(26099),n(34594),n(22134),n(81630),n(72170),n(75044),n(69539),n(31694),n(89955),n(33206),n(44496),n(66651),n(12887),n(19369),n(66812),n(8995),n(31575),n(36072),n(88747),n(28845),n(29423),n(57301),n(373),n(86614),n(41405),n(33684);const r=function(){var t,e,n,r,o,a,i;function c(e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r));return r}return function(u){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,l=u.width,f=u.height,h=l*s,p=f*s;t||function(){e||(e=new OffscreenCanvas(1,1)),t||(t=e.getContext("webgl2"));var u=c(t.VERTEX_SHADER,"#version 300 es\n        in vec2 position;\n        out vec2 vTexCoord;\n        \n        void main() {\n            vTexCoord = (position + 1.0) * 0.5; // Convert from clip space to UV\n            gl_Position = vec4(position, 0.0, 1.0);\n        }\n    "),s=c(t.FRAGMENT_SHADER,"#version 300 es\n    precision highp float;\n    \n    uniform vec3 _uiResolution;\n    uniform sampler2D _uiChannel0;\n    \n    in vec2 vTexCoord;\n    out vec4 fragColor;\n    \n    float _uhardScan = -8.0;\n    float _uhardPix = -3.0;\n    vec2 _uwarp = vec2(0.03125, 0.0416666679);\n    float _umaskDark = 0.5;\n    float _umaskLight = 1.5;\n    \n    float _uToLinear1(in float _uc){\n      return _uc <= 0.04045 ? (_uc / 12.92) : pow((_uc + 0.055) / 1.055, 2.4);\n    }\n    vec3 _uToLinear(in vec3 _uc){\n      return vec3(_uToLinear1(_uc.r), _uToLinear1(_uc.g), _uToLinear1(_uc.b));\n    }\n    float _uToSrgb1(in float _uc){\n      return _uc < 0.0031308 ? (_uc * 12.92) : (1.055 * pow(_uc, 1.0 / 2.4) - 0.055);\n    }\n    vec3 _uToSrgb(in vec3 _uc){\n      return vec3(_uToSrgb1(_uc.r), _uToSrgb1(_uc.g), _uToSrgb1(_uc.b));\n    }\n    \n    vec3 _uFetch(in vec2 _pos, in vec2 _off){\n      vec2 p = floor((_pos * (_uiResolution.xy / 6.0)) + _off) / (_uiResolution.xy / 6.0);\n      if (max(abs(p.x - 0.5), abs(p.y - 0.5)) > 0.5) return vec3(0.0);\n      return _uToLinear(texture(_uiChannel0, p).rgb);\n    }\n    \n    vec2 _uDist(in vec2 _pos){\n      vec2 p = _pos * (_uiResolution.xy / 6.0);\n      return -(p - floor(p) - vec2(0.5));\n    }\n    \n    float _uGaus(float x, float scale){\n      return exp2(scale * x * x);\n    }\n    \n    vec3 _uHorz3(vec2 pos, float off){\n      vec3 b = _uFetch(pos, vec2(-1.0, off));\n      vec3 c = _uFetch(pos, vec2(0.0, off));\n      vec3 d = _uFetch(pos, vec2(1.0, off));\n      float dst = _uDist(pos).x;\n      float wb = _uGaus(dst - 1.0, _uhardPix);\n      float wc = _uGaus(dst, _uhardPix);\n      float wd = _uGaus(dst + 1.0, _uhardPix);\n      return (b * wb + c * wc + d * wd) / (wb + wc + wd);\n    }\n    \n    vec3 _uHorz5(vec2 pos, float off){\n      vec3 a = _uFetch(pos, vec2(-2.0, off));\n      vec3 b = _uFetch(pos, vec2(-1.0, off));\n      vec3 c = _uFetch(pos, vec2(0.0, off));\n      vec3 d = _uFetch(pos, vec2(1.0, off));\n      vec3 e = _uFetch(pos, vec2(2.0, off));\n      float dst = _uDist(pos).x;\n      float wa = _uGaus(dst - 2.0, _uhardPix);\n      float wb = _uGaus(dst - 1.0, _uhardPix);\n      float wc = _uGaus(dst, _uhardPix);\n      float wd = _uGaus(dst + 1.0, _uhardPix);\n      float we = _uGaus(dst + 2.0, _uhardPix);\n      return (a * wa + b * wb + c * wc + d * wd + e * we) / (wa + wb + wc + wd + we);\n    }\n    \n    float _uScan(vec2 pos, float off){\n      float dst = _uDist(pos).y;\n      return _uGaus(dst + off, _uhardScan);\n    }\n    \n    vec3 _uTri(vec2 pos){\n      vec3 a = _uHorz3(pos, -1.0);\n      vec3 b = _uHorz5(pos,  0.0);\n      vec3 c = _uHorz3(pos,  1.0);\n      float wa = _uScan(pos, -1.0);\n      float wb = _uScan(pos,  0.0);\n      float wc = _uScan(pos,  1.0);\n      return a * wa + b * wb + c * wc;\n    }\n    \n    vec2 _uWarp(vec2 pos){\n      pos = pos * 2.0 - 1.0;\n      pos *= vec2(1.0 + pos.y * pos.y * _uwarp.x, 1.0 + pos.x * pos.x * _uwarp.y);\n      return pos * 0.5 + 0.5;\n    }\n    \n    vec3 _uMask(vec2 pos){\n      pos.x += pos.y * 3.0;\n      vec3 mask = vec3(_umaskDark);\n      float frac = fract(pos.x / 6.0);\n      if (frac < 0.333) mask.r = _umaskLight;\n      else if (frac < 0.666) mask.g = _umaskLight;\n      else mask.b = _umaskLight;\n      return mask;\n    }\n    \n    float _uBar(float pos, float bar){\n      pos -= bar;\n      return (pos * pos < 4.0) ? 0.0 : 1.0;\n    }\n    \n   void main() {\n  vec2 fragCoord = vTexCoord * _uiResolution.xy;\n  vec4 fragColorLinear = vec4(0.0);\n\n  // Treat the whole screen as View 3\n  vec2 pos = _uWarp(fragCoord / _uiResolution.xy);\n\n  _uhardScan = -12.0;\n  _umaskDark = _umaskLight = 1.0;\n\n  fragColorLinear.rgb = _uTri(pos) * _uMask(fragCoord.xy);\n  fragColorLinear.a = 1.0;\n\n  fragColor = vec4(_uToSrgb(fragColorLinear.rgb), 1.0);\n}\n    ");if(n=t.createProgram(),t.attachShader(n,u),t.attachShader(n,s),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(n));t.useProgram(n),r=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(n,"position");t.enableVertexAttribArray(l),t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),o=t.getUniformLocation(n,"_uiChannel0"),a=t.getUniformLocation(n,"_uiResolution"),i=t.createTexture(),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.createFramebuffer()}(),e.width=h,e.height=p,t.viewport(0,0,h,p),t.useProgram(n),t.bindBuffer(t.ARRAY_BUFFER,r),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,l,f,0,t.RGBA,t.UNSIGNED_BYTE,u.data),t.uniform1i(o,0),t.uniform3f(a,h,p,1),t.drawArrays(t.TRIANGLES,0,6);var d=new Uint8ClampedArray(h*p*4);return t.readPixels(0,0,h,p,t.RGBA,t.UNSIGNED_BYTE,d),new ImageData(d,h,p)}}()},23308:(t,e,n)=>{"use strict";n.a(t,(async(t,r)=>{try{n.d(e,{Y:()=>v});n(52675),n(89463),n(66412),n(2259),n(78125),n(51629),n(23792),n(94490),n(34782),n(54743),n(11745),n(38309),n(62010),n(4731),n(36033),n(60479),n(59904),n(84185),n(40875),n(79432),n(10287),n(26099),n(3362),n(47764),n(11392),n(21489),n(81630),n(72170),n(75044),n(69539),n(31694),n(89955),n(33206),n(44496),n(66651),n(12887),n(19369),n(66812),n(8995),n(31575),n(36072),n(88747),n(28845),n(29423),n(57301),n(373),n(86614),n(41405),n(33684),n(23500),n(62953);var o=n(18046),a=n(24234),i=n(54136),c=n(2657),u=t([o]);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function g(){g=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new G(r||[]);return o(i,"_invoke",{value:I(t,n,c)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",m={};function b(){}function w(){}function x(){}var _={};s(_,i,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(C([])));L&&L!==n&&r.call(L,i)&&(_=L);var E=x.prototype=b.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==y(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function I(e,n,r){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=R(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var s=f(e,n,r);if("normal"===s.type){if(o=r.done?v:p,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function R(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=f(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(y(e)+" is not iterable")}return w.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=s(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(T.prototype),s(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new T(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(E),s(E,u,"Generator"),s(E,i,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function m(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){m(a,r,o,i,c,"next",t)}function c(t){m(a,r,o,i,c,"throw",t)}i(void 0)}))}}o=(u.then?(await u)():u)[0];var s="data:image/",l="data:image/webp;base64,",f="data:image/png;base64,",h=new Map,p=new Map;function w(t){return x.apply(this,arguments)}function x(){return(x=b(g().mark((function t(e){var n,r,a;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new Uint8Array(0),r="UNKNOWN",a="","string"!=typeof e){t.next=16;break}if(!e.startsWith(s)){t.next=14;break}return e.startsWith(l)?r="WEBP":e.startsWith(f)&&(r="PNG"),t.t0=Uint8Array,t.next=8,fetch(e);case 8:return t.next=10,t.sent.arrayBuffer();case 10:t.t1=t.sent,n=new t.t0(t.t1),t.next=16;break;case 14:r="IMAGE",n=(0,o.s5)(e);case 16:return a=(0,o.QQ)(n,o.$y.Base58),t.abrupt("return",{data:n,type:r,hash:a});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var d=function(t,e,n){return new Promise((function(r,o){var a={id:n,type:t,data:e},i=(0,c.R9)(e),u=i.width,s=i.height;a.width=u,a.height=s,r(a)}))},v=function(){var t=function(){var t=b(g().mark((function t(e){var n,r,o,a,i;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:if(n=t.sent,r=n.hash,o=n.type,a=n.data,!h.has(r)){t.next=10;break}return t.abrupt("return",h.get(r));case 10:return t.next=12,d(o,a,r);case 12:return i=t.sent,h.set(i.id,i),h.size>=600&&Object.keys(h).slice(-100).forEach((function(t){h.delete(t)})),t.abrupt("return",i);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e=function(){var t=b(g().mark((function t(e){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){if(p.has(e.id))t(p.get(e.id));else{var r=function(n){p.set(e.id,n),p.size>=600&&Object.keys(p).slice(-100).forEach((function(t){p.delete(t)})),t(n)};"PNG"===e.type?(0,i.A)(e.data).then(r):"WEBP"===e.type&&(0,a.A)(e.data).then(r)}})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{get_new_img_obj:t,get_new_img_data:e}};r()}catch(_){r(_)}}))},92059:(t,e,n)=>{"use strict";n.a(t,(async(t,r)=>{try{n.d(e,{E6:()=>R,R2:()=>A,eu:()=>I,px:()=>T});n(52675),n(89463),n(66412),n(2259),n(45700),n(78125),n(51629),n(25276),n(23792),n(94490),n(34782),n(54743),n(11745),n(38309),n(59089),n(89572),n(62010),n(4731),n(36033),n(60479),n(2892),n(59904),n(84185),n(40875),n(79432),n(10287),n(26099),n(16034),n(3362),n(47764),n(21489),n(81630),n(72170),n(75044),n(69539),n(31694),n(89955),n(33206),n(44496),n(66651),n(12887),n(19369),n(66812),n(8995),n(31575),n(36072),n(88747),n(28845),n(29423),n(57301),n(373),n(86614),n(41405),n(33684),n(23500),n(62953),n(3296),n(27208),n(48408);var o=n(71768),a=n(20793),i=n.n(a),c=n(7514),u=n(81968),s=t([o,c]);function p(){p=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new G(r||[]);return o(i,"_invoke",{value:I(t,n,c)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",v="executing",g="completed",m={};function b(){}function w(){}function x(){}var _={};s(_,i,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(C([])));L&&L!==n&&r.call(L,i)&&(_=L);var E=x.prototype=b.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==y(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function I(e,n,r){var o=h;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=R(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var s=f(e,n,r);if("normal"===s.type){if(o=r.done?g:d,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=g,r.method="throw",r.arg=s.arg)}}}function R(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=f(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(y(e)+" is not iterable")}return w.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=s(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(T.prototype),s(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new T(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(E),s(E,u,"Generator"),s(E,i,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function d(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){d(a,r,o,i,c,"next",t)}function c(t){d(a,r,o,i,c,"throw",t)}i(void 0)}))}}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function b(t){var e=w(t,"string");return"symbol"==y(e)?e:e+""}function w(t,e){if("object"!=y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function x(t,e){var n=document.createElement("canvas"),r=document.createElement("canvas");n.width=t.width*e,n.height=t.height*e,r.width=t.width,r.height=t.height;var o=n.getContext("2d"),a=r.getContext("2d");return o.imageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,a.putImageData(t,0,0),o.drawImage(r,0,0,r.width,r.height,0,0,n.width,n.height),o.getImageData(0,0,n.width,n.height)}[o,c]=s.then?(await s)():s;var l=new(function(){return t=function t(e){g(this,t),this.workers=new Map,this.workerScripts=e},e=[{key:"createWorker",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.workers.has(t))return this.workers.get(t).worker;var r,o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o);return r=n?new SharedWorker(a):new Worker(a),this.workers.set(t,{worker:r,type:n?"shared":"dedicated"}),r}},{key:"sendDataToWorker",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=this.workers.get(t);if(!o){if(void 0===this.workerScripts[t])throw new Error("Worker ".concat(t," not found"));o=this.createWorker(t,this.workerScripts[t],!1)}var a=o,i=a.worker,c=a.type,u={type:n.type||"default",data:e,id:r,algorithm:t},s=[];if("canvas"===n.type){var l=n.canvas.transferControlToOffscreen();u.canvas=l,s.push(l)}else"sharedBuffer"===n.type?(u.sharedArrayBuffer=n.sharedArrayBuffer,s.push(n.sharedArrayBuffer)):"imageData"===n.type&&(u.imageData=e.data);"dedicated"===c?i.postMessage(u,s):"shared"===c&&(i.port.postMessage(u,s),i.port.start()),"dedicated"===c?i.onmessage=function(t){n.onReceive&&n.onReceive(t.data[0],t.data[1],t.data[2])}:"shared"===c&&(i.port.onmessage=function(t){n.port.onReceive&&n.port.onReceive(t.data[0],t.data[1],t.data[2])})}},{key:"terminateWorker",value:function(t){var e=this.workers.get(t);e&&("dedicated"===e.type?e.worker.terminate():"shared"===e.type&&e.worker.port.close(),this.workers.delete(t))}}],e&&m(t.prototype,e),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}())({crt:i().functionString}),f={xbrz:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}},hex:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}},sqr:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}},crt:{worker:!1,callbacks:{},data:{},bitmap:{},timestamp:{}}},h=0;function _(t){for(var e in f)e!==t&&(l.terminateWorker(e),f[e].callbacks={})}function k(t,e,n){return L.apply(this,arguments)}function L(){return(L=v(p().mark((function t(e,n,r){var o,a,i,c,u,s,l,d,v;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof f[r].callbacks[n]){t.next=6;break}if(void 0!==o){t.next=5;break}return t.next=4,createImageBitmap(e,0,0,e.width,e.height);case 4:o=t.sent;case 5:f[r].callbacks[n](e,o);case 6:if(void 0===f[r].data[n]){t.next=17;break}if(void 0!==o){t.next=11;break}return t.next=10,createImageBitmap(e,0,0,e.width,e.height);case 10:o=t.sent;case 11:if(a=e.data.byteLength,f[r].data[n]=e,f[r].bitmap[n]=o,f[r].timestamp[n]=0|Date.now(),(h+=a)>262144){for(i=Object.keys(f[r].timestamp),c=Object.values(f[r].timestamp),u=0|Date.now(),s=0,l=c.length;s<l;s++)c[s]<u&&(u=c[s]);(d=i[c.indexOf(u)])&&(v=0|f[r].data[d].data.byteLength,delete f[r].data[d],f[r].bitmap[d].close(),delete f[r].bitmap[d],delete f[r].callbacks[d],delete f[r].timestamp[d],h-=v)}case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,e,n,r){return S.apply(this,arguments)}function S(){return S=v(p().mark((function t(e,n,r,a){var i,s,h,d,v,y,g,m,b,w,L,E,S=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=(i=S.length>5?S[5]:void 0)+"-"+e+"-"+r,_(e),f[e].callbacks[i]=a,s=Object.keys(f[e].callbacks).length,void 0===f[e].data[i]||"function"!=typeof f[e].callbacks[i]){t.next=12;break}h=f[e].data[i],d=f[e].bitmap[i],f[e].callbacks[i](h,d),t.next=45;break;case 12:if(!f[e].worker){t.next=16;break}l.sendDataToWorker(e,{data:n,scale:r},{type:"imageData",onReceive:k},i),t.next=45;break;case 16:if("hex"!==e){t.next=23;break}return v=(0,o.XX)(new Uint8Array(n.data.buffer),n.width,n.height,r),y=v.width,g=v.height,m=v.data,b=new ImageData(m,y,g),t.next=21,k(b,i,e);case 21:case 29:case 37:t.next=45;break;case 23:if("xbrz"!==e){t.next=31;break}return t.next=26,(0,c.i)(n,r,(function(t){k(t,i,e)}),s);case 26:return w=t.sent,t.next=29,k(w,i,e);case 31:if("crt"!==e){t.next=39;break}return t.next=34,(0,u.A)(n,r);case 34:return L=t.sent,t.next=37,k(L,i,e);case 39:if("sqr"!==e){t.next=45;break}return t.next=42,x(n,r);case 42:return E=t.sent,t.next=45,k(E,i,e);case 45:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function T(t,e,n,r,o){E("xbrz",t,e,n,r,o)}function I(t,e,n,r,o){E("hex",t,e,n,r,o)}function R(t,e,n,r,o){E("crt",t,e,n,r,o)}function A(t,e,n,r,o){E("sqr",t,e,n,r,o)}r()}catch(P){r(P)}}))},79205:(t,e,n)=>{"use strict";n.a(t,(async(t,r)=>{try{n.d(e,{A:()=>g});n(52675),n(89463),n(2259),n(45700),n(28706),n(51629),n(23792),n(62062),n(54743),n(11745),n(38309),n(89572),n(2892),n(84185),n(5506),n(26099),n(3362),n(27495),n(47764),n(25440),n(22134),n(61740),n(81630),n(72170),n(75044),n(69539),n(31694),n(89955),n(33206),n(44496),n(66651),n(12887),n(19369),n(66812),n(8995),n(31575),n(36072),n(88747),n(28845),n(29423),n(57301),n(373),n(86614),n(41405),n(33684),n(12041),n(23500),n(62953),n(76031),n(3296),n(27208),n(48408);var o=n(23073),a=n(4826),i=t([o]);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function p(t){var e=d(t,"string");return"symbol"==l(e)?e:e+""}function d(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}o=(i.then?(await i)():i)[0];var c=(0,a.SIMDopeCreateConfAdd)({create:{new_of:!0,new_uint32:!0,new_uint32b:!0},properties:{uint32:!0,hex:!0},methods:{get_element:!0,euclidean_match_with:!0,slice_uint32:!0,get_deduplicated_sorted_uint32a:!0}}),u=(0,a.SIMDopeCreate)(c),s=(u.Color,u.Colors,new XMLSerializer);function v(t,e,n){var r=document.getElementById(t),o=document.getElementById(e);if(!r)return console.error("SVG element not found"),null;if(!o)return console.error("SVG element not found"),null;r.removeAttribute("style"),r.removeAttribute("id");var a=s.serializeToString(r);if(a=a.replaceAll('style="fill: #000000;"','style="fill: #00000000;"'),r.id=t,r.style.display="none",r.remove(),o.remove(),"svg"===n)return a;if("blob"===n){var i=new Blob([a],{type:"image/svg+xml"});return URL.createObjectURL(i)}}function y(t,e,n){t.canvasId&&t.svgId||(console.error("Canvas ID and SVG ID are required."),t.canvasId="frame"+n,t.svgId="svg"+n);var r=document.getElementById(t.canvasId);r||((r=document.createElement("canvas")).id=t.canvasId,r.style.display="none",document.body.appendChild(r));var a=document.getElementById(t.svgId);a||((a=document.createElementNS("http://www.w3.org/2000/svg","svg")).id=t.svgId,a.style.display="none",document.body.appendChild(a));var i,c=new Image;function u(e,n,r){i&&i.stop(),(i=new s(e,t.output,n,r)).run()}var s=function(){return t=function t(e,n,r,a){f(this,t),this.converter=o.HI.new_with_string('{"canvas_id":"frame'.concat(r,'","svg_id":"svg').concat(r,'","mode":"spline","clustering_mode":"color","hierarchical":"cutout","corner_threshold":0.08,"length_threshold":8,"max_iterations":1,"splice_threshold": 0.08,"filter_speckle":12,"color_precision":1,"layer_difference":0,"path_precision":3}')),this.converter.init(),this.stopped=!1,this.output=n||"svg",this.callback=e,this.n=r,this.list=a},(e=[{key:"run",value:function(){var t=this;!function e(){if(!t.stopped){for(var n=!1,r=performance.now();!(n=t.converter.tick())&&performance.now()-r<25;);n?t.ok(this.n):setTimeout(e,1)}}()}},{key:"stop",value:function(){this.stopped=!0,this.converter.free()}},{key:"ok",value:function(){this.callback(v("svg"+this.n,"frame"+this.n,this.output))}}])&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();!function(t,e,n){t instanceof ImageData?(r.width=t.width,r.height=t.height,r.getContext("2d",{colorSpace:"srgb"}).putImageData(t,0,0),a.setAttribute("height",r.height+"px"),a.setAttribute("width",r.width+"px"),u(e,n,null)):(c.src=t,c.onload=function(){r.width=c.naturalWidth,r.height=c.naturalHeight,r.getContext("2d",{colorSpace:"srgb"}).drawImage(c,0,0),a.setAttribute("height",r.height+"px"),a.setAttribute("width",r.width+"px"),u(e,n,null)})}(t.imageSource,e,n)}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(r,o){y({imageSource:t,output:e},r,n)}))}r()}catch(m){r(m)}}))},7514:(t,e,n)=>{"use strict";n.a(t,(async(t,r)=>{try{n.d(e,{i:()=>d});n(52675),n(89463),n(66412),n(2259),n(78125),n(51629),n(23792),n(94490),n(34782),n(54743),n(11745),n(38309),n(62010),n(4731),n(60479),n(59904),n(84185),n(40875),n(10287),n(26099),n(3362),n(47764),n(22134),n(81630),n(72170),n(75044),n(69539),n(31694),n(89955),n(33206),n(44496),n(66651),n(12887),n(19369),n(66812),n(8995),n(31575),n(36072),n(88747),n(28845),n(29423),n(57301),n(373),n(86614),n(41405),n(33684),n(23500),n(62953),n(3296),n(27208),n(48408);var o=n(79205),a=n(29012),i=t([o]);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(){l=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new G(r||[]);return o(i,"_invoke",{value:I(t,n,c)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",v="suspendedYield",y="executing",g="completed",m={};function b(){}function w(){}function x(){}var _={};f(_,i,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(C([])));L&&L!==n&&r.call(L,i)&&(_=L);var E=x.prototype=b.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,a,i,c){var u=p(t[o],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function I(e,n,r){var o=d;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=R(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var s=p(e,n,r);if("normal"===s.type){if(o=r.done?g:v,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=g,r.method="throw",r.arg=s.arg)}}}function R(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(s(e)+" is not iterable")}return w.prototype=x,o(E,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(T.prototype),f(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new T(h(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(E),f(E,u,"Generator"),f(E,i,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function f(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){f(a,r,o,i,c,"next",t)}function c(t){f(a,r,o,i,c,"throw",t)}i(void 0)}))}}o=(i.then?(await i)():i)[0],await(0,a.Ay)();var c=new OffscreenCanvas(0,0),u=c.getContext("2d",{performance:"high-performance",willReadFrequently:!0});function p(t,e){var n=Math.max(1,Math.min(6,Math.round(e)));c.width=t.width*n,c.height=t.height*n;var r=(0,a.N8)(t.data,t.width,t.height,0|n),o=r.ptr,i=r.len,s=new Uint8ClampedArray((0,a.Xq)().buffer).subarray(o,o+i),l=new ImageData(s,c.width,c.height);return u.putImageData(l,0,0),r.free(),u.getImageData(0,0,c.width,c.height)}function d(t,e,n){return v.apply(this,arguments)}function v(){return v=h(l().mark((function t(e,n,r){var a,i,c=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=c.length>3&&void 0!==c[3]?c[3]:0,i=p(e,n),!(n<=6)){t.next=6;break}return t.abrupt("return",i);case 6:return r(i),t.next=9,new Promise(function(){var t=h(l().mark((function t(e,r){var c,u,s,f,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.A)(i,"blob",a);case 2:c=t.sent,u=n/Math.round(Math.min(n,6)),s=Math.round(i.width*u),f=Math.round(i.height*u),(h=document.createElement("img")).onload=function(){var t=new OffscreenCanvas(s,f),n=t.getContext("2d");n.drawImage(h,0,0,i.width,i.height,0,0,t.width,t.height),e(n.getImageData(0,0,t.width,t.height)),URL.revokeObjectURL(c)},h.src=c;case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}r()}catch(y){r(y)}}),1)}}]);