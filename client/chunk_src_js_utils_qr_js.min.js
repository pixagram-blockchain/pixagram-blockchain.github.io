"use strict";(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["src_js_utils_qr_js"],{92203:(t,e,r)=>{r.d(e,{LU:()=>rt});r(27495),r(25440),r(42762),r(62953);var i,n,o,a,s,h,u,l,d,c,g,f=r(31546).Buffer;function p(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b,y,x={exports:{}};b=x,(y=function(){function t(t,r,i){for(var n=function(t,r){var i=Array(t*r);return{setPixel:function(e,r,n){i[r*t+e]=n},write:function(n){n.writeString("GIF87a"),n.writeShort(t),n.writeShort(r),n.writeByte(128),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(255),n.writeByte(255),n.writeByte(255),n.writeString(","),n.writeShort(0),n.writeShort(0),n.writeShort(t),n.writeShort(r),n.writeByte(0);for(var o=3,a=function(){var t={},e=0,r={add:function(i){if(r.contains(i))throw"dup key:"+i;t[i]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return r}(),s=0;4>s;s+=1)a.add(String.fromCharCode(s));a.add(String.fromCharCode(4)),a.add(String.fromCharCode(5));var h=function(t){var e=0,r=0;return{write:function(i,n){if(0!=i>>>n)throw"length over";for(;8<=e+n;)t.writeByte(255&(i<<e|r)),n-=8-e,i>>>=8-e,e=r=0;r|=i<<e,e+=n},flush:function(){0<e&&t.writeByte(r)}}}(s=e());h.write(4,o);var u=0,l=String.fromCharCode(i[u]);for(u+=1;u<i.length;){var d=String.fromCharCode(i[u]);u+=1,a.contains(l+d)?l+=d:(h.write(a.indexOf(l),o),4095>a.size()&&(a.size()==1<<o&&(o+=1),a.add(l+d)),l=d)}for(h.write(a.indexOf(l),o),h.write(5,o),h.flush(),o=s.toByteArray(),n.writeByte(2),a=0;255<o.length-a;)n.writeByte(255),n.writeBytes(o,a,255),a+=255;n.writeByte(o.length-a),n.writeBytes(o,a,o.length-a),n.writeByte(0),n.writeString(";")}}}(t,r),o=0;o<r;o+=1)for(var a=0;a<t;a+=1)n.setPixel(a,o,i(a,o));for(t=e(),n.write(t),n=function(){function t(t){if(!(0>t)){if(26>t)return 65+t;if(52>t)return t-26+97;if(62>t)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t}var e=0,r=0,i=0,n="",o={writeByte:function(o){for(e=e<<8|255&o,r+=8,i+=1;6<=r;)n+=String.fromCharCode(t(e>>>r-6&63)),r-=6},flush:function(){if(0<r&&(n+=String.fromCharCode(t(e<<6-r&63)),r=e=0),0!=i%3)for(var o=3-i%3,a=0;a<o;a+=1)n+="="},toString:function(){return n}};return o}(),t=t.toByteArray(),r=0;r<t.length;r+=1)n.writeByte(t[r]);return n.flush(),"data:image/gif;base64,"+n}function e(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,r,i){r=r||0,i=i||t.length;for(var n=0;n<i;n+=1)e.writeByte(t[n+r])},writeString:function(t){for(var r=0;r<t.length;r+=1)e.writeByte(t.charCodeAt(r))},toByteArray:function(){return t},toString:function(){for(var e="[",r=0;r<t.length;r+=1)0<r&&(e+=","),e+=t[r];return e+"]"}};return e}function r(){var t=[],e=0,r={getBuffer:function(){return t},getAt:function(e){return 1==(t[Math.floor(e/8)]>>>7-e%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)r.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return e},putBit:function(r){var i=Math.floor(e/8);t.length<=i&&t.push(0),r&&(t[i]|=128>>>e%8),e+=1}};return r}function i(e,o){function h(t){for(var e="",r=0;r<t.length;r+=1){var i=t.charAt(r);switch(i){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=i}}return e}function l(t,e){for(var r=-1;7>=r;r+=1)if(!(-1>=t+r||p<=t+r))for(var i=-1;7>=i;i+=1)-1>=e+i||p<=e+i||(f[t+r][e+i]=0<=r&&6>=r&&(0==i||6==i)||0<=i&&6>=i&&(0==r||6==r)||2<=r&&4>=r&&2<=i&&4>=i)}function d(t,e){for(var i=p=4*c+17,o=Array(i),a=0;a<i;a+=1){o[a]=Array(i);for(var h=0;h<i;h+=1)o[a][h]=null}for(f=o,l(0,0),l(p-7,0),l(0,p-7),i=s.getPatternPosition(c),o=0;o<i.length;o+=1)for(a=0;a<i.length;a+=1){h=i[o];var d=i[a];if(null==f[h][d])for(var v=-2;2>=v;v+=1)for(var b=-2;2>=b;b+=1)f[h+v][d+b]=-2==v||2==v||-2==b||2==b||0==v&&0==b}for(i=8;i<p-8;i+=1)null==f[i][6]&&(f[i][6]=0==i%2);for(i=8;i<p-8;i+=1)null==f[6][i]&&(f[6][i]=0==i%2);for(i=s.getBCHTypeInfo(g<<3|e),o=0;15>o;o+=1)a=!t&&1==(i>>o&1),6>o?f[o][8]=a:8>o?f[o+1][8]=a:f[p-15+o][8]=a;for(o=0;15>o;o+=1)a=!t&&1==(i>>o&1),8>o?f[8][p-o-1]=a:9>o?f[8][15-o-1+1]=a:f[8][15-o-1]=a;if(f[p-8][8]=!t,7<=c){for(i=s.getBCHTypeNumber(c),o=0;18>o;o+=1)a=!t&&1==(i>>o&1),f[Math.floor(o/3)][o%3+p-8-3]=a;for(o=0;18>o;o+=1)a=!t&&1==(i>>o&1),f[o%3+p-8-3][Math.floor(o/3)]=a}if(null==w){for(a=c,t=u.getRSBlocks(a,g),i=r(),o=0;o<m.length;o+=1)h=m[o],i.put(h.getMode(),4),i.put(h.getLength(),s.getLengthInBits(h.getMode(),a)),h.write(i);for(o=a=0;o<t.length;o+=1)a+=t[o].dataCount;if(i.getLengthInBits()>8*a)throw"code length overflow. ("+i.getLengthInBits()+">"+8*a+")";for(i.getLengthInBits()+4<=8*a&&i.put(0,4);0!=i.getLengthInBits()%8;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*a||(i.put(236,8),i.getLengthInBits()>=8*a));)i.put(17,8);var y=0;for(a=o=0,h=Array(t.length),d=Array(t.length),v=0;v<t.length;v+=1){var x=t[v].dataCount,M=t[v].totalCount-x;for(o=Math.max(o,x),a=Math.max(a,M),h[v]=Array(x),b=0;b<h[v].length;b+=1)h[v][b]=255&i.getBuffer()[b+y];for(y+=x,b=s.getErrorCorrectPolynomial(M),x=n(h[v],b.getLength()-1).mod(b),d[v]=Array(b.getLength()-1),b=0;b<d[v].length;b+=1)M=b+x.getLength()-d[v].length,d[v][b]=0<=M?x.getAt(M):0}for(b=i=0;b<t.length;b+=1)i+=t[b].totalCount;for(i=Array(i),b=y=0;b<o;b+=1)for(v=0;v<t.length;v+=1)b<h[v].length&&(i[y]=h[v][b],y+=1);for(b=0;b<a;b+=1)for(v=0;v<t.length;v+=1)b<d[v].length&&(i[y]=d[v][b],y+=1);w=i}for(t=w,i=-1,o=p-1,a=7,h=0,e=s.getMaskFunction(e),d=p-1;0<d;d-=2)for(6==d&&--d;;){for(v=0;2>v;v+=1)null==f[o][d-v]&&(b=!1,h<t.length&&(b=1==(t[h]>>>a&1)),e(o,d-v)&&(b=!b),f[o][d-v]=b,-1==--a&&(h+=1,a=7));if(0>(o+=i)||p<=o){o-=i,i=-i;break}}}var c=e,g=a[o],f=null,p=0,w=null,m=[],v={addData:function(t,e){switch(e=e||"Byte"){case"Numeric":t=function(t){function e(t){for(var e=0,r=0;r<t.length;r+=1){e*=10;var i=t.charAt(r);if(!("0"<=i&&"9">=i))throw"illegal char :"+i;e+=i=i.charCodeAt(0)-48}return e}return{getMode:function(){return 1},getLength:function(){return t.length},write:function(r){for(var i=0;i+2<t.length;)r.put(e(t.substring(i,i+3)),10),i+=3;i<t.length&&(1==t.length-i?r.put(e(t.substring(i,i+1)),4):2==t.length-i&&r.put(e(t.substring(i,i+2)),7))}}}(t);break;case"Alphanumeric":t=function(t){function e(t){if("0"<=t&&"9">=t)return t.charCodeAt(0)-48;if("A"<=t&&"Z">=t)return t.charCodeAt(0)-65+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}}return{getMode:function(){return 2},getLength:function(){return t.length},write:function(r){for(var i=0;i+1<t.length;)r.put(45*e(t.charAt(i))+e(t.charAt(i+1)),11),i+=2;i<t.length&&r.put(e(t.charAt(i)),6)}}}(t);break;case"Byte":t=function(t){var e=i.stringToBytes(t);return{getMode:function(){return 4},getLength:function(){return e.length},write:function(t){for(var r=0;r<e.length;r+=1)t.put(e[r],8)}}}(t);break;case"Kanji":t=function(t){var e=i.stringToBytesFuncs.SJIS;if(!e)throw"sjis not supported.";!function(t){if(2!=(t=e(t)).length||38726!=(t[0]<<8|t[1]))throw"sjis not supported."}("友");var r=e(t);return{getMode:function(){return 8},getLength:function(){return~~(r.length/2)},write:function(t){for(var e=0;e+1<r.length;){var i=(255&r[e])<<8|255&r[e+1];if(33088<=i&&40956>=i)i-=33088;else{if(!(57408<=i&&60351>=i))throw"illegal char at "+(e+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13),e+=2}if(e<r.length)throw"illegal char at "+(e+1)}}}(t);break;default:throw"mode:"+e}m.push(t),w=null},isDark:function(t,e){if(0>t||p<=t||0>e||p<=e)throw t+","+e;return f[t][e]},getModuleCount:function(){return p},make:function(){if(1>c){for(var t=1;40>t;t++){for(var e=u.getRSBlocks(t,g),i=r(),n=0;n<m.length;n++){var o=m[n];i.put(o.getMode(),4),i.put(o.getLength(),s.getLengthInBits(o.getMode(),t)),o.write(i)}for(n=o=0;n<e.length;n++)o+=e[n].dataCount;if(i.getLengthInBits()<=8*o)break}c=t}for(i=e=t=0;8>i;i+=1)d(!0,i),n=s.getLostPoint(v),(0==i||t>n)&&(t=n,e=i);d(!1,e)},createTableTag:function(t,e){t=t||2,e='<table style=" border-width: 0px; border-style: none; border-collapse: collapse; padding: 0px; margin: '+(void 0===e?4*t:e)+'px;"><tbody>';for(var r=0;r<v.getModuleCount();r+=1){e+="<tr>";for(var i=0;i<v.getModuleCount();i+=1)e+='<td style="',e+=" border-width: 0px; border-style: none;",e+=" border-collapse: collapse;",e+=" padding: 0px; margin: 0px;",e+=" width: "+t+"px;",e+=" height: "+t+"px;",e+=" background-color: ",e+=v.isDark(r,i)?"#000000":"#ffffff",e+=";",e+='"/>';e+="</tr>"}return e+"</tbody></table>"},createSvgTag:function(t,e,r,i){var n={};"object"==typeof t&&(t=(n=t).cellSize,e=n.margin,r=n.alt,i=n.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-title":null;var o=v.getModuleCount()*t+2*e,a="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ";for(n=(n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"'+(n.scalable?"":' width="'+o+'px" height="'+o+'px"'))+' viewBox="0 0 '+o+" "+o+'"  preserveAspectRatio="xMinYMin meet"'+(i.text||r.text?' role="img" aria-labelledby="'+h([i.id,r.id].join(" ").trim())+'"':""),n+=">",n+=i.text?'<title id="'+h(i.id)+'">'+h(i.text)+"</title>":"",n+=r.text?'<description id="'+h(r.id)+'">'+h(r.text)+"</description>":"",n+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',n+='<path d="',o=0;o<v.getModuleCount();o+=1){var s=o*t+e;for(r=0;r<v.getModuleCount();r+=1)v.isDark(o,r)&&(n+="M"+(i=r*t+e)+","+s+a)}return(n+='" stroke="transparent" fill="black"/>')+"</svg>"},createDataURL:function(e,r){e=e||2,r=void 0===r?4*e:r;var i=v.getModuleCount()*e+2*r,n=r,o=i-r;return t(i,i,(function(t,r){return n<=t&&t<o&&n<=r&&r<o&&v.isDark(Math.floor((r-n)/e),Math.floor((t-n)/e))?0:1}))},createImgTag:function(t,e,r){t=t||2,e=void 0===e?4*t:e;var i=v.getModuleCount()*t+2*e;return t=(t=(t='<img src="'+v.createDataURL(t,e))+'" width="'+i+'" height="')+i+'"',r&&(t+=' alt="',t+=h(r),t+='"'),t+"/>"},createASCII:function(t,e){if(2>(t=t||1)){t=void 0===(t=e)?2:t;var r=1*v.getModuleCount()+2*t,i=t;e=r-t;var n,o,a={"██":"█","█ ":"▀"," █":"▄","  ":" "},s={"██":"▀","█ ":"▀"," █":" ","  ":" "},h="";for(n=0;n<r;n+=2){var u=Math.floor(n-i),l=Math.floor(n+1-i);for(o=0;o<r;o+=1){var d="█";i<=o&&o<e&&i<=n&&n<e&&v.isDark(u,Math.floor(o-i))&&(d=" "),d=i<=o&&o<e&&i<=n+1&&n+1<e&&v.isDark(l,Math.floor(o-i))?d+" ":d+"█",h+=1>t&&n+1>=e?s[d]:a[d]}h+="\n"}return r%2&&0<t?h.substring(0,h.length-r-1)+Array(r+1).join("▀"):h.substring(0,h.length-1)}for(--t,i=e=void 0===e?2*t:e,e=(r=v.getModuleCount()*t+2*e)-e,d=Array(t+1).join("██"),a=Array(t+1).join("  "),s="",n=0;n<r;n+=1){for(u=Math.floor((n-i)/t),h="",o=0;o<r;o+=1)l=1,i<=o&&o<e&&i<=n&&n<e&&v.isDark(u,Math.floor((o-i)/t))&&(l=0),h+=l?d:a;for(u=0;u<t;u+=1)s+=h+"\n"}return s.substring(0,s.length-1)},renderTo2dContext:function(t,e){e=e||2;for(var r=v.getModuleCount(),i=0;i<r;i++)for(var n=0;n<r;n++)t.fillStyle=v.isDark(i,n)?"black":"white",t.fillRect(i*e,n*e,e,e)}};return v}function n(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var i=Array(t.length-r+e),n=0;n<t.length-r;n+=1)i[n]=t[n+r];return i}(),i={getAt:function(t){return r[t]},getLength:function(){return r.length},multiply:function(t){for(var e=Array(i.getLength()+t.getLength()-1),r=0;r<i.getLength();r+=1)for(var o=0;o<t.getLength();o+=1)e[r+o]^=h.gexp(h.glog(i.getAt(r))+h.glog(t.getAt(o)));return n(e,0)},mod:function(t){if(0>i.getLength()-t.getLength())return i;for(var e=h.glog(i.getAt(0))-h.glog(t.getAt(0)),r=Array(i.getLength()),o=0;o<i.getLength();o+=1)r[o]=i.getAt(o);for(o=0;o<t.getLength();o+=1)r[o]^=h.gexp(h.glog(t.getAt(o))+e);return n(r,0).mod(t)}};return i}i.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var i=t.charCodeAt(r);e.push(255&i)}return e}},i.stringToBytes=i.stringToBytesFuncs.default,i.createStringToBytes=function(t,e){var r=function(){function r(){var t=i.read();if(-1==t)throw"eof";return t}for(var i=function(t){function e(t){if(65<=t&&90>=t)return t-65;if(97<=t&&122>=t)return t-97+26;if(48<=t&&57>=t)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t}var r=0,i=0,n=0;return{read:function(){for(;8>n;){if(r>=t.length){if(0==n)return-1;throw"unexpected end of file./"+n}var o=t.charAt(r);if(r+=1,"="==o)return n=0,-1;o.match(/^\s$/)||(i=i<<6|e(o.charCodeAt(0)),n+=6)}return o=i>>>n-8&255,n-=8,o}}}(t),n=0,o={};;){var a=i.read();if(-1==a)break;var s=r(),h=r(),u=r();o[a=String.fromCharCode(a<<8|s)]=h<<8|u,n+=1}if(n!=e)throw n+" != "+e;return o}();return function(t){for(var e=[],i=0;i<t.length;i+=1){var n=t.charCodeAt(i);128>n?e.push(n):"number"==typeof(n=r[t.charAt(i)])?(255&n)==n?e.push(n):(e.push(n>>>8),e.push(255&n)):e.push(63)}return e}};var o,a={L:1,M:0,Q:3,H:2},s=function(){function t(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e}var e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];return{getBCHTypeInfo:function(e){for(var r=e<<10;0<=t(r)-t(1335);)r^=1335<<t(r)-t(1335);return 21522^(e<<10|r)},getBCHTypeNumber:function(e){for(var r=e<<12;0<=t(r)-t(7973);)r^=7973<<t(r)-t(7973);return e<<12|r},getPatternPosition:function(t){return e[t-1]},getMaskFunction:function(t){switch(t){case 0:return function(t,e){return 0==(t+e)%2};case 1:return function(t){return 0==t%2};case 2:return function(t,e){return 0==e%3};case 3:return function(t,e){return 0==(t+e)%3};case 4:return function(t,e){return 0==(Math.floor(t/2)+Math.floor(e/3))%2};case 5:return function(t,e){return 0==t*e%2+t*e%3};case 6:return function(t,e){return 0==(t*e%2+t*e%3)%2};case 7:return function(t,e){return 0==(t*e%3+(t+e)%2)%2};default:throw"bad maskPattern:"+t}},getErrorCorrectPolynomial:function(t){for(var e=n([1],0),r=0;r<t;r+=1)e=e.multiply(n([1,h.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&10>e)switch(t){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+t}else if(27>e)switch(t){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+t}else{if(!(41>e))throw"type:"+e;switch(t){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+t}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,i=0;i<e;i+=1)for(var n=0;n<e;n+=1){for(var o=0,a=t.isDark(i,n),s=-1;1>=s;s+=1)if(!(0>i+s||e<=i+s))for(var h=-1;1>=h;h+=1)0>n+h||e<=n+h||(0!=s||0!=h)&&a==t.isDark(i+s,n+h)&&(o+=1);5<o&&(r+=3+o-5)}for(i=0;i<e-1;i+=1)for(n=0;n<e-1;n+=1)o=0,t.isDark(i,n)&&(o+=1),t.isDark(i+1,n)&&(o+=1),t.isDark(i,n+1)&&(o+=1),t.isDark(i+1,n+1)&&(o+=1),(0==o||4==o)&&(r+=3);for(i=0;i<e;i+=1)for(n=0;n<e-6;n+=1)t.isDark(i,n)&&!t.isDark(i,n+1)&&t.isDark(i,n+2)&&t.isDark(i,n+3)&&t.isDark(i,n+4)&&!t.isDark(i,n+5)&&t.isDark(i,n+6)&&(r+=40);for(n=0;n<e;n+=1)for(i=0;i<e-6;i+=1)t.isDark(i,n)&&!t.isDark(i+1,n)&&t.isDark(i+2,n)&&t.isDark(i+3,n)&&t.isDark(i+4,n)&&!t.isDark(i+5,n)&&t.isDark(i+6,n)&&(r+=40);for(n=o=0;n<e;n+=1)for(i=0;i<e;i+=1)t.isDark(i,n)&&(o+=1);return r+Math.abs(100*o/e/e-50)/5*10}}}(),h=function(){for(var t=Array(256),e=Array(256),r=0;8>r;r+=1)t[r]=1<<r;for(r=8;256>r;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(r=0;255>r;r+=1)e[t[r]]=r;return{glog:function(t){if(1>t)throw"glog("+t+")";return e[t]},gexp:function(e){for(;0>e;)e+=255;for(;256<=e;)e-=255;return t[e]}}}(),u=(o=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],{getRSBlocks:function(t,e){var r=function(t,e){switch(e){case a.L:return o[4*(t-1)];case a.M:return o[4*(t-1)+1];case a.Q:return o[4*(t-1)+2];case a.H:return o[4*(t-1)+3]}}(t,e);if(void 0===r)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+e;t=r.length/3,e=[];for(var i=0;i<t;i+=1)for(var n=r[3*i],s=r[3*i+1],h=r[3*i+2],u=0;u<n;u+=1){var l=e,d=l.push,c=h,g={};g.totalCount=s,g.dataCount=c,d.call(l,g)}return e}});return i}()).stringToBytesFuncs["UTF-8"]=function(t){for(var e=[],r=0;r<t.length;r++){var i=t.charCodeAt(r);128>i?e.push(i):2048>i?e.push(192|i>>6,128|63&i):55296>i||57344<=i?e.push(224|i>>12,128|i>>6&63,128|63&i):(r++,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e},b.exports=y;var M,S=x.exports;M=S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S;let A=Array(41).fill(0).map(((t,e)=>e));var z,k=z||(z={});k.L="L",k.M="M",k.Q="Q",k.H="H";var C,O=C||(C={});O.numeric="Numeric",O.alphanumeric="Alphanumeric",O.byte="Byte",O.kanji="Kanji",O.unicode="Unicode";let D=t=>!!t&&"object"==typeof t&&!Array.isArray(t);function q(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(!r.length)return t;let n=r.shift();return void 0!==n&&D(t)&&D(n)?(t=m({},t),Object.keys(n).forEach((e=>{let r=t[e],i=n[e];Array.isArray(r)&&Array.isArray(i)?t[e]=i:D(r)&&D(i)?t[e]=q(Object.assign({},r),i):t[e]=i})),q(t,...r)):t}var _,B=_||(_={});function I(t){if(!(t=m({},t)).colorStops||!t.colorStops.length)throw"Field 'colorStops' is required in gradient";return t.rotation=t.rotation?Number(t.rotation):0,t.colorStops=t.colorStops.map((t=>m(m({},t),{},{offset:Number(t.offset)}))),t}B.radial="radial",B.linear="linear";var P,R=P||(P={});R.dot="dot",R.randomDot="random-dot",R.rounded="rounded",R.extraRounded="extra-rounded",R.verticalLine="vertical-line",R.horizontalLine="horizontal-line",R.classy="classy",R.classyRounded="classy-rounded",R.square="square",R.smallSquare="small-square",R.diamond="diamond";var L,E=L||(L={});E.dot="dot",E.square="square",E.heart="heart",E.extraRounded="extra-rounded",E.classy="classy",E.outpoint="outpoint",E.inpoint="inpoint";var N,F=N||(N={});F.dot="dot",F.square="square",F.extraRounded="extra-rounded",F.classy="classy",F.outpoint="outpoint",F.inpoint="inpoint";var j,T=j||(j={});T.square="square",T.circle="circle";let H={document:void 0,shape:j.square,width:void 0,height:void 0,data:"",qrOptions:{typeNumber:A[0],mode:void 0,errorCorrectionLevel:z.Q},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:P.square,color:"#000",size:10}};function G(t){return(t=m({},t)).imageOptions=m(m({},t.imageOptions),{},{hideBackgroundDots:!!t.imageOptions.hideBackgroundDots,imageSize:Math.min(1,Number(t.imageOptions.imageSize))||1,margin:Number(t.imageOptions.margin)}),t.dotsOptions=m({},t.dotsOptions),t.dotsOptions.gradient&&(t.dotsOptions.gradient=I(t.dotsOptions.gradient)),t.dotsOptions.size=Math.round(Math.max(0,t.dotsOptions.size)||10),t.cornersSquareOptions&&(t.cornersSquareOptions=m({},t.cornersSquareOptions),t.cornersSquareOptions.gradient&&(t.cornersSquareOptions.gradient=I(t.cornersSquareOptions.gradient))),t.cornersDotOptions&&(t.cornersDotOptions=m({},t.cornersDotOptions),t.cornersDotOptions.gradient&&(t.cornersDotOptions.gradient=I(t.cornersDotOptions.gradient))),t.backgroundOptions&&(t.backgroundOptions=m({},t.backgroundOptions),t.backgroundOptions.gradient&&(t.backgroundOptions.gradient=I(t.backgroundOptions.gradient))),t.document||(t.document=document),t}let U={[z.L]:.07,[z.M]:.15,[z.Q]:.25,[z.H]:.3},V=/\.?0+$/;function Q(t){return t.toFixed(7).replace(V,"")}function X(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return t.reduce(((t,e,i)=>{let n="";return i&&(n=r[i-1]),"number"==typeof n&&(n=Q(n)),"".concat(t).concat(n).concat(e)}),"").trim().replace(/[\s\n\r]+/gim," ")}class Y{get element(){return this._element}constructor(t,e){this.type=t,this.document=e}draw(t){let e;switch(this.type){case L.square:e=this.drawSquare;break;case L.heart:e=this.drawHeart;break;case L.extraRounded:e=this.drawRounded;break;case L.classy:e=this.drawClassy;break;case L.inpoint:e=this.drawInpoint;break;case L.outpoint:e=this.drawOutpoint;break;default:e=this.drawDot}e.call(this,t)}rotateFigure(t){let{x:e,y:r,size:i,rotation:n=0,draw:o}=t;var a;e+=i/2,r+=i/2,o(),null===(a=this._element)||void 0===a||a.setAttribute("transform","rotate(".concat(Q(180*n/Math.PI),",").concat(e,",").concat(r,")"))}basicDot(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",Q(r+e/2)),this._element.setAttribute("cy",Q(i+e/2)),this._element.setAttribute("r",Q(e/2))}}))}basicSquare(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",Q(r)),this._element.setAttribute("y",Q(i)),this._element.setAttribute("width",Q(e)),this._element.setAttribute("height",Q(e))}}))}basicHeart(t){let{size:e,x:r,y:i}=t;this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path");let n=!1,o=0;this._element.setAttribute("d",["M",1,.3262506,"c",0,.0383376,-.0064626,.0758377,-.0193751,.1125001,"s",-.0356247,.076875,-.0681248,.1206252,"c",-.0325,.0437499,-.0762503,.0931247,-.1312501,.1481249,"C",.7262502,.7625008,.6566626,.8279132,.5724999,.9037505,"L",.5,.9687506,"L",.4275001,.9037505,"C",.3433374,.8279132,.2737499,.7625005,.21875,.7075007,"C",.1637501,.6525008,.1199999,.6031258,.0874999,.5593758,"S",.0322876,.4754133,.0193751,.4387506,"S",0,.3645881,0,.3262506,"c",0,-.0783374,.0262499,-.1437498,.07875,-.1962499,"s",.1179124,-.07875,.1962499,-.07875,"c",.0433376,0,.0845875,.0091625,.12375,.0274999,"S",.4716623,.1229131,.5,.1562506,"c",.0283374,-.0333375,.0620874,-.0591625,.1012502,-.0775,"c",.0391627,-.0183375,.0804126,-.0274999,.12375,-.0274999,"c",.0783374,0,.1437497,.0262499,.1962501,.07875,"S",1,.2479131,1,.3262506,"z"].map((t=>"string"==typeof t?(o=0,n=t.toUpperCase()==t,t):(o++,t*=e,n&&(t+=1==o%2?r:i),Q(t)))).join(" "))}basicRounded(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",Q(r)),this._element.setAttribute("y",Q(i)),this._element.setAttribute("width",Q(e)),this._element.setAttribute("height",Q(e)),this._element.setAttribute("rx",Q(e/4)),this._element.setAttribute("ry",Q(e/4))}}))}basicClassy(t){let{size:e,x:r,y:n}=t,o=e/7;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",X(i||(i=p(["M "," "," v "," a "," ",", 0, 0, 0, "," "," h "," v "," a "," ",", 0, 0, 0, "," "," h "," H "," z"])),r,n+2.5*o,2*o,2.5*o,2.5*o,2.5*o,2.5*o,4.5*o,-4.5*o,2.5*o,2.5*o,2.5*-o,2.5*-o,-2*o,r))}}))}basicInpoint(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",X(n||(n=p(["M "," "," v "," a ",", "," 0 0 0 ",", "," h "," v "," a ",", "," 0 0 0 ",", "," h "," a ",", "," 0 0 0 ",", "," z"])),r,i+e/2,e/4,e/4,e/4,e/4,e/4,e/4*3,-e/4*3,e/4,e/4,-e/4,-e/4,-e/2,e/4,e/4,-e/4,e/4))}}))}drawDot(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicDot({x:e,y:r,size:i,rotation:n})}drawSquare(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicSquare({x:e,y:r,size:i,rotation:n})}drawHeart(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicHeart({x:e,y:r,size:i,rotation:n})}drawRounded(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicRounded({x:e,y:r,size:i,rotation:n})}drawClassy(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicClassy({x:e,y:r,size:i,rotation:n})}drawInpoint(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicInpoint({x:e,y:r,size:i,rotation:n})}drawOutpoint(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicInpoint({x:e,y:r,size:i,rotation:(n||0)+Math.PI})}}class ${get element(){return this._element}constructor(t,e){this.type=t,this.document=e}draw(t){let e;switch(this.type){case N.square:e=this.drawSquare;break;case N.extraRounded:e=this.drawExtraRounded;break;case N.classy:e=this.drawClassy;break;case N.outpoint:e=this.drawOutpoint;break;case N.inpoint:e=this.drawInpoint;break;default:e=this.drawDot}e.call(this,t)}rotateFigure(t){let{x:e,y:r,size:i,rotation:n=0,draw:o}=t;var a;e+=i/2,r+=i/2,o(),null===(a=this._element)||void 0===a||a.setAttribute("transform","rotate(".concat(Q(180*n/Math.PI),",").concat(e,",").concat(r,")"))}basicDot(t){let{size:e,x:r,y:i}=t,n=e/7;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",X(o||(o=p(["M "," "," a "," "," 0 1 0 0.1 0 z m 0 "," a "," "," 0 1 1 -0.1 0 Z"])),r+e/2,i,e/2,e/2,n,e/2-n,e/2-n))}}))}basicSquare(t){let{size:e,x:r,y:i}=t,n=e/7;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",X(a||(a=p(["M "," "," v "," h "," v "," z M "," "," h "," v "," h "," z"])),r,i,e,e,-e,r+n,i+n,e-2*n,e-2*n,2*n-e))}}))}basicExtraRounded(t){let{size:e,x:r,y:i}=t,n=e/7;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",X(s||(s=p(["M "," "," v "," a "," ",", 0, 0, 0, "," "," h "," a "," ",", 0, 0, 0, "," "," v "," a "," ",", 0, 0, 0, "," "," h "," a "," ",", 0, 0, 0, "," "," z M "," "," h "," a "," ",", 0, 0, 1, "," "," v "," a "," ",", 0, 0, 1, "," "," h "," a "," ",", 0, 0, 1, "," "," v "," a "," ",", 0, 0, 1, "," "," z"])),r,i+2.5*n,2*n,2.5*n,2.5*n,2.5*n,2.5*n,2*n,2.5*n,2.5*n,2.5*n,2.5*-n,-2*n,2.5*n,2.5*n,2.5*-n,2.5*-n,-2*n,2.5*n,2.5*n,2.5*-n,2.5*n,r+2.5*n,i+n,2*n,1.5*n,1.5*n,1.5*n,1.5*n,2*n,1.5*n,1.5*n,1.5*-n,1.5*n,-2*n,1.5*n,1.5*n,1.5*-n,1.5*-n,-2*n,1.5*n,1.5*n,1.5*n,1.5*-n))}}))}basicClassy(t){let{size:e,x:r,y:i}=t,n=e/7;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",X(h||(h=p(["M "," "," v "," a "," ",", 0, 0, 0, "," "," h "," v "," a "," ",", 0, 0, 0, "," "," h "," H "," z M "," "," h "," a "," ",", 0, 0, 1, "," "," v "," h "," a "," ",", 0, 0, 1, "," "," v "," z"])),r,i+2.5*n,2*n,2.5*n,2.5*n,2.5*n,2.5*n,4.5*n,-4.5*n,2.5*n,2.5*n,2.5*-n,2.5*-n,-2*n,r,r+2.5*n,i+n,2*n,1.5*n,1.5*n,1.5*n,1.5*n,3.5*n,-3.5*n,1.5*n,1.5*n,1.5*-n,1.5*-n,-3.5*n))}}))}basicInpoint(t){let{size:e,x:r,y:i}=t,n=e/7;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",X(u||(u=p(["M "," "," v "," a "," ",", 0, 0, 0, "," "," h "," v "," a "," ",", 0, 0, 0, "," "," h "," a "," ",", 0, 0, 0, "," "," z M "," "," h "," a "," ",", 0, 0, 1, "," "," v "," h "," a "," ",", 0, 0, 1, "," "," v "," a "," ",", 0, 0, 1, "," "," z"])),r,i+2.5*n,2*n,2.5*n,2.5*n,2.5*n,2.5*n,4.5*n,-4.5*n,2.5*n,2.5*n,2.5*-n,2.5*-n,-2*n,2.5*n,2.5*n,2.5*-n,2.5*n,r+2.5*n,i+n,2*n,1.5*n,1.5*n,1.5*n,1.5*n,3.5*n,-3.5*n,1.5*n,1.5*n,1.5*-n,1.5*-n,-2*n,1.5*n,1.5*n,1.5*n,1.5*-n))}}))}drawDot(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicDot({x:e,y:r,size:i,rotation:n})}drawSquare(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicSquare({x:e,y:r,size:i,rotation:n})}drawExtraRounded(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicExtraRounded({x:e,y:r,size:i,rotation:n})}drawClassy(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicClassy({x:e,y:r,size:i,rotation:n})}drawInpoint(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicInpoint({x:e,y:r,size:i,rotation:n})}drawOutpoint(t){let{x:e,y:r,size:i,rotation:n}=t;this.basicInpoint({x:e,y:r,size:i,rotation:(n||0)+Math.PI})}}class W{get element(){return this._element}constructor(t,e){this.type=t,this.document=e}draw(t){let e;switch(this.type){case P.dot:e=this.drawDot;break;case P.randomDot:e=this.drawRandomDot;break;case P.classy:e=this.drawClassy;break;case P.classyRounded:e=this.drawClassyRounded;break;case P.rounded:e=this.drawRounded;break;case P.verticalLine:e=this.drawVerticalLine;break;case P.horizontalLine:e=this.drawHorizontalLine;break;case P.extraRounded:e=this.drawExtraRounded;break;case P.diamond:e=this.drawDiamond;break;case P.smallSquare:e=this.drawSmallSquare;break;default:e=this.drawSquare}e.call(this,t)}rotateFigure(t){let{x:e,y:r,size:i,rotation:n=0,draw:o}=t;var a;e+=i/2,r+=i/2,o(),null===(a=this._element)||void 0===a||a.setAttribute("transform","rotate(".concat(Q(180*n/Math.PI),",").concat(e,",").concat(r,")"))}basicDot(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",Q(r+e/2)),this._element.setAttribute("cy",Q(i+e/2)),this._element.setAttribute("r",Q(e/2))}}))}basicSquare(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",Q(r)),this._element.setAttribute("y",Q(i)),this._element.setAttribute("width",Q(e)),this._element.setAttribute("height",Q(e))}}))}basicSideRounded(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",X(l||(l=p(["M "," "," v "," h "," a "," ",", 0, 0, 0, 0 "," z"])),r,i,e,e/2,e/2,e/2,-e))}}))}basicCornerRounded(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",X(d||(d=p(["M "," "," v "," h "," v "," a "," ",", 0, 0, 0, "," "," z"])),r,i,e,e,-e/2,e/2,e/2,-e/2,-e/2))}}))}basicCornerExtraRounded(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",X(c||(c=p(["M "," "," v "," h "," a "," ",", 0, 0, 0, "," "," z"])),r,i,e,e,e,e,-e,-e))}}))}basicCornersRounded(t){let{size:e,x:r,y:i}=t;this.rotateFigure(m(m({},t),{},{draw:()=>{this._element=this.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",X(g||(g=p(["M "," "," v "," a "," ",", 0, 0, 0, "," "," h "," v "," a "," ",", 0, 0, 0, "," "," z"])),r,i,e/2,e/2,e/2,e/2,e/2,e/2,-e/2,e/2,e/2,-e/2,-e/2))}}))}drawDot(t){let{x:e,y:r,size:i}=t;this.basicDot({x:e,y:r,size:i,rotation:0})}drawRandomDot(t){let{x:e,y:r,size:i}=t;this.basicDot({x:e,y:r,size:i*(.25*Math.random()+.75),rotation:0})}drawSquare(t){let{x:e,y:r,size:i}=t;this.basicSquare({x:e,y:r,size:i,rotation:0})}drawSmallSquare(t){let{x:e,y:r,size:i}=t;this.basicSquare({x:e+.15*i,y:r+.15*i,size:.7*i,rotation:0})}drawDiamond(t){let{x:e,y:r,size:i}=t;this.basicSquare({x:e,y:r,size:i,rotation:Math.PI/4})}drawRounded(t){let{x:e,y:r,size:i,getNeighbor:n}=t;var o=n?+n(-1,0):0;let a=n?+n(1,0):0,s=n?+n(0,-1):0;var h=o+a+s+(n=n?+n(0,1):0);0===h?this.basicDot({x:e,y:r,size:i,rotation:0}):2<h||o&&a||s&&n?this.basicSquare({x:e,y:r,size:i,rotation:0}):2===h?(h=0,o&&s?h=Math.PI/2:s&&a?h=Math.PI:a&&n&&(h=-Math.PI/2),this.basicCornerRounded({x:e,y:r,size:i,rotation:h})):1===h&&(o=0,s?o=Math.PI/2:a?o=Math.PI:n&&(o=-Math.PI/2),this.basicSideRounded({x:e,y:r,size:i,rotation:o}))}drawVerticalLine(t){let{x:e,y:r,size:i,getNeighbor:n}=t,o=n?+n(-1,0):0,a=n?+n(1,0):0,s=n?+n(0,-1):0;0===o+a+s+(n=n?+n(0,1):0)||o&&!s&&!n||a&&!s&&!n?this.basicDot({x:e,y:r,size:i,rotation:0}):s&&n?this.basicSquare({x:e,y:r,size:i,rotation:0}):s&&!n?this.basicSideRounded({x:e,y:r,size:i,rotation:Math.PI/2}):n&&!s&&this.basicSideRounded({x:e,y:r,size:i,rotation:-Math.PI/2})}drawHorizontalLine(t){let{x:e,y:r,size:i,getNeighbor:n}=t,o=n?+n(-1,0):0,a=n?+n(1,0):0,s=n?+n(0,-1):0;0===o+a+s+(n=n?+n(0,1):0)||s&&!o&&!a||n&&!o&&!a?this.basicDot({x:e,y:r,size:i,rotation:0}):o&&a?this.basicSquare({x:e,y:r,size:i,rotation:0}):o&&!a?this.basicSideRounded({x:e,y:r,size:i,rotation:0}):a&&!o&&this.basicSideRounded({x:e,y:r,size:i,rotation:Math.PI})}drawExtraRounded(t){let{x:e,y:r,size:i,getNeighbor:n}=t;var o=n?+n(-1,0):0;let a=n?+n(1,0):0,s=n?+n(0,-1):0;var h=o+a+s+(n=n?+n(0,1):0);0===h?this.basicDot({x:e,y:r,size:i,rotation:0}):2<h||o&&a||s&&n?this.basicSquare({x:e,y:r,size:i,rotation:0}):2===h?(h=0,o&&s?h=Math.PI/2:s&&a?h=Math.PI:a&&n&&(h=-Math.PI/2),this.basicCornerExtraRounded({x:e,y:r,size:i,rotation:h})):1===h&&(o=0,s?o=Math.PI/2:a?o=Math.PI:n&&(o=-Math.PI/2),this.basicSideRounded({x:e,y:r,size:i,rotation:o}))}drawClassy(t){let{x:e,y:r,size:i,getNeighbor:n}=t,o=n?+n(-1,0):0,a=n?+n(1,0):0,s=n?+n(0,-1):0;0===o+a+s+(n=n?+n(0,1):0)?this.basicCornersRounded({x:e,y:r,size:i,rotation:Math.PI/2}):o||s?a||n?this.basicSquare({x:e,y:r,size:i,rotation:0}):this.basicCornerRounded({x:e,y:r,size:i,rotation:Math.PI/2}):this.basicCornerRounded({x:e,y:r,size:i,rotation:-Math.PI/2})}drawClassyRounded(t){let{x:e,y:r,size:i,getNeighbor:n}=t,o=n?+n(-1,0):0,a=n?+n(1,0):0,s=n?+n(0,-1):0;0===o+a+s+(n=n?+n(0,1):0)?this.basicCornersRounded({x:e,y:r,size:i,rotation:Math.PI/2}):o||s?a||n?this.basicSquare({x:e,y:r,size:i,rotation:0}):this.basicCornerExtraRounded({x:e,y:r,size:i,rotation:Math.PI/2}):this.basicCornerExtraRounded({x:e,y:r,size:i,rotation:-Math.PI/2})}}let Z={toDataURL:t=>"string"==typeof t&&t.startsWith("data:")?Promise.resolve(t):new Promise(((e,r)=>{if("string"==typeof t){const i=new XMLHttpRequest;i.onload=function(){const t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(i.response)},i.onerror=i.onabort=i.ontimeout=r,i.open("GET",t,!0),i.responseType="blob",i.send()}else{const r=new FileReader;r.onloadend=function(){e(r.result)},r.readAsDataURL(t)}})),getSize:(t,e)=>new Promise(((r,i)=>{const n=new Image;"string"===e&&(n.crossOrigin=e),n.onload=()=>{r({width:n.width,height:n.height})},n.onerror=n.onabort=i,"string"==typeof t?n.src=t:Z.toDataURL(t).then((t=>n.src=t)).catch(i)}))},K=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],J=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],tt=[[35,49],[28,36],[21,25],[14,16],[7,9],[2,4],[1,1]];class et{get element(){return this._element}constructor(t){this.options=t,this.document=t.document,this._element=this.document.createElementNS("http://www.w3.org/2000/svg","svg");let e=Q(t.width),r=Q(t.height);this._element.setAttribute("width",e),this._element.setAttribute("height",r),this._element.setAttribute("viewBox","0 0 ".concat(e," ").concat(r)),this.defs=this.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this.defs),this.imageTools=t.imageTools||Z}get width(){return this.options.width}get height(){return this.options.height}async drawQR(t){let e=t.getModuleCount(),r=parseInt(((e-17)/4).toFixed(0),10),i=this.options.dotsOptions.size,n={hideXDots:0,hideYDots:0,width:0,height:0};if(this.qr=t,this.options.image){t=await this.imageTools.getSize(this.options.image,this.options.imageOptions.crossOrigin);let{imageOptions:o,errorCorrectionPercent:a}=this.options,s=o.imageSize*a,h=tt.find((t=>t[0]<=r))||[0,0];n=function(t){let{originalHeight:e,originalWidth:r,maxHiddenDots:i,maxHiddenAxisDots:n,dotSize:o,margin:a}=t;if(0>=e||0>=r||0>=i||0>=o||4*a**2>i)return{height:0,width:0,hideYDots:0,hideXDots:0};n&&0==n%2&&(n=Math.max(1,n-1));var s=Math.max(r,e),h=Math.min(r,e),u=0;n=(n||i)-2*a;do{let t=u+(n-u)/2,e=Math.max(1,Math.ceil(t+2*a));0==e%2&&e++;let r=Math.max(1,Math.ceil(t*h/s+2*a));0==r%2&&r++,e*r>i?n=t:u=t}while(.001<Math.abs(u-n));return 0==(i=Math.max(1,Math.ceil(u+2*a)))%2&&i++,0==(h=Math.max(1,Math.ceil(u*h/s+2*a)))%2&&h++,r>e?s=i:(s=h,h=i),i=n=(s-2*a)*o,(n=n*e/r)>(u=(h-2*a)*o)&&(n=u,i=u*r/e),{height:Math.round(n+2*a*o),width:Math.round(i+2*a*o),hideYDots:h,hideXDots:s}}({originalWidth:t.width,originalHeight:t.height,maxHiddenDots:Math.floor(s*(e*e-192-2*(e-16)-25*h[1])),maxHiddenAxisDots:e-14,dotSize:i,margin:o.margin})}this.drawBackground(),this.drawDots(((t,r)=>{var i,o,a,s,h,u;return!(this.options.imageOptions.hideBackgroundDots&&t>=(e-n.hideXDots)/2&&t<(e+n.hideXDots)/2&&r>=(e-n.hideYDots)/2&&r<(e+n.hideYDots)/2||null!==(i=K[t])&&void 0!==i&&i[r]||null!==(o=K[t-e+7])&&void 0!==o&&o[r]||null!==(a=K[t])&&void 0!==a&&a[r-e+7]||null!==(s=J[t])&&void 0!==s&&s[r]||null!==(h=J[t-e+7])&&void 0!==h&&h[r]||null!==(u=J[t])&&void 0!==u&&u[r-e+7])})),this.drawCorners(),this.options.image&&0<n.width&&0<n.height&&await this.drawImage({width:n.width,height:n.height,count:e,dotSize:i})}drawBackground(){let t=this.options;if(this._element&&t.backgroundOptions){this.createColor({options:t.backgroundOptions.gradient,color:t.backgroundOptions.color,additionalRotation:0,x:0,y:0,height:t.height,width:t.width,name:"background-color"});let e=Math.min(t.width,t.height),r=this.document.createElementNS("http://www.w3.org/2000/svg","rect");[this.backgroundMask,this.backgroundMaskGroup]=this.createMask("mask-background-color"),this.defs.appendChild(this.backgroundMask),r.setAttribute("x",Q((t.width-e)/2)),r.setAttribute("y",Q((t.height-e)/2)),r.setAttribute("width",Q(e)),r.setAttribute("height",Q(e)),r.setAttribute("rx",Q(e/2*(t.backgroundOptions.round||0))),this.backgroundMaskGroup.appendChild(r)}}drawDots(t){var e;if(!this.qr)throw"QR code is not defined";let r=this.options,i=this.qr.getModuleCount();if(i>r.width||i>r.height)throw"The canvas is too small.";var n=Math.min(r.width,r.height);let o=this.options.dotsOptions.size;var a=Math.floor((r.width-i*o)/2),s=Math.floor((r.height-i*o)/2);let h=new W(r.dotsOptions.type,this.document);[this.dotsMask,this.dotsMaskGroup]=this.createMask("mask-dot-color"),this.defs.appendChild(this.dotsMask);for(let e=0;e<i;e++)for(let r=0;r<i;r++){var u;t&&!t(e,r)||null===(u=this.qr)||void 0===u||!u.isDark(r,e)||(h.draw({x:a+e*o,y:s+r*o,size:o,getNeighbor:(n,o)=>!(0>e+n||0>r+o||e+n>=i||r+o>=i||t&&!t(e+n,r+o))&&!!this.qr&&this.qr.isDark(r+o,e+n)}),h.element&&this.dotsMask&&this.dotsMaskGroup.appendChild(h.element))}let l=a,d=s,c=i;if(r.shape===j.circle){n=Math.floor((n/o-i-2*(this.options.backgroundOptions&&this.options.backgroundOptions.margin||0))/2);let t=i+2*n;l=a-=n*o,d=s-=n*o,c=i+2*n;let e=[],r=Math.floor(t/2);for(let o=0;o<t;o++){e[o]=[];for(let a=0;a<t;a++)e[o][a]=o>=n-1&&o<=t-n&&a>=n-1&&a<=t-n||Math.sqrt((o-r)*(o-r)+(a-r)*(a-r))>r?0:this.qr.isDark(0>a-2*n?a:a>=i?a-2*n:a-n,0>o-2*n?o:o>=i?o-2*n:o-n)?1:0}for(let r=0;r<t;r++)for(let i=0;i<t;i++)e[r][i]&&(h.draw({x:a+r*o,y:s+i*o,size:o,getNeighbor:(t,n)=>{var o;return!(null===(o=e[r+t])||void 0===o||!o[i+n])}}),h.element&&this.dotsMask&&this.dotsMaskGroup.appendChild(h.element))}this.createColor({options:null===(e=r.dotsOptions)||void 0===e?void 0:e.gradient,color:r.dotsOptions.color,additionalRotation:0,x:l,y:d,height:c*o,width:c*o,name:"dot-color"})}drawCorners(){if(!this.qr)throw"QR code is not defined";let t=this.options;if(!this._element)throw"Element code is not defined";let e=this.qr.getModuleCount(),r=this.options.dotsOptions.size,i=7*r,n=3*r,o=Math.floor((t.width-e*r)/2),a=Math.floor((t.height-e*r)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((s=>{let[h,u,l]=s;var d,c,g,f,p,w,m,v,b,y;let x=o+h*r*(e-7),M=a+u*r*(e-7);var S=this.dotsMask;let A=this.dotsMaskGroup;var z=this.dotsMask;if(S=this.dotsMaskGroup,(null!==(d=t.cornersSquareOptions)&&void 0!==d&&d.gradient||null!==(c=t.cornersSquareOptions)&&void 0!==c&&c.color)&&([S,A]=this.createMask("mask-corners-square-color-".concat(h,"-").concat(u)),this.defs.appendChild(S),z=S,S=A,this.createColor({options:null===(g=t.cornersSquareOptions)||void 0===g?void 0:g.gradient,color:null===(f=t.cornersSquareOptions)||void 0===f?void 0:f.color,additionalRotation:l,x,y:M,height:i,width:i,name:"corners-square-color-".concat(h,"-").concat(u)})),null!==(p=t.cornersSquareOptions)&&void 0!==p&&p.type)(z=new $(t.cornersSquareOptions.type,this.document)).draw({x,y:M,size:i,rotation:l}),z.element&&A&&A.appendChild(z.element);else{z=new W(t.dotsOptions.type,this.document);for(let t=0;t<K.length;t++)for(let e=0;e<K[t].length;e++){var k;(null===(k=K[t])||void 0===k?void 0:k[e])&&(z.draw({x:x+t*r,y:M+e*r,size:r,getNeighbor:(r,i)=>{var n;return!(null===(n=K[t+r])||void 0===n||!n[e+i])}}),z.element&&A&&A.appendChild(z.element))}}if((null!==(w=t.cornersDotOptions)&&void 0!==w&&w.gradient||null!==(m=t.cornersDotOptions)&&void 0!==m&&m.color)&&([z,S]=this.createMask("mask-corners-dot-color-".concat(h,"-").concat(u)),this.defs.appendChild(z),this.createColor({options:null===(v=t.cornersDotOptions)||void 0===v?void 0:v.gradient,color:null===(b=t.cornersDotOptions)||void 0===b?void 0:b.color,additionalRotation:l,x:x+2*r,y:M+2*r,height:n,width:n,name:"corners-dot-color-".concat(h,"-").concat(u)})),null!==(y=t.cornersDotOptions)&&void 0!==y&&y.type)(h=new Y(t.cornersDotOptions.type,this.document)).draw({x:x+2*r,y:M+2*r,size:n,rotation:l}),h.element&&S&&S.appendChild(h.element);else{l=new W(t.dotsOptions.type,this.document);for(let t=0;t<J.length;t++)for(let e=0;e<J[t].length;e++){var C;(null===(C=J[t])||void 0===C?void 0:C[e])&&(l.draw({x:x+t*r,y:M+e*r,size:r,getNeighbor:(r,i)=>{var n;return!(null===(n=J[t+r])||void 0===n||!n[e+i])}}),l.element&&S&&S.appendChild(l.element))}}}))}async drawImage(t){let{width:e,height:r,count:i,dotSize:n}=t;var o=this.options,a=o.imageOptions.margin*n;let s=Math.floor((o.width-i*n)/2)+a+(i*n-e)/2;if(i=Math.floor((o.height-i*n)/2)+a+(i*n-r)/2,e-=2*a,r-=2*a,a=await this.imageTools.toDataURL(o.image||""),(o=this.document.createElementNS("http://www.w3.org/2000/svg","image")).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a||""),a.startsWith("data:image/svg+xml;")){n=(a=a.substring(19)).indexOf(",");let t=a.substring(0,n);a=a.substring(n+1),(a="base64"===t?"function"==typeof atob?atob(a):f.from(a,"base64").toString("utf8"):"")&&(a=(new DOMParser).parseFromString(a,"text/xml"),(a=Array.from(a.getElementsByTagName("svg"))).length&&(o=a[0]))}o.setAttribute("x",Q(s)),o.setAttribute("y",Q(i)),o.setAttribute("width","".concat(Q(e),"px")),o.setAttribute("height","".concat(Q(r),"px")),this._element.appendChild(o)}createColor(t){let{options:e,color:r,additionalRotation:i,x:n,y:o,height:a,width:s,name:h}=t;var u=s>a?s:a;let l=this.document.createElementNS("http://www.w3.org/2000/svg","rect");if(l.setAttribute("x",Q(n)),l.setAttribute("y",Q(o)),l.setAttribute("height",Q(a)),l.setAttribute("width",Q(s)),l.setAttribute("style","mask:url(#mask-".concat(h,")")),e){let t;if(e.type===_.radial)t=this.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),t.setAttribute("id",h),t.setAttribute("gradientUnits","userSpaceOnUse"),t.setAttribute("fx",Q(n+s/2)),t.setAttribute("fy",Q(o+a/2)),t.setAttribute("cx",Q(n+s/2)),t.setAttribute("cy",Q(o+a/2)),t.setAttribute("r",Q(u/2));else{u=n+s/2;let l=o+a/2;n+=s/2,o+=a/2,0<=(i=((r=((e.rotation||0)+i)%(2*Math.PI))+2*Math.PI)%(2*Math.PI))&&i<=.25*Math.PI||i>1.75*Math.PI&&i<=2*Math.PI?(u-=s/2,l-=a/2*Math.tan(r),n+=s/2,o+=a/2*Math.tan(r)):i>.25*Math.PI&&i<=.75*Math.PI?(l-=a/2,u-=s/2/Math.tan(r),o+=a/2,n+=s/2/Math.tan(r)):i>.75*Math.PI&&i<=1.25*Math.PI?(u+=s/2,l+=a/2*Math.tan(r),n-=s/2,o-=a/2*Math.tan(r)):i>1.25*Math.PI&&i<=1.75*Math.PI&&(l+=a/2,u+=s/2/Math.tan(r),o-=a/2,n-=s/2/Math.tan(r)),t=this.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),t.setAttribute("id",h),t.setAttribute("gradientUnits","userSpaceOnUse"),t.setAttribute("x1",Q(u)),t.setAttribute("y1",Q(l)),t.setAttribute("x2",Q(n)),t.setAttribute("y2",Q(o))}e.colorStops.forEach((e=>{let{offset:r,color:i}=e,n=this.document.createElementNS("http://www.w3.org/2000/svg","stop");n.setAttribute("offset","".concat(Q(100*r),"%")),n.setAttribute("stop-color",i),t.appendChild(n)})),l.setAttribute("fill","url(#".concat(h,")")),this.defs.appendChild(t)}else r&&l.setAttribute("fill",r);this._element.appendChild(l)}createMask(t){let e=this.options,r=this.document.createElementNS("http://www.w3.org/2000/svg","mask");return r.setAttribute("id",t),r.setAttribute("maskUnits","userSpaceOnUse"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("width",Q(e.width)),r.setAttribute("height",Q(e.height)),(t=this.document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("fill","#fff"),r.appendChild(t),[r,t]}}class rt{get size(){if(this.qrSVG)return{width:this.qrSVG.width,height:this.qrSVG.height}}constructor(t){this.options=t?G(q(H,t)):H,this.update()}update(t){this.container&&(this.container.innerHTML=""),this.options=t?G(q(this.options,t)):this.options,this.options.data&&(this.options.stringToBytesFuncs&&(Object.assign(M.stringToBytesFuncs,this.options.stringToBytesFuncs),delete this.options.stringToBytesFuncs),this.qr=M(this.options.qrOptions.typeNumber,this.options.qrOptions.errorCorrectionLevel),(t=this.options.qrOptions.mode||function(t){switch(!0){case/^[0-9]*$/.test(t):return C.numeric;case/^[0-9A-Z $%*+\-./:]*$/.test(t):return C.alphanumeric;case/[^\u0000-\u00ff]/.test(t):return C.unicode;default:return C.byte}}(this.options.data))==C.unicode?(M.stringToBytes=M.stringToBytesFuncs["UTF-8"],t=C.byte):M.stringToBytes=M.stringToBytesFuncs.default,this.qr.addData(this.options.data,t),this.qr.make(),this.setupSvg(),this.append(this.container))}append(t){var e;t&&(null!==(e=this.qrSVG)&&void 0!==e&&e.element&&t.appendChild(this.qrSVG.element),this.container=t)}applyExtension(t){if(!t)throw"Extension function should be defined.";this.extension=t,this.update()}deleteExtension(){this.extension=void 0,this.update()}async serialize(){var t,e;if(!this.qr)throw"QR code is empty";if(null!==(t=this.qrSVG)&&void 0!==t&&t.element&&this.svgDrawingPromise||this.setupSvg(),await this.svgDrawingPromise,null!==(e=this.qrSVG)&&void 0!==e&&e.element)return'<?xml version="1.0" standalone="no"?>\r\n'+(new XMLSerializer).serializeToString(this.qrSVG.element)}setupSvg(){if(this.qr){var t=Math.ceil((this.options.shape==j.circle?Math.sqrt(2):1)*this.qr.getModuleCount());t=Math.ceil(this.options.dotsOptions.size*(t+2*(this.options.backgroundOptions&&this.options.backgroundOptions.margin||0))),this.qrSVG=new et(m(m({},this.options),{},{width:t,height:t,errorCorrectionPercent:U[this.options.qrOptions.errorCorrectionLevel]})),this.svgDrawingPromise=this.qrSVG.drawQR(this.qr).then((()=>{var t,e;(null===(t=this.qrSVG)||void 0===t?void 0:t.element)&&(null===(e=this.extension)||void 0===e||e.call(this,this.qrSVG.element,this.options))}))}}}let it={width:300,height:300,margin:0};var nt,ot=nt||(nt={});function at(t,e){let{width:r,height:i,margin:n}=e?function(t){return(t=m({},t)).width=Number(t.width),t.height=Number(t.height),t.margin=Number(t.margin),t.margin>Math.min(t.width,t.height)&&(t.margin=Math.min(t.width,t.height)),t}(q(it,e)):it,o=document.createElement("canvas");o.width=r,o.height=i;let a=Math.min(r,i)-2*n;return t=t.serialize().then((t=>{if(t){var e="data:image/svg+xml;base64,"+btoa(t),n=new Image;return new Promise(((t,s)=>{n.onload=()=>{var e,s;const h=Math.ceil(2*a/Math.min(n.width,n.height));let u;try{u=new OffscreenCanvas(n.width*h,n.height*h)}catch(t){u=document.createElement("canvas"),u.width=n.width*h,u.height=n.height*h}null!==(e=u.getContext("2d"))&&void 0!==e&&e.drawImage(n,0,0,u.width,u.height),null!=o&&null!==(s=o.getContext("2d"))&&void 0!==s&&s.drawImage(u,(r-a)/2,(i-a)/2,a,a),t()},n.onerror=n.onabort=s,n.src=e}))}})),{canvas:o,canvasDrawingPromise:t}}function st(t,e){let r=document.createElement("a");r.download=e,r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}ot.svg="svg",ot.png="png",ot.jpeg="jpeg",ot.webp="webp";Object.freeze({__proto__:null,get FileExtension(){return nt},download:async function(t,e,r){var i=nt.png;let n="qr";if("string"==typeof e?i=e:"object"==typeof e&&null!==e&&(e.name&&(n=e.name),e.extension&&(i=e.extension)),"svg"===i.toLowerCase())(i=await t.serialize())&&st(i="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(i),"".concat(n,".svg"));else if(t=at(t,r)){var{canvas:o,canvasDrawingPromise:a}=t;await a,st(t=o.toDataURL("image/".concat(i)),"".concat(n,".").concat(i))}},downloadURI:st,drawToCanvas:at})}}]);