/*! For license information please see chunk_vendors-node_modules_material-ui_core_esm_Fab_Fab_js-node_modules_material-ui_icons_InsertDri-eca1fc.min.js.LICENSE.txt */
(self.webpackChunkpixagram_io=self.webpackChunkpixagram_io||[]).push([["vendors-node_modules_material-ui_core_esm_Fab_Fab_js-node_modules_material-ui_icons_InsertDri-eca1fc"],{24488:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(80045),s=n(58168),i=n(17402),o=n(20053),a=n(32150),c=n(47851),u=n(67515),l=i.forwardRef((function(e,t){var n=e.children,a=e.classes,l=e.className,h=e.color,d=void 0===h?"default":h,f=e.component,p=void 0===f?"button":f,g=e.disabled,m=void 0!==g&&g,w=e.disableFocusRipple,_=void 0!==w&&w,y=e.focusVisibleClassName,b=e.size,v=void 0===b?"large":b,E=e.variant,A=void 0===E?"circular":E,x=(0,r.A)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return i.createElement(c.A,(0,s.A)({className:(0,o.default)(a.root,l,"large"!==v&&a["size".concat((0,u.A)(v))],m&&a.disabled,"extended"===A&&a.extended,{primary:a.primary,secondary:a.secondary,inherit:a.colorInherit}[d]),component:p,disabled:m,focusRipple:!_,focusVisibleClassName:(0,o.default)(a.focusVisible,y),ref:t},x),i.createElement("span",{className:a.label},n))}));const h=(0,a.A)((function(e){return{root:(0,s.A)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(l)},44385:(e,t,n)=>{"use strict";var r=n(24994),s=n(6305);t.A=void 0;var i=s(n(17402)),o=(0,r(n(76447)).default)(i.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"}),"InsertDriveFileOutlined");t.A=o},9372:(e,t,n)=>{"use strict";var r=n(24994),s=n(6305);t.A=void 0;var i=s(n(17402)),o=(0,r(n(76447)).default)(i.createElement(i.Fragment,null,i.createElement("circle",{cx:"12",cy:"12",r:"3"}),i.createElement("path",{d:"M20 4h-3.17l-1.24-1.35c-.37-.41-.91-.65-1.47-.65H9.88c-.56 0-1.1.24-1.48.65L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 13c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"PhotoCameraRounded");t.A=o},31546:e=>{const t=new Set(["utf8","utf-8","utf16le","utf-16le","latin1","base64","base64url","hex","ascii","binary","ucs2"]),n=new ArrayBuffer(8),r=new Uint8Array(n),s=new Uint8Array(n,0,4),i=new Uint8Array(n,0,2),o=new Float64Array(n,0,1),a=new Float32Array(n,0,1),c=new TextEncoder,u=new TextDecoder,l={};try{l[8]=BigInt("8"),l[16]=BigInt("16"),l[24]=BigInt("24"),l[32]=BigInt("32"),l[40]=BigInt("40"),l[48]=BigInt("48"),l[56]=BigInt("56"),l[255]=BigInt("255"),l["9223372036854775807"]=BigInt("9223372036854775807"),l["18446744073709551616"]=BigInt("18446744073709551616")}catch(e){}const h=32768,d=function(e){if(e.length<=h)return String.fromCharCode(...e);let t="";for(let n=0;n<e.length;n+=h)t+=String.fromCharCode(...e.slice(n,n+h));return t};class f extends Uint8Array{constructor(...e){"string"==typeof e[0]?(super(f.byteLength(e[0])),f.from(e[0],e[1]).copy(this)):super(...e)}compare(e,t=0,n=e.length,r=0,s=this.length){if(!(e instanceof Uint8Array))throw new TypeError("Comparison target must be a Uint8Array or Buffer");let i=0,o=t;for(let t=r;t<s;t+=1){if(o>=n){i=1;break}const r=this[t],s=e[o];if(r>s){i=1;break}if(r<s){i=-1;break}o+=1}return 0===i&&n-t>s-r&&(i=-1),i}copy(e,t=0,n=0,r=this.length){let s=0===n&&r===this.length?this:this.subarray(n,r);return t+s.length>e.length&&(s=s.subarray(0,s.length-(t+s.length-e.length))),e.set(s,t),s.length}equals(e){if(!(e instanceof Uint8Array))throw new TypeError('The "otherBuffer" argument must be an instance of Buffer or Uint8Array');if(e===this)return!0;if(e.length!==this.length)return!1;if(0===this.length)return!0;if(this.length>=4&&this.byteOffset%4==0&&e.byteOffset%4==0){const t=this.length-this.length%4,n=new Uint32Array(this.buffer,this.byteOffset,t/4),r=new Uint32Array(e.buffer,e.byteOffset,n.length);for(let e=0;e<n.length;e+=1)if(n[e]!==r[e])return!1;for(let n=t;n<this.length;n+=1)if(this[n]!==e[n])return!1}else for(let t=0;t<this.length;t+=1)if(this[t]!==e[t])return!1;return!0}fill(e,t=0,n=this.length,r="utf8"){if("number"==typeof e)super.fill(e,t,n);else{if("string"==typeof e&&(e=f.from(e,r)),!(e instanceof Uint8Array))throw new TypeError("fill value must be a number, string, Buffer, or Uint8Array");e instanceof f||(e=new f(e.buffer,e.byteOffset,e.length));const s=n-t;let i=0;for(let r=t;r<=n-e.length;r+=e.length)i+=e.length,e.copy(this,r);e.copy(this,t+i,0,s-i)}return this}includes(e,t=0,n="utf8"){return-1!==this.indexOf(e,t,n)}indexOf(e,t=0,n="utf8"){if(t<0&&(t=this.length+t),"number"==typeof e)return super.indexOf(e,t);if("string"==typeof e)e=f.from(e,n);else if(!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be one of type number or string or an instance of Buffer or Uint8Array.');for(let n=t;n<=this.length-e.length;n+=1)if(this.subarray(n,n+e.length).equals(e))return n;return-1}lastIndexOf(e,t=this.length,n="utf8"){if(t<0&&(t=this.length+t),"number"==typeof e)return super.lastIndexOf(e,t);if("string"==typeof e)e=f.from(e,n);else if(!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be one of type number or string or an instance of Buffer or Uint8Array.');for(let n=t;n>=0;n-=1)if(this.subarray(n,n+e.length).equals(e))return n;return-1}map(...e){const t=super.map(...e);return new f(t.buffer,t.byteOffset,t.byteLength)}readBigInt64BE(e=0){let t=this.readBigUInt64BE(e);return t>l["9223372036854775807"]&&(t-=l["18446744073709551616"]),t}readBigInt64LE(e=0){let t=this.readBigUInt64LE(e);return t>l["9223372036854775807"]&&(t-=l["18446744073709551616"]),t}readBigUInt64BE(e=0){if(e<0||e+7>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let t=BigInt(this[e+7]);return t+=BigInt(this[e+6])<<l[8],t+=BigInt(this[e+5])<<l[16],t+=BigInt(this[e+4])<<l[24],t+=BigInt(this[e+3])<<l[32],t+=BigInt(this[e+2])<<l[40],t+=BigInt(this[e+1])<<l[48],t+=BigInt(this[e])<<l[56],t}readBigUInt64LE(e=0){if(e<0||e+7>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let t=BigInt(this[e]);return t+=BigInt(this[e+1])<<l[8],t+=BigInt(this[e+2])<<l[16],t+=BigInt(this[e+3])<<l[24],t+=BigInt(this[e+4])<<l[32],t+=BigInt(this[e+5])<<l[40],t+=BigInt(this[e+6])<<l[48],t+=BigInt(this[e+7])<<l[56],t}readDoubleBE(e=0){if(e<0||e+7>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");for(let t=0;t<8;t+=1)r[t]=this[t+e];return r.reverse(),o[0]}readDoubleLE(e=0){if(e<0||e+7>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");for(let t=0;t<8;t+=1)r[t]=this[t+e];return o[0]}readFloatBE(e=0){if(e<0||e+3>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");for(let t=0;t<4;t+=1)s[t]=this[t+e];return s.reverse(),a[0]}readFloatLE(e=0){if(e<0||e+3>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");for(let t=0;t<4;t+=1)s[t]=this[t+e];return a[0]}readInt8(e=0){if(e<0||e>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let t=this[e];return t>127&&(t-=256),t}readInt16BE(e=0){let t=this.readUInt16BE(e);return t>32767&&(t-=65536),t}readInt16LE(e=0){let t=this.readUInt16LE(e);return t>32767&&(t-=65536),t}readInt32BE(e=0){let t=this.readUInt32BE(e);return t>2147483647&&(t-=4294967296),t}readInt32LE(e=0){let t=this.readUInt32LE(e);return t>2147483647&&(t-=4294967296),t}readIntBE(e=0,t){let n=this.readUIntBE(e,t);return n>2**(8*t-1)&&(n-=2**(8*t)),n}readIntLE(e=0,t){let n=this.readUIntLE(e,t);return n>2**(8*t-1)&&(n-=2**(8*t)),n}readUInt8(e=0){if(e<0||e>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");return this[e]}readUInt16BE(e=0){if(e<0||e+1>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let t=this[e+1];return t+=this[e]<<8,t}readUInt16LE(e=0){if(e<0||e+1>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let t=this[e];return t+=this[e+1]<<8,t}readUInt32BE(e=0){if(e<0||e+3>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let t=this[e+3];return t+=this[e+2]<<8,t+=this[e+1]<<16,t+=16777216*this[e],t}readUInt32LE(e=0){if(e<0||e+3>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let t=this[e];return t+=this[e+1]<<8,t+=this[e+2]<<16,t+=16777216*this[e+3],t}readUIntBE(e,t){if("number"!=typeof t)throw new TypeError('"byteLength" must be a number');if(e<0||e+t-1>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let n=1,r=0;for(let s=t-1;s>=0;s-=1)r+=this[e+s]*n,n*=256;return r}readUIntLE(e,t){if("number"!=typeof t)throw new TypeError('"byteLength" must be a number');if(e<0||e+t-1>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let n=1,r=0;for(let s=0;s<t;s+=1)r+=this[e+s]*n,n*=256;return r}subarray(e=0,t=this.length){const n=super.subarray(e,t);return new f(n.buffer,n.byteOffset,n.byteLength)}slice(e=0,t=this.length){return this.subarray(e,t)}swap16(){if(this.length%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<this.length;e+=2)i[0]=this[e],this[e]=this[e+1],this[e+1]=i[0];return this}swap32(){if(this.length%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<this.length;e+=4)s[0]=this[e],s[1]=this[e+1],s[2]=this[e+2],s[3]=this[e+3],this[e]=s[3],this[e+1]=s[2],this[e+2]=s[1],this[e+3]=s[0];return this}swap64(){if(this.length%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<this.length;e+=8){for(let t=0;t<8;t+=1)r[t]=this[e+t];r.reverse();for(let t=0;t<8;t+=1)this[e+t]=r[t]}return this}toJSON(){return{data:[...this],type:"Buffer"}}toString(e="utf8",t=0,n=this.length){const r=this.subarray(t,n);switch(e.toLowerCase()){case"utf8":case"utf-8":return u.decode(r);case"utf16le":case"utf-16le":case"ucs2":return d(new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2));case"latin1":case"binary":return d(r);case"ascii":return d(r.map((e=>127&e)));case"base64":return btoa(d(r));case"base64url":{const e=btoa(d(r));let t=e.length;for(;t>1&&"="===e[t-1];)t-=1;return e.substring(0,t).replace(/\+/g,"-").replace(/\//g,"_")}case"hex":{let e="";for(let t=0;t<r.length;t+=1){const n=r[t];n<16&&(e+="0"),e+=n.toString(16)}return e}default:throw new Error("Unknown encoding: "+e)}}write(e,t=0,n=this.length-t,r="utf8"){if("string"!=typeof e)throw new TypeError("argument must be a string");const s=f.from(e,r);return s.copy(this,t,0,n),s.length<n?s.length:n}writeBigInt64BE(e,t=0){return e<0&&(e=l["18446744073709551616"]+e),this.writeBigUInt64BE(e,t)}writeBigInt64LE(e,t=0){return e<0&&(e=l["18446744073709551616"]+e),this.writeBigUInt64LE(e,t)}writeBigUInt64BE(e,t=0){if(t<0||t+7>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");return this[t+7]=Number(e&l[255]),this[t+6]=Number(e>>l[8]&l[255]),this[t+5]=Number(e>>l[16]&l[255]),this[t+4]=Number(e>>l[24]&l[255]),this[t+3]=Number(e>>l[32]&l[255]),this[t+2]=Number(e>>l[40]&l[255]),this[t+1]=Number(e>>l[48]&l[255]),this[t]=Number(e>>l[56]&l[255]),t+8}writeBigUInt64LE(e,t=0){if(t<0||t+7>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");return this[t]=Number(e&l[255]),this[t+1]=Number(e>>l[8]&l[255]),this[t+2]=Number(e>>l[16]&l[255]),this[t+3]=Number(e>>l[24]&l[255]),this[t+4]=Number(e>>l[32]&l[255]),this[t+5]=Number(e>>l[40]&l[255]),this[t+6]=Number(e>>l[48]&l[255]),this[t+7]=Number(e>>l[56]&l[255]),t+8}writeDoubleBE(e,t=0){if(t<0||t+7>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");o[0]=e,r.reverse();for(let e=0;e<8;e+=1)this[t+e]=r[e];return t+8}writeDoubleLE(e,t=0){if(t<0||t+7>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");o[0]=e;for(let e=0;e<8;e+=1)this[t+e]=r[e];return t+8}writeFloatBE(e,t=0){if(t<0||t+3>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");a[0]=e,s.reverse();for(let e=0;e<4;e+=1)this[t+e]=s[e];return t+4}writeFloatLE(e,t=0){if(t<0||t+3>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");a[0]=e;for(let e=0;e<4;e+=1)this[t+e]=s[e];return t+4}writeInt8(e,t=0){if(t<0||t>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");return e<0&&(e=256+e),this[t]=e,t+1}writeInt16BE(e,t=0){return e<0&&(e=65536+e),this.writeUInt16BE(e,t),t+2}writeInt16LE(e,t=0){return e<0&&(e=65536+e),this.writeUInt16LE(e,t),t+2}writeInt32BE(e,t=0){return e<0&&(e=4294967296+e),this.writeUInt32BE(e,t),t+4}writeInt32LE(e,t=0){return e<0&&(e=4294967296+e),this.writeUInt32LE(e,t),t+4}writeIntBE(e,t,n){return e<0&&(e=2**(8*n)+e),this.writeUIntBE(e,t,n)}writeIntLE(e,t,n){return e<0&&(e=2**(8*n)+e),this.writeUIntLE(e,t,n)}writeUInt8(e,t=0){if(t<0||t>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");return this[t]=e,t+1}writeUInt16BE(e,t=0){if(t<0||t+1>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");return this[t+1]=255&e,this[t]=e>>8&255,t+2}writeUInt16LE(e,t=0){if(t<0||t+1>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");return this[t]=255&e,this[t+1]=e>>8&255,t+2}writeUInt32BE(e,t=0){if(t<0||t+3>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");return this[t+3]=255&e,this[t+2]=e>>8&255,this[t+1]=e>>16&255,this[t]=e>>24&255,t+4}writeUInt32LE(e,t=0){if(t<0||t+3>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");return this[t]=255&e,this[t+1]=e>>8&255,this[t+2]=e>>16&255,this[t+3]=e>>24&255,t+4}writeUIntBE(e,t,n){if("number"!=typeof n)throw new TypeError('"byteLength" must be a number');if("number"!=typeof t)throw new TypeError('"offset" must be a number');if(t<0||t+n-1>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let r=256**n;for(let s=0;s<n;s+=1)r/=256,this[t+s]=255&Math.floor(e/r);return t+n}writeUIntLE(e,t,n){if("number"!=typeof n)throw new TypeError('"byteLength" must be a number');if("number"!=typeof t)throw new TypeError('"offset" must be a number');if(t<0||t+n-1>=this.length)throw new RangeError("Attempt to access memory outside buffer bounds");let r=1;for(let s=0;s<n;s+=1)this[t+s]=255&Math.floor(e/r),r*=256;return t+n}}const p=function(e,t,n){return 0!==t&&e.fill(t,0,e.length,n),e};let g=new f(8192),m=0;f.alloc=function(e,t=0,n="utf8"){if("number"!=typeof e)throw new TypeError("size argument must be a number");if(0===e)return new f(0);if(e>=f.poolSize/2)return p(new f(e),t,n);m+e>f.poolSize&&(g=new f(f.poolSize),m=0);const r=g.subarray(m,m+e);return m+=e,m%8!=0&&(m+=8-m%8),p(r,t,n)},f.allocUnsafe=f.alloc,f.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("size argument must be a number");return new f(e)};f.byteLength=function(e,t="utf8"){if("string"!=typeof e)return e.length;switch(t){case"utf8":case"utf-8":return function(e){let t=0;for(let n=0;n<e.length;n+=1){const r=e.codePointAt(n);r<=127?t+=1:r<=2047?t+=2:r<=65535?t+=3:(n+=1,t+=4)}return t}(e);case"latin1":case"binary":case"ascii":return e.length;case"utf16le":case"utf-16le":case"ucs2":return 2*e.length;case"base64":case"base64url":return function(e){let t=e.length;for(;t>1&&"="===e[t-1];)t-=1;return Math.floor(.75*t)}(e);case"hex":return e.length/2;default:throw new Error("Unknown encoding: "+t)}},f.compare=function(e,t){if(!(e instanceof Uint8Array))throw new TypeError("buf1 must be a Buffer or Uint8Array");return f.isBuffer(e)?e.compare(t):f.prototype.compare.call(e,t)},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError("list argument must be an Array");if(void 0===t){t=0;for(let n=0;n<e.length;n+=1)t+=e[n].length}let n=0;const r=f.alloc(t);for(let t=0;t<e.length;t+=1){const s=e[t];if(!(s instanceof Uint8Array))throw new TypeError('"list['+t+']" must be an instance of Buffer or Uint8Array');r.set(s,n),n+=s.length}return r};const w="The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object";f.from=function(e,t,n){if("object"==typeof e){if("number"==typeof e.length&&"function"==typeof e[Symbol.iterator])return new f(e);if(e instanceof ArrayBuffer)return new f(e,t,n);if("Buffer"!==e.type||!Array.isArray(e.data))throw new TypeError(w);return new f(e.data)}if("string"==typeof e)switch("string"!=typeof t&&(t="utf8"),t.toLowerCase()){case"utf8":case"utf-8":return new f(c.encode(e));case"utf16le":case"utf-16le":case"ucs2":return new f(new Uint16Array([...e].map((e=>e.charCodeAt(0)))).buffer);case"latin1":case"binary":case"ascii":return new f([...e].map((e=>e.charCodeAt(0))));case"base64":case"base64url":return new f([...atob(e.replace(/-/g,"+").replace(/_/g,"/"))].map((e=>e.charCodeAt(0))));case"hex":{const t=new f(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.substring(n,n+2),16);return t}default:throw new Error("Unknown encoding: "+t)}throw new TypeError(w)},f.copyBytesFrom=function(e,t=0,n=e.length-t){const r=e instanceof Uint8Array||e instanceof Int8Array||e instanceof Uint8ClampedArray?1:e instanceof Int16Array||e instanceof Uint16Array?2:e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?4:e instanceof Float64Array||"undefined"!=typeof BigInt64Array&&e instanceof BigInt64Array||"undefined"!=typeof BigInt64Array&&e instanceof BigUint64Array?8:1,s=new Uint8Array(e.buffer,e.byteOffset+t*r,n*r);return f.from(s)},f.isBuffer=function(e){return e instanceof f},f.isEncoding=function(e){return"string"==typeof e&&t.has(e.toLowerCase())},f.poolSize=8192,e.exports={Buffer:f,SlowBuffer:function(e){return f.alloc(e)},INSPECT_MAX_BYTES:0,kMaxLength:2147483647}},32485:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=s.apply(null,n);o&&e.push(o)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},9051:(e,t,n)=>{"use strict";e.exports=n.p+"a2d17757db0a58b35766.wasm"},84215:(e,t,n)=>{"use strict";var r=n(44576),s=n(82839),i=n(22195),o=function(e){return s.slice(0,e.length)===e};e.exports=o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"},72652:(e,t,n)=>{"use strict";var r=n(76080),s=n(69565),i=n(28551),o=n(16823),a=n(44209),c=n(26198),u=n(1625),l=n(70081),h=n(50851),d=n(9539),f=TypeError,p=function(e,t){this.stopped=e,this.result=t},g=p.prototype;e.exports=function(e,t,n){var m,w,_,y,b,v,E,A=n&&n.that,x=!(!n||!n.AS_ENTRIES),B=!(!n||!n.IS_RECORD),S=!(!n||!n.IS_ITERATOR),k=!(!n||!n.INTERRUPTED),I=r(t,A),U=function(e){return m&&d(m,"normal",e),new p(!0,e)},$=function(e){return x?(i(e),k?I(e[0],e[1],U):I(e[0],e[1])):k?I(e,U):I(e)};if(B)m=e.iterator;else if(S)m=e;else{if(!(w=h(e)))throw new f(o(e)+" is not iterable");if(a(w)){for(_=0,y=c(e);y>_;_++)if((b=$(e[_]))&&u(g,b))return b;return new p(!1)}m=l(e,w)}for(v=B?e.next:m.next;!(E=s(v,m)).done;){try{b=$(E.value)}catch(e){d(m,"throw",e)}if("object"==typeof b&&b&&u(g,b))return b}return new p(!1)}},36043:(e,t,n)=>{"use strict";var r=n(79306),s=TypeError,i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new s("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},1103:e=>{"use strict";e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},10916:(e,t,n)=>{"use strict";var r=n(44576),s=n(80550),i=n(94901),o=n(92796),a=n(33706),c=n(78227),u=n(84215),l=n(96395),h=n(39519),d=s&&s.prototype,f=c("species"),p=!1,g=i(r.PromiseRejectionEvent),m=o("Promise",(function(){var e=a(s),t=e!==String(s);if(!t&&66===h)return!0;if(l&&(!d.catch||!d.finally))return!0;if(!h||h<51||!/native code/.test(e)){var n=new s((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[f]=r,!(p=n.then((function(){}))instanceof r))return!0}return!(t||"BROWSER"!==u&&"DENO"!==u||g)}));e.exports={CONSTRUCTOR:m,REJECTION_EVENT:g,SUBCLASSING:p}},80550:(e,t,n)=>{"use strict";var r=n(44576);e.exports=r.Promise},90537:(e,t,n)=>{"use strict";var r=n(80550),s=n(84428),i=n(10916).CONSTRUCTOR;e.exports=i||!s((function(e){r.all(e).then(void 0,(function(){}))}))},96167:(e,t,n)=>{"use strict";var r=n(46518),s=n(69565),i=n(79306),o=n(36043),a=n(1103),c=n(72652);r({target:"Promise",stat:!0,forced:n(90537)},{allSettled:function(e){var t=this,n=o.f(t),r=n.resolve,u=n.reject,l=a((function(){var n=i(t.resolve),o=[],a=0,u=1;c(e,(function(e){var i=a++,c=!1;u++,s(n,t,e).then((function(e){c||(c=!0,o[i]={status:"fulfilled",value:e},--u||r(o))}),(function(e){c||(c=!0,o[i]={status:"rejected",reason:e},--u||r(o))}))})),--u||r(o)}));return l.error&&u(l.value),n.promise}})},48345:(e,t,n)=>{"use strict";var r=n(72805);(0,n(94644).exportTypedArrayStaticMethod)("from",n(43251),r)},35874:(e,t,n)=>{"use strict";n(96167)},30687:(e,t,n)=>{"use strict";n.d(t,{Kj:()=>me});var r=n(65606),s=(n(31546).Buffer,Object.defineProperty),i=e=>{throw TypeError(e)},o=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),a=(e,t,n)=>t.has(e)||i("Cannot "+n),c=(e,t,n)=>(a(e,t,"read from private field"),n?n.call(e):t.get(e)),u=new Intl.Collator(0,{numeric:1}).compare;function l(e,t,n){return e=e.split("."),t=t.split("."),u(e[0],t[0])||u(e[1],t[1])||(t[2]=t.slice(2).join("."),(n=/[.-]/.test(e[2]=e.slice(2).join(".")))==/[.-]/.test(t[2])?u(e[2],t[2]):n?-1:1)}const h="host",d="queue/data",f="upload",p="login",g="config",m="runtime",w="sleeptime",_="This application is currently busy. Please try again. ",y="Connection errored out. ",b="Could not resolve app config. ",v="Space metadata could not be loaded. ",E="Not authorized to access this space. ",A="Invalid credentials. Could not login. ",x="Login credentials are required to access this space.",B="File system access is only available in Node.js environments",S="Root URL not found in client config";async function k(e,t,n){try{return(await(await fetch(`https://huggingface.co/api/spaces/${e}/jwt`,{headers:{Authorization:`Bearer ${t}`,...n?{Cookie:n}:{}}})).json()).token||!1}catch{return!1}}async function I(e){const t=this.options.hf_token?{Authorization:`Bearer ${this.options.hf_token}`}:{};if(t["Content-Type"]="application/json",typeof window<"u"&&window.gradio_config&&"http://localhost:9876"!==location.origin){if(window.gradio_config.current_page&&(e=e.substring(0,e.lastIndexOf("/"))),window.gradio_config.dev_mode){let n=j(e,this.deep_link?g+"?deep_link="+this.deep_link:g);const r=await this.fetch(n,{headers:t,credentials:"include"}),s=await U(r,e,!!this.options.auth);window.gradio_config={...s,current_page:window.gradio_config.current_page}}return window.gradio_config.root=e,{...window.gradio_config}}if(e){let n=j(e,this.deep_link?g+"?deep_link="+this.deep_link:g);return U(await this.fetch(n,{headers:t,credentials:"include"}),e,!!this.options.auth)}throw new Error(b)}async function U(e,t,n){var r,s;if(401===(null==e?void 0:e.status)&&!n){const t=await e.json(),n=null==(r=null==t?void 0:t.detail)?void 0:r.auth_message;throw new Error(n||x)}if(401===(null==e?void 0:e.status)&&n)throw new Error(A);if(200===(null==e?void 0:e.status)){let n=await e.json();return n.root=t,null==(s=n.dependencies)||s.forEach(((e,t)=>{void 0===e.id&&(e.id=t)})),n}if(401===(null==e?void 0:e.status))throw new Error(E);throw new Error(b)}async function $(){const{http_protocol:e,host:t}=await L(this.app_reference,this.options.hf_token);try{if(this.options.auth){const n=await T(e,t,this.options.auth,this.fetch,this.options.hf_token);n&&this.set_cookies(n)}}catch(e){throw Error(e.message)}}async function T(e,t,n,r,s){const i=new FormData;i.append("username",null==n?void 0:n[0]),i.append("password",null==n?void 0:n[1]);let o={};s&&(o.Authorization=`Bearer ${s}`);const a=await r(`${e}//${t}/${p}`,{headers:o,method:"POST",body:i,credentials:"include"});if(200===a.status)return a.headers.get("set-cookie");throw 401===a.status?new Error(A):new Error(v)}function R(e){if(e.startsWith("http")){const{protocol:t,host:n,pathname:r}=new URL(e);return{ws_protocol:"https:"===t?"wss":"ws",http_protocol:t,host:n+("/"!==r?r:"")}}return{ws_protocol:"wss",http_protocol:"https:",host:new URL(e).host}}const O=e=>{let t=[];return e.split(/,(?=\s*[^\s=;]+=[^\s=;]+)/).forEach((e=>{const[n,r]=e.split(";")[0].split("=");n&&r&&t.push(`${n.trim()}=${r.trim()}`)})),t},C=/^[a-zA-Z0-9_\-\.]+\/[a-zA-Z0-9_\-\.]+$/,N=/.*hf\.space\/{0,1}.*$/;async function L(e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);const r=e.trim().replace(/\/$/,"");if(C.test(r))try{return{space_id:e,...R((await(await fetch(`https://huggingface.co/api/spaces/${r}/${h}`,{headers:n})).json()).host)}}catch{throw new Error(v)}if(N.test(r)){const{ws_protocol:e,http_protocol:t,host:n}=R(r);return{space_id:n.split("/")[0].replace(".hf.space",""),ws_protocol:e,http_protocol:t,host:n}}return{space_id:!1,...R(r)}}const j=(...e)=>{try{return e.reduce(((e,t)=>(e=e.replace(/\/+$/,""),t=t.replace(/^\/+/,""),new URL(t,e+"/").toString())))}catch{throw new Error("Invalid URL. A full URL path is required.")}};function D(e,t,n,r){if("Api"===t)return e.type;switch(null==e?void 0:e.type){case"string":return"string";case"boolean":return"boolean";case"number":return"number"}return"JSONSerializable"===n||"StringSerializable"===n?"any":"ListStringSerializable"===n?"string[]":"Image"===t?"parameter"===r?"Blob | File | Buffer":"string":"FileSerializable"===n?"array"===(null==e?void 0:e.type)?"parameter"===r?"(Blob | File | Buffer)[]":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}[]":"parameter"===r?"Blob | File | Buffer":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}":"GallerySerializable"===n?"parameter"===r?"[(Blob | File | Buffer), (string | null)][]":"[{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}, (string | null))][]":void 0}function z(e,t){return"GallerySerializable"===t?"array of [file, label] tuples":"ListStringSerializable"===t?"array of strings":"FileSerializable"===t?"array of files or single file":null==e?void 0:e.description}function P(e,t){switch(e.msg){case"send_data":return{type:"data"};case"send_hash":return{type:"hash"};case"queue_full":return{type:"update",status:{queue:!0,message:_,stage:"error",code:e.code,success:e.success}};case"heartbeat":return{type:"heartbeat"};case"unexpected_error":return{type:"unexpected_error",status:{queue:!0,message:e.message,session_not_found:e.session_not_found,stage:"error",success:!1}};case"broken_connection":return{type:"broken_connection",status:{queue:!0,message:e.message,stage:"error",success:!1}};case"estimation":return{type:"update",status:{queue:!0,stage:t||"pending",code:e.code,size:e.queue_size,position:e.rank,eta:e.rank_eta,success:e.success}};case"progress":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,progress_data:e.progress_data,success:e.success}};case"log":return{type:"log",data:e};case"process_generating":return{type:"generating",status:{queue:!0,message:e.success?null:e.output.error,stage:e.success?"generating":"error",code:e.code,progress_data:e.progress_data,eta:e.average_duration,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_streaming":return{type:"streaming",status:{queue:!0,message:e.output.error,stage:"streaming",time_limit:e.time_limit,code:e.code,progress_data:e.progress_data,eta:e.eta},data:e.output};case"process_completed":return"error"in e.output?{type:"update",status:{queue:!0,title:e.output.title,message:e.output.error,visible:e.output.visible,duration:e.output.duration,stage:"error",code:e.code,success:e.success}}:{type:"complete",status:{queue:!0,message:e.success?void 0:e.output.error,stage:e.success?"complete":"error",code:e.code,progress_data:e.progress_data,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_starts":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,size:e.rank,position:0,success:e.success,eta:e.eta},original_msg:"process_starts"}}return{type:"none",status:{stage:"error",queue:!0}}}async function q(){if(this.api_info)return this.api_info;const{hf_token:e}=this.options,{config:t}=this,n={"Content-Type":"application/json"};if(e&&(n.Authorization=`Bearer ${e}`),t)try{let e,r;if(typeof window<"u"&&window.gradio_api_info)r=window.gradio_api_info;else{if(l((null==t?void 0:t.version)||"2.0.0","3.30")<0)e=await this.fetch("https://gradio-space-api-fetcher-v2.hf.space/api",{method:"POST",body:JSON.stringify({serialize:!1,config:JSON.stringify(t)}),headers:n,credentials:"include"});else{const r=j(t.root,this.api_prefix,"info");e=await this.fetch(r,{headers:n,credentials:"include"})}if(!e.ok)throw new Error(y);r=await e.json()}return"api"in r&&(r=r.api),r.named_endpoints["/predict"]&&!r.unnamed_endpoints[0]&&(r.unnamed_endpoints[0]=r.named_endpoints["/predict"]),function(e,t,n){const r={named_endpoints:{},unnamed_endpoints:{}};return Object.keys(e).forEach((s=>{("named_endpoints"===s||"unnamed_endpoints"===s)&&(r[s]={},Object.entries(e[s]).forEach((([e,{parameters:i,returns:o}])=>{var a,c,u,l;const h=(null==(a=t.dependencies.find((t=>t.api_name===e||t.api_name===e.replace("/",""))))?void 0:a.id)||n[e.replace("/","")]||-1,d=-1!==h?null==(c=t.dependencies.find((e=>e.id==h)))?void 0:c.types:{generator:!1,cancel:!1};if(-1!==h&&(null==(l=null==(u=t.dependencies.find((e=>e.id==h)))?void 0:u.inputs)?void 0:l.length)!==i.length){const e=t.dependencies.find((e=>e.id==h)).inputs.map((e=>{var n;return null==(n=t.components.find((t=>t.id===e)))?void 0:n.type}));try{e.forEach(((e,t)=>{if("state"===e){const e={component:"state",example:null,parameter_default:null,parameter_has_default:!0,parameter_name:null,hidden:!0};i.splice(t,0,e)}}))}catch(e){}}const f=(e,t,n,r)=>({...e,description:z(null==e?void 0:e.type,n),type:D(null==e?void 0:e.type,t,n,r)||""});r[s][e]={parameters:i.map((e=>f(e,null==e?void 0:e.component,null==e?void 0:e.serializer,"parameter"))),returns:o.map((e=>f(e,null==e?void 0:e.component,null==e?void 0:e.serializer,"return"))),type:d}})))})),r}(r,t,this.api_map)}catch(e){throw new Error("Could not get API info. "+e.message)}}async function F(e,t,n){var r;const s={};null!=(r=null==this?void 0:this.options)&&r.hf_token&&(s.Authorization=`Bearer ${this.options.hf_token}`);const i=[];let o;for(let r=0;r<t.length;r+=1e3){const a=t.slice(r,r+1e3),c=new FormData;a.forEach((e=>{c.append("files",e)}));try{const t=n?`${e}${this.api_prefix}/${f}?upload_id=${n}`:`${e}${this.api_prefix}/${f}`;o=await this.fetch(t,{method:"POST",body:c,headers:s,credentials:"include"})}catch(e){throw new Error(y+e.message)}if(!o.ok){const e=await o.text();return{error:`HTTP ${o.status}: ${e}`}}const u=await o.json();u&&i.push(...u)}return{files:i}}async function W(e,t,n,r){let s=(Array.isArray(e)?e:[e]).map((e=>e.blob));const i=s.filter((e=>e.size>(r??1/0)));if(i.length)throw new Error(`File size exceeds the maximum allowed size of ${r} bytes: ${i.map((e=>e.name)).join(", ")}`);return await Promise.all(await this.upload_files(t,s,n).then((async n=>{if(n.error)throw new Error(n.error);return n.files?n.files.map(((n,r)=>new M({...e[r],path:n,url:`${t}${this.api_prefix}/file=${n}`}))):[]})))}class M{constructor({path:e,url:t,orig_name:n,size:r,blob:s,is_stream:i,mime_type:a,alt_text:c,b64:u}){o(this,"path"),o(this,"url"),o(this,"orig_name"),o(this,"size"),o(this,"blob"),o(this,"is_stream"),o(this,"mime_type"),o(this,"alt_text"),o(this,"b64"),o(this,"meta",{_type:"gradio.FileData"}),this.path=e,this.url=t,this.orig_name=n,this.size=r,this.blob=t?void 0:s,this.is_stream=i,this.mime_type=a,this.alt_text=c,this.b64=u}}class J{constructor(e,t){o(this,"type"),o(this,"command"),o(this,"meta"),o(this,"fileData"),this.type="command",this.command=e,this.meta=t}}typeof r<"u"&&r.versions&&r.versions.node;function V(e,t,n){for(;n.length>1;){const t=n.shift();if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid key type");e=e[t]}const r=n.shift();if("string"!=typeof r&&"number"!=typeof r)throw new Error("Invalid key type");e[r]=t}async function G(e,t=void 0,n=[],r=!1,s=void 0){if(Array.isArray(e)){let i=[];return await Promise.all(e.map((async(o,a)=>{var c;let u=n.slice();u.push(String(a));const l=await G(e[a],r?(null==(c=null==s?void 0:s.parameters[a])?void 0:c.component)||void 0:t,u,!1,s);i=i.concat(l)}))),i}if(globalThis.Buffer&&e instanceof globalThis.Buffer||e instanceof Blob)return[{path:n,blob:new Blob([e]),type:t}];if("object"==typeof e&&null!==e){let t=[];for(const r of Object.keys(e)){const i=[...n,r],o=e[r];t=t.concat(await G(o,void 0,i,!1,s))}return t}return[]}function H(e,t,n,r,s=!1){if("input"===r&&!s)throw new Error("Invalid code path. Cannot skip state inputs for input.");if("output"===r&&s)return e;let i=[],o=0;const a="input"===r?t.inputs:t.outputs;for(let t=0;t<a.length;t++){const r=a[t],c=n.find((e=>e.id===r));if("state"!==(null==c?void 0:c.type)){const t=e[o];i.push(t),o++}else{if(!s){o++;continue}if(e.length===a.length){const t=e[o];i.push(t),o++}else i.push(null)}}return i}async function Y(e,t,n){const r=this;await async function(e,t){var n,r;if(!(null==(n=e.config)?void 0:n.root)&&!(null==(r=e.config)?void 0:r.root_url))throw new Error(S);await K(e,t)}(r,t);const s=await G(t,void 0,[],!0,n);return(await Promise.all(s.map((async({path:t,blob:n,type:s})=>{if(!n)return{path:t,type:s};const i=await r.upload_files(e,[n]);return{path:t,file_url:i.files&&i.files[0],type:s,name:typeof File<"u"&&n instanceof File?null==n?void 0:n.name:void 0}})))).forEach((({path:e,file_url:n,type:r,name:s})=>{if("Gallery"===r)V(t,n,e);else if(n){const r=new M({path:n,orig_name:s});V(t,r,e)}})),t}async function K(e,t,n=[]){for(const r in t)t[r]instanceof J?await Z(e,t,r):"object"==typeof t[r]&&null!==t[r]&&await K(e,t[r],[...n,r])}async function Z(e,t,s){var i,o;let a=t[s];const c=(null==(i=e.config)?void 0:i.root)||(null==(o=e.config)?void 0:o.root_url);if(!c)throw new Error(S);try{let i,o;if(!(typeof r<"u"&&r.versions&&r.versions.node))throw new Error(B);{const e=await n.e("node_modules_gradio_client_dist___vite-browser-external-DYxpcVy9_js").then(n.bind(n,57365));o=(await n.e("node_modules_gradio_client_dist___vite-browser-external-DYxpcVy9_js").then(n.bind(n,57365))).resolve(r.cwd(),a.meta.path),i=await e.readFile(o)}const u=new Blob([i],{type:"application/octet-stream"}),l=await e.upload_files(c,[u]),h=l.files&&l.files[0];if(h){const e=new M({path:h,orig_name:a.meta.name||""});t[s]=e}}catch(e){}}async function X(e,t,n){const r={"Content-Type":"application/json"};this.options.hf_token&&(r.Authorization=`Bearer ${this.options.hf_token}`);try{var s=await this.fetch(e,{method:"POST",body:JSON.stringify(t),headers:{...r,...n},credentials:"include"})}catch{return[{error:y},500]}let i,o;try{i=await s.json(),o=s.status}catch(e){i={error:`Could not parse server response: ${e}`},o=500}return[i,o]}async function Q(e,t={}){let n=!1,r=!1;if(!this.config)throw new Error("Could not resolve app config");if("number"==typeof e)this.config.dependencies.find((t=>t.id==e));else{const t=e.replace(/^\//,"");this.config.dependencies.find((e=>e.id==this.api_map[t]))}return new Promise((async(s,i)=>{const o=this.submit(e,t,null,null,!0);let a;for await(const e of o)"data"===e.type&&(r&&s(a),n=!0,a=e),"status"===e.type&&("error"===e.stage&&i(e),"complete"===e.stage&&(r=!0,n&&s(a)))}))}async function ee(e,t,n){let r,s,i="subdomain"===t?`https://huggingface.co/api/spaces/by-subdomain/${e}`:`https://huggingface.co/api/spaces/${e}`;try{if(r=await fetch(i),s=r.status,200!==s)throw new Error;r=await r.json()}catch{return void n({status:"error",load_status:"error",message:"Could not get space status. ",detail:"NOT_FOUND"})}if(!r||200!==s)return;const{runtime:{stage:o},id:a}=r;switch(o){case"STOPPED":case"SLEEPING":n({status:"sleeping",load_status:"pending",message:"Space is asleep. Waking it up...",detail:o}),setTimeout((()=>{ee(e,t,n)}),1e3);break;case"PAUSED":n({status:"paused",load_status:"error",message:"This space has been paused by the author. If you would like to try this demo, consider duplicating the space.",detail:o,discussions_enabled:await re(a)});break;case"RUNNING":case"RUNNING_BUILDING":n({status:"running",load_status:"complete",message:"Space is running.",detail:o});break;case"BUILDING":n({status:"building",load_status:"pending",message:"Space is building...",detail:o}),setTimeout((()=>{ee(e,t,n)}),1e3);break;case"APP_STARTING":n({status:"starting",load_status:"pending",message:"Space is starting...",detail:o}),setTimeout((()=>{ee(e,t,n)}),1e3);break;default:n({status:"space_error",load_status:"error",message:"This space is experiencing an issue.",detail:o,discussions_enabled:await re(a)})}}const te=async(e,t)=>{let n=0;return new Promise((r=>{ee(e,C.test(e)?"space_name":"subdomain",(s=>{t(s),"running"===s.status||"error"===s.status||"paused"===s.status||"space_error"===s.status?r():("sleeping"===s.status||"building"===s.status)&&(n<12?(n++,setTimeout((()=>{te(e,t).then(r)}),5e3)):r())}))}))},ne=/^(?=[^]*\b[dD]iscussions{0,1}\b)(?=[^]*\b[dD]isabled\b)[^]*$/;async function re(e){try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/discussions`,{method:"HEAD"}),n=t.headers.get("x-error-message");return!(!t.ok||n&&ne.test(n))}catch{return!1}}const se=["cpu-basic","cpu-upgrade","cpu-xl","t4-small","t4-medium","a10g-small","a10g-large","a10g-largex2","a10g-largex4","a100-large","zero-a10g","h100","h100x8"];async function ie(e,t){const{hf_token:n,private:r,hardware:s,timeout:i,auth:o}=t;if(s&&!se.includes(s))throw new Error(`Invalid hardware type provided. Valid types are: ${se.map((e=>`"${e}"`)).join(",")}.`);const{http_protocol:a,host:c}=await L(e,n);let u=null;if(o){const e=await T(a,c,o,fetch);e&&(u=O(e))}const l={Authorization:`Bearer ${n}`,"Content-Type":"application/json",...u?{Cookie:u.join("; ")}:{}},h=(await(await fetch("https://huggingface.co/api/whoami-v2",{headers:l})).json()).name,d=e.split("/")[1],f={repository:`${h}/${d}`};let p;r&&(f.private=!0);try{s||(p=await async function(e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/${m}`,{headers:n});if(200!==t.status)throw new Error("Space hardware could not be obtained.");const{hardware:r}=await t.json();return r.current}catch(e){throw new Error(e.message)}}(e,n))}catch(e){throw Error(v+e.message)}const g=s||p||"cpu-basic";f.hardware=g;try{const r=await fetch(`https://huggingface.co/api/spaces/${e}/duplicate`,{method:"POST",headers:l,body:JSON.stringify(f)});if(409===r.status)try{return await me.connect(`${h}/${d}`,t)}catch(e){throw e}else if(200!==r.status)throw new Error(r.statusText);const s=await r.json();return await async function(e,t,n){const r={};n&&(r.Authorization=`Bearer ${n}`);const s={seconds:t};try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/${w}`,{method:"POST",headers:{"Content-Type":"application/json",...r},body:JSON.stringify(s)});if(200!==t.status)throw new Error("Could not set sleep timeout on duplicated Space. Please visit *ADD HF LINK TO SETTINGS* to set a timeout manually to reduce billing charges.");return await t.json()}catch(e){throw new Error(e.message)}}(`${h}/${d}`,i||300,n),await me.connect(function(e){const t=/https:\/\/huggingface.co\/spaces\/([^/]+\/[^/]+)/,n=e.match(t);if(n)return n[1]}(s.url),t)}catch(e){throw new Error(e)}}var oe;class ae extends TransformStream{constructor(e={allowCR:!1}){super({transform:(t,n)=>{for(t=c(this,oe)+t;;){const r=t.indexOf("\n"),s=e.allowCR?t.indexOf("\r"):-1;if(-1!==s&&s!==t.length-1&&(-1===r||r-1>s)){n.enqueue(t.slice(0,s)),t=t.slice(s+1);continue}if(-1===r)break;const i="\r"===t[r-1]?r-1:r;n.enqueue(t.slice(0,i)),t=t.slice(r+1)}((e,t,n,r)=>{a(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)})(this,oe,t)},flush:t=>{if(""===c(this,oe))return;const n=e.allowCR&&c(this,oe).endsWith("\r")?c(this,oe).slice(0,-1):c(this,oe);t.enqueue(n)}}),((e,t,n)=>{t.has(e)?i("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n)})(this,oe,"")}}function ce(e){let t=/[:]\s*/.exec(e),n=t&&t.index;if(n)return[e.substring(0,n),e.substring(n+t[0].length)]}function ue(e,t,n){e.get(t)||e.set(t,n)}async function*le(e,t){if(!e.body)return;let n,r,s=function(e){let t=new TextDecoderStream,n=new ae({allowCR:!0});return e.pipeThrough(t).pipeThrough(n)}(e.body),i=s.getReader();for(;;){if(t&&t.aborted)return i.cancel();if(n=await i.read(),n.done)return;if(!n.value){r&&(yield r),r=void 0;continue}let[e,s]=ce(n.value)||[];e&&("data"===e?(r||(r={}),r[e]=r[e]?r[e]+"\n"+s:s):"event"===e?(r||(r={}),r[e]=s):"id"===e?(r||(r={}),r[e]=+s||s):"retry"===e&&(r||(r={}),r[e]=+s||void 0))}}async function he(){let{event_callbacks:e,unclosed_events:t,pending_stream_messages:n,stream_status:r,config:s,jwt:i}=this;const o=this;if(!s)throw new Error("Could not resolve app config");r.open=!0;let a=null,c=new URLSearchParams({session_hash:this.session_hash}).toString(),u=new URL(`${s.root}${this.api_prefix}/${d}?${c}`);i&&u.searchParams.set("__sign",i),a=this.stream(u),a&&(a.onmessage=async function(i){let a=JSON.parse(i.data);if("close_stream"===a.msg)return void de(r,o.abort_controller);const c=a.event_id;if(c)if(e[c]&&s){"process_completed"===a.msg&&["sse","sse_v1","sse_v2","sse_v2.1","sse_v3"].includes(s.protocol)&&t.delete(c);let n=e[c];typeof window<"u"&&typeof document<"u"?setTimeout(n,0,a):n(a)}else n[c]||(n[c]=[]),n[c].push(a);else await Promise.all(Object.keys(e).map((t=>e[t](a))))},a.onerror=async function(t){await Promise.all(Object.keys(e).map((t=>e[t]({msg:"broken_connection",message:y}))))})}function de(e,t){e&&(e.open=!1,null==t||t.abort())}function fe(e,t,n){e[t]?n.data.forEach(((r,s)=>{let i=function(e,t){return t.forEach((([t,n,r])=>{e=function(e,t,n,r){if(0===t.length){if("replace"===n)return r;if("append"===n)return e+r;throw new Error(`Unsupported action: ${n}`)}let s=e;for(let e=0;e<t.length-1;e++)s=s[t[e]];const i=t[t.length-1];switch(n){case"replace":s[i]=r;break;case"append":s[i]+=r;break;case"add":Array.isArray(s)?s.splice(Number(i),0,r):s[i]=r;break;case"delete":Array.isArray(s)?s.splice(Number(i),1):delete s[i];break;default:throw new Error(`Unknown action: ${n}`)}return e}(e,n,t,r)})),e}(e[t][s],r);e[t][s]=i,n.data[s]=i})):(e[t]=[],n.data.forEach(((n,r)=>{e[t][r]=n})))}function pe(e,t={}){const n={close:()=>{},onerror:null,onmessage:null,onopen:null,readyState:0,url:e.toString(),withCredentials:!1,CONNECTING:0,OPEN:1,CLOSED:2,addEventListener:()=>{throw new Error("Method not implemented.")},dispatchEvent:()=>{throw new Error("Method not implemented.")},removeEventListener:()=>{throw new Error("Method not implemented.")}};return async function(e,t){let n=new Request(e,t);ue(n.headers,"Accept","text/event-stream"),ue(n.headers,"Content-Type","application/json");let r=await fetch(n);if(!r.ok)throw r;return le(r,n.signal)}(e,t).then((async e=>{n.readyState=n.OPEN;try{for await(const t of e)n.onmessage&&n.onmessage(t);n.readyState=n.CLOSED}catch(e){n.onerror&&n.onerror(e),n.readyState=n.CLOSED}})).catch((e=>{n.onerror&&n.onerror(e),n.readyState=n.CLOSED})),n}function ge(e,t={},n,r,s){var i;try{let o=function(e){(s||K[e.type])&&h(e)},a=function(){for(ee=!0;ne.length>0;)ne.shift()({value:void 0,done:!0})},c=function(e){ne.length>0?ne.shift()(e):te.push(e)},u=function(e){c(function(e){return{then:(t,n)=>n(e)}}(e)),a()},h=function(e){c({value:e,done:!1})},f=function(){return te.length>0?Promise.resolve(te.shift()):new Promise((e=>ne.push(e)))};const{hf_token:p}=this.options,{fetch:g,app_reference:m,config:w,session_hash:b,api_info:v,api_map:E,stream_status:A,pending_stream_messages:x,pending_diff_streams:B,event_callbacks:S,unclosed_events:k,post_data:I,options:U,api_prefix:$}=this,T=this;if(!v)throw new Error("No API found");if(!w)throw new Error("Could not resolve app config");let R,O,{fn_index:C,endpoint_info:N,dependency:j}=function(e,t,n,r){let s,i,o;if("number"==typeof t)s=t,i=e.unnamed_endpoints[s],o=r.dependencies.find((e=>e.id==t));else{const a=t.replace(/^\//,"");s=n[a],i=e.named_endpoints[t.trim()],o=r.dependencies.find((e=>e.id==n[a]))}if("number"!=typeof s)throw new Error("There is no endpoint matching that name of fn_index matching that number.");return{fn_index:s,endpoint_info:i,dependency:o}}(v,e,E,w),D=((e=[],t)=>{const n=t?t.parameters:[];if(Array.isArray(e))return t&&n.length>0&&(e.length,n.length),e;const r=[],s=Object.keys(e);return n.forEach(((t,n)=>{if(e.hasOwnProperty(t.parameter_name))r[n]=e[t.parameter_name];else{if(!t.parameter_has_default)throw new Error(`No value provided for required parameter: ${t.parameter_name}`);r[n]=t.parameter_default}})),s.forEach((e=>{if(!n.some((t=>t.parameter_name===e)))throw new Error(`Parameter \`${e}\` is not a valid keyword argument. Please refer to the API for usage.`)})),r.forEach(((e,t)=>{if(void 0===e&&!n[t].parameter_has_default)throw new Error(`No value provided for required parameter: ${n[t].parameter_name}`)})),r})(t,N),z=w.protocol??"ws",q="",F=()=>q;const W="number"==typeof e?"/predict":e;let M,J=null,V=!1,G={},Y=typeof window<"u"&&typeof document<"u"?new URLSearchParams(window.location.search).toString():"";const K=(null==(i=null==U?void 0:U.events)?void 0:i.reduce(((e,t)=>(e[t]=!0,e)),{}))||{};async function Z(){let e={},t={};"ws"===z?(R&&0===R.readyState?R.addEventListener("open",(()=>{R.close()})):R.close(),e={fn_index:C,session_hash:b}):(e={event_id:J},t={event_id:J,session_hash:b,fn_index:C});try{if(!w)throw new Error("Could not resolve app config");"event_id"in t&&await g(`${w.root}${$}/cancel`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}),await g(`${w.root}${$}/reset`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)})}catch{}}const X=async e=>{await this._resolve_heartbeat(e)};async function Q(e){if(!w)return;let t=e.render_id;w.components=[...w.components.filter((e=>e.props.rendered_in!==t)),...e.components],w.dependencies=[...w.dependencies.filter((e=>e.rendered_in!==t)),...e.dependencies];const n=w.components.some((e=>"state"===e.type)),r=w.dependencies.some((e=>e.targets.some((e=>"unload"===e[1]))));w.connect_heartbeat=n||r,await X(w),o({type:"render",data:e,endpoint:W,fn_index:C})}this.handle_blob(w.root,D,N).then((async e=>{var t;if(M={data:H(e,j,w.components,"input",!0)||[],event_data:n,fn_index:C,trigger_id:r},function(e,t){var n,r;let s=null==(r=null==(n=null==t?void 0:t.dependencies)?void 0:n.find((t=>t.id==e)))?void 0:r.queue;return null!=s?!s:!t.enable_queue}(C,w))o({type:"status",endpoint:W,stage:"pending",queue:!1,fn_index:C,time:new Date}),I(`${w.root}${$}/run${W.startsWith("/")?W:`/${W}`}${Y?"?"+Y:""}`,{...M,session_hash:b}).then((([e,t])=>{const s=e.data;200==t?(o({type:"data",endpoint:W,fn_index:C,data:H(s,j,w.components,"output",U.with_null_state),time:new Date,event_data:n,trigger_id:r}),e.render_config&&Q(e.render_config),o({type:"status",endpoint:W,fn_index:C,stage:"complete",eta:e.average_duration,queue:!1,time:new Date})):o({type:"status",stage:"error",endpoint:W,fn_index:C,message:e.error,queue:!1,time:new Date})})).catch((e=>{o({type:"status",stage:"error",message:e.message,endpoint:W,fn_index:C,queue:!1,time:new Date})}));else if("ws"==z){const{ws_protocol:e,host:t}=await L(m,p);o({type:"status",stage:"pending",queue:!0,endpoint:W,fn_index:C,time:new Date});let s=new URL(`${e}://${function(e,t,n){return t.startsWith("http://")||t.startsWith("https://")?n?e:t:e+t}(t,w.root,!0)}/queue/join${Y?"?"+Y:""}`);this.jwt&&s.searchParams.set("__sign",this.jwt),R=new WebSocket(s),R.onclose=e=>{e.wasClean||o({type:"status",stage:"error",broken:!0,message:y,queue:!0,endpoint:W,fn_index:C,time:new Date})},R.onmessage=function(e){const t=JSON.parse(e.data),{type:s,status:i,data:a}=P(t,G[C]);if("update"===s&&i&&!V)o({type:"status",endpoint:W,fn_index:C,time:new Date,...i}),"error"===i.stage&&R.close();else{if("hash"===s)return void R.send(JSON.stringify({fn_index:C,session_hash:b}));"data"===s?R.send(JSON.stringify({...M,session_hash:b})):"complete"===s?V=i:"log"===s?o({type:"log",title:a.title,log:a.log,level:a.level,endpoint:W,duration:a.duration,visible:a.visible,fn_index:C}):"generating"===s&&o({type:"status",time:new Date,...i,stage:null==i?void 0:i.stage,queue:!0,endpoint:W,fn_index:C})}a&&(o({type:"data",time:new Date,data:H(a.data,j,w.components,"output",U.with_null_state),endpoint:W,fn_index:C,event_data:n,trigger_id:r}),V&&(o({type:"status",time:new Date,...V,stage:null==i?void 0:i.stage,queue:!0,endpoint:W,fn_index:C}),R.close()))},l(w.version||"2.0.0","3.6")<0&&addEventListener("open",(()=>R.send(JSON.stringify({hash:b}))))}else if("sse"==z){o({type:"status",stage:"pending",queue:!0,endpoint:W,fn_index:C,time:new Date});var s=new URLSearchParams({fn_index:C.toString(),session_hash:b}).toString();let e=new URL(`${w.root}${$}/${d}?${Y?Y+"&":""}${s}`);if(this.jwt&&e.searchParams.set("__sign",this.jwt),O=this.stream(e),!O)return Promise.reject(new Error("Cannot connect to SSE endpoint: "+e.toString()));O.onmessage=async function(e){const t=JSON.parse(e.data),{type:s,status:i,data:c}=P(t,G[C]);if("update"===s&&i&&!V)o({type:"status",endpoint:W,fn_index:C,time:new Date,...i}),"error"===i.stage&&(null==O||O.close(),a());else if("data"===s){let[e,t]=await I(`${w.root}${$}/queue/data`,{...M,session_hash:b,event_id:J});200!==t&&(o({type:"status",stage:"error",message:y,queue:!0,endpoint:W,fn_index:C,time:new Date}),null==O||O.close(),a())}else"complete"===s?V=i:"log"===s?o({type:"log",title:c.title,log:c.log,level:c.level,endpoint:W,duration:c.duration,visible:c.visible,fn_index:C}):("generating"===s||"streaming"===s)&&o({type:"status",time:new Date,...i,stage:null==i?void 0:i.stage,queue:!0,endpoint:W,fn_index:C});c&&(o({type:"data",time:new Date,data:H(c.data,j,w.components,"output",U.with_null_state),endpoint:W,fn_index:C,event_data:n,trigger_id:r}),V&&(o({type:"status",time:new Date,...V,stage:null==i?void 0:i.stage,queue:!0,endpoint:W,fn_index:C}),null==O||O.close(),a()))}}else if("sse_v1"==z||"sse_v2"==z||"sse_v2.1"==z||"sse_v3"==z){o({type:"status",stage:"pending",queue:!0,endpoint:W,fn_index:C,time:new Date});let e="";typeof window<"u"&&typeof document<"u"&&(e=null==(t=null==window?void 0:window.location)?void 0:t.hostname);const n=e.includes(".dev.")?`https://moon-${e.split(".")[1]}.dev.spaces.huggingface.tech`:"https://huggingface.co";(typeof window<"u"&&typeof document<"u"&&window.parent!=window&&window.supports_zerogpu_headers?function(e,t){return new Promise(((n,r)=>{const s=new MessageChannel;s.port1.onmessage=({data:e})=>{s.port1.close(),n(e)},window.parent.postMessage(e,t,[s.port2])}))}("zerogpu-headers",n):Promise.resolve(null)).then((e=>I(`${w.root}${$}/queue/join?${Y}`,{...M,session_hash:b},e))).then((async([e,t])=>{if(503===t)o({type:"status",stage:"error",message:_,queue:!0,endpoint:W,fn_index:C,time:new Date});else if(422===t)o({type:"status",stage:"error",message:e.detail,queue:!0,endpoint:W,fn_index:C,code:"validation_error",time:new Date}),a();else if(200!==t)o({type:"status",stage:"error",broken:!1,message:e.detail,queue:!0,endpoint:W,fn_index:C,time:new Date});else{J=e.event_id,q=J;let t=async function(e){try{const{type:t,status:n,data:r,original_msg:s}=P(e,G[C]);if("heartbeat"==t)return;if("update"===t&&n&&!V)o({type:"status",endpoint:W,fn_index:C,time:new Date,original_msg:s,...n});else if("complete"===t)V=n;else if("unexpected_error"==t||"broken_connection"==t){const e="broken_connection"===t;o({type:"status",stage:"error",message:(null==n?void 0:n.message)||"An Unexpected Error Occurred!",queue:!0,endpoint:W,broken:e,session_not_found:null==n?void 0:n.session_not_found,fn_index:C,time:new Date})}else{if("log"===t)return void o({type:"log",title:r.title,log:r.log,level:r.level,endpoint:W,duration:r.duration,visible:r.visible,fn_index:C});("generating"===t||"streaming"===t)&&(o({type:"status",time:new Date,...n,stage:null==n?void 0:n.stage,queue:!0,endpoint:W,fn_index:C}),r&&"stream"!==j.connection&&["sse_v2","sse_v2.1","sse_v3"].includes(z)&&fe(B,J,r))}r&&(o({type:"data",time:new Date,data:H(r.data,j,w.components,"output",U.with_null_state),endpoint:W,fn_index:C}),r.render_config&&await Q(r.render_config),V&&(o({type:"status",time:new Date,...V,stage:null==n?void 0:n.stage,queue:!0,endpoint:W,fn_index:C}),a())),("complete"===(null==n?void 0:n.stage)||"error"===(null==n?void 0:n.stage))&&(S[J]&&delete S[J],J in B&&delete B[J])}catch(e){o({type:"status",stage:"error",message:"An Unexpected Error Occurred!",queue:!0,endpoint:W,fn_index:C,time:new Date}),["sse_v2","sse_v2.1","sse_v3"].includes(z)&&(de(A,T.abort_controller),A.open=!1,a())}};J in x&&(x[J].forEach((e=>t(e))),delete x[J]),S[J]=t,k.add(J),A.open||await this.open_stream()}}))}}));let ee=!1;const te=[],ne=[],re={[Symbol.asyncIterator]:()=>re,next:f,throw:async e=>(u(e),f()),return:async()=>(a(),f()),cancel:Z,event_id:F};return re}catch(se){throw se}}oe=new WeakMap;class me{constructor(e,t={events:["data"]}){var n;o(this,"app_reference"),o(this,"options"),o(this,"deep_link",null),o(this,"config"),o(this,"api_prefix",""),o(this,"api_info"),o(this,"api_map",{}),o(this,"session_hash",Math.random().toString(36).substring(2)),o(this,"jwt",!1),o(this,"last_status",{}),o(this,"cookies",null),o(this,"stream_status",{open:!1}),o(this,"closed",!1),o(this,"pending_stream_messages",{}),o(this,"pending_diff_streams",{}),o(this,"event_callbacks",{}),o(this,"unclosed_events",new Set),o(this,"heartbeat_event",null),o(this,"abort_controller",null),o(this,"stream_instance",null),o(this,"current_payload"),o(this,"ws_map",{}),o(this,"view_api"),o(this,"upload_files"),o(this,"upload"),o(this,"handle_blob"),o(this,"post_data"),o(this,"submit"),o(this,"predict"),o(this,"open_stream"),o(this,"resolve_config"),o(this,"resolve_cookies"),this.app_reference=e,this.deep_link=(null==(n=t.query_params)?void 0:n.deep_link)||null,t.events||(t.events=["data"]),this.options=t,this.current_payload={},this.view_api=q.bind(this),this.upload_files=F.bind(this),this.handle_blob=Y.bind(this),this.post_data=X.bind(this),this.submit=ge.bind(this),this.predict=Q.bind(this),this.open_stream=he.bind(this),this.resolve_config=I.bind(this),this.resolve_cookies=$.bind(this),this.upload=W.bind(this),this.fetch=this.fetch.bind(this),this.handle_space_success=this.handle_space_success.bind(this),this.stream=this.stream.bind(this)}get_url_config(e=null){if(!this.config)throw new Error(b);null===e&&(e=window.location.href);const t=e=>e.replace(/^\/+|\/+$/g,"");let n,r=t(new URL(this.config.root).pathname),s=t(new URL(e).pathname);return n=s.startsWith(r)?t(s.substring(r.length)):"",this.get_page_config(n)}get_page_config(e){if(!this.config)throw new Error(b);let t=this.config;return e in t.page||(e=""),{...t,current_page:e,layout:t.page[e].layout,components:t.components.filter((n=>t.page[e].components.includes(n.id))),dependencies:this.config.dependencies.filter((n=>t.page[e].dependencies.includes(n.id)))}}fetch(e,t){const n=new Headers((null==t?void 0:t.headers)||{});if(this&&this.cookies&&n.append("Cookie",this.cookies),this&&this.options.headers)for(const e in this.options.headers)n.append(e,this.options.headers[e]);return fetch(e,{...t,headers:n})}stream(e){const t=new Headers;if(this&&this.cookies&&t.append("Cookie",this.cookies),this&&this.options.headers)for(const e in this.options.headers)t.append(e,this.options.headers[e]);return this&&this.options.hf_token&&t.append("Authorization",`Bearer ${this.options.hf_token}`),this.abort_controller=new AbortController,this.stream_instance=pe(e.toString(),{credentials:"include",headers:t,signal:this.abort_controller.signal}),this.stream_instance}async init(){var e;this.options.auth&&await this.resolve_cookies(),await this._resolve_config().then((({config:e})=>this._resolve_heartbeat(e))),this.api_info=await this.view_api(),this.api_map=function(e){let t={};return e.forEach((({api_name:e,id:n})=>{e&&(t[e]=n)})),t}((null==(e=this.config)?void 0:e.dependencies)||[])}async _resolve_heartbeat(e){if(e&&(this.config=e,this.api_prefix=e.api_prefix||"",this.config&&this.config.connect_heartbeat&&this.config.space_id&&this.options.hf_token&&(this.jwt=await k(this.config.space_id,this.options.hf_token,this.cookies))),e.space_id&&this.options.hf_token&&(this.jwt=await k(e.space_id,this.options.hf_token)),this.config&&this.config.connect_heartbeat){const e=new URL(`${this.config.root}${this.api_prefix}/heartbeat/${this.session_hash}`);this.jwt&&e.searchParams.set("__sign",this.jwt),this.heartbeat_event||(this.heartbeat_event=this.stream(e))}}static async connect(e,t={events:["data"]}){const n=new this(e,t);return t.session_hash&&(n.session_hash=t.session_hash),await n.init(),n}async reconnect(){const e=new URL(`${this.config.root}${this.api_prefix}/app_id`);let t;try{const n=await this.fetch(e);if(!n.ok)throw new Error;t=(await n.json()).app_id}catch{return"broken"}return t!==this.config.app_id?"changed":"connected"}close(){this.closed=!0,de(this.stream_status,this.abort_controller)}set_current_payload(e){this.current_payload=e}static async duplicate(e,t={events:["data"]}){return ie(e,t)}async _resolve_config(){const{http_protocol:e,host:t,space_id:n}=await L(this.app_reference,this.options.hf_token),{status_callback:r}=this.options;let s;n&&r&&await te(n,r);try{let n=`${e}//${t}`;if(s=await this.resolve_config(n),!s)throw new Error(b);return this.config_success(s)}catch(e){if(!n||!r)throw r&&r({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),Error(e);ee(n,C.test(n)?"space_name":"subdomain",this.handle_space_success)}}async config_success(e){if(this.config=e,this.api_prefix=e.api_prefix||"",this.config.auth_required)return this.prepare_return_obj();try{this.api_info=await this.view_api()}catch(e){}return this.prepare_return_obj()}async handle_space_success(e){var t;if(!this)throw new Error(b);const{status_callback:n}=this.options;if(n&&n(e),"running"===e.status)try{if(this.config=await this._resolve_config(),this.api_prefix=(null==(t=null==this?void 0:this.config)?void 0:t.api_prefix)||"",!this.config)throw new Error(b);return await this.config_success(this.config)}catch(e){throw n&&n({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),e}}async component_server(e,t,n){var r;if(!this.config)throw new Error(b);const s={},{hf_token:i}=this.options,{session_hash:o}=this;i&&(s.Authorization=`Bearer ${this.options.hf_token}`);let a,c,u=this.config.components.find((t=>t.id===e));if(a=null!=(r=null==u?void 0:u.props)&&r.root_url?u.props.root_url:this.config.root,"binary"in n){c=new FormData;for(const e in n.data)"binary"!==e&&c.append(e,n.data[e]);c.set("component_id",e.toString()),c.set("fn_name",t),c.set("session_hash",o)}else c=JSON.stringify({data:n,component_id:e,fn_name:t,session_hash:o}),s["Content-Type"]="application/json";i&&(s.Authorization=`Bearer ${i}`);try{const e=await this.fetch(`${a}${this.api_prefix}/component_server/`,{method:"POST",body:c,headers:s,credentials:"include"});if(!e.ok)throw new Error("Could not connect to component server: "+e.statusText);return await e.json()}catch(e){}}set_cookies(e){this.cookies=O(e).join("; ")}prepare_return_obj(){return{config:this.config,predict:this.predict,submit:this.submit,view_api:this.view_api,component_server:this.component_server}}async connect_ws(e){return new Promise(((t,n)=>{let r;try{r=new WebSocket(e)}catch{return void(this.ws_map[e]="failed")}this.ws_map[e]="pending",r.onopen=()=>{this.ws_map[e]=r,t()},r.onerror=n=>{this.close_ws(e),this.ws_map[e]="failed",t()},r.onclose=()=>{this.ws_map[e]="closed"},r.onmessage=e=>{}}))}async send_ws_message(e,t){if(e in this.ws_map){if("pending"===this.ws_map[e]||"closed"===this.ws_map[e]||"failed"===this.ws_map[e])return}else await this.connect_ws(e);const n=this.ws_map[e];n instanceof WebSocket?n.send(JSON.stringify(t)):this.post_data(e,t)}async close_ws(e){if(e in this.ws_map){const t=this.ws_map[e];t instanceof WebSocket&&(t.close(),delete this.ws_map[e])}}}},40024:(e,t,n)=>{"use strict";let r;n.d(t,{Ay:()=>y,Cf:()=>p});let s=null;function i(){return null!==s&&0!==s.byteLength||(s=new Uint8Array(r.memory.buffer)),s}let o=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();const a=2146435072;let c=0;function u(e,t){return function(e,t){return c+=t,c>=a&&(o=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),o.decode(),c=t),o.decode(i().subarray(e,e+t))}(e>>>=0,t)}let l=0;let h=null;function d(e,t){return e>>>=0,(null!==h&&0!==h.byteLength||(h=new Uint32Array(r.memory.buffer)),h).subarray(e/4,e/4+t)}const f="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>r.__wbg_imageprocessor_free(e>>>0,1)));class p{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,f.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_imageprocessor_free(e,0)}constructor(e,t,n){const s=function(e,t){const n=t(1*e.length,1)>>>0;return i().set(e,n/1),l=e.length,n}(e,r.__wbindgen_malloc),o=l,a=r.imageprocessor_new(s,o,t,n);return this.__wbg_ptr=a>>>0,f.register(this,this.__wbg_ptr,this),this}process(e,t){const n=r.imageprocessor_process(this.__wbg_ptr,e,t);var s,o,a=(s=n[0],o=n[1],s>>>=0,i().subarray(s/1,s/1+o)).slice();return r.__wbindgen_free(n[0],1*n[1],1),a}get_processed_dimensions(e){const t=r.imageprocessor_get_processed_dimensions(this.__wbg_ptr,e);var n=d(t[0],t[1]).slice();return r.__wbindgen_free(t[0],4*t[1],4),n}}Symbol.dispose&&(p.prototype[Symbol.dispose]=p.prototype.free);const g=new Set(["basic","cors","default"]);function m(){const e={wbg:{}};return e.wbg.__wbg_wbindgenthrow_451ec1a8469d7eb6=function(e,t){throw new Error(u(e,t))},e.wbg.__wbindgen_init_externref_table=function(){const e=r.__wbindgen_export_0,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e}function w(e,t){return r=e.exports,_.__wbindgen_wasm_module=t,h=null,s=null,r.__wbindgen_start(),r}async function _(e){if(void 0!==r)return r;void 0!==e&&Object.getPrototypeOf(e)===Object.prototype&&({module_or_path:e}=e),void 0===e&&(e=new URL(n(9051),n.b));const t=m();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:s,module:i}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if(!e.ok||!g.has(e.type)||"application/wasm"===e.headers.get("Content-Type"))throw t}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return w(s,i)}const y=_}}]);